!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("virtual-scroll"),require("bowser/src/bowser.js")):"function"==typeof define&&define.amd?define(["virtual-scroll","bowser/src/bowser.js"],t):t((e||self).virtualScroll,e.Bowser)}(this,function(e,t){function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/i(e),s=/*#__PURE__*/i(t),o=/*#__PURE__*/function(){function e(){}return e.isArray=function(e){return e&&"object"==typeof e&&Array.isArray(e)},e.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},e.isString=function(e){return e&&"string"==typeof e},e.mergeDeep=function(t,i){var n=Object.assign({},t);return e.isObject(t)&&e.isObject(i)&&Object.keys(i).forEach(function(s){var o,r;e.isObject(i[s])?s in t?n[s]=e.isObject(t[s])&&e.isObject(i[s])?e.mergeDeep(t[s],i[s]):i[s]:Object.assign(n,((o={})[s]=i[s],o)):Object.assign(n,((r={})[s]=i[s],r))}),n},e.toCamelCase=function(t){return e.isString(t)?t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\W+/g,""):t},e.toUpperCamelCase=function(t){return e.isString(t)?(t=e.toCamelCase(t)).charAt(0).toUpperCase()+t.slice(1):t},e.isInPage=function(e){return e!==document.body&&document.body.contains(e)},e.deepFreeze=function(t){return Object.keys(t).forEach(function(i){"object"==typeof t[i]&&e.deepFreeze(t[i])}),Object.freeze(t)},e.clamp=function(e,t,i){return Math.min(i,Math.max(t,e))},e}(),r=new(/*#__PURE__*/function(){function e(){this.events=[]}var t=e.prototype;return t.on=function(e,t,i,n){void 0===n&&(n=!1),(this.events[e]||(this.events[e]=[])).push({cb:t,context:i,once:n})},t.once=function(e,t,i){this.on(e,t,i,!0)},t.emit=function(e){var t=this,i=[].slice.call(arguments,1);this.events[e]&&this.events[e].forEach(function(n,s){n.cb.apply(n.context,i),n.once&&delete t.events[e][s]})},t.off=function(e,t){var i=this;this.events[e]&&this.events[e].forEach(function(n,s){n.cb===t&&delete i.events[e][s]})},e}()),l=new(/*#__PURE__*/function(){function e(){var e=this;this.eventsName=["siteInit","pageInit","siteLoad","pageLoad","siteIn","pageIn","reveal","pageFetch","pageOut","pageCreate","pageKill","siteReload"],this.events={},this.eventsName.forEach(function(t){e.events[t]={callbacks:[],done:0}}),this.cycles={load:{events:["siteInit","pageInit",["siteLoad","pageLoad"],"siteIn","pageIn","reveal"]},reload:{events:["pageOut","siteReload"]},transition:{events:[["pageFetch","pageOut"],"pageCreate","pageKill","pageInit","pageLoad","pageIn","reveal"]},refresh:{events:["pageKill","pageInit","pageLoad","pageIn","reveal"]}},this.debug=!1}var t=e.prototype;return t.cycle=function(e){if(this.cycles[e]){for(var t in this.cycles[e].current=0,this.debug&&console.log("Start cycle: "+e),this.events)this.events[t].done=0;this.proceed(e)}},t.proceed=function(e){var t=this,i=this.cycles[e].events,n=this.cycles[e].current;if(n<i.length){var s=i[n];Array.isArray(s)?s.forEach(function(i){t.do(e,i)}):this.do(e,s)}else this.debug&&console.log(e+" cycle ended")},t.next=function(e){var t=this,i=this.cycles[e].events,n=this.cycles[e].current;if(n<i.length){var s=i[n],o=!0,r=[];(r="string"==typeof s?Array(s):s).length>1&&r.forEach(function(e){(0===t.events[e].done||t.events[e].done<t.events[e].callbacks.length)&&(o=!1)}),o&&(this.cycles[e].current++,requestAnimationFrame(this.proceed.bind(this,e)))}},t.add=function(e,t,i,n){void 0===i&&(i=10),void 0===n&&(n=null),this.events[e]&&this.events[e].callbacks.push({callback:t,position:i,cycle:n})},t.remove=function(e,t,i){void 0===i&&(i=null);var n=this;this.events[e]&&this.events[e].callbacks.forEach(function(s,o){s.callback===t&&s.cycle===i&&delete n.events[e].callbacks[o]})},t.do=function(e,t){var i=this;this.events[t].done=0,this.events[t].callbacks.length>0?(this.debug&&console.log("Do event: "+t+" ("+e+" cycle)"),r.emit(o.toCamelCase("before-"+t)),this.events[t].callbacks.sort(function(e,t){return e.position-t.position}).forEach(function(n){null===n.cycle||n.cycle===e?n.callback(function(){return i.done(e,t)}):i.done(e,t)})):this.done(e,t)},t.done=function(e,t){this.events[t].done++,this.debug&&console.log("Done event: "+t+" "+this.events[t].done+"/"+this.events[t].callbacks.length+" ("+e+" cycle)"),r.emit(o.toCamelCase("after-"+t)),this.events[t].done>=this.events[t].callbacks.length&&this.next(e,t)},t.enableDebug=function(e){void 0===e&&(e=!0),this.debug=e},e}()),a=new(/*#__PURE__*/function(){function e(){this.settings=o.deepFreeze({cursor:{inertia:1,trailLength:10},intersection:{threshold:.3},lottie:{renderer:"svg",subFrame:!0},mouse:{inertia:.1},parallax:{inertia:.1},preloader:{duration:0},reveal:{stagger:.1,threshold:.15},scroll:{inertia:.1},smooth:{inertia:.1},ticker:{external:!1},transition:{reload:!1},credits:{show:!0}}),this.timeouts={resizeThrottle:null,scrollEnd:null},this.windowWidth=1,this.windowHeight=1,this.clientWidth=1,window.scrollTop=window.scrollY,window.unifiedScrollTop=window.scrollTop,window.maxScrollTop=1,window.scrollProgress=0,this.previousScrollTop=window.scrollY,this.isScrolling=!1,window.mouseX=-1,window.mouseY=-1,window.mouseLastScrollTop=0,l.add("siteInit",this.siteInit.bind(this),999),this.bindEvents()}var t=e.prototype;return t.setSettings=function(e){this.settings=o.deepFreeze(o.mergeDeep(this.settings,e))},t.siteInit=function(e){this.showCredits(),this.setCSSProperties(),this.scrollHandler(),e()},t.bindEvents=function(){window.addEventListener("mousemove",this.mouseHandler.bind(this),{passive:!0}),window.addEventListener("resize",this.resizeThrottle.bind(this)),window.addEventListener("scroll",this.scrollHandler.bind(this),{passive:!0})},t.mouseHandler=function(e){var t=e.pageY-window.scrollTop;window.mouseX=e.pageX,window.mouseY=t,r.emit("mouseMove",e)},t.resizeThrottle=function(){clearTimeout(this.timeouts.resizeThrottle),this.timeouts.resizeThrottle=setTimeout(this.resizeHandler.bind(this),200)},t.resizeHandler=function(){this.setCSSProperties(),r.emit("resize")},t.setCSSProperties=function(){var e=this,t=window.innerWidth;this.windowWidth!==t&&(this.windowWidth=t,this.clientWidth=document.body.clientWidth);var i=window.innerHeight;this.windowHeight!==i&&(this.windowHeight=i,this.clientHeight=document.body.clientHeight),requestAnimationFrame(function(){document.documentElement.style.setProperty("--vw",.01*e.windowWidth+"px"),document.documentElement.style.setProperty("--cw",.01*e.clientWidth+"px"),document.documentElement.style.setProperty("--vh",.01*e.windowHeight+"px"),document.documentElement.style.setProperty("--ch",.01*e.clientHeight+"px")})},t.scrollHandler=function(){window.scrollTop=window.scrollY,window.unifiedScrollTop=window.scrollTop,this.isScrolling||this.scrollStart(),clearTimeout(this.timeouts.scrollEnd),this.timeouts.scrollEnd=setTimeout(this.scrollEnd.bind(this),200),this.previousScrollTop=window.scrollTop,window.scrollProgress=window.scrollTop/window.maxScrollTop,r.emit("scroll")},t.scrollStart=function(){this.isScrolling=!0,document.documentElement.classList.add("is-scrolling"),r.emit("scrollStart")},t.scrollEnd=function(){this.isScrolling=!1,document.documentElement.classList.remove("is-scrolling"),r.emit("scrollEnd")},t.showCredits=function(){if(this.settings.credits.show){var e="background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; ";console.log("%c powered by %cluge%c / 0.6.17-beta.2 %c > https://luge.cool ",e,"background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; font-weight: bold; ",e,"color: black; font: 400 1em monospace; padding: 0.5em 0; ")}},e}()),c=/*#__PURE__*/function(){function e(e){this.pluginSlug=e,l.add("siteInit",this.beforeInit.bind(this),5)}var t=e.prototype;return t.beforeInit=function(e){this.isDisabled=this.disabled(),this.isDisabled?document.documentElement.classList.add("lg-"+this.pluginSlug+"-disabled"):this.init(),e()},t.init=function(){this.setAttributes()},t.disabled=function(){return!!(a.settings[this.pluginSlug]||{}).disabled},t.setAttributes=function(){this.pluginAttributes={}},t.getAttributes=function(e){var t=this.pluginAttributes,i={};for(var n in t){var s=t[n],r="lg-"+this.pluginSlug;"root"!==n&&(r+="-"+n),r=o.toCamelCase(r);var l,a=e.dataset[r],c=void 0,u=void 0;"object"==typeof s?(c=s[0],u=s[1]):c=s,l=void 0===a&&void 0!==u?c(u):(void 0!==a||c!==Boolean)&&(void 0!==a?c===Boolean?"false"!==a:c(a):void 0),i[n]=l}return(e.luge||(e.luge={}))&&(e.luge[this.pluginSlug]=i),i},e}();function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var p=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"preloader")||this).luge=t,i.intro=!1,i.playerIn=!1,i.startTime=Date.now(),i.doneLoad=null,t.preloader={add:i.add.bind(h(i))},i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.el=document.querySelector("[data-lg-preloader]"),this.el&&(this.attributes=this.getAttributes(this.el),this.el.classList.add("lg-preloader","lg-preloader--"+this.attributes.root),this.initLottie(),this.luge.lifecycle.add("siteIn",this.siteIn.bind(this))),this.luge.lifecycle.add("pageLoad",this.pageLoad.bind(this))},i.setAttributes=function(){this.pluginAttributes={root:[String,""],duration:[Number,this.luge._settings.preloader.duration],in:String,reverse:Boolean}},i.pageLoad=function(e){this.attributes&&"lottie"===this.attributes.root&&"object"==typeof lottie?this.doneLoad=e:e()},i.siteIn=function(e){var t=(Date.now()-this.startTime)/1e3,i=this.attributes.duration-t;if(i<=0){var n=this.clear.bind(this,e);if(this.playerIn)this.playerIn.play(),this.playerIn.addEventListener("complete",n,{once:!0});else if("function"==typeof this.intro)this.intro(e,this.remove.bind(this));else{var s=window.getComputedStyle(this.el).getPropertyValue("transition-duration");""!==s&&"0s"!==s?(this.el.addEventListener("transitionend",n,{once:!0}),this.el.classList.add("is-hidden")):n()}}else setTimeout(this.siteIn.bind(this,e),1e3*i)},i.clear=function(e){this.playerIn&&this.playerIn.destroy(),this.remove(),e()},i.remove=function(e){this.el.parentNode.removeChild(this.el),this.el=null},i.add=function(e){this.intro=e},i.initLottie=function(){var e=this;if("lottie"===this.attributes.root&&"object"==typeof lottie){var t=this.attributes.in,i=!1;t&&(i=lottie.loadAnimation({container:this.el,renderer:"svg",loop:!1,autoplay:!1,path:t,rendererSettings:{preserveAspectRatio:"none"}}),this.attributes.reverse&&i.setDirection(-1)),i.addEventListener("DOMLoaded",function(){e.attributes.reverse&&i.goToAndStop(i.totalFrames-1,!0),e.el.setAttribute("style",""),"function"==typeof e.doneLoad&&(e.doneLoad(),e.doneLoad=null)},{once:!0}),this.playerIn=i}},t}(c),m=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"reveal")||this).luge=t,i.elements=[],i.toRevealIn=[],i.toRevealOut=[],i.reveals={in:{},out:{}},i.canReveal=!1,i.onScrollProgress=i.onScrollProgress.bind(h(i)),t.reveal={add:i.add.bind(h(i))},i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this),11),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.lifecycle.add("reveal",this.reveal.bind(this)),this.bindEvents()},i.setAttributes=function(){e.prototype.setAttributes.call(this),this.pluginAttributes={root:String,stagger:String,manual:[Boolean,!1],multiple:Boolean,delay:[Number,0]}},i.getAttributes=function(t){var i=e.prototype.getAttributes.call(this,t);return void 0!==i.stagger&&""===i.stagger?i.stagger=this.luge._settings.reveal.stagger:void 0===i.stagger&&(i.stagger=!1),i},i.bindEvents=function(){this.luge.emitter.on("resize",this.resizeHandler,this),this.luge.emitter.on("scroll",this.scrollHandler,this),this.luge.emitter.on("update",this.updateHandler,this)},i.pageInit=function(e){this.addElements(),e()},i.addElements=function(){var e=document.querySelectorAll("[data-lg-reveal]"),t=this;e.forEach(function(e){t.addElement(e)})},i.addElement=function(e){var t=this;if(!this.elements.includes(e)){var i=this.getAttributes(e);if(!i.stagger&&null!==e.closest("[data-lg-reveal-stagger]"))return;var n=i.root;e.luge.reveal.name=o.toCamelCase(n),i.manual?(e.luge.reveal.in=function(){t.revealCallback(e,e.luge.reveal.name,"in"),t.setRevealClasses(e,"is-in")},e.luge.reveal.out=function(){t.revealCallback(e,e.luge.reveal.name,"out"),t.setRevealClasses(e,"is-out")}):(this.luge.scrollobserver.add(e),e.addEventListener("scrollprogress",this.onScrollProgress)),e.luge.reveal.delay=1e3*i.delay,i.stagger?Array.from(e.children).forEach(function(e){var i=e.dataset.lgReveal;e.style.transition="none",t.luge.ticker.nextTick(function(){e.style.transition=""}),e.classList.add("lg-reveal","is-out"),(i||n)&&e.classList.add("lg-reveal--"+(null!=i?i:n)),e.dataset.lgRevealChild="",(e.luge||(e.luge={}))&&(e.luge.reveal={isRevealed:!1})}):(e.style.transition="none",this.luge.ticker.nextTick(function(){e.style.transition=""}),e.classList.add("lg-reveal","is-out"),n&&e.classList.add("lg-reveal--"+n)),this.elements.push(e)}},i.removeElement=function(e){e.removeEventListener("scrollprogress",this.onScrollProgress),this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)},i.pageKill=function(e){var t=this;this.canReveal=!1,this.elements.forEach(function(e){t.removeElement(e)}),e()},i.onScrollProgress=function(e){var t=e.target,i=this.luge._settings.reveal.threshold;t.scrollProgress>=i&&t.scrollProgress<=1-i&&!t.luge.reveal.isRevealed?(this.toRevealOut.includes(t)&&this.toRevealOut.splice(this.toRevealOut.indexOf(t),1),this.toRevealIn.includes(t)||this.toRevealIn.push(t)):(t.scrollProgress<i||t.scrollProgress>1-i&&t.scrollEnd<Math.round(window.unifiedScrollTop))&&t.luge.reveal.isRevealed&&(this.toRevealIn.includes(t)&&this.toRevealIn.splice(this.toRevealIn.indexOf(t),1),this.toRevealOut.includes(t)||this.toRevealOut.push(t))},i.reveal=function(e){var t=this;this.canReveal=!0,this.elements.forEach(function(e){e.scrollStart<0&&(t.toRevealIn.includes(e)||t.toRevealIn.push(e))}),this.revealElements(),e()},i.resizeHandler=function(){this.revealElements()},i.scrollHandler=function(){this.revealElements()},i.updateHandler=function(){this.addElements(),this.revealElements()},i.revealElements=function(){var e=this,t=this;if(this.canReveal){var i=0;this.toRevealIn.forEach(function(n){var s=o.toCamelCase(n.luge.reveal.root);i+=n.luge.reveal.delay,setTimeout(function(){t.revealCallback(n,s,"in"),n.luge.reveal.stagger?Array.from(n.children).forEach(function(e,i){var r=o.toCamelCase(e.dataset.lgReveal);setTimeout(function(){(r||s)&&t.revealCallback(e,null!=r?r:s,"in"),t.setRevealClasses(e,"is-in")},i*n.luge.reveal.stagger*1e3)}):t.setRevealClasses(n,"is-in")},i),i+=1e3*e.luge._settings.reveal.stagger,n.luge.reveal.multiple||t.removeElement(n)}),this.toRevealOut.forEach(function(e){var i,n=o.toCamelCase(e.luge.reveal.root);void 0!==e.luge.reveal.isRevealed&&t.revealCallback(e,n,"out"),i=e.scrollProgress>.5?"is-out is-out-top":"is-out is-out-bottom",e.luge.reveal.stagger?Array.from(e.children).forEach(function(s,r){var l=o.toCamelCase(s.dataset.lgReveal);setTimeout(function(){(l||n)&&t.revealCallback(s,null!=l?l:n,"out"),t.setRevealClasses(s,i)},r*e.luge.reveal.stagger*1e3)}):t.setRevealClasses(e,i)}),this.toRevealIn=[],this.toRevealOut=[]}},i.setRevealClasses=function(e,t){t=t.split(" "),e.classList.remove("is-in","is-out","is-out-top","is-out-bottom"),t.forEach(function(t){e.classList.add(t)})},i.revealCallback=function(e,t,i){e.dispatchEvent(new CustomEvent("reveal"+i)),e.luge.reveal.isRevealed="in"===i,"function"==typeof this.reveals[i][t]?this.reveals[i][t](e):"function"==typeof e["onreveal"+i]&&e["onreveal"+i]()},i.add=function(e,t,i){this.reveals[e]&&(t=o.toCamelCase(t),this.reveals[e][t]?console.log("Reveal animation named "+t+" already exists."):this.reveals[e][t]=i)},t}(c),f=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"transition")||this).luge=t,i.url=window.location.href,i.pathname=window.location.pathname,i.pageFetched=null,i.currentPage=null,i.reload=i.luge._settings.transition.reload,i.prevScrollTop=0,i.newScrollTop=0,i.transitions={in:{},out:{}},i.listeners={linkHandler:i.linkHandler.bind(h(i))},t.transition={add:i.add.bind(h(i))},i}u(t,e);var i=t.prototype;return i.init=function(){this.currentPage=document.querySelector("[data-lg-page]"),this.currentPage&&(this.reload=!!this.currentPage.hasAttribute("data-lg-reload")||this.luge._settings.transition.reload),this.initLoader(),this.reload||window.addEventListener("popstate",this.historyStateChanged.bind(this)),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageFetch",this.pageFetch.bind(this)),this.luge.lifecycle.add("pageOut",this.pageOut.bind(this)),this.luge.lifecycle.add("pageIn",this.pageIn.bind(this),10,"transition"),this.luge.lifecycle.add("pageCreate",this.pageCreate.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this),999,"transition")},i.bindLinksEvent=function(){var e=this;document.querySelector("[data-lg-page]")&&document.querySelectorAll("a").forEach(function(t){t.addEventListener("click",e.listeners.linkHandler)})},i.unbindLinksEvent=function(){var e=this;document.querySelectorAll("a").forEach(function(t){t.removeEventListener("click",e.listeners.linkHandler)})},i.linkHandler=function(e){var t=e.currentTarget,i=t.getAttribute("href");if(i&&0!==i.indexOf("#")&&0!==i.indexOf("tel")&&0!==i.indexOf("mailto")&&!t.closest("#wpadminbar")&&"disabled"!==t.getAttribute("data-lg-transition")&&"_blank"!==t.getAttribute("target")&&(0===i.indexOf(window.location.origin)||0===i.indexOf("/")||-1===i.indexOf("/"))){if(e.preventDefault(),window.location.href===i)return;this.navigateTo(i),history.pushState(null,null,this.url)}},i.navigateTo=function(e){if(this.url=e,this.reload){var t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t),this.luge.lifecycle.add("siteReload",function(t){window.location=e}),this.luge.lifecycle._cycle("reload")}else this.luge.lifecycle._cycle("transition")},i.pageInit=function(e){this.bindLinksEvent(),e()},i.initLoader=function(){var e=document.querySelector("[data-lg-loader]");if(e&&(e.style.transition="none",e.classList.add("lg-loader","lg-loader--"+e.getAttribute("data-lg-loader")),this.luge.ticker.nextTick(function(){e.style.transition=""})),e&&"lottie"===e.getAttribute("data-lg-loader")&&"object"==typeof lottie){var t=e.getAttribute("data-lg-loader-out"),i=!1,n=e.getAttribute("data-lg-loader-in"),s=!1;t&&(i=lottie.loadAnimation({container:e,renderer:"svg",loop:!1,autoplay:!1,path:t,rendererSettings:{preserveAspectRatio:"none"}})),"reverse"===n&&(n=t),n&&(s=lottie.loadAnimation({container:e,renderer:"svg",loop:!1,autoplay:!1,path:n,rendererSettings:{preserveAspectRatio:"none"}}),n===t&&s.setDirection(-1)),e.playerOut=i,e.playerIn=s}},i.pageFetch=function(e){var t=this;this.url&&fetch(this.url,{credentials:"include"}).then(function(e){return e.text()}).then(function(i){t.pageFetched=i,e()})},i.pageCreate=function(e){var t=(new DOMParser).parseFromString(this.pageFetched,"text/html"),i=t.querySelector("[data-lg-page]");if(i){this.currentPage.insertAdjacentElement("beforebegin",i),i.style.opacity=0,this.currentPage.style.opacity=0,this.currentPage.style.position="absolute",this.currentPage.style.top=0,this.currentPage.style.left="-999em",this.currentPage.style.width="100%",document.querySelector("body").className=t.querySelector("body").className,document.querySelectorAll('meta[name="description"], meta[name="keywords"], meta[property="og:image"]').forEach(function(e){e.parentNode.removeChild(e)}),t.querySelectorAll('meta[name="description"], meta[name="keywords"], meta[property="og:image"]').forEach(function(e){document.querySelector("head title").insertAdjacentElement("afterend",e)});var n=document.querySelector("head title"),s=t.querySelector("head title");n&&s&&(n.innerText=s.innerText),window.scroll({top:this.newScrollTop,left:0,behavior:"instant"}),window.scrollTop=0,window.smoothScrollTop=0,window.unifiedScrollTop=0,this.prevScrollTop=0,this.newScrollTop=0,this.luge.emitter.emit("pageTransition",t),e()}else window.location=this.url},i.pageKill=function(e){var t=this.currentPage;t.parentNode.removeChild(t),this.currentPage=document.querySelector("[data-lg-page]"),this.reload=!!this.currentPage.hasAttribute("data-lg-reload")||this.luge._settings.transition.reload,e()},i.pageOut=function(e){var t=this,i=document.querySelector("[data-lg-page]");if(i){var n=o.toCamelCase(i.getAttribute("data-lg-page")),s=!1;if("function"==typeof this.transitions.out[n]?s=this.transitions.out[n]:"function"==typeof i.onpageout?s=i.onpageout:"function"==typeof this.transitions.out.default&&(s=this.transitions.out.default),s)s(i,e);else{var r=document.querySelector("[data-lg-loader]");if(r){if(r.playerOut)r.playerOut.stop(),r.playerOut.renderer.svgElement.style.opacity=1,r.playerOut.play(),r.playerOut.addEventListener("complete",function(){t.reload||(r.playerOut.renderer.svgElement.style.opacity=""),e()},{once:!0});else{var l=window.getComputedStyle(document.querySelector("[data-lg-loader]")).getPropertyValue("transition-duration");""!==l&&"0s"!==l?r.addEventListener("transitionend",e,{once:!0}):e()}r.classList.add("is-visible")}else e()}}else e();this.unbindLinksEvent.bind(this)},i.pageIn=function(e){var t=document.querySelector("[data-lg-page]");if(t){var i=o.toCamelCase(t.getAttribute("data-lg-page")),n=!1;if(t.style.opacity="","function"==typeof this.transitions.in[i]?n=this.transitions.in[i]:"function"==typeof t.onpagein?n=t.onpagein:"function"==typeof this.transitions.in.default&&(n=this.transitions.in.default),n)n(t,e);else{var s=document.querySelector("[data-lg-loader]");if(s&&s.classList.contains("is-visible"))if(s.playerIn)s.playerIn.stop(),s.playerIn.renderer.svgElement.style.opacity=1,"reverse"===s.getAttribute("data-lg-loader-in")?s.playerIn.goToAndPlay(s.playerIn.totalFrames,!0):s.playerIn.play(),s.playerIn.addEventListener("complete",function(){s.playerIn.renderer.svgElement.style.opacity="",s.classList.remove("is-visible"),e()},{once:!0});else{var r=window.getComputedStyle(document.querySelector("[data-lg-loader]")).getPropertyValue("transition-duration");""!==r&&"0s"!==r?s.addEventListener("transitionend",e,{once:!0}):e(),s.classList.remove("is-visible")}else e()}}else e()},i.historyStateChanged=function(){var e=this;(0===this.url.indexOf(window.location.origin)?new URL(this.url):new URL(window.location.origin+this.url)).pathname!==window.location.pathname&&(this.prevScrollTop=window.scrollY,this.luge.ticker.nextTick(function(){e.newScrollTop=window.scrollY,window.scroll({top:e.prevScrollTop,left:0,behavior:"instant"})}),this.navigateTo(window.location.href))},i.add=function(e,t,i){void 0===t&&(t="default"),this.transitions[e]&&(t=o.toCamelCase(t),this.transitions[e][t]?console.log("Transition animation for "+t+" page already exists."):this.transitions[e][t]=i)},t}(c),v=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"scroll")||this).luge=t,i.elements=[],i.allowedProperties=["opacity","background-x","background-y"],i.transformProperties=["x","y","z","translate3d","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ"],i.presets={"background-x":{"background-x":["0%","100%"]},"background-y":{"background-y":["0%","100%"]}},i.onScrollProgress=i.onScrollProgress.bind(h(i)),i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()},i.setAttributes=function(){this.pluginAttributes={root:String,yoyo:Boolean,inertia:[String,this.luge._settings.scroll.inertia],animate:String}},i.getAttributes=function(t){var i=e.prototype.getAttributes.call(this,t);if(i.inertia){var n=i.inertia.match(/\{\s*([0-9]*[.]?[0-9]*)\s*,\s*([0-9]*[.]?[0-9]*)\s*\}/m);i.inertia=n?Number(n[1])+(Number(n[2])-Number(n[1]))*Math.random():Number(i.inertia),i.inertia=Math.max(Math.min(i.inertia,.99),0)}return i},i.bindEvents=function(){this.luge.emitter.on("update",this.updateHandler,this)},i.updateHandler=function(){this.addElements()},i.pageInit=function(e){this.addElements(),e()},i.addElements=function(){var e=document.querySelectorAll("[data-lg-scroll]"),t=this;e.forEach(function(e){t.addElement(e)})},i.addElement=function(e){if(!this.elements.includes(e)){var t=this.getAttributes(e);this.luge.scrollobserver.add(e),e.addEventListener("scrollprogress",this.onScrollProgress);var i={};i.smoothProgress=void 0!==e.scrollProgress?e.scrollProgress:0,i.yoyo=t.yoyo,i.inertia=t.inertia;var n=!1;if(void 0!==t.animate?n=JSON.parse(t.animate.replace(/'/g,'"')):this.presets[t.root]&&(n=this.presets[t.root]),n){var s={};for(var o in n)if(this.allowedProperties.includes(o)||this.transformProperties.includes(o)){var r=n[o],l=String(r[0]),a=String(r[1]),c=l.match(/\d+([a-zA-Z%]+)/m);c?c=c[1]:0===o.indexOf("rotate")&&(c="deg"),l=Number(l.replace(c,"")),a=Number(a.replace(c,""));var u=o;"background-x"===o?u="background-position-x":"background-y"===o&&(u="background-position-y"),s[u]={from:l,to:a,current:l,unit:c}}i.properties=s}e.luge.scroll.animation=i,this.elements.push(e)}},i.removeElement=function(e){e.removeEventListener("scrollprogress",this.onScrollProgress),this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)},i.pageKill=function(e){var t=this;this.elements.forEach(function(e){t.removeElement(e)}),e()},i.onScrollProgress=function(e){e.target.luge.scroll.animation.atDest=!1},i.tick=function(){for(var e,t=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.elements);!(e=t()).done;){var i=e.value;if(!i.luge.scroll.animation.atDest){var n=i.scrollProgress;if(i.luge.scroll.yoyo&&(n=1-Math.abs(1-2*n)),i.luge.scroll.animation.smoothProgress+=(n-i.luge.scroll.animation.smoothProgress)*(1-i.luge.scroll.inertia),i.luge.scroll.animation.properties){for(var s={},o=0,r=Object.entries(i.luge.scroll.animation.properties);o<r.length;o++){var l=r[o],a=l[0],c=l[1];c.current=c.from+(c.to-c.from)*i.luge.scroll.animation.smoothProgress,["x","y","z"].includes(a)?(s.translate3d||(s.translate3d={}))&&(s.translate3d[a]=c.current+c.unit):s[a]=c.current+c.unit}for(var u=[],d=0,h=Object.entries(s);d<h.length;d++){var p=h[d],m=p[0],f=p[1];if(this.transformProperties.includes(m)){if("object"==typeof f)if("translate3d"===m){var v=Object.assign({x:0,y:0,z:0},f);f.string=v.x+", "+v.y+", "+v.z}else f.string=Object.values(f).join(", ");u.push(m+"("+("object"!=typeof f?f:f.string)+")")}}var y={},b=[];u.length>0&&(y.transform=u.join(" "),b.push("transform"));for(var w=0,E=Object.entries(s);w<E.length;w++){var S=E[w],P=S[0],T=S[1];this.transformProperties.includes(P)||(y[P]=T,b.push(P))}for(var x=0,k=Object.entries(y);x<k.length;x++){var A=k[x];i.style.setProperty(A[0],A[1])}i.style.setProperty("will-change",b.join(", "))}else{var L=Math.round(1e3*(i.scrollProgress-i.luge.scroll.animation.smoothProgress))/1e3;i.style.setProperty("--progress",i.luge.scroll.animation.smoothProgress),i.style.setProperty("--abs-diff",Math.abs(L)),i.style.setProperty("--diff",L)}Math.abs(n-i.luge.scroll.animation.smoothProgress)<1e-4&&(i.luge.scroll.animation.atDest=!0)}}},t}(c),y=/*#__PURE__*/function(e){function t(){var t;return t=e.call(this,"smooth")||this,window.hasSmoothScroll=!1,window.isSmoothScrolling=!1,t}u(t,e);var i=t.prototype;return i.init=function(){if(e.prototype.init.call(this),this.element=document.documentElement,this.hasSmooth=this.element.hasAttribute("data-lg-smooth"),this.hasSmooth){var t,i;window.hasSmoothScroll=!0,this.smoothScroll=window.scrollTop,this.targetScroll=window.scrollTop,this.targetSmoothScroll=window.scrollTop,document.documentElement.classList.add("has-smooth-scroll");var s=(null==(t=navigator)||null==(t=t.userAgentData)?void 0:t.platform)||(null==(i=navigator)?void 0:i.platform)||"unknown";this.virtualScroll=new n.default({el:this.element,firefoxMultiplier:50,mouseMultiplier:s.indexOf("Win")>-1?1:.4,useKeyboard:!1,useTouch:!1,passive:!0}),this.virtualScroll.on(this.onVirtualScroll.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()}},i.bindEvents=function(){this.luge.emitter.on("scroll",this.onScroll,this)},i.onScroll=function(){window.isSmoothScrolling||(this.targetScroll=window.scrollTop,this.targetSmoothScroll=window.scrollTop,this.smoothScroll=window.scrollTop)},i.onVirtualScroll=function(e){var t=e.deltaY,i=e.originalEvent,n=!!i.composedPath().find(function(e){return null==e||null==e.hasAttribute?void 0:e.hasAttribute("data-lg-smooth-prevent")});i.ctrlKey||n||(this.targetScroll-=t,this.targetScroll=o.clamp(0,this.targetScroll,window.maxScrollTop),window.isSmoothScrolling=!0)},i.tick=function(){var e=this.luge._settings.smooth;this.targetSmoothScroll+=(this.targetScroll-this.targetSmoothScroll)*e.inertia,this.smoothScroll+=(this.targetSmoothScroll-this.smoothScroll)*e.inertia;var t=Math.abs(this.targetSmoothScroll-this.smoothScroll);window.isSmoothScrolling&&t>.5?window.scrollTo({top:this.smoothScroll,behavior:"auto"}):window.isSmoothScrolling&&(this.smoothScroll=this.targetSmoothScroll,window.isSmoothScrolling=!1)},t}(c),b=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"cursor")||this).luge=t,i.cursors=[],i.pointers=[],i.trails=[],i.hoverTags=["a","button","input"],i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()},i.setAttributes=function(){this.pluginAttributes={root:String,inertia:[Number,this.luge._settings.cursor.inertia],length:[Number,this.luge._settings.cursor.trailLength],hide:Boolean}},i.bindEvents=function(){document.documentElement.addEventListener("mouseenter",this.hoverHandler.bind(this),{capture:!0,passive:!0}),document.documentElement.addEventListener("mouseleave",this.hoverHandler.bind(this),{capture:!0,passive:!0})},i.pageInit=function(e){var t=this,i=this,n=document.querySelectorAll("[data-lg-cursor]:not(.lg-cursor)");n.length>0&&n.forEach(function(e){var n=t.getAttributes(e);n.hide&&document.documentElement.classList.add("lg-cursor-hide"),e.querySelectorAll("[data-lg-cursor-pointer").forEach(function(e){e.luge={cursor:{position:{x:0,y:0},smoothPosition:{x:0,y:0}}},e.luge.cursor.inertia=e.hasAttribute("data-lg-cursor-inertia")?Number(e.getAttribute("data-lg-cursor-inertia")):n.inertia,e.classList.add("lg-cursor-pointer"),i.pointers.push(e)}),e.querySelectorAll("[data-lg-cursor-trail").forEach(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");t.appendChild(s),e.appendChild(t),e.luge={cursor:{position:{x:0,y:0},smoothPosition:{x:0,y:0},points:[],path:s}},e.luge.cursor.inertia=e.hasAttribute("data-lg-cursor-inertia")?Number(e.getAttribute("data-lg-cursor-inertia")):n.inertia,e.luge.cursor.length=e.hasAttribute("data-lg-cursor-length")?Number(e.getAttribute("data-lg-cursor-length")):n.length,e.classList.add("lg-cursor-trail"),i.trails.push(e)}),e.classList.add("lg-cursor"),t.cursors.push(e)}),e()},i.hoverHandler=function(e){var t=e.target,i=t.tagName.toLowerCase(),n=t.getAttribute("data-lg-hover"),s=null;(this.hoverTags.includes(i)||null!==n)&&(s="mouseenter"===e.type),null!==s&&this.cursors.forEach(function(e){e.classList.toggle("lg-cursor--hover",s),null!==n&&""!==n&&e.classList.toggle("lg-cursor--hover--"+n,s)})},i.tick=function(e){this.pointers.forEach(function(e){var t=e.luge.cursor.position,i=e.luge.cursor.smoothPosition;t.x=window.mouseX,t.y=window.mouseY,i.x+=(t.x-i.x)*e.luge.cursor.inertia,i.y+=(t.y-i.y)*e.luge.cursor.inertia,e.style.transform="translate3d("+i.x+"px, "+i.y+"px, 0)"}),this.trails.forEach(function(e){var t=e.luge.cursor.position,i=e.luge.cursor.smoothPosition;if(t.x=window.mouseX,t.y=window.mouseY,-1!==window.mouseX){i.x+=(t.x-i.x)*e.luge.cursor.inertia,i.y+=(t.y-i.y)*e.luge.cursor.inertia;var n=e.luge.cursor.points;n.push({x:i.x,y:i.y}),n.length>e.luge.cursor.length&&n.shift();var s,o=0,r=function(e,t,i,n){var s,r,l,a,c=(l=(r=i||e).x-(s=t||e).x,a=r.y-s.y,{length:Math.sqrt(Math.pow(l,2)+Math.pow(a,2)),angle:Math.atan2(a,l)});o+=c.length;var u=c.angle+(n?Math.PI:0),d=.2*c.length;return[e.x+Math.cos(u)*d,e.y+Math.sin(u)*d]};s=function(e,t){return""+e.reduce(function(e,t,i,n){return 0===i?"M "+t.x+","+t.y:e+" "+function(e,t,i){var n=r(i[t-1],i[t-2],e),s=n[0],o=n[1],l=r(e,i[t-1],i[t+1],!0);return"C "+s+","+o+" "+l[0]+","+l[1]+" "+e.x+","+e.y}(t,i,n)},"")}(n),e.luge.cursor.path.setAttribute("d",s),e.style.setProperty("--length",o)}})},t}(c),w=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"intersection")||this).luge=t,i.listeners={onViewportIntersect:i.onViewportIntersect.bind(h(i))},i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.elements=[],this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.bindEvents()},i.setAttributes=function(){this.pluginAttributes={root:String,class:String}},i.bindEvents=function(){this.luge.emitter.on("update",this.updateHandler,this)},i.updateHandler=function(){this.addElements()},i.pageInit=function(e){this.addElements(),e()},i.addElements=function(){var e=document.querySelectorAll("[data-lg-intersection]"),t=this;e.forEach(function(e){t.addElement(e)})},i.addElement=function(e){this.elements.includes(e)||(this.getAttributes(e),this.luge.viewportobserver.add(e),e.addEventListener("viewportintersect",this.listeners.onViewportIntersect),this.elements.push(e))},i.removeElement=function(e){this.elements.includes(e)&&(this.luge.viewportobserver.remove(e),e.removeEventListener("viewportintersect",this.listeners.onViewportIntersect),this.elements.splice(this.elements.indexOf(e),1))},i.pageKill=function(e){var t=this;this.elements.forEach(function(e){t.removeElement(e)}),e()},i.onViewportIntersect=function(e){var t,i,n=e.target,s=n.luge.viewport.position,o=!!n.luge.intersection.class&&n.luge.intersection.class.split(" ");n.classList.remove("is-in","is-out","is-out-top","is-out-bottom"),"in"===s?(n.classList.add("is-in"),o&&(t=document.documentElement.classList).add.apply(t,o)):(o&&(i=document.documentElement.classList).remove.apply(i,o),n.classList.add("is-out","above"===s?"is-out-top":"is-out-bottom"))},t}(c),E=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"lottie")||this).luge=t,i.elements=[],i.doneLoad=null,i.onViewportIntersect=i.onViewportIntersect.bind(h(i)),i.onScrollProgress=i.onScrollProgress.bind(h(i)),t.lottie={deferInit:i.deferInit.bind(h(i))},i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),"object"==typeof lottie&&(this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageLoad",this.pageLoad.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.lifecycle.add("reveal",this.reveal.bind(this))),this.bindEvents()},i.deferInit=function(){"object"==typeof lottie&&(this.pageInit(function(){}),LifeCycle.add("pageKill",this.pageKill.bind(this)),LifeCycle.add("reveal",this.reveal.bind(this)),ScrollObserver.updateHandler())},i.setAttributes=function(){this.pluginAttributes={root:String,autoplay:Boolean,scroll:Boolean,loop:Boolean,loopFrame:[Number,0],reverse:Boolean,required:Boolean,force:Boolean,lazy:Boolean,renderer:[String,Luge.settings.lottie.renderer],subframe:[Boolean,Luge.settings.lottie.subFrame]}},i.bindEvents=function(){this.luge.emitter.on("update",this.updateHandler,this)},i.updateHandler=function(){this.addElements(),this.reveal(function(){})},i.pageLoad=function(e){var t=!1;this.elements.length>0&&this.elements.forEach(function(e){e.luge.lottie.required&&!e.player.isLoaded&&(t=!0)}),t?this.doneLoad=e:e()},i.pageInit=function(e){this.addElements(),e()},i.addElements=function(){var e=this,t=this;this.elements=document.querySelectorAll("[data-lg-lottie]"),this.toAutoplay=[],this.toLoad=0,this.requireds=0,this.elements.forEach(function(i){if(!i.player){var n=e.getAttributes(i);e.luge.scrollobserver.add(i),n.lazy||(t.initPlayer(i),i.addEventListener("revealin",t.play)),i.addEventListener("viewportintersect",t.onViewportIntersect)}})},i.pageKill=function(e){var t=this,i=document.querySelector("[data-lg-page] + [data-lg-page]");(i?i.querySelectorAll("[data-lg-lottie]"):this.elements).forEach(function(e){e.removeEventListener("revealin",t.play),e.removeEventListener("viewportintersect",t.onViewportIntersect),e.hasAttribute("data-lg-lottie-scroll")&&e.removeEventListener("scrollprogress",t.onScrollProgress),e.player&&(e.player.destroy(),delete e.player)}),e()},i.reveal=function(e){this.toAutoplay.forEach(function(e){"in"===e.viewportPosition&&e.play()}),e()},i.onViewportIntersect=function(e){var t=e.target;t.player?t.luge.lottie.force||("in"===t.viewportPosition?t.player.isPaused&&(t.player.scrollPaused||t.hasAttribute("data-lg-lottie-autoplay"))&&(t.player.scrollPaused=!1,t.play()):t.player.isPaused||(t.player.scrollPaused=!0,t.pause())):"in"===t.viewportPosition&&this.initLazy(t)},i.initLazy=function(e){this.initPlayer(e),e.player.addEventListener("DOMLoaded",function(){e.play()},{once:!0})},i.initPlayer=function(e){var t=this;this.toLoad++;var i=this.getAttributes(e);e.player=lottie.loadAnimation({container:e,renderer:i.renderer,loop:i.loop&&!i.reverse,autoplay:!1,path:i.root}),void 0!==i.subframe&&e.player.setSubframe(i.subframe),e.classList.add("lg-lottie"),this.setPlayerStateClasses(e,!1),i.autoplay&&this.toAutoplay.push(e),i.required&&this.requireds++,i.scroll?e.addEventListener("scrollprogress",this.onScrollProgress):i.loop&&e.player.addEventListener("enterFrame",function(){if(e.player.totalFrames>0){var n=Math.round(e.player.currentFrame);1===e.player.playDirection?n===e.player.totalFrames-1&&(e.player.pause(),this.luge.ticker.nextTick(i.reverse?function(){e.player.setDirection(-1),e.player.goToAndPlay(e.player.totalFrames,!0),t.setPlayerStateClasses(e,"backward")}:function(){e.player.goToAndPlay(i.loopFrame,!0)},this)):n===i.loopFrame&&(e.player.pause(),this.luge.ticker.nextTick(function(){e.player.setDirection(1),e.player.goToAndPlay(i.loopFrame,!0),t.setPlayerStateClasses(e,"forward")},this))}}),e.play=this.play.bind(this,e),e.pause=this.pause.bind(this,e),e.stop=this.stop.bind(this,e),e.player.addEventListener("DOMLoaded",function(){e.classList.add("is-loaded"),t.playerLoaded(i.required)},{once:!0})},i.setPlayerStateClasses=function(e,t){e.classList.remove("is-playing","is-playing-forward","is-playing-backward","is-paused"),t?(e.classList.add("is-playing"),e.classList.add("backward"===t?"is-playing-backward":"is-playing-forward")):e.classList.add("is-paused")},i.playerLoaded=function(e){var t=this;void 0===e&&(e=!1),this.toLoad--,e&&this.requireds--,0===this.requireds&&"function"==typeof this.doneLoad&&(this.doneLoad(),this.doneLoad=null),0===this.toLoad&&this.luge.ticker.nextTick(function(){t.luge.emitter.emit("resize")})},i.play=function(e){e&&e.player&&(e.player.play(),this.setPlayerStateClasses(e,"forward"))},i.pause=function(e){e&&e.player&&(e.player.pause(),this.setPlayerStateClasses(e,!1))},i.stop=function(e){e&&e.player&&(e.player.stop(),this.setPlayerStateClasses(e,!1))},i.onScrollProgress=function(e){var t=e.target;t.player.goToAndStop(t.player.totalFrames*t.scrollProgress,!0)},t}(c),S=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"mouse")||this).luge=t,i.elements=[],i.mouse={x:window.mouseX,y:window.mouseY},window.mouseSpeed=0,i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.ticker.add(this.tick,this),this.getMouseMovement(),this.bindEvents()},i.setAttributes=function(){this.pluginAttributes={root:String,inertia:[String,this.luge._settings.mouse.inertia]}},i.getAttributes=function(t){var i=e.prototype.getAttributes.call(this,t);if(i.inertia){var n=i.inertia.match(/\{\s*([0-9]*[.]?[0-9]*)\s*,\s*([0-9]*[.]?[0-9]*)\s*\}/m);i.inertia=n?Number(n[1])+(Number(n[2])-Number(n[1]))*Math.random():Number(i.inertia),i.inertia=Math.max(Math.min(i.inertia,.99),0)}return i},i.bindEvents=function(){this.luge.emitter.on("update",this.updateHandler,this)},i.updateHandler=function(){this.addElements()},i.pageInit=function(e){this.addElements(),e()},i.addElements=function(){var e=document.querySelectorAll("[data-lg-mouse]"),t=this;e.forEach(function(e){t.addElement(e)})},i.addElement=function(e){this.elements.includes(e)||(this.getAttributes(e),this.luge.mouseobserver.add(e),e.luge.mouse.smoothX=0,e.luge.mouse.smoothY=0,e.luge.mouse.smoothProgressX=0,e.luge.mouse.smoothProgressY=0,this.elements.push(e))},i.removeElement=function(e){this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)},i.pageKill=function(e){var t=this;this.elements.forEach(function(e){t.removeElement(e)}),e()},i.getMouseMovement=function(){var e=this.mouse.x-window.mouseX,t=this.mouse.y-window.mouseY,i=Math.hypot(e,t);if(window.mouseSpeed+=.5*(i-window.mouseSpeed),window.mouseSpeed<.001&&(window.mouseSpeed=0),i>1){var n=Math.atan2(t,e)*(180/Math.PI)+180;window.mouseAngle=n,window.mouseDirection=n>=45&&n<135?"down":n>=135&&n<225?"left":n>=225&&n<315?"up":"right"}this.mouse={x:window.mouseX,y:window.mouseY},setTimeout(this.getMouseMovement.bind(this),20)},i.tick=function(){this.elements.forEach(function(e){var t=e.luge.mouse;if(t.x)if(t.inertia){t.smoothX+=(t.x-t.smoothX)*t.inertia,t.smoothY+=(t.y-t.smoothY)*t.inertia,t.smoothProgressX+=(t.progressX-t.smoothProgressX)*t.inertia,t.smoothProgressY+=(t.progressY-t.smoothProgressY)*t.inertia,e.style.setProperty("--mouse-x",t.smoothX),e.style.setProperty("--mouse-y",t.smoothY),e.style.setProperty("--mouse-progress-x",t.smoothProgressX),e.style.setProperty("--mouse-progress-y",t.smoothProgressY);var i=Math.round(1e3*(t.x-t.smoothX))/1e3,n=Math.round(1e3*(t.y-t.smoothY))/1e3;e.style.setProperty("--abs-diff-x",Math.abs(i)),e.style.setProperty("--diff-x",i),e.style.setProperty("--abs-diff-y",Math.abs(n)),e.style.setProperty("--diff-y",n)}else e.style.setProperty("--mouse-x",t.x),e.style.setProperty("--mouse-y",t.y),e.style.setProperty("--mouse-progress-x",t.progressX),e.style.setProperty("--mouse-progress-y",t.progressY)})},t}(c),P=/*#__PURE__*/function(e){function t(t){var i;return(i=e.call(this,"parallax")||this).luge=t,i.elements=[],i.onScrollProgress=i.onScrollProgress.bind(h(i)),i}u(t,e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this),30),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()},i.setAttributes=function(){this.pluginAttributes={root:String,disable:String,amplitude:[String,1],anchor:String,inertia:[String,this.luge._settings.parallax.inertia]}},i.getAttributes=function(t){var i=e.prototype.getAttributes.call(this,t);if(i.amplitude){var n=i.amplitude.match(/\{\s*([0-9]*[.]?[0-9]*)\s*,\s*([0-9]*[.]?[0-9]*)\s*\}/m);i.amplitude=n?Number(n[1])+(Number(n[2])-Number(n[1]))*Math.random():Number(i.amplitude)}return i},i.bindEvents=function(){this.luge.emitter.on("update",this.updateHandler,this)},i.updateHandler=function(){this.addElements()},i.pageInit=function(e){this.addElements(),e()},i.pageKill=function(e){var t=this;this.elements.forEach(function(e){t.removeElement(e)}),e()},i.addElements=function(){var e=this;document.querySelectorAll("[data-lg-parallax]").forEach(function(t){var i=e.getAttributes(t).disable,n=!0,s=(window.luge.browser||{}).is;i&&s&&("desktop"===i&&s("desktop")||"handheld"===i&&!s("desktop")||"mobile"===i&&s("mobile")||"tablet"===i&&s("tablet"))&&(n=!1),n&&e.addElement(t)})},i.addElement=function(e){var t=this;this.elements.includes(e)||(this.luge.scrollobserver.add(e),"child"===e.luge.parallax.root&&(e.style.overflow="hidden",e.luge.parallax.child=e.firstElementChild),e.luge.parallax.movement=0,e.luge.parallax.smoothMovement=0,this.elements.push(e),this.luge.ticker.nextTick(function(){e.addEventListener("scrollprogress",t.onScrollProgress),t.moveElement(e)}))},i.removeElement=function(e){e.removeEventListener("scrollprogress",this.onScrollProgress),this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)},i.onScrollProgress=function(e){this.moveElement(e.target)},i.moveElement=function(e){var t=0;t=e.scrollStart<0?e.scrollProgress:1-2*e.scrollProgress,"bottom"===e.luge.parallax.anchor?t+=1:"top"===e.luge.parallax.anchor&&(t-=1),e.luge.parallax.movement="child"===e.luge.parallax.root?5*e.luge.parallax.amplitude*t:e.clientHeight*t*e.luge.parallax.amplitude/2},i.tick=function(){this.elements.forEach(function(e){e.luge.parallax.smoothMovement+=(e.luge.parallax.movement-e.luge.parallax.smoothMovement)*e.luge.parallax.inertia,"child"===e.luge.parallax.root&&e.luge.parallax.child?e.luge.parallax.child.style.transform="translate3d(0, "+e.luge.parallax.smoothMovement+"%, 0) scale(1."+String(Math.abs(e.luge.parallax.amplitude)).replace(".","")+")":e.style.transform="translate3d(0, "+e.luge.parallax.smoothMovement+"px, 0)"})},t}(c),T=new(/*#__PURE__*/function(){function e(){this.elements=[],l.add("siteInit",this.init.bind(this),20)}var t=e.prototype;return t.init=function(e){this.createObserver(),e()},t.createObserver=function(){this.observer=new IntersectionObserver(this.intersectionCallback.bind(this),{threshold:[a.settings.intersection.threshold]})},t.intersectionCallback=function(e){e.forEach(function(e){var t=e.target,i="in";e.isIntersecting||(i=e.boundingClientRect.y<=0?"above":"under"),t.luge.viewport.position!==i&&(t.luge.viewport.position=i,t.dispatchEvent(new CustomEvent("viewportintersect")),"in"===i?t.dispatchEvent(new CustomEvent("viewportin")):(t.dispatchEvent(new CustomEvent("viewportout")),t.dispatchEvent(new CustomEvent("viewport"+i))))})},t.add=function(e){this.observer.observe(e),(e.luge||(e.luge={}))&&(e.luge=o.mergeDeep(e.luge,{viewport:{position:"out"}}))},t.remove=function(e){this.observer.unobserve(e)},e}()),x=new(/*#__PURE__*/function(){function e(){this.callbacks=[],this.onceCallbacks=[],a.settings.ticker.external||(this.fps=60,this.fpsInterval=1e3/this.fps,this.lastTickTime=null,requestAnimationFrame(this._tick.bind(this)))}var t=e.prototype;return t.add=function(e,t){var i=!1;this.callbacks.forEach(function(n){n.cb===e&&n.context===t&&(i=!0)}),i||this.callbacks.push({cb:e,context:t})},t.remove=function(e,t){var i=this;this.callbacks.forEach(function(n,s){n.cb===e&&n.context===t&&delete i.callbacks[s]})},t.nextTick=function(e,t){this.onceCallbacks.push({cb:e,context:t})},t._tick=function(e){var t=e-this.lastTickTime;t>this.fpsInterval&&(this.tick(e),this.lastTickTime=e-t%this.fpsInterval),a.settings.ticker.external||requestAnimationFrame(this._tick.bind(this))},t.tick=function(e){var t=this;this.callbacks.forEach(function(t){t.cb.apply(t.context,[e])}),this.onceCallbacks.forEach(function(i,n){i.cb.apply(i.context,[e]),delete t.onceCallbacks[n]})},e}()),k=new(/*#__PURE__*/function(){function e(){this.elements=[],this.elementsToBound=[],this.timeouts={scroll:null},l.add("pageKill",this.pageKill.bind(this)),l.add("pageInit",this.init.bind(this),20),x.add(this.tick,this),this.bindEvents()}var t=e.prototype;return t.bindEvents=function(){r.on("mouseMove",this.mouseHandler,this),r.on("resize",this.resizeHandler,this),r.on("update",this.updateHandler,this),r.on("scroll",this.scrollHandler,this)},t.pageKill=function(e){this.elements=[],this.elementsToBound=[],e()},t.init=function(e){this.getBoundingThrottle(),e()},t.resizeHandler=function(){this.getBoundingThrottle()},t.updateHandler=function(){var e=this;x.nextTick(function(){e.getBoundingThrottle()},this)},t.scrollHandler=function(){clearTimeout(this.timeouts.scroll),this.timeouts.scroll=setTimeout(this.getBoundingThrottle.bind(this),75)},t.mouseHandler=function(){var e=this;this.elements.forEach(function(t){e.setElementPosition(t)}),window.mouseLastScrollTop=window.scrollTop},t.getBoundingThrottle=function(){this.elementsToBound=this.elements,x.nextTick(this.getBounding.bind(this))},t.getBounding=function(){var e=this;this.elementsToBound.forEach(function(t){e.setElementBounding(t),e.setElementPosition(t)}),this.elementsToBound=[]},t.setElementBounding=function(e){var t=e.getAttribute("style");e.setAttribute("style","");var i=e.getBoundingClientRect(),n={anchor:{x:i.left,y:i.top+window.unifiedScrollTop},width:e.offsetWidth,height:e.offsetHeight};(e.luge||(e.luge={}))&&(e.luge=o.mergeDeep(e.luge,n)),e.setAttribute("style",t)},t.setElementPosition=function(e){if(e.luge&&e.luge.anchor){var t={x:window.mouseX-e.luge.anchor.x,y:window.mouseY-e.luge.anchor.y+window.unifiedScrollTop};t.progressX=o.clamp(t.x/e.luge.width,0,1),t.progressY=o.clamp(t.y/e.luge.height,0,1),e.luge.mouse=o.mergeDeep(e.luge.mouse,t)}},t.add=function(e){this.elements.includes(e)||(this.elementsToBound.includes(e)||this.elementsToBound.push(e),this.elements.push(e))},t.remove=function(e){this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1),this.elementsToBound.includes(e)&&this.elementsToBound.splice(this.elementsToBound.indexOf(e),1)},t.tick=function(){var e=this;0!=window.scrollTop-window.mouseLastScrollTop&&this.elements.forEach(function(t){e.setElementPosition(t)})},e}()),A=new(/*#__PURE__*/function(){function e(){this.elements=[],this.elementsToBound=[],this.elementsToCheck=[],this.setMaxScrollTop(),l.add("pageKill",this.pageKill.bind(this)),l.add("pageInit",this.init.bind(this),20),this.bindEvents()}var t=e.prototype;return t.bindEvents=function(){r.on("resize",this.resizeHandler,this),r.on("scroll",this.scrollHandler,this),r.on("update",this.updateHandler,this)},t.pageKill=function(e){this.elements=[],this.elementsToBound=[],this.elementsToCheck=[],e()},t.init=function(e){this.getBoundingThrottle(),this.checkElementsThrottle(),e()},t.resizeHandler=function(){this.getBoundingThrottle(),this.checkElementsThrottle()},t.scrollHandler=function(){this.checkElementsThrottle()},t.updateHandler=function(){var e=this;x.nextTick(function(){e.getBoundingThrottle(),e.checkElementsThrottle()},this)},t.setMaxScrollTop=function(){window.maxScrollTop=Math.max(document.body?document.body.scrollHeight:0,document.body?document.body.offsetHeight:0,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight},t.getBoundingThrottle=function(){var e=this;this.setMaxScrollTop(),this.elements.forEach(function(t){e.elementsToBound.includes(t)||(t.scrollProgress=0,e.elementsToBound.push(t))}),x.nextTick(this.getBounding.bind(this))},t.getBounding=function(){var e=this;this.elementsToBound.forEach(function(t){e.setElementBounding(t)}),this.elementsToBound=[]},t.setElementBounding=function(e){var t=e.getAttribute("style");e.setAttribute("style","");var i=e.getBoundingClientRect();e.scrollStart=i.top+window.unifiedScrollTop-window.innerHeight,e.scrollEnd=e.scrollStart+e.clientHeight+window.innerHeight,e.scrollEnd=Math.min(e.scrollEnd,window.maxScrollTop),e.scrollMiddle=e.scrollStart+(e.scrollEnd-e.scrollStart)/2,e.setAttribute("style",t)},t.checkElementsThrottle=function(){var e=this;this.elements.forEach(function(t){e.elementsToCheck.includes(t)||e.elementsToCheck.push(t)}),x.nextTick(this.checkElements.bind(this))},t.checkElements=function(){var e=this;this.elementsToCheck.forEach(function(t){e.checkElement(t)}),this.elementsToCheck=[]},t.checkElement=function(e){var t,i=window.unifiedScrollTop,n=0;n=e.scrollStart<0?Math.min(Math.max(i/e.scrollEnd,0),1):Math.min(Math.max((i-e.scrollStart)/(e.scrollEnd-e.scrollStart),0),1),isNaN(n)&&(n=0),t=n<=0&&e.scrollStart>0?"under":n>=1&&e.scrollEnd<window.maxScrollTop?"above":"in",e.scrollProgress=n,e.viewportPosition!==t?(e.viewportPosition=t,e.dispatchEvent(new CustomEvent("viewportintersect")),e.dispatchEvent(new CustomEvent("viewport"+t)),"in"!==t&&e.dispatchEvent(new CustomEvent("viewportout")),e.dispatchEvent(new CustomEvent("scrollprogress"))):n>0&&n<1&&e.dispatchEvent(new CustomEvent("scrollprogress"))},t.add=function(e){this.elements.includes(e)||(e.scrollProgress=0,this.elementsToBound.includes(e)||(this.elementsToBound.push(e),this.elementsToCheck.push(e)),this.elements.push(e))},t.remove=function(e){this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1),this.elementsToBound.includes(e)&&this.elementsToBound.splice(this.elementsToBound.indexOf(e),1),this.elementsToCheck.includes(e)&&this.elementsToCheck.splice(this.elementsToCheck.indexOf(e),1)},e}()),L=new(/*#__PURE__*/function(){function e(){this.plugins={},this.emitter={emit:r.emit.bind(r),off:r.off.bind(r),on:r.on.bind(r),once:r.once.bind(r)},this.viewportobserver={add:T.add.bind(T),remove:T.remove.bind(T)},this.lifecycle={add:l.add.bind(l),refresh:l.cycle.bind(l,"refresh"),remove:l.remove.bind(l),debug:l.enableDebug.bind(l),_cycle:l.cycle.bind(l)},this.mouseobserver={add:k.add.bind(k),remove:k.remove.bind(k)},this.scrollobserver={add:A.add.bind(A),remove:A.remove.bind(A)},this.ticker={add:x.add.bind(x),nextTick:x.nextTick.bind(x),remove:x.remove.bind(x),tick:x.tick.bind(x)},this.settings=a.setSettings.bind(a)}var t,i,n=e.prototype;return n.init=function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l.cycle.bind(l,"load"),{once:!0}):this.ticker.nextTick(function(){l.cycle("load")},null)},n.addPlugin=function(e,t){this.plugins[e]=new t(this)},t=e,(i=[{key:"_settings",get:function(){return a.settings}}])&&function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,"symbol"==typeof(s=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key))?s:String(s),n)}var s}(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}());L.addPlugin("preloader",p),L.addPlugin("reveal",m),L.addPlugin("transition",f),L.addPlugin("scroll",v),L.addPlugin("smooth",y),L.addPlugin("cursor",b),L.addPlugin("intersection",w),L.addPlugin("lottie",E),L.addPlugin("mouse",S),L.addPlugin("parallax",P),L.addPlugin("browser",function(e){var t=document.documentElement,i=s.default.getParser(window.navigator.userAgent);t.classList.add("is-"+i.getPlatformType()),(i.is("mobile")||i.is("tablet"))&&t.classList.add("is-handheld"),i.is("Safari")&&(t.classList.add("is-safari"),t.classList.add("is-safari-"+i.getBrowserVersion())),e.browser=i}),L.settings({cursor:{disabled:L.browser.some(["tablet","mobile"])},smooth:{disabled:L.browser.some(["tablet","mobile"])||L.browser.satisfies({safari:"<=12"})}}),L.init(),window.luge=L});
//# sourceMappingURL=luge.umd.js.map
