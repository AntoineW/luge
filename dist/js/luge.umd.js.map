{"version":3,"file":"luge.umd.js","sources":["../../src/js/luge/core/Helpers.js","../../src/js/luge/core/Emitter.js","../../src/js/luge/core/LifeCycle.js","../../src/js/luge/core/Core.js","../../src/js/luge/core/Plugin.js","../../src/js/luge/plugins/Preloader.js","../../src/js/luge/plugins/Reveal.js","../../src/js/luge/plugins/Transition.js","../../src/js/luge/plugins/ScrollAnimation.js","../../src/js/luge/plugins/SmoothScroll.js","../../src/js/luge/plugins/Cursor.js","../../src/js/luge/plugins/Intersection.js","../../src/js/luge/plugins/LottiePlayer.js","../../src/js/luge/plugins/MouseAnimation.js","../../src/js/luge/plugins/Parallax.js","../../src/js/luge/core/ViewportObserver.js","../../src/js/luge/core/Ticker.js","../../src/js/luge/core/MouseObserver.js","../../src/js/luge/core/ScrollObserver.js","../../src/js/luge/core/index.js","../../src/js/luge/plugins/Browser.js"],"sourcesContent":["class Helpers {\n  /**\n   * Check if the variable is an array\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isArray(item) {\n    return (item && typeof item === 'object' && Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is an object\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isObject(item) {\n    return (item && typeof item === 'object' && !Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is a string\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isString(item) {\n    return (item && typeof item === 'string')\n  }\n\n  /**\n   * Deep merge two objects\n   * @param {Object} target\n   * @param {Object} source\n   * @returns {Object} Merged object\n   */\n  static mergeDeep(target, source) {\n    const output = Object.assign({}, target)\n    if (Helpers.isObject(target) && Helpers.isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (Helpers.isObject(source[key])) {\n          if (!(key in target)) {\n            Object.assign(output, { [key]: source[key] })\n          } else {\n            if (Helpers.isObject(target[key]) && Helpers.isObject(source[key])) {\n              output[key] = Helpers.mergeDeep(target[key], source[key])\n            } else {\n              output[key] = source[key]\n            }\n          }\n        } else {\n          Object.assign(output, { [key]: source[key] })\n        }\n      })\n    }\n    return output\n  }\n\n  /**\n   * Convert a string to camelCase\n   * @param {String} string The string to convert\n   */\n  static toCamelCase (string) {\n    if (Helpers.isString(string)) {\n      return string.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (word, index) => {\n        return index === 0 ? word.toLowerCase() : word.toUpperCase()\n      }).replace(/\\W+/g, '')\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Convert a string to UpperCamelCase\n   * @param {String} string The string to convert\n   */\n  static toUpperCamelCase (string) {\n    if (Helpers.isString(string)) {\n      string = Helpers.toCamelCase(string)\n\n      return string.charAt(0).toUpperCase() + string.slice(1)\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Check if an element is still in the page's body\n   * @param {HTMLElement} node\n   * @returns {Boolean}\n   */\n  static isInPage (node) {\n    return (node === document.body) ? false : document.body.contains(node)\n  }\n\n  /**\n   * Deep freeze an object\n   * @param {Object} obj\n   * @returns {Object} freezed object\n   */\n  static deepFreeze(obj) {\n    Object.keys(obj).forEach(prop => {\n      if (typeof obj[prop] === 'object') Helpers.deepFreeze(obj[prop])\n    })\n    return Object.freeze(obj)\n  }\n\n  /**\n   * Clamp x between lower and upper\n   * @param {Number} x\n   * @param {Number} lower\n   * @param {Number} upper\n   * @returns {Number} clamped Number\n   */\n  static clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n}\n\nexport default Helpers\n","class Emitter {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.events = []\n  }\n\n  /**\n   * Attach handler to event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   * @param {Boolean} once Call handler only once\n   */\n  on (name, callback, context, once = false) {\n    (this.events[name] || (this.events[name] = [])).push({\n      cb: callback,\n      context: context,\n      once: once\n    })\n  }\n\n  /**\n   * Single event handler\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   */\n  once (name, callback, context) {\n    this.on(name, callback, context, true)\n  }\n\n  /**\n   * Emit event\n   * @param {String} name Event Name\n   */\n  emit (name) {\n    const self = this\n    const data = [].slice.call(arguments, 1)\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        object.cb.apply(object.context, data)\n\n        if (object.once) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Detact handler from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   */\n  off (name, callback) {\n    const self = this\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        if (object.cb === callback) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n}\n\nexport default new Emitter()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass LifeCycle {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.eventsName = [\n      'siteInit',\n      'pageInit',\n      'siteLoad',\n      'pageLoad',\n      'siteIn',\n      'pageIn',\n      'reveal',\n      'pageFetch',\n      'pageOut',\n      'pageCreate',\n      'pageKill',\n      'siteReload'\n    ]\n\n    this.events = {}\n\n    this.eventsName.forEach(eventName => {\n      this.events[eventName] = {\n        callbacks: [],\n        done: 0\n      }\n    })\n\n    this.cycles = {\n      load: {\n        events: [\n          'siteInit',\n          'pageInit',\n          ['siteLoad', 'pageLoad'],\n          'siteIn',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      reload: {\n        events: [\n          'pageOut',\n          'siteReload'\n        ]\n      },\n      transition: {\n        events: [\n          ['pageFetch', 'pageOut'],\n          'pageCreate',\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      refresh: {\n        events: [\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      }\n    }\n\n    this.debug = false\n  }\n\n  /**\n   * Start a cycle\n   * @param {String} cycleName Cycle name\n   */\n  cycle (cycleName) {\n    if (this.cycles[cycleName]) {\n      this.cycles[cycleName].current = 0\n\n      if (this.debug) {\n        console.log('Start cycle: ' + cycleName)\n      }\n\n      for (const eventName in this.events) {\n        this.events[eventName].done = 0\n      }\n\n      this.proceed(cycleName)\n    }\n  }\n\n  /**\n   * Proceed current cycle event\n   * @param {String} cycleName Cycle name\n   */\n  proceed (cycleName) {\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      // Do current event\n      if (Array.isArray(event)) {\n        event.forEach(eventName => {\n          this.do(cycleName, eventName)\n        })\n      } else {\n        this.do(cycleName, event)\n      }\n    } else {\n      // Cycle ended\n      if (this.debug) {\n        console.log(cycleName + ' cycle ended')\n      }\n    }\n  }\n\n  /**\n   * Move to next cycle event\n   * @param {String} cycleName Cycle name\n   */\n  next (cycleName) {\n    const self = this\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      let next = true\n      let wait = []\n\n      // Get events to wait for\n      if (typeof event === 'string') {\n        wait = Array(event)\n      } else {\n        wait = event\n      }\n\n      // Check if all events are done\n      if (wait.length > 1) {\n        wait.forEach(eventName => {\n          if (self.events[eventName].done === 0 || self.events[eventName].done < self.events[eventName].callbacks.length) {\n            next = false\n          }\n        })\n      }\n\n      if (next) {\n        // Proceed to next event\n        this.cycles[cycleName].current++\n        requestAnimationFrame(this.proceed.bind(this, cycleName))\n      } else {\n        // Wait for all events to be done\n      }\n    }\n  }\n\n  /**\n   * Hook callback to event\n   * @param {String} eventName Event name\n   * @param {Function} callback Callback function\n   * @param {Int} position Execution order\n   * @param {String} cycleName Cycle name\n   */\n  add (eventName, callback, position = 10, cycleName = null) {\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.push({\n        callback: callback,\n        position: position,\n        cycle: cycleName\n      })\n    }\n  }\n\n  /**\n   * Detach callback from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {String} cycleName Cycle name\n   */\n  remove (eventName, callback, cycleName = null) {\n    const self = this\n\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.forEach((event, index) => {\n        if (event.callback === callback && event.cycle === cycleName) {\n          delete self.events[eventName].callbacks[index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Call hooked callbacks\n   * @param {String} cycleName Cycle name\n   * @param {String} eventName Event name\n   */\n  do (cycleName, eventName) {\n    this.events[eventName].done = 0\n\n    // Call hooked callbacks\n    if (this.events[eventName].callbacks.length > 0) {\n      if (this.debug) {\n        console.log('Do event: ' + eventName + ' (' + cycleName + ' cycle)')\n      }\n\n      Emitter.emit(Helpers.toCamelCase('before-' + eventName))\n\n      const callbacks = this.events[eventName].callbacks.sort((a, b) => {\n        return a.position - b.position\n      })\n\n      callbacks.forEach(object => {\n        if (object.cycle === null || object.cycle === cycleName) {\n          object.callback(() => this.done(cycleName, eventName))\n        } else {\n          this.done(cycleName, eventName)\n        }\n      })\n    } else {\n      this.done(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Count done action\n   * @param {String} eventName Event name\n   */\n  done (cycleName, eventName) {\n    this.events[eventName].done++\n\n    if (this.debug) {\n      console.log('Done event: ' + eventName + ' ' + this.events[eventName].done + '/' + this.events[eventName].callbacks.length + ' (' + cycleName + ' cycle)')\n    }\n\n    Emitter.emit(Helpers.toCamelCase('after-' + eventName))\n\n    // All callback are done, call next action\n    if (this.events[eventName].done >= this.events[eventName].callbacks.length) {\n      this.next(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Enable debug\n   * @param {Boolean} value Enable debug\n   */\n  enableDebug (value = true) {\n    this.debug = value\n  }\n}\n\nexport default new LifeCycle()\n","import LifeCycle from './LifeCycle'\nimport Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass Luge {\n  /**\n   * Constructor\n   */\n  constructor () {\n    // Options\n    this.settings = Helpers.deepFreeze({\n      cursor: {\n        inertia: 1,\n        trailLength: 10\n      },\n      intersection: {\n        threshold: 0.3\n      },\n      lottie: {\n        renderer: 'svg',\n        subFrame: true\n      },\n      mouse: {\n        inertia: 0.1\n      },\n      parallax: {\n        inertia: 0.1\n      },\n      preloader: {\n        duration: 0\n      },\n      reveal: {\n        stagger: 0.1,\n        threshold: 0.15\n      },\n      scroll: {\n        inertia: 0.1\n      },\n      smooth: {\n        inertia: 0.1\n      },\n      ticker: {\n        external: false\n      },\n      transition: {\n        reload: false\n      },\n      credits: {\n        show: true\n      }\n    })\n\n    // Timeouts\n    this.timeouts = {\n      resizeThrottle: null,\n      scrollEnd: null\n    }\n\n    // Viewport size\n    this.windowWidth = 1\n    this.windowHeight = 1\n    this.clientWidth = 1\n\n    // Scroll\n    window.scrollTop = window.scrollY\n    window.unifiedScrollTop = window.scrollTop\n    window.maxScrollTop = 1\n    window.scrollProgress = 0\n    this.previousScrollTop = window.scrollY\n    this.isScrolling = false\n\n    // Mouse\n    window.mouseX = -1\n    window.mouseY = -1\n    window.mouseLastScrollTop = 0\n\n    LifeCycle.add('siteInit', this.siteInit.bind(this), 999)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set settings\n   */\n  setSettings (settings) {\n    this.settings = Helpers.deepFreeze(Helpers.mergeDeep(this.settings, settings))\n  }\n\n  /**\n   * Site initialization\n   * @param {Function} done Done function\n   */\n  siteInit (done) {\n    this.showCredits()\n\n    this.setCSSProperties()\n\n    this.scrollHandler()\n\n    done()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    window.addEventListener('mousemove', this.mouseHandler.bind(this), { passive: true })\n    window.addEventListener('resize', this.resizeThrottle.bind(this))\n    window.addEventListener('scroll', this.scrollHandler.bind(this), { passive: true })\n  }\n\n  /**\n   * Mouse handler\n   * @param {Event} e Mouse event\n   */\n  mouseHandler (e) {\n    const mouseX = e.pageX\n    const mouseY = e.pageY - window.scrollTop\n\n    window.mouseX = mouseX\n    window.mouseY = mouseY\n\n    Emitter.emit('mouseMove', e)\n  }\n\n  /**\n   * Resize throttle\n   */\n  resizeThrottle () {\n    clearTimeout(this.timeouts.resizeThrottle)\n    this.timeouts.resizeThrottle = setTimeout(this.resizeHandler.bind(this), 200)\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.setCSSProperties()\n\n    Emitter.emit('resize')\n  }\n\n  /**\n   * Set CSS propertiers\n   */\n  setCSSProperties () {\n    // Pass window widths to CSS\n    const newWidth = window.innerWidth\n    if (this.windowWidth !== newWidth) {\n      this.windowWidth = newWidth\n      this.clientWidth = document.body.clientWidth\n    }\n\n    // Pass window height to CSS\n    const newHeight = window.innerHeight\n    if (this.windowHeight !== newHeight) {\n      this.windowHeight = newHeight\n      this.clientHeight = document.body.clientHeight\n    }\n\n    requestAnimationFrame(() => {\n      document.documentElement.style.setProperty('--vw', (this.windowWidth * 0.01) + 'px')\n      document.documentElement.style.setProperty('--cw', (this.clientWidth * 0.01) + 'px')\n\n      document.documentElement.style.setProperty('--vh', (this.windowHeight * 0.01) + 'px')\n      document.documentElement.style.setProperty('--ch', (this.clientHeight * 0.01) + 'px')\n    })\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    window.scrollTop = window.scrollY\n\n    // Backward compatibility\n    window.unifiedScrollTop = window.scrollTop\n\n    if (!this.isScrolling) {\n      this.scrollStart()\n    }\n\n    clearTimeout(this.timeouts.scrollEnd)\n    this.timeouts.scrollEnd = setTimeout(this.scrollEnd.bind(this), 200)\n\n    this.previousScrollTop = window.scrollTop\n    window.scrollProgress = window.scrollTop / window.maxScrollTop\n\n    Emitter.emit('scroll')\n  }\n\n  /**\n   * Scroll start\n   */\n  scrollStart () {\n    this.isScrolling = true\n\n    document.documentElement.classList.add('is-scrolling')\n\n    Emitter.emit('scrollStart')\n  }\n\n  /**\n   * Scroll end\n   */\n  scrollEnd () {\n    this.isScrolling = false\n\n    document.documentElement.classList.remove('is-scrolling')\n\n    Emitter.emit('scrollEnd')\n  }\n\n  /**\n   * Show credits\n   */\n  showCredits () {\n    if (this.settings.credits.show) {\n      // Output version\n      const consoleBaseStyle = 'background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; '\n      const consoleBoldStyle = consoleBaseStyle + 'font-weight: bold; '\n      const consoleWhiteStyle = 'color: black; font: 400 1em monospace; padding: 0.5em 0; '\n\n      console.log('%c powered by %cluge%c / ' + VERSION + ' %c > https://luge.cool ', consoleBaseStyle, consoleBoldStyle, consoleBaseStyle, consoleWhiteStyle)\n    }\n  }\n}\n\nexport default new Luge()\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nexport default class Plugin {\n  /**\n   * Constructor\n   */\n  constructor (slug) {\n    this.pluginSlug = slug\n\n    LifeCycle.add('siteInit', this.beforeInit.bind(this), 5)\n  }\n\n  /**\n   * Before init\n   */\n  beforeInit (done) {\n    this.isDisabled = this.disabled()\n\n    if (this.isDisabled) {\n      document.documentElement.classList.add('lg-' + this.pluginSlug + '-disabled')\n    } else {\n      this.init()\n    }\n\n    done()\n  }\n\n  /**\n   * Init plugin\n   */\n  init () {\n    this.setAttributes()\n  }\n\n  /**\n   * Check if feature is disabled\n   */\n  disabled () {\n    return !!(Luge.settings[this.pluginSlug] || {}).disabled\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {}\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const attributes = this.pluginAttributes\n    const data = {}\n\n    for (const name in attributes) {\n      const attribute = attributes[name]\n      let attributeKey = 'lg-' + this.pluginSlug\n      if (name !== 'root') {\n        attributeKey += '-' + name\n      }\n\n      attributeKey = Helpers.toCamelCase(attributeKey)\n      const attributeValue = element.dataset[attributeKey]\n\n      let type, value, defaultValue\n\n      if (typeof attribute === 'object') {\n        type = attribute[0]\n        defaultValue = attribute[1]\n      } else {\n        type = attribute\n      }\n\n      if (attributeValue === undefined && defaultValue !== undefined) {\n        value = type(defaultValue)\n      } else if (attributeValue === undefined && type === Boolean) {\n        value = false\n      } else if (attributeValue !== undefined) {\n        if (type === Boolean) {\n          value = (attributeValue !== 'false')\n        } else {\n          value = type(attributeValue)\n        }\n      } else {\n        value = undefined\n      }\n\n      data[name] = value\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge[this.pluginSlug] = data\n    }\n\n    return data\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class PreLoader extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('preloader')\n\n    this.luge = luge\n\n    this.intro = false\n    this.playerIn = false\n    this.startTime = Date.now()\n    this.doneLoad = null\n\n    luge.preloader = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.el = document.querySelector('[data-lg-preloader]')\n\n    if (this.el) {\n      this.attributes = this.getAttributes(this.el)\n\n      this.el.classList.add('lg-preloader', 'lg-preloader--' + this.attributes.root)\n\n      this.initLottie()\n\n      this.luge.lifecycle.add('siteIn', this.siteIn.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: [String, ''],\n      duration: [Number, this.luge._settings.preloader.duration],\n      in: String,\n      reverse: Boolean\n    }\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    if (this.attributes && this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Intro animation\n   * @param {Function} done Done function\n   */\n  siteIn (done) {\n    const elapsed = (Date.now() - this.startTime) / 1000\n    const remaining = this.attributes.duration - elapsed\n\n    if (remaining <= 0) {\n      const clear = this.clear.bind(this, done)\n\n      if (this.playerIn) {\n        this.playerIn.play()\n\n        this.playerIn.addEventListener('complete', clear, { once: true })\n      } else {\n        if (typeof this.intro === 'function') {\n          this.intro(done, this.remove.bind(this))\n        } else {\n          const duration = window.getComputedStyle(this.el).getPropertyValue('transition-duration')\n\n          if (duration !== '' && duration !== '0s') {\n            this.el.addEventListener('transitionend', clear, { once: true })\n            this.el.classList.add('is-hidden')\n          } else {\n            clear()\n          }\n        }\n      }\n    } else {\n      setTimeout(this.siteIn.bind(this, done), remaining * 1000)\n    }\n  }\n\n  /**\n   * Clear preloader\n   * @param {Function} done Done callback\n   */\n  clear (done) {\n    if (this.playerIn) {\n      this.playerIn.destroy()\n    }\n\n    this.remove()\n\n    done()\n  }\n\n  /**\n   * Remove preloader from done\n   */\n  remove (done) {\n    this.el.parentNode.removeChild(this.el)\n    this.el = null\n  }\n\n  /**\n   * Add intro animation\n   * @param {Function} callback Callback function\n   */\n  add (callback) {\n    this.intro = callback\n  }\n\n  /**\n   * Init lottie\n   */\n  initLottie () {\n    const self = this\n\n    if (this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      const animIn = this.attributes.in\n      let playerIn = false\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: this.el,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (this.attributes.reverse) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      playerIn.addEventListener('DOMLoaded', () => {\n        if (self.attributes.reverse) {\n          playerIn.goToAndStop(playerIn.totalFrames - 1, true)\n        }\n\n        self.el.setAttribute('style', '')\n\n        if (typeof self.doneLoad === 'function') {\n          self.doneLoad()\n          self.doneLoad = null\n        }\n      }, { once: true })\n\n      this.playerIn = playerIn\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Reveal extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('reveal')\n\n    this.luge = luge\n\n    this.elements = []\n    this.toRevealIn = []\n    this.toRevealOut = []\n\n    this.reveals = {\n      in: {},\n      out: {}\n    }\n    this.canReveal = false\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.reveal = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 11)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n    this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    super.setAttributes()\n\n    this.pluginAttributes = {\n      root: String,\n      stagger: String,\n      manual: [Boolean, false],\n      multiple: Boolean,\n      delay: [Number, 0]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.stagger !== undefined && data.stagger === '') {\n      data.stagger = this.luge._settings.reveal.stagger\n    } else if (data.stagger === undefined) {\n      data.stagger = false\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('resize', this.resizeHandler, this)\n    this.luge.emitter.on('scroll', this.scrollHandler, this)\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-reveal]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      // Don't add child elements\n      if (!attributes.stagger && element.closest('[data-lg-reveal-stagger]') !== null) {\n        return\n      }\n\n      const revealName = attributes.root\n      element.luge.reveal.name = Helpers.toCamelCase(revealName)\n\n      if (!attributes.manual) {\n        this.luge.scrollobserver.add(element)\n\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n      } else {\n        element.luge.reveal.in = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'in')\n          this.setRevealClasses(element, 'is-in')\n        }\n\n        element.luge.reveal.out = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'out')\n          this.setRevealClasses(element, 'is-out')\n        }\n      }\n\n      element.luge.reveal.delay = attributes.delay * 1000\n\n      if (attributes.stagger) {\n        Array.from(element.children).forEach(child => {\n          const childRevealName = child.dataset.lgReveal\n\n          child.style.transition = 'none'\n          this.luge.ticker.nextTick(() => {\n            child.style.transition = ''\n          })\n\n          child.classList.add('lg-reveal', 'is-out')\n\n          if (childRevealName || revealName) {\n            child.classList.add('lg-reveal--' + (childRevealName ?? revealName))\n          }\n\n          child.dataset.lgRevealChild = ''\n          if (child.luge || (child.luge = {})) {\n            child.luge.reveal = {\n              isRevealed: false\n            }\n          }\n        })\n      } else {\n        element.style.transition = 'none'\n        this.luge.ticker.nextTick(() => {\n          element.style.transition = ''\n        })\n\n        element.classList.add('lg-reveal', 'is-out')\n\n        if (revealName) {\n          element.classList.add('lg-reveal--' + revealName)\n        }\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.canReveal = false\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n    const threshold = this.luge._settings.reveal.threshold\n\n    if (element.scrollProgress >= threshold && element.scrollProgress <= (1 - threshold) && !element.luge.reveal.isRevealed) {\n      if (this.toRevealOut.includes(element)) {\n        this.toRevealOut.splice(this.toRevealOut.indexOf(element), 1)\n      }\n\n      if (!this.toRevealIn.includes(element)) {\n        this.toRevealIn.push(element)\n      }\n    } else if ((element.scrollProgress < threshold || (element.scrollProgress > (1 - threshold) && element.scrollEnd < Math.round(window.unifiedScrollTop))) && element.luge.reveal.isRevealed) {\n      if (this.toRevealIn.includes(element)) {\n        this.toRevealIn.splice(this.toRevealIn.indexOf(element), 1)\n      }\n\n      if (!this.toRevealOut.includes(element)) {\n        this.toRevealOut.push(element)\n      }\n    }\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.canReveal = true\n\n    this.elements.forEach(element => {\n      if (element.scrollStart < 0) {\n        if (!this.toRevealIn.includes(element)) {\n          this.toRevealIn.push(element)\n        }\n      }\n    })\n\n    this.revealElements()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Sroll handler\n   */\n  scrollHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.revealElements()\n  }\n\n  /**\n   * Reveal elements\n   */\n  revealElements () {\n    const self = this\n\n    if (this.canReveal) {\n      let revealInTimeout = 0\n\n      this.toRevealIn.forEach(element => {\n        const delay = true\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        revealInTimeout += element.luge.reveal.delay\n\n        setTimeout(function () {\n          self.revealCallback(element, revealName, 'in')\n\n          if (element.luge.reveal.stagger) {\n            Array.from(element.children).forEach((child, index) => {\n              const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n              setTimeout(() => {\n                if (childRevealName || revealName) {\n                  self.revealCallback(child, (childRevealName ?? revealName), 'in')\n                }\n\n                self.setRevealClasses(child, 'is-in')\n              }, index * element.luge.reveal.stagger * 1000)\n            })\n          } else {\n            self.setRevealClasses(element, 'is-in')\n          }\n        }, delay ? revealInTimeout : 0)\n\n        if (delay) {\n          revealInTimeout += this.luge._settings.reveal.stagger * 1000\n        }\n\n        if (!element.luge.reveal.multiple) {\n          self.removeElement(element)\n        }\n      })\n\n      this.toRevealOut.forEach(element => {\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        if (element.luge.reveal.isRevealed !== undefined) {\n          self.revealCallback(element, revealName, 'out')\n        }\n\n        let state = ''\n        if (element.scrollProgress > 0.5) {\n          state = 'is-out is-out-top'\n        } else {\n          state = 'is-out is-out-bottom'\n        }\n\n        if (element.luge.reveal.stagger) {\n          Array.from(element.children).forEach((child, index) => {\n            const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n            setTimeout(() => {\n              if (childRevealName || revealName) {\n                self.revealCallback(child, (childRevealName ?? revealName), 'out')\n              }\n\n              self.setRevealClasses(child, state)\n            }, index * element.luge.reveal.stagger * 1000)\n          })\n        } else {\n          self.setRevealClasses(element, state)\n        }\n      })\n\n      this.toRevealIn = []\n      this.toRevealOut = []\n    }\n  }\n\n  /**\n   * Set reveal classes\n   * @param {HTMLElement} el Element\n   * @param {String} states Reveal states\n   */\n  setRevealClasses (el, states) {\n    states = states.split(' ')\n\n    el.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    states.forEach(state => {\n      el.classList.add(state)\n    })\n  }\n\n  /**\n   * Call reveal callback\n   * @param {HTMLElement} el Element\n   */\n  revealCallback (el, name, type) {\n    el.dispatchEvent(new CustomEvent('reveal' + type))\n    el.luge.reveal.isRevealed = (type === 'in')\n\n    if (typeof this.reveals[type][name] === 'function') {\n      this.reveals[type][name](el)\n    } else if (typeof el['onreveal' + type] === 'function') {\n      el['onreveal' + type]()\n    }\n  }\n\n  /**\n   * Add reveal animation\n   * @param {String} type Reveal type (in | out)\n   * @param {String} revealName Reveal animation name\n   * @param {Function} callback Callback function\n   */\n  add (type, revealName, callback) {\n    if (this.reveals[type]) {\n      revealName = Helpers.toCamelCase(revealName)\n\n      if (this.reveals[type][revealName]) {\n        console.log('Reveal animation named ' + revealName + ' already exists.')\n      } else {\n        this.reveals[type][revealName] = callback\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Transition extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('transition')\n\n    this.luge = luge\n\n    this.url = window.location.href\n    this.pathname = window.location.pathname\n    this.pageFetched = null\n    this.currentPage = null\n    this.reload = this.luge._settings.transition.reload\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.transitions = {\n      in: {},\n      out: {}\n    }\n\n    this.listeners = { linkHandler: this.linkHandler.bind(this) }\n\n    luge.transition = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    this.currentPage = document.querySelector('[data-lg-page]')\n    if (this.currentPage) {\n      this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n    }\n\n    this.initLoader()\n\n    if (!this.reload) {\n      window.addEventListener('popstate', this.historyStateChanged.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageFetch', this.pageFetch.bind(this))\n    this.luge.lifecycle.add('pageOut', this.pageOut.bind(this))\n    this.luge.lifecycle.add('pageIn', this.pageIn.bind(this), 10, 'transition')\n    this.luge.lifecycle.add('pageCreate', this.pageCreate.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this), 999, 'transition')\n  }\n\n  /**\n   * Bind links event\n   */\n  bindLinksEvent () {\n    if (document.querySelector('[data-lg-page]')) {\n      document.querySelectorAll('a').forEach(el => {\n        el.addEventListener('click', this.listeners.linkHandler)\n      })\n    }\n  }\n\n  /**\n   * Unbind links handler\n   */\n  unbindLinksEvent () {\n    document.querySelectorAll('a').forEach(el => { el.removeEventListener('click', this.listeners.linkHandler) })\n  }\n\n  /**\n   * Link handler\n   * @param {Event} e Mouse event\n   */\n  linkHandler (e) {\n    const element = e.currentTarget\n    const href = element.getAttribute('href')\n\n    if (href &&\n      href.indexOf('#') !== 0 &&\n      href.indexOf('tel') !== 0 &&\n      href.indexOf('mailto') !== 0 &&\n      !element.closest('#wpadminbar') &&\n      element.getAttribute('data-lg-transition') !== 'disabled' &&\n      element.getAttribute('target') !== '_blank') {\n      // Check if it's an internal URL\n      if (href.indexOf(window.location.origin) === 0 ||\n          href.indexOf('/') === 0 ||\n          href.indexOf('/') === -1) {\n        e.preventDefault()\n\n        if (window.location.href === href) {\n          return\n        }\n\n        this.navigateTo(href)\n\n        // Change page url\n        history.pushState(null, null, this.url)\n      }\n    }\n  }\n\n  /**\n   * Navigate to page\n   * @param {URL} url New page URL\n   */\n  navigateTo (url) {\n    this.url = url\n\n    if (this.reload) {\n      // Prefetch new URL\n      const prefetchLink = document.createElement('link')\n      prefetchLink.rel = 'prefetch'\n      prefetchLink.href = url\n      document.head.appendChild(prefetchLink)\n\n      // Change URL after pageOut\n      this.luge.lifecycle.add('siteReload', (done) => {\n        window.location = url\n      })\n\n      // Call cycle\n      this.luge.lifecycle._cycle('reload')\n    } else {\n      this.luge.lifecycle._cycle('transition')\n    }\n  }\n\n  /**\n   * Page init\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.bindLinksEvent()\n\n    done()\n  }\n\n  /**\n   * Init loader\n   */\n  initLoader () {\n    const loader = document.querySelector('[data-lg-loader]')\n\n    if (loader) {\n      loader.style.transition = 'none'\n      loader.classList.add('lg-loader', 'lg-loader--' + loader.getAttribute('data-lg-loader'))\n      this.luge.ticker.nextTick(() => {\n        loader.style.transition = ''\n      })\n    }\n\n    if (loader && loader.getAttribute('data-lg-loader') === 'lottie' && typeof lottie === 'object') {\n      const animOut = loader.getAttribute('data-lg-loader-out')\n      let playerOut = false\n      let animIn = loader.getAttribute('data-lg-loader-in')\n      let playerIn = false\n\n      if (animOut) {\n        playerOut = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animOut,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n      }\n\n      if (animIn === 'reverse') {\n        animIn = animOut\n      }\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (animIn === animOut) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      loader.playerOut = playerOut\n      loader.playerIn = playerIn\n    }\n  }\n\n  /**\n   * Fetch\n   * @param {Function} done Done function\n   */\n  pageFetch (done) {\n    const self = this\n\n    if (this.url) {\n      fetch(this.url, { credentials: 'include' })\n        .then(function (response) {\n          return response.text()\n        }).then(function (body) {\n          self.pageFetched = body\n\n          done()\n        })\n    }\n  }\n\n  /**\n   * Page create\n   * @param {Function} done Done function\n   */\n  pageCreate (done) {\n    // Convert data to HTML\n    const html = new DOMParser().parseFromString(this.pageFetched, 'text/html')\n\n    // Get containers\n    const newPage = html.querySelector('[data-lg-page]')\n\n    if (newPage) {\n      // Switch containers\n      this.currentPage.insertAdjacentElement('beforebegin', newPage)\n\n      newPage.style.opacity = 0\n\n      this.currentPage.style.opacity = 0\n      this.currentPage.style.position = 'absolute'\n      this.currentPage.style.top = 0\n      this.currentPage.style.left = '-999em'\n      this.currentPage.style.width = '100%'\n\n      // Switch classes\n      document.querySelector('body').className = html.querySelector('body').className\n\n      // Switch metas\n      document.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        element.parentNode.removeChild(element)\n      })\n      html.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        document.querySelector('head title').insertAdjacentElement('afterend', element)\n      })\n\n      // Set title\n      const oldTitle = document.querySelector('head title')\n      const newTitle = html.querySelector('head title')\n\n      if (oldTitle && newTitle) {\n        oldTitle.innerText = newTitle.innerText\n      }\n    } else {\n      // Force reload when no page is found\n      window.location = this.url\n      return\n    }\n\n    // Reset scroll\n    window.scroll({\n      top: this.newScrollTop,\n      left: 0,\n      behavior: 'instant'\n    })\n    window.scrollTop = 0\n    window.smoothScrollTop = 0\n    window.unifiedScrollTop = 0\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.luge.emitter.emit('pageTransition', html)\n\n    done()\n  }\n\n  /**\n   * Page kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const oldPage = this.currentPage\n    oldPage.parentNode.removeChild(oldPage)\n\n    this.currentPage = document.querySelector('[data-lg-page]')\n    this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n\n    done()\n  }\n\n  /**\n   * Page out\n   * @param {Function} done Done function\n   */\n  pageOut (done) {\n    const self = this\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      if (typeof this.transitions.out[pageName] === 'function') {\n        transition = this.transitions.out[pageName]\n      } else if (typeof page.onpageout === 'function') {\n        transition = page.onpageout\n      } else if (typeof this.transitions.out.default === 'function') {\n        transition = this.transitions.out.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader) {\n          if (loader.playerOut) {\n            loader.playerOut.stop()\n            loader.playerOut.renderer.svgElement.style.opacity = 1\n            loader.playerOut.play()\n\n            loader.playerOut.addEventListener('complete', () => {\n              if (!self.reload) {\n                loader.playerOut.renderer.svgElement.style.opacity = ''\n              }\n\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n          }\n\n          loader.classList.add('is-visible')\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n\n    this.unbindLinksEvent.bind(this)\n  }\n\n  /**\n   * Page in\n   * @param {Function} done Done function\n   */\n  pageIn (done) {\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      page.style.opacity = ''\n\n      if (typeof this.transitions.in[pageName] === 'function') {\n        transition = this.transitions.in[pageName]\n      } else if (typeof page.onpagein === 'function') {\n        transition = page.onpagein\n      } else if (typeof this.transitions.in.default === 'function') {\n        transition = this.transitions.in.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader && loader.classList.contains('is-visible')) {\n          if (loader.playerIn) {\n            loader.playerIn.stop()\n            loader.playerIn.renderer.svgElement.style.opacity = 1\n            if (loader.getAttribute('data-lg-loader-in') === 'reverse') {\n              loader.playerIn.goToAndPlay(loader.playerIn.totalFrames, true)\n            } else {\n              loader.playerIn.play()\n            }\n\n            loader.playerIn.addEventListener('complete', () => {\n              loader.playerIn.renderer.svgElement.style.opacity = ''\n              loader.classList.remove('is-visible')\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n\n            loader.classList.remove('is-visible')\n          }\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * History change\n   */\n  historyStateChanged () {\n    let url = ''\n    if (this.url.indexOf(window.location.origin) === 0) {\n      url = new URL(this.url)\n    } else {\n      url = new URL(window.location.origin + this.url)\n    }\n\n    if (url.pathname !== window.location.pathname) {\n      this.prevScrollTop = window.scrollY\n\n      this.luge.ticker.nextTick(() => {\n        this.newScrollTop = window.scrollY\n\n        window.scroll({\n          top: this.prevScrollTop,\n          left: 0,\n          behavior: 'instant'\n        })\n      })\n\n      this.navigateTo(window.location.href)\n    }\n  }\n\n  /**\n   * Add transition animation\n   * @param {String} type Transition type (in | out)\n   * @param {Function} callback Callback function\n   * @param {String} pageName Page name\n   */\n  add (type, pageName = 'default', callback) {\n    if (this.transitions[type]) {\n      pageName = Helpers.toCamelCase(pageName)\n\n      if (this.transitions[type][pageName]) {\n        console.log('Transition animation for ' + pageName + ' page already exists.')\n      } else {\n        this.transitions[type][pageName] = callback\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class ScrollAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('scroll')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Properties\n    this.allowedProperties = [\n      'opacity',\n      'background-x',\n      'background-y'\n    ]\n\n    this.transformProperties = [\n      'x',\n      'y',\n      'z',\n      'translate3d',\n      'rotate',\n      'rotateX',\n      'rotateY',\n      'rotateZ',\n      'scale',\n      'scaleX',\n      'scaleY',\n      'scaleZ'\n    ]\n\n    // Presets\n    this.presets = {\n      'background-x': {\n        'background-x': ['0%', '100%']\n      },\n      'background-y': {\n        'background-y': ['0%', '100%']\n      }\n    }\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      yoyo: Boolean,\n      inertia: [String, this.luge._settings.scroll.inertia],\n      animate: String\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-scroll]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      this.luge.scrollobserver.add(element)\n\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n\n      // Set values\n      const scrollAnimation = {}\n\n      // Smooth progress\n      scrollAnimation.smoothProgress = (element.scrollProgress !== undefined ? element.scrollProgress : 0)\n\n      // Yoyo\n      scrollAnimation.yoyo = attributes.yoyo\n\n      // Inertia\n      scrollAnimation.inertia = attributes.inertia\n\n      // Get properties\n      let properties = false\n\n      if (attributes.animate !== undefined) {\n        properties = JSON.parse(attributes.animate.replace(/'/g, '\"'))\n      } else if (this.presets[attributes.root]) {\n        properties = this.presets[attributes.root]\n      }\n\n      if (properties) {\n        const declarations = {}\n\n        for (const property in properties) {\n          if (this.allowedProperties.includes(property) ||\n              this.transformProperties.includes(property)) {\n            const values = properties[property]\n            let fromValue = String(values[0])\n            let toValue = String(values[1])\n\n            let unit = fromValue.match(/\\d+([a-zA-Z%]+)/m)\n            if (unit) {\n              unit = unit[1]\n            } else if (property.indexOf('rotate') === 0) {\n              unit = 'deg'\n            }\n\n            fromValue = Number(fromValue.replace(unit, ''))\n            toValue = Number(toValue.replace(unit, ''))\n\n            let safeProperty = property\n            if (property === 'background-x') {\n              safeProperty = 'background-position-x'\n            } else if (property === 'background-y') {\n              safeProperty = 'background-position-y'\n            }\n\n            declarations[safeProperty] = {\n              from: fromValue,\n              to: toValue,\n              current: fromValue,\n              unit: unit\n            }\n          }\n        }\n\n        scrollAnimation.properties = declarations\n      }\n\n      element.luge.scroll.animation = scrollAnimation\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.luge.scroll.animation.atDest = false\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    for (const element of this.elements) {\n      // Early break if at dest\n      if (element.luge.scroll.animation.atDest) {\n        continue\n      }\n\n      // Yoyo\n      let progress = element.scrollProgress\n      if (element.luge.scroll.yoyo) {\n        progress = 1 - Math.abs(1 - progress * 2)\n      }\n\n      element.luge.scroll.animation.smoothProgress += (progress - element.luge.scroll.animation.smoothProgress) * (1 - element.luge.scroll.inertia)\n\n      if (element.luge.scroll.animation.properties) {\n        const declarations = {}\n\n        for (const [key, property] of Object.entries(element.luge.scroll.animation.properties)) {\n          property.current = property.from + (property.to - property.from) * element.luge.scroll.animation.smoothProgress\n\n          if (['x', 'y', 'z'].includes(key)) {\n            if (declarations.translate3d || (declarations.translate3d = {})) {\n              declarations.translate3d[key] = property.current + property.unit\n            }\n          } else {\n            declarations[key] = property.current + property.unit\n          }\n        }\n\n        // Handle transform shorthand\n        const transform = []\n        for (const [key, property] of Object.entries(declarations)) {\n          if (this.transformProperties.includes(key)) {\n            // Convert object style property value to string\n            if (typeof property === 'object') {\n              if (key === 'translate3d') {\n                const value = Object.assign({ x: 0, y: 0, z: 0 }, property)\n\n                property.string = value.x + ', ' + value.y + ', ' + value.z\n              } else {\n                property.string = Object.values(property).join(', ')\n              }\n            }\n\n            transform.push(key + '(' + (typeof property !== 'object' ? property : property.string) + ')')\n          }\n        }\n\n        // Create style rule\n        const styles = {}\n        const willChange = []\n\n        if (transform.length > 0) {\n          styles.transform = transform.join(' ')\n          willChange.push('transform')\n        }\n\n        for (const [key, property] of Object.entries(declarations)) {\n          if (!this.transformProperties.includes(key)) {\n            styles[key] = property\n            willChange.push(key)\n          }\n        }\n\n        for (const [key, property] of Object.entries(styles)) {\n          element.style.setProperty(key, property)\n        }\n\n        element.style.setProperty('will-change', willChange.join(', '))\n      } else {\n        const diff = Math.round((element.scrollProgress - element.luge.scroll.animation.smoothProgress) * 1000) / 1000\n\n        element.style.setProperty('--progress', element.luge.scroll.animation.smoothProgress)\n        element.style.setProperty('--abs-diff', Math.abs(diff))\n        element.style.setProperty('--diff', diff)\n      }\n\n      // Block future style update if element is at destination\n      if (Math.abs(progress - element.luge.scroll.animation.smoothProgress) < 0.0001) {\n        element.luge.scroll.animation.atDest = true\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nimport VirtualScroll from 'virtual-scroll'\n\nexport default class SmoothScroll extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor() {\n    super('smooth')\n\n    window.hasSmoothScroll = false\n    window.isSmoothScrolling = false\n  }\n\n  /**\n   * Init\n   */\n  init() {\n    super.init()\n\n    this.element = document.documentElement\n\n    this.hasSmooth = this.element.hasAttribute('data-lg-smooth')\n\n    if (this.hasSmooth) {\n      window.hasSmoothScroll = true\n\n      this.smoothScroll = window.scrollTop\n      this.targetScroll = window.scrollTop\n      this.targetSmoothScroll = window.scrollTop\n\n      document.documentElement.classList.add('has-smooth-scroll')\n\n      const platform = navigator?.userAgentData?.platform || navigator?.platform || 'unknown'\n\n      this.virtualScroll = new VirtualScroll({\n        el: this.element,\n        firefoxMultiplier: 50,\n        mouseMultiplier: platform.indexOf('Win') > -1 ? 1 : 0.4,\n        useKeyboard: false,\n        useTouch: false,\n        passive: true\n      })\n\n      this.virtualScroll.on(this.onVirtualScroll.bind(this))\n\n      this.luge.ticker.add(this.tick, this)\n\n      this.bindEvents()\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('scroll', this.onScroll, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  onScroll () {\n    if (!window.isSmoothScrolling) {\n      this.targetScroll = window.scrollTop\n      this.targetSmoothScroll = window.scrollTop\n      this.smoothScroll = window.scrollTop\n    }\n  }\n\n  /**\n   * Virtual scroll handler\n   */\n  onVirtualScroll({ deltaY, originalEvent: e }) {\n    const objects = e.composedPath()\n    const isPrevented = !!objects.find((el) => el?.hasAttribute?.('data-lg-smooth-prevent'))\n\n    if (e.ctrlKey || isPrevented) {\n      return\n    }\n\n    this.targetScroll -= deltaY\n    this.targetScroll = Helpers.clamp(0, this.targetScroll, window.maxScrollTop)\n\n    window.isSmoothScrolling = true\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    const settings = this.luge._settings.smooth\n\n    this.targetSmoothScroll += (this.targetScroll - this.targetSmoothScroll) * settings.inertia\n    this.smoothScroll += (this.targetSmoothScroll - this.smoothScroll) * settings.inertia\n\n    const diff = Math.abs(this.targetSmoothScroll - this.smoothScroll)\n\n    if (window.isSmoothScrolling && diff > 0.5) {\n      window.scrollTo(\n        {\n          top: this.smoothScroll,\n          behavior: 'auto'\n        }\n      )\n    } else if (window.isSmoothScrolling) {\n      this.smoothScroll = this.targetSmoothScroll\n      window.isSmoothScrolling = false\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Cursor extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('cursor')\n\n    this.luge = luge\n\n    this.cursors = []\n    this.pointers = []\n    this.trails = []\n\n    this.hoverTags = ['a', 'button', 'input']\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [Number, this.luge._settings.cursor.inertia],\n      length: [Number, this.luge._settings.cursor.trailLength],\n      hide: Boolean\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    document.documentElement.addEventListener('mouseenter', this.hoverHandler.bind(this), { capture: true, passive: true })\n    document.documentElement.addEventListener('mouseleave', this.hoverHandler.bind(this), { capture: true, passive: true })\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    const self = this\n    const cursors = document.querySelectorAll('[data-lg-cursor]:not(.lg-cursor)')\n\n    if (cursors.length > 0) {\n      cursors.forEach(cursor => {\n        const attributes = this.getAttributes(cursor)\n\n        if (attributes.hide) {\n          document.documentElement.classList.add('lg-cursor-hide')\n        }\n\n        // Pointers\n        const pointers = cursor.querySelectorAll('[data-lg-cursor-pointer')\n        pointers.forEach(pointer => {\n          pointer.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              }\n            }\n          }\n\n          if (pointer.hasAttribute('data-lg-cursor-inertia')) {\n            pointer.luge.cursor.inertia = Number(pointer.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            pointer.luge.cursor.inertia = attributes.inertia\n          }\n\n          pointer.classList.add('lg-cursor-pointer')\n\n          self.pointers.push(pointer)\n        })\n\n        // Trails\n        const trails = cursor.querySelectorAll('[data-lg-cursor-trail')\n        trails.forEach(trail => {\n          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n          svg.appendChild(path)\n\n          trail.appendChild(svg)\n\n          trail.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              },\n              points: [],\n              path: path\n            }\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-inertia')) {\n            trail.luge.cursor.inertia = Number(trail.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            trail.luge.cursor.inertia = attributes.inertia\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-length')) {\n            trail.luge.cursor.length = Number(trail.getAttribute('data-lg-cursor-length'))\n          } else {\n            trail.luge.cursor.length = attributes.length\n          }\n\n          trail.classList.add('lg-cursor-trail')\n\n          self.trails.push(trail)\n        })\n\n        cursor.classList.add('lg-cursor')\n\n        this.cursors.push(cursor)\n      })\n    }\n\n    done()\n  }\n\n  /**\n   * Hover handler\n   */\n  hoverHandler (e) {\n    const element = e.target\n    const tag = element.tagName.toLowerCase()\n    const style = element.getAttribute('data-lg-hover')\n    let hover = null\n\n    if (this.hoverTags.includes(tag) || style !== null) {\n      hover = (e.type === 'mouseenter')\n    }\n\n    if (hover !== null) {\n      this.cursors.forEach(cursor => {\n        cursor.classList.toggle('lg-cursor--hover', hover)\n\n        if (style !== null && style !== '') {\n          cursor.classList.toggle('lg-cursor--hover--' + style, hover)\n        }\n      })\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick (timestamp) {\n    // Pointers\n    this.pointers.forEach(pointer => {\n      // Get position\n      const position = pointer.luge.cursor.position\n      const smoothPosition = pointer.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      smoothPosition.x += (position.x - smoothPosition.x) * pointer.luge.cursor.inertia\n      smoothPosition.y += (position.y - smoothPosition.y) * pointer.luge.cursor.inertia\n\n      pointer.style.transform = 'translate3d(' + smoothPosition.x + 'px, ' + smoothPosition.y + 'px, 0)'\n    })\n\n    // Trails\n    this.trails.forEach(trail => {\n      // Get position\n      const position = trail.luge.cursor.position\n      const smoothPosition = trail.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      if (window.mouseX !== -1) {\n        smoothPosition.x += (position.x - smoothPosition.x) * trail.luge.cursor.inertia\n        smoothPosition.y += (position.y - smoothPosition.y) * trail.luge.cursor.inertia\n\n        // Update points\n        const points = trail.luge.cursor.points\n\n        const point = {\n          x: smoothPosition.x,\n          y: smoothPosition.y\n        }\n        points.push(point)\n\n        if (points.length > trail.luge.cursor.length) {\n          points.shift()\n        }\n\n        // Draw smooth line # https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74\n        let d = ''\n        let trailLength = 0\n\n        const svgPath = (points, command) => {\n          const d = points.reduce((acc, point, i, a) => i === 0\n\n            ? `M ${point.x},${point.y}`\n\n            : `${acc} ${command(point, i, a)}`\n          , '')\n          return `${d}`\n        }\n\n        const line = (pointA, pointB) => {\n          const lengthX = pointB.x - pointA.x\n          const lengthY = pointB.y - pointA.y\n          return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n          }\n        }\n\n        const controlPoint = (current, previous, next, reverse) => {\n          const p = previous || current\n          const n = next || current\n\n          const smoothing = 0.2\n\n          const o = line(p, n)\n\n          trailLength += o.length\n\n          const angle = o.angle + (reverse ? Math.PI : 0)\n          const length = o.length * smoothing\n\n          const x = current.x + Math.cos(angle) * length\n          const y = current.y + Math.sin(angle) * length\n          return [x, y]\n        }\n\n        const bezierCommand = (point, i, a) => {\n          const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point)\n\n          const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true)\n          return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point.x},${point.y}`\n        }\n\n        d = svgPath(points, bezierCommand)\n\n        trail.luge.cursor.path.setAttribute('d', d)\n\n        trail.style.setProperty('--length', trailLength)\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Intersection extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('intersection')\n\n    this.luge = luge\n\n    // Listeners\n    this.listeners = {\n      onViewportIntersect: this.onViewportIntersect.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.elements = []\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      class: String\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-intersection]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.viewportobserver.add(element)\n      element.addEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.luge.viewportobserver.remove(element)\n      element.removeEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * On viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n    const position = element.luge.viewport.position\n    const CSSClass = element.luge.intersection.class ? element.luge.intersection.class.split(' ') : false\n\n    // Set CSS classes\n    element.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    if (position === 'in') {\n      element.classList.add('is-in')\n\n      if (CSSClass) {\n        document.documentElement.classList.add(...CSSClass)\n      }\n    } else {\n      if (CSSClass) {\n        document.documentElement.classList.remove(...CSSClass)\n      }\n\n      if (position === 'above') {\n        element.classList.add('is-out', 'is-out-top')\n      } else {\n        element.classList.add('is-out', 'is-out-bottom')\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class LottiePlayer extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('lottie')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.doneLoad = null\n\n    // Listeners\n    this.onViewportIntersect = this.onViewportIntersect.bind(this)\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    if (typeof lottie === 'object') {\n      this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n      this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n      this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n      this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n    }\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set plugin attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      autoplay: Boolean,\n      scroll: Boolean,\n      loop: Boolean,\n      loopFrame: [Number, 0],\n      reverse: Boolean,\n      required: Boolean,\n      force: Boolean,\n      renderer: [String, this.luge._settings.lottie.renderer],\n      subframe: [Boolean, this.luge._settings.lottie.subFrame]\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.reveal(() => {})\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    let waitLoad = false\n\n    if (this.elements.length > 0) {\n      this.elements.forEach(element => {\n        if (element.luge.lottie.required && !element.player.isLoaded) {\n          waitLoad = true\n        }\n      })\n    }\n\n    if (waitLoad) {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const self = this\n    this.elements = document.querySelectorAll('[data-lg-lottie]')\n    this.toAutoplay = []\n    this.toLoad = 0\n    this.requireds = 0\n\n    this.elements.forEach(element => {\n      if (!element.player) {\n        this.luge.scrollobserver.add(element)\n\n        self.initPlayer(element)\n\n        element.addEventListener('revealin', self.play)\n        element.addEventListener('viewportintersect', self.onViewportIntersect)\n      }\n    })\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n    let elements = []\n\n    const oldPage = document.querySelector('[data-lg-page] + [data-lg-page]')\n\n    if (oldPage) {\n      elements = oldPage.querySelectorAll('[data-lg-lottie]')\n    } else {\n      elements = this.elements\n    }\n\n    elements.forEach(element => {\n      element.removeEventListener('revealin', self.play)\n      element.removeEventListener('viewportintersect', self.onViewportIntersect)\n\n      if (element.hasAttribute('data-lg-lottie-scroll')) {\n        element.removeEventListener('scrollprogress', self.onScrollProgress)\n      }\n\n      if (element.player) {\n        element.player.destroy()\n        delete element.player\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.toAutoplay.forEach(element => {\n      if (element.viewportPosition === 'in') {\n        element.play()\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n\n    if (!element.luge.lottie.force) {\n      if (element.viewportPosition === 'in') {\n        if (element.player.isPaused && (element.player.scrollPaused || element.hasAttribute('data-lg-lottie-autoplay'))) {\n          element.player.scrollPaused = false\n          element.play()\n        }\n      } else {\n        if (!element.player.isPaused) {\n          element.player.scrollPaused = true\n          element.pause()\n        }\n      }\n    }\n  }\n\n  /**\n   * Init player\n   * @param {HTMLElement} element Container\n   */\n  initPlayer (element) {\n    const self = this\n\n    this.toLoad++\n\n    // Get options\n    const attributes = this.getAttributes(element)\n\n    element.player = lottie.loadAnimation({\n      container: element,\n      renderer: attributes.renderer,\n      loop: (attributes.loop && !attributes.reverse),\n      autoplay: false,\n      path: attributes.root\n    })\n\n    if (typeof attributes.subframe !== 'undefined') {\n      element.player.setSubframe(attributes.subframe)\n    }\n\n    element.classList.add('lg-lottie')\n    this.setPlayerStateClasses(element, false)\n\n    if (attributes.autoplay) {\n      this.toAutoplay.push(element)\n    }\n\n    if (attributes.required) {\n      this.requireds++\n    }\n\n    if (attributes.scroll) {\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n    } else if (attributes.loop) {\n      element.player.addEventListener('enterFrame', function () {\n        if (element.player.totalFrames > 0) {\n          const currentFrame = Math.round(element.player.currentFrame)\n\n          if (element.player.playDirection === 1) {\n            if (currentFrame === element.player.totalFrames - 1) {\n              element.player.pause()\n\n              if (attributes.reverse) {\n                this.luge.ticker.nextTick(() => {\n                  element.player.setDirection(-1)\n                  element.player.goToAndPlay(element.player.totalFrames, true)\n\n                  self.setPlayerStateClasses(element, 'backward')\n                }, this)\n              } else {\n                this.luge.ticker.nextTick(() => {\n                  element.player.goToAndPlay(attributes.loopFrame, true)\n                }, this)\n              }\n            }\n          } else {\n            if (currentFrame === attributes.loopFrame) {\n              element.player.pause()\n\n              this.luge.ticker.nextTick(() => {\n                element.player.setDirection(1)\n                element.player.goToAndPlay(attributes.loopFrame, true)\n\n                self.setPlayerStateClasses(element, 'forward')\n              }, this)\n            }\n          }\n        }\n      })\n    }\n\n    // Set methods\n    element.play = this.play.bind(this, element)\n    element.pause = this.pause.bind(this, element)\n    element.stop = this.stop.bind(this, element)\n\n    // Loaded\n    element.player.addEventListener('DOMLoaded', () => {\n      element.classList.add('is-loaded')\n\n      self.playerLoaded(attributes.required)\n    }, { once: true })\n  }\n\n  /**\n   * Set player state classes\n   * @param {HTMLElement} el Element\n   * @param {Boolean|String} playing If playing, playing direction\n   */\n  setPlayerStateClasses (el, playing) {\n    el.classList.remove('is-playing', 'is-playing-forward', 'is-playing-backward', 'is-paused')\n\n    if (!playing) {\n      el.classList.add('is-paused')\n    } else {\n      el.classList.add('is-playing')\n\n      if (playing === 'backward') {\n        el.classList.add('is-playing-backward')\n      } else {\n        el.classList.add('is-playing-forward')\n      }\n    }\n  }\n\n  /**\n   * Player loaded\n   */\n  playerLoaded (required = false) {\n    this.toLoad--\n\n    if (required) {\n      this.requireds--\n    }\n\n    // Call doneLoad when required animations have been loaded\n    if (this.requireds === 0 && typeof this.doneLoad === 'function') {\n      this.doneLoad()\n      this.doneLoad = null\n    }\n\n    // Emit resize event when all animations are loaded\n    if (this.toLoad === 0) {\n      this.luge.ticker.nextTick(() => {\n        this.luge.emitter.emit('resize')\n      })\n    }\n  }\n\n  /**\n   * Play\n   */\n  play (element) {\n    if (element && element.player) {\n      element.player.play()\n\n      this.setPlayerStateClasses(element, 'forward')\n    }\n  }\n\n  /**\n   * Pause\n   */\n  pause (element) {\n    if (element && element.player) {\n      element.player.pause()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Stop\n   */\n  stop (element) {\n    if (element && element.player) {\n      element.player.stop()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.player.goToAndStop(element.player.totalFrames * element.scrollProgress, true)\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class MouseAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('mouse')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    window.mouseSpeed = 0\n\n    // Listeners\n    // ...\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.getMouseMovement()\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [String, this.luge._settings.mouse.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-mouse]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.mouseobserver.add(element)\n\n      element.luge.mouse.smoothX = 0\n      element.luge.mouse.smoothY = 0\n      element.luge.mouse.smoothProgressX = 0\n      element.luge.mouse.smoothProgressY = 0\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Get mouse movement\n   */\n  getMouseMovement () {\n    const distX = this.mouse.x - window.mouseX\n    const distY = this.mouse.y - window.mouseY\n    const dist = Math.hypot(distX, distY)\n\n    window.mouseSpeed += (dist - window.mouseSpeed) * 0.5\n    if (window.mouseSpeed < 0.001) {\n      window.mouseSpeed = 0\n    }\n\n    if (dist > 1) {\n      const angle = Math.atan2(distY, distX) * (180 / Math.PI) + 180\n\n      window.mouseAngle = angle\n\n      if (angle >= 45 && angle < 135) {\n        window.mouseDirection = 'down'\n      } else if (angle >= 135 && angle < 225) {\n        window.mouseDirection = 'left'\n      } else if (angle >= 225 && angle < 315) {\n        window.mouseDirection = 'up'\n      } else {\n        window.mouseDirection = 'right'\n      }\n    }\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    setTimeout(this.getMouseMovement.bind(this), 20)\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    this.elements.forEach(element => {\n      const mouse = element.luge.mouse\n\n      if (mouse.x) {\n        if (mouse.inertia) {\n          mouse.smoothX += (mouse.x - mouse.smoothX) * mouse.inertia\n          mouse.smoothY += (mouse.y - mouse.smoothY) * mouse.inertia\n          mouse.smoothProgressX += (mouse.progressX - mouse.smoothProgressX) * mouse.inertia\n          mouse.smoothProgressY += (mouse.progressY - mouse.smoothProgressY) * mouse.inertia\n\n          element.style.setProperty('--mouse-x', mouse.smoothX)\n          element.style.setProperty('--mouse-y', mouse.smoothY)\n          element.style.setProperty('--mouse-progress-x', mouse.smoothProgressX)\n          element.style.setProperty('--mouse-progress-y', mouse.smoothProgressY)\n\n          const diffX = Math.round((mouse.x - mouse.smoothX) * 1000) / 1000\n          const diffY = Math.round((mouse.y - mouse.smoothY) * 1000) / 1000\n\n          element.style.setProperty('--abs-diff-x', Math.abs(diffX))\n          element.style.setProperty('--diff-x', diffX)\n          element.style.setProperty('--abs-diff-y', Math.abs(diffY))\n          element.style.setProperty('--diff-y', diffY)\n        } else {\n          element.style.setProperty('--mouse-x', mouse.x)\n          element.style.setProperty('--mouse-y', mouse.y)\n          element.style.setProperty('--mouse-progress-x', mouse.progressX)\n          element.style.setProperty('--mouse-progress-y', mouse.progressY)\n        }\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Parallax extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('parallax')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 30)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      disable: String,\n      amplitude: [String, 1],\n      anchor: String,\n      inertia: [String, this.luge._settings.parallax.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.amplitude) {\n      const randAmplitude = data.amplitude.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randAmplitude) {\n        data.amplitude = Number(randAmplitude[1]) + ((Number(randAmplitude[2]) - Number(randAmplitude[1])) * Math.random())\n      } else {\n        data.amplitude = Number(data.amplitude)\n      }\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    document.querySelectorAll('[data-lg-parallax]').forEach(element => {\n      const attributes = this.getAttributes(element)\n\n      const disable = attributes.disable\n      let enable = true\n\n      const is = (window.luge.browser || {}).is\n\n      if (disable && is) {\n        if ((disable === 'desktop' && is('desktop')) ||\n            (disable === 'handheld' && !is('desktop')) ||\n            (disable === 'mobile' && is('mobile')) ||\n            (disable === 'tablet' && is('tablet'))) {\n          enable = false\n        }\n      }\n\n      if (enable) {\n        this.addElement(element)\n      }\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.luge.scrollobserver.add(element)\n\n      if (element.luge.parallax.root === 'child') {\n        element.style.overflow = 'hidden'\n        element.luge.parallax.child = element.firstElementChild\n      }\n\n      element.luge.parallax.movement = 0\n      element.luge.parallax.smoothMovement = 0\n\n      this.elements.push(element)\n\n      this.luge.ticker.nextTick(() => {\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n        this.moveElement(element)\n      })\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    this.moveElement(e.target)\n  }\n\n  /**\n   * Move element\n   * @param {HTMLElement} element Element to move\n   */\n  moveElement (element) {\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = element.scrollProgress\n    } else {\n      progress = 1 - element.scrollProgress * 2\n    }\n\n    if (element.luge.parallax.anchor === 'bottom') {\n      progress += 1\n    } else if (element.luge.parallax.anchor === 'top') {\n      progress -= 1\n    }\n\n    if (element.luge.parallax.root === 'child') {\n      element.luge.parallax.movement = (element.luge.parallax.amplitude * 5) * progress\n    } else {\n      element.luge.parallax.movement = element.clientHeight * progress * element.luge.parallax.amplitude / 2\n    }\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    this.elements.forEach(element => {\n      element.luge.parallax.smoothMovement += (element.luge.parallax.movement - element.luge.parallax.smoothMovement) * element.luge.parallax.inertia\n\n      if (element.luge.parallax.root === 'child' && element.luge.parallax.child) {\n        element.luge.parallax.child.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + '%, 0) scale(1.' + (String(Math.abs(element.luge.parallax.amplitude)).replace('.', '')) + ')'\n      } else {\n        element.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + 'px, 0)'\n      }\n    })\n  }\n}\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nclass ViewportObserver {\n  constructor () {\n    this.elements = []\n\n    LifeCycle.add('siteInit', this.init.bind(this), 20)\n  }\n\n  /**\n   * Init\n   */\n  init (done) {\n    this.createObserver()\n\n    done()\n  }\n\n  /**\n   * Create observer\n   */\n  createObserver () {\n    this.observer = new IntersectionObserver(\n      this.intersectionCallback.bind(this),\n      {\n        threshold: [Luge.settings.intersection.threshold]\n      }\n    )\n  }\n\n  /**\n   * Intersection callback\n   * @param {IntersectionObserverEntry[]} entries IntersectionObserverEntry objects\n   */\n  intersectionCallback (entries) {\n    entries.forEach((entry) => {\n      const element = entry.target\n      let position = 'in'\n\n      if (!entry.isIntersecting) {\n        if (entry.boundingClientRect.y <= 0) {\n          position = 'above'\n        } else {\n          position = 'under'\n        }\n      }\n\n      if (element.luge.viewport.position !== position) {\n        element.luge.viewport.position = position\n\n        element.dispatchEvent(new CustomEvent('viewportintersect'))\n\n        if (position === 'in') {\n          element.dispatchEvent(new CustomEvent('viewportin'))\n        } else {\n          element.dispatchEvent(new CustomEvent('viewportout'))\n          element.dispatchEvent(new CustomEvent('viewport' + position))\n        }\n      }\n    })\n  }\n\n  /**\n   * Add element to observe\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    this.observer.observe(element)\n\n    const properties = {\n      viewport: {\n        position: 'out'\n      }\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n  }\n\n  /**\n   * Remove observed element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    this.observer.unobserve(element)\n  }\n}\n\nexport default new ViewportObserver()\n","import Luge from './Core'\n\nclass Ticker {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.callbacks = []\n    this.onceCallbacks = []\n\n    if (!Luge.settings.ticker.external) {\n      this.fps = 60\n      this.fpsInterval = 1000 / this.fps\n      this.lastTickTime = null\n\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Add a tick function\n   * @param {Function} callback Tick function\n   * @param {Object} context Context\n   */\n  add (callback, context) {\n    let exists = false\n    this.callbacks.forEach(object => {\n      if (object.cb === callback && object.context === context) {\n        exists = true\n      }\n    })\n\n    if (!exists) {\n      this.callbacks.push({\n        cb: callback,\n        context: context\n      })\n    }\n  }\n\n  /**\n   * Remove a tick function\n   * @param {String} id Tick ID\n   * @param {Object} context Context\n   */\n  remove (callback, context) {\n    const self = this\n\n    this.callbacks.forEach((object, index) => {\n      if (object.cb === callback && object.context === context) {\n        delete self.callbacks[index]\n      }\n    })\n  }\n\n  /**\n   * Execute function at next tick\n   * @param {Function} callback Function to execute\n   * @param {Object} context Context\n   */\n  nextTick (callback, context) {\n    this.onceCallbacks.push({\n      cb: callback,\n      context: context\n    })\n  }\n\n  /**\n   * Call tick function\n   */\n  _tick (nowTime) {\n    const elapsedTime = nowTime - this.lastTickTime\n\n    if (elapsedTime > this.fpsInterval) {\n      this.tick(nowTime)\n      this.lastTickTime = nowTime - (elapsedTime % this.fpsInterval)\n    }\n\n    if (!Luge.settings.ticker.external) {\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Call tick functions\n   */\n  tick (nowTime) {\n    const self = this\n\n    this.callbacks.forEach(object => {\n      object.cb.apply(object.context, [nowTime])\n    })\n\n    this.onceCallbacks.forEach((object, index) => {\n      object.cb.apply(object.context, [nowTime])\n\n      delete self.onceCallbacks[index]\n    })\n  }\n}\n\nexport default new Ticker()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass MouseObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    Ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('mouseMove', this.mouseHandler, this)\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n    }, this)\n  }\n\n  /**\n   * Mouse handler\n   */\n  mouseHandler () {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.setElementPosition(element)\n    })\n\n    window.mouseLastScrollTop = window.scrollTop\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.elements.forEach(element => {\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bouding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n      this.setElementPosition(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    const properties = {\n      anchor: {\n        x: bounding.left,\n        y: bounding.top + window.unifiedScrollTop\n      },\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Set element position\n   * @param {HTMLElement} element Element\n   */\n  setElementPosition (element) {\n    if (element.luge && element.luge.anchor) {\n      const mouse = {\n        x: window.mouseX - element.luge.anchor.x,\n        y: window.mouseY - element.luge.anchor.y + window.unifiedScrollTop\n      }\n\n      mouse.progressX = Helpers.clamp(mouse.x / element.luge.width, 0, 1)\n      mouse.progressY = Helpers.clamp(mouse.y / element.luge.height, 0, 1)\n\n      element.luge.mouse = Helpers.mergeDeep(element.luge.mouse, mouse)\n    }\n  }\n\n  /**\n   * Add mouse element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove mouse element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    const self = this\n    const diffScroll = window.scrollTop - window.mouseLastScrollTop\n\n    if (diffScroll !== 0) {\n      this.elements.forEach(element => {\n        self.setElementPosition(element)\n      })\n    }\n  }\n}\n\nexport default new MouseObserver()\n","import Emitter from './Emitter'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass ScrollObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    this.setMaxScrollTop()\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n      this.checkElementsThrottle()\n    }, this)\n  }\n\n  /**\n   * Set max scroll top\n   */\n  setMaxScrollTop () {\n    window.maxScrollTop = Math.max(\n      document.body ? document.body.scrollHeight : 0,\n      document.body ? document.body.offsetHeight : 0,\n      document.documentElement.clientHeight,\n      document.documentElement.scrollHeight,\n      document.documentElement.offsetHeight\n    ) - window.innerHeight\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.setMaxScrollTop()\n\n    this.elements.forEach(element => {\n      if (!this.elementsToBound.includes(element)) {\n        element.scrollProgress = 0\n\n        this.elementsToBound.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bounding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    element.scrollStart = bounding.top + window.unifiedScrollTop - window.innerHeight\n\n    element.scrollEnd = element.scrollStart + element.clientHeight + window.innerHeight\n    element.scrollEnd = Math.min(element.scrollEnd, window.maxScrollTop)\n\n    element.scrollMiddle = element.scrollStart + (element.scrollEnd - element.scrollStart) / 2\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Check elements throttle\n   */\n  checkElementsThrottle () {\n    this.elements.forEach(element => {\n      if (!this.elementsToCheck.includes(element)) {\n        this.elementsToCheck.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.checkElements.bind(this))\n  }\n\n  /**\n   * Check elements position\n   */\n  checkElements () {\n    this.elementsToCheck.forEach(element => {\n      this.checkElement(element)\n    })\n    this.elementsToCheck = []\n  }\n\n  /**\n   * Check individual element position\n   * @param {HTMLElement} element Element to check\n   */\n  checkElement (element) {\n    const scrollTop = window.unifiedScrollTop\n\n    let position = ''\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = Math.min(Math.max(scrollTop / element.scrollEnd, 0), 1)\n    } else {\n      progress = Math.min(Math.max((scrollTop - element.scrollStart) / (element.scrollEnd - element.scrollStart), 0), 1)\n    }\n\n    if (isNaN(progress)) {\n      progress = 0\n    }\n\n    if (progress <= 0 && element.scrollStart > 0) {\n      position = 'under'\n    } else if (progress >= 1 && element.scrollEnd < window.maxScrollTop) {\n      position = 'above'\n    } else {\n      position = 'in'\n    }\n\n    element.scrollProgress = progress\n\n    if (element.viewportPosition !== position) {\n      element.viewportPosition = position\n\n      element.dispatchEvent(new CustomEvent('viewportintersect'))\n      element.dispatchEvent(new CustomEvent('viewport' + position))\n\n      if (position !== 'in') {\n        element.dispatchEvent(new CustomEvent('viewportout'))\n      }\n\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    } else if (progress > 0 && progress < 1) {\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    }\n  }\n\n  /**\n   * Add scroll element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      element.scrollProgress = 0\n\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n        this.elementsToCheck.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove scroll element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n\n    if (this.elementsToCheck.includes(element)) {\n      this.elementsToCheck.splice(this.elementsToCheck.indexOf(element), 1)\n    }\n  }\n}\n\nexport default new ScrollObserver()\n","import LifeCycle from './LifeCycle'\nimport Core from './Core'\nimport Emitter from './Emitter'\nimport ViewportObserver from './ViewportObserver'\nimport MouseObserver from './MouseObserver'\nimport ScrollObserver from './ScrollObserver'\nimport Ticker from './Ticker'\n\nclass Luge {\n  plugins = {}\n\n  constructor() {\n    this.emitter = {\n      emit: Emitter.emit.bind(Emitter),\n      off: Emitter.off.bind(Emitter),\n      on: Emitter.on.bind(Emitter),\n      once: Emitter.once.bind(Emitter)\n    }\n\n    this.viewportobserver = {\n      add: ViewportObserver.add.bind(ViewportObserver),\n      remove: ViewportObserver.remove.bind(ViewportObserver)\n    }\n\n    this.lifecycle = {\n      add: LifeCycle.add.bind(LifeCycle),\n      refresh: LifeCycle.cycle.bind(LifeCycle, 'refresh'),\n      remove: LifeCycle.remove.bind(LifeCycle),\n      debug: LifeCycle.enableDebug.bind(LifeCycle),\n      _cycle: LifeCycle.cycle.bind(LifeCycle)\n    }\n\n    this.mouseobserver = {\n      add: MouseObserver.add.bind(MouseObserver),\n      remove: MouseObserver.remove.bind(MouseObserver)\n    }\n\n    this.scrollobserver = {\n      add: ScrollObserver.add.bind(ScrollObserver),\n      remove: ScrollObserver.remove.bind(ScrollObserver)\n    }\n\n    this.ticker = {\n      add: Ticker.add.bind(Ticker),\n      nextTick: Ticker.nextTick.bind(Ticker),\n      remove: Ticker.remove.bind(Ticker),\n      tick: Ticker.tick.bind(Ticker)\n    }\n\n    // TODO!: rename to setSettings\n    this.settings = Core.setSettings.bind(Core)\n  }\n\n  init() {\n    // Site init on DOM ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', LifeCycle.cycle('load'), { once: true })\n    } else {\n      this.ticker.nextTick(() => {\n        LifeCycle.cycle('load')\n      },\n      null)\n    }\n  }\n\n  addPlugin(key, Plugin) {\n    this.plugins[key] = new Plugin(this)\n  }\n\n  get _settings() {\n    return Core.settings\n  }\n}\n\nexport default Luge\n","import Bowser from 'bowser/src/bowser.js'\n\nexport default class Browser {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    const documentElement = document.documentElement\n\n    // Browser detect\n    const browser = Bowser.getParser(window.navigator.userAgent)\n\n    // Platform type class\n    documentElement.classList.add('is-' + browser.getPlatformType())\n\n    if (browser.is('mobile') || browser.is('tablet')) {\n      documentElement.classList.add('is-handheld')\n    }\n\n    // Browser class\n    if (browser.is('Safari')) {\n      documentElement.classList.add('is-safari')\n      documentElement.classList.add('is-safari-' + browser.getBrowserVersion())\n    }\n\n    luge.browser = browser\n  }\n}\n"],"names":["Helpers$1","Helpers","isArray","item","Array","isObject","isString","mergeDeep","target","source","output","Object","assign","keys","forEach","key","_Object$assign","_Object$assign2","toCamelCase","string","replace","word","index","toLowerCase","toUpperCase","toUpperCamelCase","charAt","slice","isInPage","node","document","body","contains","deepFreeze","obj","prop","freeze","clamp","x","lower","upper","Math","min","max","Emitter","this","events","_proto","prototype","on","name","callback","context","once","push","cb","emit","self","data","call","arguments","object","apply","off","Emitter$1","LifeCycle$1","LifeCycle","_this","eventsName","eventName","callbacks","done","cycles","load","reload","transition","refresh","debug","cycle","cycleName","current","console","log","proceed","_this2","length","event","next","wait","requestAnimationFrame","bind","add","position","remove","_this3","sort","a","b","enableDebug","value","Luge","settings","cursor","inertia","trailLength","intersection","threshold","lottie","renderer","subFrame","mouse","parallax","preloader","duration","reveal","stagger","scroll","smooth","ticker","external","credits","show","timeouts","resizeThrottle","scrollEnd","windowWidth","windowHeight","clientWidth","window","scrollTop","scrollY","unifiedScrollTop","maxScrollTop","scrollProgress","previousScrollTop","isScrolling","mouseX","mouseY","mouseLastScrollTop","siteInit","bindEvents","setSettings","showCredits","setCSSProperties","scrollHandler","addEventListener","mouseHandler","passive","e","pageY","pageX","clearTimeout","setTimeout","resizeHandler","newWidth","innerWidth","newHeight","innerHeight","clientHeight","documentElement","style","setProperty","scrollStart","classList","consoleBaseStyle","Core","Plugin","slug","pluginSlug","beforeInit","isDisabled","disabled","init","setAttributes","pluginAttributes","getAttributes","element","attributes","attribute","attributeKey","attributeValue","dataset","type","defaultValue","undefined","Boolean","luge","PreLoader","_Plugin","intro","playerIn","startTime","Date","now","doneLoad","_assertThisInitialized","_inheritsLoose","el","querySelector","root","initLottie","lifecycle","siteIn","pageLoad","String","Number","_settings","in","reverse","elapsed","remaining","clear","play","getComputedStyle","getPropertyValue","destroy","parentNode","removeChild","animIn","loadAnimation","container","loop","autoplay","path","rendererSettings","preserveAspectRatio","setDirection","goToAndStop","totalFrames","setAttribute","Reveal","elements","toRevealIn","toRevealOut","reveals","out","canReveal","onScrollProgress","pageInit","pageKill","manual","multiple","delay","emitter","updateHandler","addElements","querySelectorAll","addElement","includes","closest","revealName","revealCallback","setRevealClasses","scrollobserver","from","children","child","childRevealName","lgReveal","nextTick","lgRevealChild","isRevealed","removeElement","removeEventListener","splice","indexOf","round","revealElements","_this4","revealInTimeout","state","states","split","dispatchEvent","CustomEvent","Transition","url","location","href","pathname","pageFetched","currentPage","prevScrollTop","newScrollTop","transitions","listeners","linkHandler","hasAttribute","initLoader","historyStateChanged","pageFetch","pageOut","pageIn","pageCreate","bindLinksEvent","unbindLinksEvent","currentTarget","getAttribute","origin","preventDefault","navigateTo","history","pushState","prefetchLink","createElement","rel","head","appendChild","_cycle","loader","animOut","playerOut","fetch","credentials","then","response","text","html","DOMParser","parseFromString","newPage","insertAdjacentElement","opacity","top","left","width","className","oldTitle","newTitle","innerText","behavior","smoothScrollTop","oldPage","page","pageName","onpageout","stop","svgElement","onpagein","goToAndPlay","URL","ScrollAnimation","allowedProperties","transformProperties","presets","tick","yoyo","animate","randInertia","match","random","scrollAnimation","smoothProgress","properties","JSON","parse","declarations","property","values","fromValue","toValue","unit","safeProperty","to","animation","atDest","_iterator","_step","_createForOfIteratorHelperLoose","progress","abs","_i","_Object$entries","entries","_Object$entries$_i","translate3d","transform","_i2","_Object$entries2","_Object$entries2$_i","y","z","join","styles","willChange","_i3","_Object$entries3","_Object$entries3$_i","_i4","_Object$entries4","_Object$entries4$_i","diff","SmoothScroll","hasSmoothScroll","isSmoothScrolling","hasSmooth","_navigator","_navigator$userAgentD","_navigator2","smoothScroll","targetScroll","targetSmoothScroll","platform","navigator","userAgentData","virtualScroll","VirtualScroll","firefoxMultiplier","mouseMultiplier","useKeyboard","useTouch","onVirtualScroll","onScroll","_ref","deltaY","originalEvent","isPrevented","composedPath","find","ctrlKey","scrollTo","Cursor","cursors","pointers","trails","hoverTags","hide","hoverHandler","capture","pointer","smoothPosition","trail","svg","createElementNS","points","tag","tagName","hover","toggle","timestamp","shift","d","controlPoint","previous","pointA","pointB","lengthX","lengthY","o","sqrt","pow","angle","atan2","PI","cos","sin","command","reduce","acc","point","i","_controlPoint","cpsX","cpsY","_controlPoint2","cpeX","cpeY","svgPath","Intersection","onViewportIntersect","class","viewportobserver","_document$documentEle","_document$documentEle2","viewport","CSSClass","LottiePlayer","loopFrame","required","force","subframe","waitLoad","player","isLoaded","toAutoplay","toLoad","requireds","initPlayer","viewportPosition","isPaused","scrollPaused","pause","setSubframe","setPlayerStateClasses","currentFrame","playDirection","playerLoaded","playing","MouseAnimation","mouseSpeed","getMouseMovement","mouseobserver","smoothX","smoothY","smoothProgressX","smoothProgressY","distX","distY","dist","hypot","mouseAngle","mouseDirection","progressX","progressY","diffX","diffY","Parallax","disable","amplitude","anchor","randAmplitude","enable","is","browser","overflow","firstElementChild","movement","smoothMovement","moveElement","ViewportObserver$1","ViewportObserver","createObserver","observer","IntersectionObserver","intersectionCallback","entry","isIntersecting","boundingClientRect","observe","unobserve","Ticker$1","Ticker","onceCallbacks","fps","fpsInterval","lastTickTime","_tick","exists","nowTime","elapsedTime","MouseObserver$1","MouseObserver","elementsToBound","getBoundingThrottle","setElementPosition","getBounding","setElementBounding","bounding","getBoundingClientRect","offsetWidth","height","offsetHeight","ScrollObserver$1","ScrollObserver","elementsToCheck","setMaxScrollTop","checkElementsThrottle","scrollHeight","scrollMiddle","checkElements","_this5","checkElement","isNaN","plugins","readyState","addPlugin","get","Luge$1","Bowser","getParser","userAgent","getPlatformType","getBrowserVersion"],"mappings":"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"}