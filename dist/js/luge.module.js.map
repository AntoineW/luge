{"version":3,"file":"luge.module.js","sources":["../../src/js/luge/core/Helpers.js","../../src/js/luge/core/Emitter.js","../../src/js/luge/core/LifeCycle.js","../../src/js/luge/core/Core.js","../../src/js/luge/core/Plugin.js","../../src/js/luge/plugins/Preloader.js","../../src/js/luge/plugins/Reveal.js","../../src/js/luge/plugins/Transition.js","../../src/js/luge/plugins/ScrollAnimation.js","../../node_modules/lenis/dist/lenis.mjs","../../src/js/luge/plugins/SmoothScroll.js","../../src/js/luge/plugins/Cursor.js","../../src/js/luge/plugins/Intersection.js","../../src/js/luge/plugins/LottiePlayer.js","../../src/js/luge/plugins/MouseAnimation.js","../../src/js/luge/plugins/Parallax.js","../../node_modules/bowser/src/constants.js","../../node_modules/bowser/src/utils.js","../../node_modules/bowser/src/parser-browsers.js","../../node_modules/bowser/src/parser-os.js","../../node_modules/bowser/src/parser-platforms.js","../../node_modules/bowser/src/parser-engines.js","../../node_modules/bowser/src/parser.js","../../node_modules/bowser/src/bowser.js","../../src/js/luge/plugins/Browser.js","../../src/js/luge/core/ViewportObserver.js","../../src/js/luge/core/Ticker.js","../../src/js/luge/core/MouseObserver.js","../../src/js/luge/core/ScrollObserver.js","../../src/js/luge/core/index.js"],"sourcesContent":["class Helpers {\n  /**\n   * Check if the variable is an object\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isObject(item) {\n    return (item && typeof item === 'object' && !Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is a string\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isString(item) {\n    return (item && typeof item === 'string')\n  }\n\n  /**\n   * Deep merge two objects\n   * @param {Object} target\n   * @param {Object} source\n   * @returns {Object} Merged object\n   */\n  static mergeDeep(target, source) {\n    const output = Object.assign({}, target)\n    if (Helpers.isObject(target) && Helpers.isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (Helpers.isObject(source[key])) {\n          if (!(key in target)) {\n            Object.assign(output, { [key]: source[key] })\n          } else {\n            if (Helpers.isObject(target[key]) && Helpers.isObject(source[key])) {\n              output[key] = Helpers.mergeDeep(target[key], source[key])\n            } else {\n              output[key] = source[key]\n            }\n          }\n        } else {\n          Object.assign(output, { [key]: source[key] })\n        }\n      })\n    }\n    return output\n  }\n\n  /**\n   * Convert a string to camelCase\n   * @param {String} string The string to convert\n   */\n  static toCamelCase (string) {\n    if (Helpers.isString(string)) {\n      return string.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (word, index) => {\n        return index === 0 ? word.toLowerCase() : word.toUpperCase()\n      }).replace(/\\W+/g, '')\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Deep freeze an object\n   * @param {Object} obj\n   * @returns {Object} freezed object\n   */\n  static deepFreeze(obj) {\n    Object.keys(obj).forEach(prop => {\n      if (typeof obj[prop] === 'object') Helpers.deepFreeze(obj[prop])\n    })\n    return Object.freeze(obj)\n  }\n\n  /**\n   * Clamp x between lower and upper\n   * @param {Number} x\n   * @param {Number} lower\n   * @param {Number} upper\n   * @returns {Number} clamped Number\n   */\n  static clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n}\n\nexport default Helpers\n","class Emitter {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.events = []\n  }\n\n  /**\n   * Attach handler to event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   * @param {Boolean} once Call handler only once\n   */\n  on (name, callback, context, once = false, position = 10) {\n    (this.events[name] || (this.events[name] = [])).push({\n      cb: callback,\n      context: context,\n      once: once,\n      position: position\n    })\n  }\n\n  /**\n   * Single event handler\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   */\n  once (name, callback, context) {\n    this.on(name, callback, context, true)\n  }\n\n  /**\n   * Emit event\n   * @param {String} name Event Name\n   */\n  emit (name) {\n    const self = this\n    const data = [].slice.call(arguments, 1)\n\n    if (this.events[name]) {\n      const events = this.events[name].sort((a, b) => {\n        return a.position - b.position\n      })\n\n      events.forEach((object, index) => {\n        object.cb.apply(object.context, data)\n\n        if (object.once) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Detact handler from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   */\n  off (name, callback) {\n    const self = this\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        if (object.cb === callback) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n}\n\nexport default new Emitter()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass LifeCycle {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.eventsName = [\n      'siteInit',\n      'pageInit',\n      'siteLoad',\n      'pageLoad',\n      'siteIn',\n      'pageIn',\n      'reveal',\n      'pageFetch',\n      'pageOut',\n      'pageCreate',\n      'pageKill',\n      'siteReload'\n    ]\n\n    this.events = {}\n\n    this.eventsName.forEach(eventName => {\n      this.events[eventName] = {\n        callbacks: [],\n        done: 0\n      }\n    })\n\n    this.cycles = {\n      load: {\n        events: [\n          'siteInit',\n          'pageInit',\n          ['siteLoad', 'pageLoad'],\n          'siteIn',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      reload: {\n        events: [\n          'pageOut',\n          'siteReload'\n        ]\n      },\n      transition: {\n        events: [\n          ['pageFetch', 'pageOut'],\n          'pageCreate',\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      refresh: {\n        events: [\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      }\n    }\n\n    this.debug = false\n  }\n\n  /**\n   * Start a cycle\n   * @param {String} cycleName Cycle name\n   */\n  cycle (cycleName) {\n    if (this.cycles[cycleName]) {\n      this.cycles[cycleName].current = 0\n\n      if (this.debug) {\n        console.log('Start cycle: ' + cycleName)\n      }\n\n      for (const eventName in this.events) {\n        this.events[eventName].done = 0\n      }\n\n      this.proceed(cycleName)\n    }\n  }\n\n  /**\n   * Proceed current cycle event\n   * @param {String} cycleName Cycle name\n   */\n  proceed (cycleName) {\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      // Do current event\n      if (Array.isArray(event)) {\n        event.forEach(eventName => {\n          this.do(cycleName, eventName)\n        })\n      } else {\n        this.do(cycleName, event)\n      }\n    } else {\n      // Cycle ended\n      if (this.debug) {\n        console.log(cycleName + ' cycle ended')\n      }\n    }\n  }\n\n  /**\n   * Move to next cycle event\n   * @param {String} cycleName Cycle name\n   */\n  next (cycleName) {\n    const self = this\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      let next = true\n      let wait = []\n\n      // Get events to wait for\n      if (typeof event === 'string') {\n        wait = Array(event)\n      } else {\n        wait = event\n      }\n\n      // Check if all events are done\n      if (wait.length > 1) {\n        wait.forEach(eventName => {\n          if (self.events[eventName].done === 0 || self.events[eventName].done < self.events[eventName].callbacks.length) {\n            next = false\n          }\n        })\n      }\n\n      if (next) {\n        // Proceed to next event\n        this.cycles[cycleName].current++\n        requestAnimationFrame(this.proceed.bind(this, cycleName))\n      } else {\n        // Wait for all events to be done\n      }\n    }\n  }\n\n  /**\n   * Hook callback to event\n   * @param {String} eventName Event name\n   * @param {Function} callback Callback function\n   * @param {Int} position Execution order\n   * @param {String} cycleName Cycle name\n   */\n  add (eventName, callback, position = 10, cycleName = null) {\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.push({\n        callback: callback,\n        position: position,\n        cycle: cycleName\n      })\n    }\n  }\n\n  /**\n   * Detach callback from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {String} cycleName Cycle name\n   */\n  remove (eventName, callback, cycleName = null) {\n    const self = this\n\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.forEach((event, index) => {\n        if (event.callback === callback && event.cycle === cycleName) {\n          delete self.events[eventName].callbacks[index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Call hooked callbacks\n   * @param {String} cycleName Cycle name\n   * @param {String} eventName Event name\n   */\n  do (cycleName, eventName) {\n    this.events[eventName].done = 0\n\n    // Call hooked callbacks\n    if (this.events[eventName].callbacks.length > 0) {\n      if (this.debug) {\n        console.log('Do event: ' + eventName + ' (' + cycleName + ' cycle)')\n      }\n\n      Emitter.emit(Helpers.toCamelCase('before-' + eventName))\n\n      const callbacks = this.events[eventName].callbacks.sort((a, b) => {\n        return a.position - b.position\n      })\n\n      callbacks.forEach(object => {\n        if (object.cycle === null || object.cycle === cycleName) {\n          object.callback(() => this.done(cycleName, eventName), cycleName)\n        } else {\n          this.done(cycleName, eventName)\n        }\n      })\n    } else {\n      this.done(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Count done action\n   * @param {String} eventName Event name\n   */\n  done (cycleName, eventName) {\n    this.events[eventName].done++\n\n    if (this.debug) {\n      console.log('Done event: ' + eventName + ' ' + this.events[eventName].done + '/' + this.events[eventName].callbacks.length + ' (' + cycleName + ' cycle)')\n    }\n\n    // All callback are done, call next action\n    if (this.events[eventName].done >= this.events[eventName].callbacks.length) {\n      Emitter.emit(Helpers.toCamelCase('after-' + eventName), cycleName)\n\n      this.next(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Enable debug\n   * @param {Boolean} value Enable debug\n   */\n  enableDebug (value = true) {\n    this.debug = value\n  }\n}\n\nexport default new LifeCycle()\n","import LifeCycle from './LifeCycle'\nimport Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass Luge {\n  /**\n   * Constructor\n   */\n  constructor () {\n    // Options\n    this.settings = Helpers.deepFreeze({\n      cursor: {\n        inertia: 1,\n        trailLength: 10\n      },\n      intersection: {\n        threshold: 0.3\n      },\n      lottie: {\n        renderer: 'svg',\n        subFrame: true\n      },\n      mouse: {\n        inertia: 0.1\n      },\n      parallax: {\n        inertia: 0.1\n      },\n      preloader: {\n        duration: 0\n      },\n      reveal: {\n        stagger: 0.1,\n        threshold: 0.15\n      },\n      scroll: {\n        inertia: 0.1,\n        start: 1,\n        end: 0\n      },\n      smooth: {\n        inertia: 0.1\n      },\n      ticker: {\n        external: false\n      },\n      transition: {\n        reload: false\n      },\n      credits: {\n        show: true\n      }\n    })\n\n    // Timeouts\n    this.timeouts = {\n      resizeThrottle: null,\n      scrollEnd: null\n    }\n\n    // Viewport size\n    this.windowWidth = 1\n    this.windowHeight = 1\n    this.clientWidth = 1\n\n    // Scroll\n    window.scrollTop = window.scrollY\n    window.unifiedScrollTop = window.scrollTop\n    window.maxScrollTop = 1\n    window.scrollProgress = 0\n    this.previousScrollTop = window.scrollY\n    this.isScrolling = false\n\n    // Mouse\n    window.mouseX = -1\n    window.mouseY = -1\n    window.mouseLastScrollTop = 0\n\n    LifeCycle.add('siteInit', this.siteInit.bind(this), 999)\n    Emitter.once('afterPageLoad', this.afterPageLoad.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set settings\n   */\n  setSettings (settings) {\n    this.settings = Helpers.deepFreeze(Helpers.mergeDeep(this.settings, settings))\n  }\n\n  /**\n   * Site initialization\n   * @param {Function} done Done function\n   */\n  siteInit (done) {\n    this.showCredits()\n\n    this.setCSSProperties()\n\n    this.scrollHandler()\n\n    done()\n  }\n\n  /**\n   * After page load\n   */\n  afterPageLoad () {\n    this.setCSSProperties()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    window.addEventListener('mousemove', this.mouseHandler.bind(this), { passive: true })\n    window.addEventListener('resize', this.resizeThrottle.bind(this))\n    window.addEventListener('scroll', this.scrollHandler.bind(this), { passive: true })\n  }\n\n  /**\n   * Mouse handler\n   * @param {Event} e Mouse event\n   */\n  mouseHandler (e) {\n    const mouseX = e.pageX\n    const mouseY = e.pageY - window.scrollTop\n\n    window.mouseX = mouseX\n    window.mouseY = mouseY\n\n    Emitter.emit('mouseMove', e)\n  }\n\n  /**\n   * Resize throttle\n   */\n  resizeThrottle () {\n    clearTimeout(this.timeouts.resizeThrottle)\n    this.timeouts.resizeThrottle = setTimeout(this.resizeHandler.bind(this), 200)\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.setCSSProperties()\n\n    Emitter.emit('resize')\n  }\n\n  /**\n   * Set CSS propertiers\n   */\n  setCSSProperties () {\n    // Pass window widths to CSS\n    this.windowWidth = window.innerWidth\n    this.clientWidth = document.documentElement.clientWidth\n\n    // Pass window height to CSS\n    this.windowHeight = window.innerHeight\n    this.clientHeight = document.documentElement.clientHeight\n\n    requestAnimationFrame(() => {\n      document.documentElement.style.setProperty('--vw', (this.windowWidth * 0.01) + 'px')\n      document.documentElement.style.setProperty('--cw', (this.clientWidth * 0.01) + 'px')\n\n      document.documentElement.style.setProperty('--vh', (this.windowHeight * 0.01) + 'px')\n      document.documentElement.style.setProperty('--ch', (this.clientHeight * 0.01) + 'px')\n    })\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    if (!this.isScrolling) {\n      this.scrollStart()\n    }\n\n    clearTimeout(this.timeouts.scrollEnd)\n    this.timeouts.scrollEnd = setTimeout(this.scrollEnd.bind(this), 200)\n\n    if (!window.hasSmoothScroll) {\n      this.updateScroll()\n    }\n  }\n\n  /**\n   * Update scroll\n   */\n  updateScroll () {\n    window.scrollTop = window.scrollY\n\n    // Backward compatibility\n    window.unifiedScrollTop = window.scrollTop\n\n    this.previousScrollTop = window.scrollTop\n    window.scrollProgress = window.scrollTop / window.maxScrollTop\n\n    Emitter.emit('scroll')\n  }\n\n  /**\n   * Scroll start\n   */\n  scrollStart () {\n    this.isScrolling = true\n\n    document.documentElement.classList.add('is-scrolling')\n\n    Emitter.emit('scrollStart')\n  }\n\n  /**\n   * Scroll end\n   */\n  scrollEnd () {\n    this.isScrolling = false\n\n    document.documentElement.classList.remove('is-scrolling')\n\n    Emitter.emit('scrollEnd')\n  }\n\n  /**\n   * Show credits\n   */\n  showCredits () {\n    if (this.settings.credits.show) {\n      // Output version\n      const consoleBaseStyle = 'background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; '\n      const consoleBoldStyle = consoleBaseStyle + 'font-weight: bold; '\n      const consoleWhiteStyle = 'color: black; font: 400 1em monospace; padding: 0.5em 0; '\n\n      const VERSION = VERSION_WIN.includes('npm') ? VERSION_BASH : VERSION_WIN\n      console.log('%c powered by %cluge%c / ' + VERSION + ' %c > https://luge.cool ', consoleBaseStyle, consoleBoldStyle, consoleBaseStyle, consoleWhiteStyle)\n    }\n  }\n}\n\nexport default new Luge()\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nexport default class Plugin {\n  /**\n   * Constructor\n   */\n  constructor (slug) {\n    this.pluginSlug = slug\n\n    LifeCycle.add('siteInit', this.beforeInit.bind(this), 5)\n  }\n\n  /**\n   * Before init\n   */\n  beforeInit (done) {\n    this.isDisabled = this.disabled()\n\n    if (this.isDisabled) {\n      document.documentElement.classList.add('lg-' + this.pluginSlug + '-disabled')\n    } else {\n      this.init()\n    }\n\n    done()\n  }\n\n  /**\n   * Init plugin\n   */\n  init () {\n    this.setAttributes()\n  }\n\n  /**\n   * Check if feature is disabled\n   */\n  disabled () {\n    return !!(Luge.settings[this.pluginSlug] || {}).disabled\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {}\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const attributes = this.pluginAttributes\n    const data = {}\n\n    for (const name in attributes) {\n      const attribute = attributes[name]\n      let attributeKey = 'lg-' + this.pluginSlug\n      if (name !== 'root') {\n        attributeKey += '-' + name\n      }\n\n      attributeKey = Helpers.toCamelCase(attributeKey)\n      const attributeValue = element.dataset[attributeKey]\n\n      let type, value, defaultValue\n\n      if (typeof attribute === 'object') {\n        type = attribute[0]\n        defaultValue = attribute[1]\n      } else {\n        type = attribute\n      }\n\n      if (attributeValue === undefined && defaultValue !== undefined) {\n        value = type(defaultValue)\n      } else if (attributeValue === undefined && type === Boolean) {\n        value = false\n      } else if (attributeValue !== undefined) {\n        if (type === Boolean) {\n          value = (attributeValue !== 'false')\n        } else {\n          value = type(attributeValue)\n        }\n      } else {\n        value = undefined\n      }\n\n      data[name] = value\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge[this.pluginSlug] = data\n    }\n\n    return data\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class PreLoader extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('preloader')\n\n    this.luge = luge\n\n    this.intro = false\n    this.playerIn = false\n    this.startTime = Date.now()\n    this.doneLoad = null\n\n    luge.preloader = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.el = document.querySelector('[data-lg-preloader]')\n\n    if (this.el) {\n      this.attributes = this.getAttributes(this.el)\n\n      this.el.classList.add('lg-preloader', 'lg-preloader--' + this.attributes.root)\n\n      this.initLottie()\n\n      this.luge.lifecycle.add('siteIn', this.siteIn.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: [String, ''],\n      duration: [Number, this.luge._settings.preloader.duration],\n      in: String,\n      reverse: Boolean\n    }\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    if (this.attributes && this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Intro animation\n   * @param {Function} done Done function\n   */\n  siteIn (done) {\n    const elapsed = (Date.now() - this.startTime) / 1000\n    const remaining = this.attributes.duration - elapsed\n\n    if (remaining <= 0) {\n      const clear = this.clear.bind(this, done)\n\n      if (this.playerIn) {\n        this.playerIn.play()\n\n        this.playerIn.addEventListener('complete', clear, { once: true })\n      } else {\n        if (typeof this.intro === 'function') {\n          this.intro(done, this.remove.bind(this))\n        } else {\n          const duration = window.getComputedStyle(this.el).getPropertyValue('transition-duration')\n\n          if (duration !== '' && duration !== '0s') {\n            this.el.addEventListener('transitionend', clear, { once: true })\n            this.el.classList.add('is-hidden')\n          } else {\n            clear()\n          }\n        }\n      }\n    } else {\n      setTimeout(this.siteIn.bind(this, done), remaining * 1000)\n    }\n  }\n\n  /**\n   * Clear preloader\n   * @param {Function} done Done callback\n   */\n  clear (done) {\n    if (this.playerIn) {\n      this.playerIn.destroy()\n    }\n\n    this.remove()\n\n    done()\n  }\n\n  /**\n   * Remove preloader from done\n   */\n  remove (done) {\n    this.el.parentNode.removeChild(this.el)\n    this.el = null\n  }\n\n  /**\n   * Add intro animation\n   * @param {Function} callback Callback function\n   */\n  add (callback) {\n    this.intro = callback\n  }\n\n  /**\n   * Init lottie\n   */\n  initLottie () {\n    const self = this\n\n    if (this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      const animIn = this.attributes.in\n      let playerIn = false\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: this.el,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (this.attributes.reverse) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      playerIn.addEventListener('DOMLoaded', () => {\n        if (self.attributes.reverse) {\n          playerIn.goToAndStop(playerIn.totalFrames - 1, true)\n        }\n\n        self.el.setAttribute('style', '')\n\n        if (typeof self.doneLoad === 'function') {\n          self.doneLoad()\n          self.doneLoad = null\n        }\n      }, { once: true })\n\n      this.playerIn = playerIn\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Reveal extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('reveal')\n\n    this.luge = luge\n\n    this.elements = []\n    this.toRevealIn = []\n    this.toRevealOut = []\n    this.removed = []\n\n    this.reveals = {\n      in: {},\n      out: {}\n    }\n    this.canReveal = false\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.reveal = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 11)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n    this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    super.setAttributes()\n\n    this.pluginAttributes = {\n      root: String,\n      disable: String,\n      stagger: String,\n      manual: [Boolean, false],\n      multiple: Boolean,\n      delay: [Number, 0]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.stagger !== undefined && data.stagger === '') {\n      data.stagger = this.luge._settings.reveal.stagger\n    } else if (data.stagger === undefined) {\n      data.stagger = false\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('resize', this.resizeHandler, this)\n    this.luge.emitter.on('scroll', this.scrollHandler, this)\n    this.luge.emitter.on('update', this.updateHandler, this)\n    this.luge.emitter.on('afterScrollUpdate', this.afterScrollUpdateHandler, this)\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-reveal]')\n    const self = this\n\n    elements.forEach(element => {\n      const attributes = this.getAttributes(element)\n\n      const disable = attributes.disable\n      let enable = true\n\n      const browser = (this.luge.browser || {})\n\n      if (disable && browser.is) {\n        if ((disable === 'desktop' && browser.is('desktop')) ||\n            (disable === 'handheld' && !browser.is('desktop')) ||\n            (disable === 'mobile' && browser.is('mobile')) ||\n            (disable === 'tablet' && browser.is('tablet'))) {\n          enable = false\n        }\n      }\n\n      if (enable) {\n        self.addElement(element)\n      } else {\n        element.setAttribute('data-lg-reveal-disabled', '')\n      }\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      // Don't add child elements\n      if (!attributes.stagger && element.closest('[data-lg-reveal-stagger]') !== null) {\n        return\n      }\n\n      const revealName = attributes.root\n      element.luge.reveal.name = Helpers.toCamelCase(revealName)\n\n      if (!attributes.manual) {\n        this.luge.scrollobserver.add(element)\n\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n      } else {\n        element.luge.reveal.in = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'in')\n          this.setRevealClasses(element, 'is-in')\n        }\n\n        element.luge.reveal.out = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'out')\n          this.setRevealClasses(element, 'is-out')\n        }\n      }\n\n      element.luge.reveal.delay = attributes.delay * 1000\n\n      if (attributes.stagger) {\n        Array.from(element.children).forEach(child => {\n          const childRevealName = child.dataset.lgReveal\n\n          child.style.transition = 'none'\n          this.luge.ticker.nextTick(() => {\n            child.style.transition = ''\n          })\n\n          child.classList.add('lg-reveal', 'is-out')\n\n          if (childRevealName || revealName) {\n            child.classList.add('lg-reveal--' + (childRevealName ?? revealName))\n          }\n\n          child.dataset.lgRevealChild = ''\n          if (child.luge || (child.luge = {})) {\n            child.luge.reveal = {\n              isRevealed: false\n            }\n          }\n        })\n      } else {\n        element.style.transition = 'none'\n        this.luge.ticker.nextTick(() => {\n          element.style.transition = ''\n        })\n\n        element.classList.add('lg-reveal', 'is-out')\n\n        if (revealName) {\n          element.classList.add('lg-reveal--' + revealName)\n        }\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element, single = false) {\n    this.luge.scrollobserver.remove(element)\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (single && this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n      this.removed.push(element)\n    } else if (!single) {\n      this.removed.push(element)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.canReveal = false\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    this.elements = []\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    this.checkElement(element)\n  }\n\n  /**\n   * Check elements state\n   */\n  checkElements () {\n    const threshold = this.luge._settings.reveal.threshold\n\n    this.elements.forEach(element => {\n      let state = ''\n\n      if (element.scrollProgress >= threshold && element.scrollProgress <= (1 - threshold)) {\n        state = 'is-in'\n      } else if ((element.scrollProgress < threshold || (element.scrollProgress > (1 - threshold) && element.scrollEnd < Math.round(window.unifiedScrollTop)))) {\n        state = 'is-out'\n      }\n\n      if (state !== '') {\n        this.setRevealClasses(element, state)\n        el.luge.reveal.isRevealed = (state === 'is-in')\n      }\n    })\n  }\n\n  /**\n   * Check element\n   * @param {HTMLElement} element\n   */\n  checkElement (element) {\n    const threshold = this.luge._settings.reveal.threshold\n    if (((element.scrollStart < 0 && Math.abs(element.scrollStart) / window.safeHeight) >= threshold) || (element.scrollProgress >= threshold && element.scrollProgress <= (1 - threshold) && !element.luge.reveal.isRevealed)) {\n      if (this.toRevealOut.includes(element)) {\n        this.toRevealOut.splice(this.toRevealOut.indexOf(element), 1)\n      }\n\n      if (!this.toRevealIn.includes(element)) {\n        this.toRevealIn.push(element)\n      }\n    } else if ((element.scrollProgress < threshold || (element.scrollProgress > (1 - threshold) && element.scrollEnd < Math.round(window.unifiedScrollTop))) && element.luge.reveal.isRevealed) {\n      if (this.toRevealIn.includes(element)) {\n        this.toRevealIn.splice(this.toRevealIn.indexOf(element), 1)\n      }\n\n      if (!this.toRevealOut.includes(element)) {\n        this.toRevealOut.push(element)\n      }\n    }\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.canReveal = true\n\n    this.elements.forEach(element => {\n      if (element.scrollStart < 0) {\n        if (!this.toRevealIn.includes(element)) {\n          this.toRevealIn.push(element)\n        }\n      }\n    })\n\n    this.revealElements()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Sroll handler\n   */\n  scrollHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * After scroll update handler\n   */\n  afterScrollUpdateHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Reveal elements\n   */\n  revealElements () {\n    const self = this\n\n    if (this.canReveal) {\n      let revealInTimeout = 0\n\n      this.toRevealIn.forEach(element => {\n        if (this.removed.includes(element)) {\n          return\n        }\n\n        const delay = true\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        revealInTimeout += element.luge.reveal.delay\n\n        setTimeout(function () {\n          self.revealCallback(element, revealName, 'in')\n\n          if (element.luge.reveal.stagger) {\n            Array.from(element.children).forEach((child, index) => {\n              const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n              setTimeout(() => {\n                if (childRevealName || revealName) {\n                  self.revealCallback(child, (childRevealName ?? revealName), 'in')\n                }\n\n                self.setRevealClasses(child, 'is-in')\n              }, index * element.luge.reveal.stagger * 1000)\n            })\n          } else {\n            self.setRevealClasses(element, 'is-in')\n          }\n        }, delay ? revealInTimeout : 0)\n\n        if (delay) {\n          revealInTimeout += this.luge._settings.reveal.stagger * 1000\n        }\n\n        if (!element.luge.reveal.multiple) {\n          self.removeElement(element, true)\n        }\n      })\n\n      this.toRevealOut.forEach(element => {\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        if (element.luge.reveal.isRevealed !== undefined) {\n          self.revealCallback(element, revealName, 'out')\n        }\n\n        let state = ''\n        if (element.scrollProgress > 0.5) {\n          state = 'is-out is-out-top'\n        } else {\n          state = 'is-out is-out-bottom'\n        }\n\n        if (element.luge.reveal.stagger) {\n          Array.from(element.children).forEach((child, index) => {\n            const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n            setTimeout(() => {\n              if (childRevealName || revealName) {\n                self.revealCallback(child, (childRevealName ?? revealName), 'out')\n              }\n\n              self.setRevealClasses(child, state)\n            }, index * element.luge.reveal.stagger * 1000)\n          })\n        } else {\n          self.setRevealClasses(element, state)\n        }\n      })\n\n      this.toRevealIn = []\n      this.toRevealOut = []\n    }\n  }\n\n  /**\n   * Set reveal classes\n   * @param {HTMLElement} el Element\n   * @param {String} states Reveal states\n   */\n  setRevealClasses (el, states) {\n    states = states.split(' ')\n\n    el.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    states.forEach(state => {\n      el.classList.add(state)\n    })\n  }\n\n  /**\n   * Call reveal callback\n   * @param {HTMLElement} el Element\n   */\n  revealCallback (el, name, type) {\n    el.dispatchEvent(new CustomEvent('reveal' + type))\n    el.luge.reveal.isRevealed = (type === 'in')\n\n    if (typeof this.reveals[type][name] === 'function') {\n      this.reveals[type][name](el)\n    } else if (typeof el['onreveal' + type] === 'function') {\n      el['onreveal' + type]()\n    }\n  }\n\n  /**\n   * Add reveal animation\n   * @param {String} type Reveal type (in | out)\n   * @param {String} revealName Reveal animation name\n   * @param {Function} callback Callback function\n   */\n  add (type, revealName, callback) {\n    if (this.reveals[type]) {\n      revealName = Helpers.toCamelCase(revealName)\n\n      if (this.reveals[type][revealName]) {\n        console.log('Reveal animation named ' + revealName + ' already exists.')\n      } else {\n        this.reveals[type][revealName] = callback\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Transition extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('transition')\n\n    this.luge = luge\n\n    this.url = window.location.href\n    this.oldUrl = window.location.href\n    this.pathname = window.location.pathname\n    this.pageFetched = null\n    this.currentPage = null\n    this.reload = this.luge._settings.transition.reload\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.transitions = {\n      in: {},\n      out: {}\n    }\n\n    this.linkTransition = false\n\n    this.listeners = { linkHandler: this.linkHandler.bind(this) }\n\n    luge.transition = {\n      add: this.add.bind(this),\n      getOldUrl: this.getOldUrl.bind(this),\n      getNewUrl: this.getNewUrl.bind(this),\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    this.currentPage = document.querySelector('[data-lg-page]')\n    if (this.currentPage) {\n      this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n    }\n\n    this.initLoader()\n\n    if (!this.reload) {\n      window.addEventListener('popstate', this.historyStateChanged.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageFetch', this.pageFetch.bind(this))\n    this.luge.lifecycle.add('pageOut', this.pageOut.bind(this))\n    this.luge.lifecycle.add('pageIn', this.pageIn.bind(this), 10, 'transition')\n    this.luge.lifecycle.add('pageCreate', this.pageCreate.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this), 999, 'transition')\n\n    this.luge.emitter.on('update', this.updateHandler.bind(this))\n  }\n\n  /**\n   * Bind links event\n   */\n  bindLinksEvent () {\n    if (document.querySelector('[data-lg-page]')) {\n      document.querySelectorAll('a').forEach(el => {\n        el.addEventListener('click', this.listeners.linkHandler)\n      })\n    }\n  }\n\n  /**\n   * Unbind links handler\n   */\n  unbindLinksEvent () {\n    document.querySelectorAll('a').forEach(el => { el.removeEventListener('click', this.listeners.linkHandler) })\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.unbindLinksEvent()\n    this.bindLinksEvent()\n  }\n\n  /**\n   * Link handler\n   * @param {Event} e Mouse event\n   */\n  linkHandler (e) {\n    const element = e.currentTarget\n    const href = element.getAttribute('href')\n\n    if (href &&\n      href.indexOf('#') !== 0 &&\n      href.indexOf('tel') !== 0 &&\n      href.indexOf('mailto') !== 0 &&\n      !element.closest('#wpadminbar') &&\n      element.getAttribute('data-lg-transition') !== 'disabled' &&\n      element.getAttribute('target') !== '_blank') {\n      // Check if it's an internal URL\n      if (href.indexOf(window.location.origin) === 0 ||\n          href.indexOf('/') === 0 ||\n          href.indexOf('/') === -1) {\n        e.preventDefault()\n\n        if (window.location.href === href) {\n          return\n        }\n\n        if (element.hasAttribute('data-lg-transition')) {\n          this.linkTransition = {\n            name: Helpers.toCamelCase(element.getAttribute('data-lg-transition')),\n            element: element\n          }\n        } else {\n          this.linkTransition = false\n        }\n\n        this.navigateTo(href)\n      }\n    }\n  }\n\n  /**\n   * Navigate to page\n   * @param {URL} url New page URL\n   */\n  navigateTo (url) {\n    this.oldUrl = this.url\n    this.url = url\n\n    if (this.reload) {\n      // Prefetch new URL\n      const prefetchLink = document.createElement('link')\n      prefetchLink.rel = 'prefetch'\n      prefetchLink.href = url\n      document.head.appendChild(prefetchLink)\n\n      // Change URL after pageOut\n      this.luge.lifecycle.add('siteReload', (done) => {\n        window.location = url\n      })\n\n      // Call cycle\n      this.luge.lifecycle._cycle('reload')\n    } else {\n      this.luge.lifecycle._cycle('transition')\n    }\n  }\n\n  /**\n   * Page init\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.bindLinksEvent()\n\n    done()\n  }\n\n  /**\n   * Init loader\n   */\n  initLoader () {\n    const loader = document.querySelector('[data-lg-loader]')\n\n    if (loader) {\n      loader.style.transition = 'none'\n      loader.classList.add('lg-loader', 'lg-loader--' + loader.getAttribute('data-lg-loader'))\n      this.luge.ticker.nextTick(() => {\n        loader.style.transition = ''\n      })\n    }\n\n    if (loader && loader.getAttribute('data-lg-loader') === 'lottie' && typeof lottie === 'object') {\n      const animOut = loader.getAttribute('data-lg-loader-out')\n      let playerOut = false\n      let animIn = loader.getAttribute('data-lg-loader-in')\n      let playerIn = false\n\n      if (animOut) {\n        playerOut = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animOut,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n      }\n\n      if (animIn === 'reverse') {\n        animIn = animOut\n      }\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (animIn === animOut) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      loader.playerOut = playerOut\n      loader.playerIn = playerIn\n    }\n  }\n\n  /**\n   * Fetch\n   * @param {Function} done Done function\n   */\n  pageFetch (done) {\n    const self = this\n\n    if (this.url) {\n      fetch(this.url, { credentials: 'include' })\n        .then(function (response) {\n          return response.text()\n        }).then(function (body) {\n          self.pageFetched = body\n\n          done()\n        })\n    }\n  }\n\n  /**\n   * Page create\n   * @param {Function} done Done function\n   */\n  pageCreate (done) {\n    // Convert data to HTML\n    const html = new DOMParser().parseFromString(this.pageFetched, 'text/html')\n\n    // Get containers\n    const newPage = html.querySelector('[data-lg-page]')\n\n    if (newPage) {\n      // Switch containers\n      this.currentPage.insertAdjacentElement('beforebegin', newPage)\n\n      newPage.style.opacity = 0\n\n      this.currentPage.style.opacity = 0\n      this.currentPage.style.position = 'absolute'\n      this.currentPage.style.top = 0\n      this.currentPage.style.left = '-999em'\n      this.currentPage.style.width = '100%'\n\n      // Switch classes\n      document.querySelector('body').className = html.querySelector('body').className\n\n      // Switch metas\n      document.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        element.parentNode.removeChild(element)\n      })\n      html.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        document.querySelector('head title').insertAdjacentElement('afterend', element)\n      })\n\n      // Set title\n      const oldTitle = document.querySelector('head title')\n      const newTitle = html.querySelector('head title')\n\n      if (oldTitle && newTitle) {\n        oldTitle.innerText = newTitle.innerText\n      }\n    } else {\n      // Force reload when no page is found\n      window.location = this.url\n      return\n    }\n\n    // Reset scroll\n    window.scroll({\n      top: this.newScrollTop,\n      left: 0,\n      behavior: 'instant'\n    })\n    window.scrollTop = 0\n    window.smoothScrollTop = 0\n    window.unifiedScrollTop = 0\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.luge.emitter.emit('pageTransition', html)\n\n    // Change page url\n    history.pushState(null, null, this.url)\n\n    done()\n  }\n\n  /**\n   * Page kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const oldPage = this.currentPage\n    oldPage.parentNode.removeChild(oldPage)\n\n    this.currentPage = document.querySelector('[data-lg-page]')\n\n    // Fallback to reload if no page is found\n    if (!this.currentPage) {\n      window.location = this.url\n      return\n    }\n\n    this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n\n    done()\n  }\n\n  /**\n   * Page out\n   * @param {Function} done Done function\n   */\n  pageOut (done) {\n    const self = this\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n      let element = null\n\n      if (this.linkTransition && typeof this.transitions.out[this.linkTransition.name] === 'function') {\n        transition = this.transitions.out[this.linkTransition.name]\n        element = this.linkTransition.element\n\n        // Reset link transition\n        this.linkTransition = false\n      } else if (typeof this.transitions.out[pageName] === 'function') {\n        transition = this.transitions.out[pageName]\n      } else if (typeof page.onpageout === 'function') {\n        transition = page.onpageout\n      } else if (typeof this.transitions.out.default === 'function') {\n        transition = this.transitions.out.default\n      }\n\n      if (transition) {\n        transition(page, done, element)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader) {\n          if (loader.playerOut) {\n            loader.playerOut.stop()\n            loader.playerOut.renderer.svgElement.style.opacity = 1\n            loader.playerOut.play()\n\n            loader.playerOut.addEventListener('complete', () => {\n              if (!self.reload) {\n                loader.playerOut.renderer.svgElement.style.opacity = ''\n              }\n\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n          }\n\n          loader.classList.add('is-visible')\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n\n    this.unbindLinksEvent()\n  }\n\n  /**\n   * Page in\n   * @param {Function} done Done function\n   */\n  pageIn (done) {\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      page.style.opacity = ''\n\n      if (typeof this.transitions.in[pageName] === 'function') {\n        transition = this.transitions.in[pageName]\n      } else if (typeof page.onpagein === 'function') {\n        transition = page.onpagein\n      } else if (typeof this.transitions.in.default === 'function') {\n        transition = this.transitions.in.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader && loader.classList.contains('is-visible')) {\n          if (loader.playerIn) {\n            loader.playerIn.stop()\n            loader.playerIn.renderer.svgElement.style.opacity = 1\n            if (loader.getAttribute('data-lg-loader-in') === 'reverse') {\n              loader.playerIn.goToAndPlay(loader.playerIn.totalFrames, true)\n            } else {\n              loader.playerIn.play()\n            }\n\n            loader.playerIn.addEventListener('complete', () => {\n              loader.playerIn.renderer.svgElement.style.opacity = ''\n              loader.classList.remove('is-visible')\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n\n            loader.classList.remove('is-visible')\n          }\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * History change\n   */\n  historyStateChanged () {\n    let url = ''\n    if (this.url.indexOf(window.location.origin) === 0) {\n      url = new URL(this.url)\n    } else {\n      url = new URL(window.location.origin + this.url)\n    }\n\n    if (url.pathname !== window.location.pathname) {\n      this.prevScrollTop = window.scrollY\n\n      this.luge.ticker.nextTick(() => {\n        this.newScrollTop = window.scrollY\n\n        window.scroll({\n          top: this.prevScrollTop,\n          left: 0,\n          behavior: 'instant'\n        })\n      })\n\n      this.navigateTo(window.location.href)\n    }\n  }\n\n  /**\n   * Add transition animation\n   * @param {String} type Transition type (in | out)\n   * @param {Function} callback Callback function\n   * @param {String} pageName Page name\n   */\n  add (type, pageName = 'default', callback) {\n    if (this.transitions[type]) {\n      pageName = Helpers.toCamelCase(pageName)\n\n      if (!this.transitions[type][pageName]) {\n        this.transitions[type][pageName] = callback\n      }\n    }\n  }\n\n  /**\n   * Get old URL\n   * @returns {String} Old URL\n   */\n  getOldUrl () {\n    return this.oldUrl\n  }\n\n  /**\n   * Get new URL\n   * @returns {String} New URL\n   */\n  getNewUrl () {\n    return this.url\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class ScrollAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('scroll')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Properties\n    this.allowedProperties = [\n      'opacity',\n      'background-x',\n      'background-y'\n    ]\n\n    this.transformProperties = [\n      'x',\n      'y',\n      'z',\n      'translate3d',\n      'rotate',\n      'rotateX',\n      'rotateY',\n      'rotateZ',\n      'scale',\n      'scaleX',\n      'scaleY',\n      'scaleZ'\n    ]\n\n    // Presets\n    this.presets = {\n      'background-x': {\n        'background-x': ['0%', '100%']\n      },\n      'background-y': {\n        'background-y': ['0%', '100%']\n      }\n    }\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      yoyo: Boolean,\n      inertia: [String, this.luge._settings.scroll.inertia],\n      animate: String,\n      start: [Number, this.luge._settings.scroll.start],\n      end: [Number, this.luge._settings.scroll.end]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-scroll]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      this.luge.scrollobserver.add(element, attributes.start, attributes.end)\n\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n\n      // Set values\n      const scrollAnimation = {}\n\n      // Smooth progress\n      scrollAnimation.smoothProgress = (element.scrollProgress !== undefined ? element.scrollProgress : 0)\n\n      // Yoyo\n      scrollAnimation.yoyo = attributes.yoyo\n\n      // Inertia\n      scrollAnimation.inertia = attributes.inertia\n\n      // Get properties\n      let properties = false\n\n      if (attributes.animate !== undefined) {\n        properties = JSON.parse(attributes.animate.replace(/'/g, '\"'))\n      } else if (this.presets[attributes.root]) {\n        properties = this.presets[attributes.root]\n      }\n\n      if (properties) {\n        const declarations = {}\n\n        for (const property in properties) {\n          if (this.allowedProperties.includes(property) ||\n              this.transformProperties.includes(property)) {\n            const values = properties[property]\n            let fromValue = String(values[0])\n            let toValue = String(values[1])\n\n            let unit = fromValue.match(/\\d+([a-zA-Z%]+)/m)\n            if (unit) {\n              unit = unit[1]\n            } else if (property.indexOf('rotate') === 0) {\n              unit = 'deg'\n            }\n\n            fromValue = Number(fromValue.replace(unit, ''))\n            toValue = Number(toValue.replace(unit, ''))\n\n            let safeProperty = property\n            if (property === 'background-x') {\n              safeProperty = 'background-position-x'\n            } else if (property === 'background-y') {\n              safeProperty = 'background-position-y'\n            }\n\n            declarations[safeProperty] = {\n              from: fromValue,\n              to: toValue,\n              current: fromValue,\n              unit: unit\n            }\n          }\n        }\n\n        scrollAnimation.properties = declarations\n      }\n\n      element.luge.scroll.animation = scrollAnimation\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    this.luge.scrollobserver.remove(element)\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    this.elements = []\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.luge.scroll.animation.atDest = false\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    for (const element of this.elements) {\n      // Early break if at dest\n      if (element.luge.scroll.animation.atDest) {\n        continue\n      }\n\n      // Yoyo\n      let progress = element.scrollProgress\n      if (element.luge.scroll.yoyo) {\n        progress = 1 - Math.abs(1 - progress * 2)\n      }\n\n      element.luge.scroll.animation.smoothProgress += (progress - element.luge.scroll.animation.smoothProgress) * (1 - element.luge.scroll.inertia)\n\n      if (element.luge.scroll.animation.properties) {\n        const declarations = {}\n\n        for (const [key, property] of Object.entries(element.luge.scroll.animation.properties)) {\n          property.current = property.from + (property.to - property.from) * element.luge.scroll.animation.smoothProgress\n\n          if (['x', 'y', 'z'].includes(key)) {\n            if (declarations.translate3d || (declarations.translate3d = {})) {\n              declarations.translate3d[key] = property.current + property.unit\n            }\n          } else {\n            declarations[key] = property.current + property.unit\n          }\n        }\n\n        // Handle transform shorthand\n        const transform = []\n        for (const [key, property] of Object.entries(declarations)) {\n          if (this.transformProperties.includes(key)) {\n            // Convert object style property value to string\n            if (typeof property === 'object') {\n              if (key === 'translate3d') {\n                const value = Object.assign({ x: 0, y: 0, z: 0 }, property)\n\n                property.string = value.x + ', ' + value.y + ', ' + value.z\n              } else {\n                property.string = Object.values(property).join(', ')\n              }\n            }\n\n            transform.push(key + '(' + (typeof property !== 'object' ? property : property.string) + ')')\n          }\n        }\n\n        // Create style rule\n        const styles = {}\n        const willChange = []\n\n        if (transform.length > 0) {\n          styles.transform = transform.join(' ')\n          willChange.push('transform')\n        }\n\n        for (const [key, property] of Object.entries(declarations)) {\n          if (!this.transformProperties.includes(key)) {\n            styles[key] = property\n            willChange.push(key)\n          }\n        }\n\n        for (const [key, property] of Object.entries(styles)) {\n          element.style.setProperty(key, property)\n        }\n\n        element.style.setProperty('will-change', willChange.join(', '))\n      } else {\n        const diff = Math.round((element.scrollProgress - element.luge.scroll.animation.smoothProgress) * 1000) / 1000\n\n        element.style.setProperty('--progress', element.luge.scroll.animation.smoothProgress)\n        element.style.setProperty('--abs-diff', Math.abs(diff))\n        element.style.setProperty('--diff', diff)\n      }\n\n      // Block future style update if element is at destination\n      if (Math.abs(progress - element.luge.scroll.animation.smoothProgress) < 0.0001) {\n        element.luge.scroll.animation.atDest = true\n      }\n    }\n  }\n}\n","// package.json\nvar version = \"1.1.17\";\n\n// packages/core/src/maths.ts\nfunction clamp(min, input, max) {\n  return Math.max(min, Math.min(input, max));\n}\nfunction lerp(x, y, t) {\n  return (1 - t) * x + t * y;\n}\nfunction damp(x, y, lambda, deltaTime) {\n  return lerp(x, y, 1 - Math.exp(-lambda * deltaTime));\n}\nfunction modulo(n, d) {\n  return (n % d + d) % d;\n}\n\n// packages/core/src/animate.ts\nvar Animate = class {\n  isRunning = false;\n  value = 0;\n  from = 0;\n  to = 0;\n  currentTime = 0;\n  // These are instanciated in the fromTo method\n  lerp;\n  duration;\n  easing;\n  onUpdate;\n  /**\n   * Advance the animation by the given delta time\n   *\n   * @param deltaTime - The time in seconds to advance the animation\n   */\n  advance(deltaTime) {\n    if (!this.isRunning) return;\n    let completed = false;\n    if (this.duration && this.easing) {\n      this.currentTime += deltaTime;\n      const linearProgress = clamp(0, this.currentTime / this.duration, 1);\n      completed = linearProgress >= 1;\n      const easedProgress = completed ? 1 : this.easing(linearProgress);\n      this.value = this.from + (this.to - this.from) * easedProgress;\n    } else if (this.lerp) {\n      this.value = damp(this.value, this.to, this.lerp * 60, deltaTime);\n      if (Math.round(this.value) === this.to) {\n        this.value = this.to;\n        completed = true;\n      }\n    } else {\n      this.value = this.to;\n      completed = true;\n    }\n    if (completed) {\n      this.stop();\n    }\n    this.onUpdate?.(this.value, completed);\n  }\n  /** Stop the animation */\n  stop() {\n    this.isRunning = false;\n  }\n  /**\n   * Set up the animation from a starting value to an ending value\n   * with optional parameters for lerping, duration, easing, and onUpdate callback\n   *\n   * @param from - The starting value\n   * @param to - The ending value\n   * @param options - Options for the animation\n   */\n  fromTo(from, to, { lerp: lerp2, duration, easing, onStart, onUpdate }) {\n    this.from = this.value = from;\n    this.to = to;\n    this.lerp = lerp2;\n    this.duration = duration;\n    this.easing = easing;\n    this.currentTime = 0;\n    this.isRunning = true;\n    onStart?.();\n    this.onUpdate = onUpdate;\n  }\n};\n\n// packages/core/src/debounce.ts\nfunction debounce(callback, delay) {\n  let timer;\n  return function(...args) {\n    let context = this;\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      timer = void 0;\n      callback.apply(context, args);\n    }, delay);\n  };\n}\n\n// packages/core/src/dimensions.ts\nvar Dimensions = class {\n  constructor(wrapper, content, { autoResize = true, debounce: debounceValue = 250 } = {}) {\n    this.wrapper = wrapper;\n    this.content = content;\n    if (autoResize) {\n      this.debouncedResize = debounce(this.resize, debounceValue);\n      if (this.wrapper instanceof Window) {\n        window.addEventListener(\"resize\", this.debouncedResize, false);\n      } else {\n        this.wrapperResizeObserver = new ResizeObserver(this.debouncedResize);\n        this.wrapperResizeObserver.observe(this.wrapper);\n      }\n      this.contentResizeObserver = new ResizeObserver(this.debouncedResize);\n      this.contentResizeObserver.observe(this.content);\n    }\n    this.resize();\n  }\n  width = 0;\n  height = 0;\n  scrollHeight = 0;\n  scrollWidth = 0;\n  // These are instanciated in the constructor as they need information from the options\n  debouncedResize;\n  wrapperResizeObserver;\n  contentResizeObserver;\n  destroy() {\n    this.wrapperResizeObserver?.disconnect();\n    this.contentResizeObserver?.disconnect();\n    if (this.wrapper === window && this.debouncedResize) {\n      window.removeEventListener(\"resize\", this.debouncedResize, false);\n    }\n  }\n  resize = () => {\n    this.onWrapperResize();\n    this.onContentResize();\n  };\n  onWrapperResize = () => {\n    if (this.wrapper instanceof Window) {\n      this.width = window.innerWidth;\n      this.height = window.innerHeight;\n    } else {\n      this.width = this.wrapper.clientWidth;\n      this.height = this.wrapper.clientHeight;\n    }\n  };\n  onContentResize = () => {\n    if (this.wrapper instanceof Window) {\n      this.scrollHeight = this.content.scrollHeight;\n      this.scrollWidth = this.content.scrollWidth;\n    } else {\n      this.scrollHeight = this.wrapper.scrollHeight;\n      this.scrollWidth = this.wrapper.scrollWidth;\n    }\n  };\n  get limit() {\n    return {\n      x: this.scrollWidth - this.width,\n      y: this.scrollHeight - this.height\n    };\n  }\n};\n\n// packages/core/src/emitter.ts\nvar Emitter = class {\n  events = {};\n  /**\n   * Emit an event with the given data\n   * @param event Event name\n   * @param args Data to pass to the event handlers\n   */\n  emit(event, ...args) {\n    let callbacks = this.events[event] || [];\n    for (let i = 0, length = callbacks.length; i < length; i++) {\n      callbacks[i]?.(...args);\n    }\n  }\n  /**\n   * Add a callback to the event\n   * @param event Event name\n   * @param cb Callback function\n   * @returns Unsubscribe function\n   */\n  on(event, cb) {\n    this.events[event]?.push(cb) || (this.events[event] = [cb]);\n    return () => {\n      this.events[event] = this.events[event]?.filter((i) => cb !== i);\n    };\n  }\n  /**\n   * Remove a callback from the event\n   * @param event Event name\n   * @param callback Callback function\n   */\n  off(event, callback) {\n    this.events[event] = this.events[event]?.filter((i) => callback !== i);\n  }\n  /**\n   * Remove all event listeners and clean up\n   */\n  destroy() {\n    this.events = {};\n  }\n};\n\n// packages/core/src/virtual-scroll.ts\nvar LINE_HEIGHT = 100 / 6;\nvar listenerOptions = { passive: false };\nvar VirtualScroll = class {\n  constructor(element, options = { wheelMultiplier: 1, touchMultiplier: 1 }) {\n    this.element = element;\n    this.options = options;\n    window.addEventListener(\"resize\", this.onWindowResize, false);\n    this.onWindowResize();\n    this.element.addEventListener(\"wheel\", this.onWheel, listenerOptions);\n    this.element.addEventListener(\n      \"touchstart\",\n      this.onTouchStart,\n      listenerOptions\n    );\n    this.element.addEventListener(\n      \"touchmove\",\n      this.onTouchMove,\n      listenerOptions\n    );\n    this.element.addEventListener(\"touchend\", this.onTouchEnd, listenerOptions);\n  }\n  touchStart = {\n    x: 0,\n    y: 0\n  };\n  lastDelta = {\n    x: 0,\n    y: 0\n  };\n  window = {\n    width: 0,\n    height: 0\n  };\n  emitter = new Emitter();\n  /**\n   * Add an event listener for the given event and callback\n   *\n   * @param event Event name\n   * @param callback Callback function\n   */\n  on(event, callback) {\n    return this.emitter.on(event, callback);\n  }\n  /** Remove all event listeners and clean up */\n  destroy() {\n    this.emitter.destroy();\n    window.removeEventListener(\"resize\", this.onWindowResize, false);\n    this.element.removeEventListener(\"wheel\", this.onWheel, listenerOptions);\n    this.element.removeEventListener(\n      \"touchstart\",\n      this.onTouchStart,\n      listenerOptions\n    );\n    this.element.removeEventListener(\n      \"touchmove\",\n      this.onTouchMove,\n      listenerOptions\n    );\n    this.element.removeEventListener(\n      \"touchend\",\n      this.onTouchEnd,\n      listenerOptions\n    );\n  }\n  /**\n   * Event handler for 'touchstart' event\n   *\n   * @param event Touch event\n   */\n  onTouchStart = (event) => {\n    const { clientX, clientY } = event.targetTouches ? event.targetTouches[0] : event;\n    this.touchStart.x = clientX;\n    this.touchStart.y = clientY;\n    this.lastDelta = {\n      x: 0,\n      y: 0\n    };\n    this.emitter.emit(\"scroll\", {\n      deltaX: 0,\n      deltaY: 0,\n      event\n    });\n  };\n  /** Event handler for 'touchmove' event */\n  onTouchMove = (event) => {\n    const { clientX, clientY } = event.targetTouches ? event.targetTouches[0] : event;\n    const deltaX = -(clientX - this.touchStart.x) * this.options.touchMultiplier;\n    const deltaY = -(clientY - this.touchStart.y) * this.options.touchMultiplier;\n    this.touchStart.x = clientX;\n    this.touchStart.y = clientY;\n    this.lastDelta = {\n      x: deltaX,\n      y: deltaY\n    };\n    this.emitter.emit(\"scroll\", {\n      deltaX,\n      deltaY,\n      event\n    });\n  };\n  onTouchEnd = (event) => {\n    this.emitter.emit(\"scroll\", {\n      deltaX: this.lastDelta.x,\n      deltaY: this.lastDelta.y,\n      event\n    });\n  };\n  /** Event handler for 'wheel' event */\n  onWheel = (event) => {\n    let { deltaX, deltaY, deltaMode } = event;\n    const multiplierX = deltaMode === 1 ? LINE_HEIGHT : deltaMode === 2 ? this.window.width : 1;\n    const multiplierY = deltaMode === 1 ? LINE_HEIGHT : deltaMode === 2 ? this.window.height : 1;\n    deltaX *= multiplierX;\n    deltaY *= multiplierY;\n    deltaX *= this.options.wheelMultiplier;\n    deltaY *= this.options.wheelMultiplier;\n    this.emitter.emit(\"scroll\", { deltaX, deltaY, event });\n  };\n  onWindowResize = () => {\n    this.window = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    };\n  };\n};\n\n// packages/core/src/lenis.ts\nvar Lenis = class {\n  _isScrolling = false;\n  // true when scroll is animating\n  _isStopped = false;\n  // true if user should not be able to scroll - enable/disable programmatically\n  _isLocked = false;\n  // same as isStopped but enabled/disabled when scroll reaches target\n  _preventNextNativeScrollEvent = false;\n  _resetVelocityTimeout = null;\n  __rafID = null;\n  /**\n   * Whether or not the user is touching the screen\n   */\n  isTouching;\n  /**\n   * The time in ms since the lenis instance was created\n   */\n  time = 0;\n  /**\n   * User data that will be forwarded through the scroll event\n   *\n   * @example\n   * lenis.scrollTo(100, {\n   *   userData: {\n   *     foo: 'bar'\n   *   }\n   * })\n   */\n  userData = {};\n  /**\n   * The last velocity of the scroll\n   */\n  lastVelocity = 0;\n  /**\n   * The current velocity of the scroll\n   */\n  velocity = 0;\n  /**\n   * The direction of the scroll\n   */\n  direction = 0;\n  /**\n   * The options passed to the lenis instance\n   */\n  options;\n  /**\n   * The target scroll value\n   */\n  targetScroll;\n  /**\n   * The animated scroll value\n   */\n  animatedScroll;\n  // These are instanciated here as they don't need information from the options\n  animate = new Animate();\n  emitter = new Emitter();\n  // These are instanciated in the constructor as they need information from the options\n  dimensions;\n  // This is not private because it's used in the Snap class\n  virtualScroll;\n  constructor({\n    wrapper = window,\n    content = document.documentElement,\n    eventsTarget = wrapper,\n    smoothWheel = true,\n    syncTouch = false,\n    syncTouchLerp = 0.075,\n    touchInertiaMultiplier = 35,\n    duration,\n    // in seconds\n    easing = (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n    lerp: lerp2 = 0.1,\n    infinite = false,\n    orientation = \"vertical\",\n    // vertical, horizontal\n    gestureOrientation = \"vertical\",\n    // vertical, horizontal, both\n    touchMultiplier = 1,\n    wheelMultiplier = 1,\n    autoResize = true,\n    prevent,\n    virtualScroll,\n    overscroll = true,\n    autoRaf = false,\n    __experimental__naiveDimensions = false\n  } = {}) {\n    window.lenisVersion = version;\n    if (!wrapper || wrapper === document.documentElement || wrapper === document.body) {\n      wrapper = window;\n    }\n    this.options = {\n      wrapper,\n      content,\n      eventsTarget,\n      smoothWheel,\n      syncTouch,\n      syncTouchLerp,\n      touchInertiaMultiplier,\n      duration,\n      easing,\n      lerp: lerp2,\n      infinite,\n      gestureOrientation,\n      orientation,\n      touchMultiplier,\n      wheelMultiplier,\n      autoResize,\n      prevent,\n      virtualScroll,\n      overscroll,\n      autoRaf,\n      __experimental__naiveDimensions\n    };\n    this.dimensions = new Dimensions(wrapper, content, { autoResize });\n    this.updateClassName();\n    this.targetScroll = this.animatedScroll = this.actualScroll;\n    this.options.wrapper.addEventListener(\"scroll\", this.onNativeScroll, false);\n    this.options.wrapper.addEventListener(\n      \"pointerdown\",\n      this.onPointerDown,\n      false\n    );\n    this.virtualScroll = new VirtualScroll(eventsTarget, {\n      touchMultiplier,\n      wheelMultiplier\n    });\n    this.virtualScroll.on(\"scroll\", this.onVirtualScroll);\n    if (this.options.autoRaf) {\n      this.__rafID = requestAnimationFrame(this.raf);\n    }\n  }\n  /**\n   * Destroy the lenis instance, remove all event listeners and clean up the class name\n   */\n  destroy() {\n    this.emitter.destroy();\n    this.options.wrapper.removeEventListener(\n      \"scroll\",\n      this.onNativeScroll,\n      false\n    );\n    this.options.wrapper.removeEventListener(\n      \"pointerdown\",\n      this.onPointerDown,\n      false\n    );\n    this.virtualScroll.destroy();\n    this.dimensions.destroy();\n    this.cleanUpClassName();\n    if (this.__rafID) {\n      cancelAnimationFrame(this.__rafID);\n    }\n  }\n  on(event, callback) {\n    return this.emitter.on(event, callback);\n  }\n  off(event, callback) {\n    return this.emitter.off(event, callback);\n  }\n  setScroll(scroll) {\n    if (this.isHorizontal) {\n      this.rootElement.scrollLeft = scroll;\n    } else {\n      this.rootElement.scrollTop = scroll;\n    }\n  }\n  onPointerDown = (event) => {\n    if (event.button === 1) {\n      this.reset();\n    }\n  };\n  onVirtualScroll = (data) => {\n    if (typeof this.options.virtualScroll === \"function\" && this.options.virtualScroll(data) === false)\n      return;\n    const { deltaX, deltaY, event } = data;\n    this.emitter.emit(\"virtual-scroll\", { deltaX, deltaY, event });\n    if (event.ctrlKey) return;\n    if (event.lenisStopPropagation) return;\n    const isTouch = event.type.includes(\"touch\");\n    const isWheel = event.type.includes(\"wheel\");\n    this.isTouching = event.type === \"touchstart\" || event.type === \"touchmove\";\n    const isTapToStop = this.options.syncTouch && isTouch && event.type === \"touchstart\" && !this.isStopped && !this.isLocked;\n    if (isTapToStop) {\n      this.reset();\n      return;\n    }\n    const isClick = deltaX === 0 && deltaY === 0;\n    const isUnknownGesture = this.options.gestureOrientation === \"vertical\" && deltaY === 0 || this.options.gestureOrientation === \"horizontal\" && deltaX === 0;\n    if (isClick || isUnknownGesture) {\n      return;\n    }\n    let composedPath = event.composedPath();\n    composedPath = composedPath.slice(0, composedPath.indexOf(this.rootElement));\n    const prevent = this.options.prevent;\n    if (!!composedPath.find(\n      (node) => node instanceof HTMLElement && (typeof prevent === \"function\" && prevent?.(node) || node.hasAttribute?.(\"data-lenis-prevent\") || isTouch && node.hasAttribute?.(\"data-lenis-prevent-touch\") || isWheel && node.hasAttribute?.(\"data-lenis-prevent-wheel\"))\n    ))\n      return;\n    if (this.isStopped || this.isLocked) {\n      event.preventDefault();\n      return;\n    }\n    const isSmooth = this.options.syncTouch && isTouch || this.options.smoothWheel && isWheel;\n    if (!isSmooth) {\n      this.isScrolling = \"native\";\n      this.animate.stop();\n      event.lenisStopPropagation = true;\n      return;\n    }\n    let delta = deltaY;\n    if (this.options.gestureOrientation === \"both\") {\n      delta = Math.abs(deltaY) > Math.abs(deltaX) ? deltaY : deltaX;\n    } else if (this.options.gestureOrientation === \"horizontal\") {\n      delta = deltaX;\n    }\n    if (!this.options.overscroll || this.options.infinite || this.options.wrapper !== window && (this.animatedScroll > 0 && this.animatedScroll < this.limit || this.animatedScroll === 0 && deltaY > 0 || this.animatedScroll === this.limit && deltaY < 0)) {\n      event.lenisStopPropagation = true;\n    }\n    event.preventDefault();\n    const syncTouch = isTouch && this.options.syncTouch;\n    const isTouchEnd = isTouch && event.type === \"touchend\";\n    const hasTouchInertia = isTouchEnd && Math.abs(delta) > 5;\n    if (hasTouchInertia) {\n      delta = this.velocity * this.options.touchInertiaMultiplier;\n    }\n    this.scrollTo(this.targetScroll + delta, {\n      programmatic: false,\n      ...syncTouch ? {\n        lerp: hasTouchInertia ? this.options.syncTouchLerp : 1\n      } : {\n        lerp: this.options.lerp,\n        duration: this.options.duration,\n        easing: this.options.easing\n      }\n    });\n  };\n  /**\n   * Force lenis to recalculate the dimensions\n   */\n  resize() {\n    this.dimensions.resize();\n    this.animatedScroll = this.targetScroll = this.actualScroll;\n    this.emit();\n  }\n  emit() {\n    this.emitter.emit(\"scroll\", this);\n  }\n  onNativeScroll = () => {\n    if (this._resetVelocityTimeout !== null) {\n      clearTimeout(this._resetVelocityTimeout);\n      this._resetVelocityTimeout = null;\n    }\n    if (this._preventNextNativeScrollEvent) {\n      this._preventNextNativeScrollEvent = false;\n      return;\n    }\n    if (this.isScrolling === false || this.isScrolling === \"native\") {\n      const lastScroll = this.animatedScroll;\n      this.animatedScroll = this.targetScroll = this.actualScroll;\n      this.lastVelocity = this.velocity;\n      this.velocity = this.animatedScroll - lastScroll;\n      this.direction = Math.sign(\n        this.animatedScroll - lastScroll\n      );\n      if (!this.isStopped) {\n        this.isScrolling = \"native\";\n      }\n      this.emit();\n      if (this.velocity !== 0) {\n        this._resetVelocityTimeout = setTimeout(() => {\n          this.lastVelocity = this.velocity;\n          this.velocity = 0;\n          this.isScrolling = false;\n          this.emit();\n        }, 400);\n      }\n    }\n  };\n  reset() {\n    this.isLocked = false;\n    this.isScrolling = false;\n    this.animatedScroll = this.targetScroll = this.actualScroll;\n    this.lastVelocity = this.velocity = 0;\n    this.animate.stop();\n  }\n  /**\n   * Start lenis scroll after it has been stopped\n   */\n  start() {\n    if (!this.isStopped) return;\n    this.reset();\n    this.isStopped = false;\n  }\n  /**\n   * Stop lenis scroll\n   */\n  stop() {\n    if (this.isStopped) return;\n    this.reset();\n    this.isStopped = true;\n  }\n  /**\n   * RequestAnimationFrame for lenis\n   *\n   * @param time The time in ms from an external clock like `requestAnimationFrame` or Tempus\n   */\n  raf = (time) => {\n    const deltaTime = time - (this.time || time);\n    this.time = time;\n    this.animate.advance(deltaTime * 1e-3);\n    if (this.options.autoRaf) {\n      this.__rafID = requestAnimationFrame(this.raf);\n    }\n  };\n  /**\n   * Scroll to a target value\n   *\n   * @param target The target value to scroll to\n   * @param options The options for the scroll\n   *\n   * @example\n   * lenis.scrollTo(100, {\n   *   offset: 100,\n   *   duration: 1,\n   *   easing: (t) => 1 - Math.cos((t * Math.PI) / 2),\n   *   lerp: 0.1,\n   *   onStart: () => {\n   *     console.log('onStart')\n   *   },\n   *   onComplete: () => {\n   *     console.log('onComplete')\n   *   },\n   * })\n   */\n  scrollTo(target, {\n    offset = 0,\n    immediate = false,\n    lock = false,\n    duration = this.options.duration,\n    easing = this.options.easing,\n    lerp: lerp2 = this.options.lerp,\n    onStart,\n    onComplete,\n    force = false,\n    // scroll even if stopped\n    programmatic = true,\n    // called from outside of the class\n    userData\n  } = {}) {\n    if ((this.isStopped || this.isLocked) && !force) return;\n    if (typeof target === \"string\" && [\"top\", \"left\", \"start\"].includes(target)) {\n      target = 0;\n    } else if (typeof target === \"string\" && [\"bottom\", \"right\", \"end\"].includes(target)) {\n      target = this.limit;\n    } else {\n      let node;\n      if (typeof target === \"string\") {\n        node = document.querySelector(target);\n      } else if (target instanceof HTMLElement && target?.nodeType) {\n        node = target;\n      }\n      if (node) {\n        if (this.options.wrapper !== window) {\n          const wrapperRect = this.rootElement.getBoundingClientRect();\n          offset -= this.isHorizontal ? wrapperRect.left : wrapperRect.top;\n        }\n        const rect = node.getBoundingClientRect();\n        target = (this.isHorizontal ? rect.left : rect.top) + this.animatedScroll;\n      }\n    }\n    if (typeof target !== \"number\") return;\n    target += offset;\n    target = Math.round(target);\n    if (this.options.infinite) {\n      if (programmatic) {\n        this.targetScroll = this.animatedScroll = this.scroll;\n      }\n    } else {\n      target = clamp(0, target, this.limit);\n    }\n    if (target === this.targetScroll) {\n      onStart?.(this);\n      onComplete?.(this);\n      return;\n    }\n    this.userData = userData ?? {};\n    if (immediate) {\n      this.animatedScroll = this.targetScroll = target;\n      this.setScroll(this.scroll);\n      this.reset();\n      this.preventNextNativeScrollEvent();\n      this.emit();\n      onComplete?.(this);\n      this.userData = {};\n      return;\n    }\n    if (!programmatic) {\n      this.targetScroll = target;\n    }\n    this.animate.fromTo(this.animatedScroll, target, {\n      duration,\n      easing,\n      lerp: lerp2,\n      onStart: () => {\n        if (lock) this.isLocked = true;\n        this.isScrolling = \"smooth\";\n        onStart?.(this);\n      },\n      onUpdate: (value, completed) => {\n        this.isScrolling = \"smooth\";\n        this.lastVelocity = this.velocity;\n        this.velocity = value - this.animatedScroll;\n        this.direction = Math.sign(this.velocity);\n        this.animatedScroll = value;\n        this.setScroll(this.scroll);\n        if (programmatic) {\n          this.targetScroll = value;\n        }\n        if (!completed) this.emit();\n        if (completed) {\n          this.reset();\n          this.emit();\n          onComplete?.(this);\n          this.userData = {};\n          this.preventNextNativeScrollEvent();\n        }\n      }\n    });\n  }\n  preventNextNativeScrollEvent() {\n    this._preventNextNativeScrollEvent = true;\n    requestAnimationFrame(() => {\n      this._preventNextNativeScrollEvent = false;\n    });\n  }\n  /**\n   * The root element on which lenis is instanced\n   */\n  get rootElement() {\n    return this.options.wrapper === window ? document.documentElement : this.options.wrapper;\n  }\n  /**\n   * The limit which is the maximum scroll value\n   */\n  get limit() {\n    if (this.options.__experimental__naiveDimensions) {\n      if (this.isHorizontal) {\n        return this.rootElement.scrollWidth - this.rootElement.clientWidth;\n      } else {\n        return this.rootElement.scrollHeight - this.rootElement.clientHeight;\n      }\n    } else {\n      return this.dimensions.limit[this.isHorizontal ? \"x\" : \"y\"];\n    }\n  }\n  /**\n   * Whether or not the scroll is horizontal\n   */\n  get isHorizontal() {\n    return this.options.orientation === \"horizontal\";\n  }\n  /**\n   * The actual scroll value\n   */\n  get actualScroll() {\n    return this.isHorizontal ? this.rootElement.scrollLeft : this.rootElement.scrollTop;\n  }\n  /**\n   * The current scroll value\n   */\n  get scroll() {\n    return this.options.infinite ? modulo(this.animatedScroll, this.limit) : this.animatedScroll;\n  }\n  /**\n   * The progress of the scroll relative to the limit\n   */\n  get progress() {\n    return this.limit === 0 ? 1 : this.scroll / this.limit;\n  }\n  /**\n   * Current scroll state\n   */\n  get isScrolling() {\n    return this._isScrolling;\n  }\n  set isScrolling(value) {\n    if (this._isScrolling !== value) {\n      this._isScrolling = value;\n      this.updateClassName();\n    }\n  }\n  /**\n   * Check if lenis is stopped\n   */\n  get isStopped() {\n    return this._isStopped;\n  }\n  set isStopped(value) {\n    if (this._isStopped !== value) {\n      this._isStopped = value;\n      this.updateClassName();\n    }\n  }\n  /**\n   * Check if lenis is locked\n   */\n  get isLocked() {\n    return this._isLocked;\n  }\n  set isLocked(value) {\n    if (this._isLocked !== value) {\n      this._isLocked = value;\n      this.updateClassName();\n    }\n  }\n  /**\n   * Check if lenis is smooth scrolling\n   */\n  get isSmooth() {\n    return this.isScrolling === \"smooth\";\n  }\n  /**\n   * The class name applied to the wrapper element\n   */\n  get className() {\n    let className = \"lenis\";\n    if (this.isStopped) className += \" lenis-stopped\";\n    if (this.isLocked) className += \" lenis-locked\";\n    if (this.isScrolling) className += \" lenis-scrolling\";\n    if (this.isScrolling === \"smooth\") className += \" lenis-smooth\";\n    return className;\n  }\n  updateClassName() {\n    this.cleanUpClassName();\n    this.rootElement.className = `${this.rootElement.className} ${this.className}`.trim();\n  }\n  cleanUpClassName() {\n    this.rootElement.className = this.rootElement.className.replace(/lenis(-\\w+)?/g, \"\").trim();\n  }\n};\nexport {\n  Lenis as default\n};\n//# sourceMappingURL=lenis.mjs.map","import Core from '../core/Core'\nimport Plugin from '../core/Plugin'\n\nimport Lenis from 'lenis'\n\nexport default class SmoothScroll extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor(luge) {\n    super('smooth')\n\n    this.luge = luge\n\n    window.hasSmoothScroll = false\n\n    luge.smoothscroll = {}\n  }\n\n  /**\n   * Init\n   */\n  init() {\n    super.init()\n\n    this.element = document.documentElement\n\n    this.hasSmooth = this.element.hasAttribute('data-lg-smooth')\n\n    if (this.hasSmooth) {\n      window.hasSmoothScroll = true\n\n      this.lenis = new Lenis()\n\n      this.lenis.on('scroll', () => {\n        Core.updateScroll()\n      })\n\n      this.luge.smoothscroll.lenis = this.lenis\n\n      document.documentElement.classList.add('has-smooth-scroll')\n\n      this.luge.ticker.add(this.lenis.raf, this.lenis)\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Cursor extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('cursor')\n\n    this.luge = luge\n\n    this.cursors = []\n    this.pointers = []\n    this.trails = []\n\n    this.hoverTags = ['a', 'button', 'input']\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [Number, this.luge._settings.cursor.inertia],\n      length: [Number, this.luge._settings.cursor.trailLength],\n      hide: Boolean\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    document.documentElement.addEventListener('mouseenter', this.hoverHandler.bind(this), { capture: true, passive: true })\n    document.documentElement.addEventListener('mouseleave', this.hoverHandler.bind(this), { capture: true, passive: true })\n\n    this.luge.emitter.on('beforePageOut', this.resetHover, this)\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    const self = this\n    const cursors = document.querySelectorAll('[data-lg-cursor]:not(.lg-cursor)')\n\n    if (cursors.length > 0) {\n      cursors.forEach(cursor => {\n        const attributes = this.getAttributes(cursor)\n\n        if (attributes.hide) {\n          document.documentElement.classList.add('lg-cursor-hide')\n        }\n\n        // Pointers\n        const pointers = cursor.querySelectorAll('[data-lg-cursor-pointer')\n        pointers.forEach(pointer => {\n          pointer.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              }\n            }\n          }\n\n          if (pointer.hasAttribute('data-lg-cursor-inertia')) {\n            pointer.luge.cursor.inertia = Number(pointer.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            pointer.luge.cursor.inertia = attributes.inertia\n          }\n\n          pointer.classList.add('lg-cursor-pointer')\n\n          self.pointers.push(pointer)\n        })\n\n        // Trails\n        const trails = cursor.querySelectorAll('[data-lg-cursor-trail')\n        trails.forEach(trail => {\n          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n          svg.appendChild(path)\n\n          trail.appendChild(svg)\n\n          trail.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              },\n              points: [],\n              path: path\n            }\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-inertia')) {\n            trail.luge.cursor.inertia = Number(trail.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            trail.luge.cursor.inertia = attributes.inertia\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-length')) {\n            trail.luge.cursor.length = Number(trail.getAttribute('data-lg-cursor-length'))\n          } else {\n            trail.luge.cursor.length = attributes.length\n          }\n\n          trail.classList.add('lg-cursor-trail')\n\n          self.trails.push(trail)\n        })\n\n        cursor.classList.add('lg-cursor')\n\n        this.cursors.push(cursor)\n      })\n    }\n\n    done()\n  }\n\n  /**\n   * Hover handler\n   */\n  hoverHandler (e) {\n    const element = e.target\n    const tag = element.tagName.toLowerCase()\n    const style = element.getAttribute('data-lg-hover')\n    let hover = null\n\n    if (this.hoverTags.includes(tag) || style !== null) {\n      hover = (e.type === 'mouseenter')\n    }\n\n    if (hover !== null) {\n      this.cursors.forEach(cursor => {\n        cursor.classList.toggle('lg-cursor--hover', hover)\n\n        if (style !== null && style !== '') {\n          cursor.classList.toggle('lg-cursor--hover--' + style, hover)\n        }\n      })\n    }\n  }\n\n  /**\n   * Reset hover\n   */\n  resetHover () {\n    this.cursors.forEach(cursor => {\n      const newClasses = []\n      const classes = cursor.getAttribute('class').split(' ')\n\n      classes.forEach(className => {\n        if (!className.includes('hover')) {\n          newClasses.push(className)\n        }\n      })\n\n      cursor.setAttribute('class', newClasses.join(' '))\n    })\n  }\n\n  /**\n   * Raf animation\n   */\n  tick (timestamp) {\n    // Pointers\n    this.pointers.forEach(pointer => {\n      // Get position\n      const position = pointer.luge.cursor.position\n      const smoothPosition = pointer.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      smoothPosition.x += (position.x - smoothPosition.x) * pointer.luge.cursor.inertia\n      smoothPosition.y += (position.y - smoothPosition.y) * pointer.luge.cursor.inertia\n\n      pointer.style.transform = 'translate3d(' + smoothPosition.x + 'px, ' + smoothPosition.y + 'px, 0)'\n    })\n\n    // Trails\n    this.trails.forEach(trail => {\n      // Get position\n      const position = trail.luge.cursor.position\n      const smoothPosition = trail.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      if (window.mouseX !== -1) {\n        smoothPosition.x += (position.x - smoothPosition.x) * trail.luge.cursor.inertia\n        smoothPosition.y += (position.y - smoothPosition.y) * trail.luge.cursor.inertia\n\n        // Update points\n        const points = trail.luge.cursor.points\n\n        const point = {\n          x: smoothPosition.x,\n          y: smoothPosition.y\n        }\n        points.push(point)\n\n        if (points.length > trail.luge.cursor.length) {\n          points.shift()\n        }\n\n        // Draw smooth line # https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74\n        let d = ''\n        let trailLength = 0\n\n        const svgPath = (points, command) => {\n          const d = points.reduce((acc, point, i, a) => i === 0\n\n            ? `M ${point.x},${point.y}`\n\n            : `${acc} ${command(point, i, a)}`\n          , '')\n          return `${d}`\n        }\n\n        const line = (pointA, pointB) => {\n          const lengthX = pointB.x - pointA.x\n          const lengthY = pointB.y - pointA.y\n          return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n          }\n        }\n\n        const controlPoint = (current, previous, next, reverse) => {\n          const p = previous || current\n          const n = next || current\n\n          const smoothing = 0.2\n\n          const o = line(p, n)\n\n          trailLength += o.length\n\n          const angle = o.angle + (reverse ? Math.PI : 0)\n          const length = o.length * smoothing\n\n          const x = current.x + Math.cos(angle) * length\n          const y = current.y + Math.sin(angle) * length\n          return [x, y]\n        }\n\n        const bezierCommand = (point, i, a) => {\n          const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point)\n\n          const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true)\n          return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point.x},${point.y}`\n        }\n\n        d = svgPath(points, bezierCommand)\n\n        trail.luge.cursor.path.setAttribute('d', d)\n\n        trail.style.setProperty('--length', trailLength)\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Intersection extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('intersection')\n\n    this.luge = luge\n\n    // Listeners\n    this.listeners = {\n      onViewportIntersect: this.onViewportIntersect.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.elements = []\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      class: String\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-intersection]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.viewportobserver.add(element)\n      element.addEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    this.luge.viewportobserver.remove(element)\n    element.removeEventListener('viewportintersect', this.listeners.onViewportIntersect)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    this.elements = []\n\n    done()\n  }\n\n  /**\n   * On viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n    const position = element.luge.viewport.position\n    const CSSClass = element.luge.intersection.class ? element.luge.intersection.class.split(' ') : false\n\n    // Set CSS classes\n    element.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    if (position === 'in') {\n      element.classList.add('is-in')\n\n      if (CSSClass) {\n        document.documentElement.classList.add(...CSSClass)\n      }\n    } else {\n      if (CSSClass) {\n        document.documentElement.classList.remove(...CSSClass)\n      }\n\n      if (position === 'above') {\n        element.classList.add('is-out', 'is-out-top')\n      } else {\n        element.classList.add('is-out', 'is-out-bottom')\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class LottiePlayer extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('lottie')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.doneLoad = null\n\n    // Listeners\n    this.onViewportIntersect = this.onViewportIntersect.bind(this)\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.lottie = {\n      deferInit: this.deferInit.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    if (typeof lottie === 'object') {\n      this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n      this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n      this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n      this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n    }\n\n    this.bindEvents()\n  }\n\n  /**\n   * Defer init\n   */\n  deferInit () {\n    if (typeof lottie === 'object') {\n      this.pageInit(() => {})\n      this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n      this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n\n      this.luge.scrollobserver.updateHandler()\n    }\n  }\n\n  /**\n   * Set plugin attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      autoplay: Boolean,\n      scroll: Boolean,\n      loop: Boolean,\n      loopFrame: [Number, 0],\n      persistent: Boolean,\n      reverse: Boolean,\n      required: Boolean,\n      force: Boolean,\n      lazy: Boolean,\n      renderer: [String, this.luge._settings.lottie.renderer],\n      subframe: [Boolean, this.luge._settings.lottie.subFrame]\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.reveal(() => {})\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    let waitLoad = false\n\n    if (this.elements.length > 0) {\n      this.elements.forEach(element => {\n        if (element.luge.lottie.required && !element.player.isLoaded) {\n          waitLoad = true\n        }\n      })\n    }\n\n    if (waitLoad) {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const self = this\n    this.elements = document.querySelectorAll('[data-lg-lottie]')\n    this.toAutoplay = []\n    this.toLoad = 0\n    this.requireds = 0\n\n    this.elements.forEach(element => {\n      if (!element.player) {\n        const attributes = this.getAttributes(element)\n\n        this.luge.scrollobserver.add(element)\n\n        if (attributes.lazy) {\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        } else {\n          self.initPlayer(element)\n\n          element.addEventListener('revealin', self.play)\n\n          if (!attributes.persistent) {\n            element.addEventListener('viewportintersect', self.onViewportIntersect)\n          }\n        }\n      }\n    })\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n    let elements = []\n\n    const oldPage = document.querySelector('[data-lg-page] + [data-lg-page]')\n\n    if (oldPage) {\n      elements = oldPage.querySelectorAll('[data-lg-lottie]')\n    } else {\n      elements = this.elements\n    }\n\n    elements.forEach(element => {\n      element.removeEventListener('revealin', self.play)\n\n      if (!element.luge.lottie.persistent) {\n        element.removeEventListener('viewportintersect', self.onViewportIntersect)\n      }\n\n      if (element.hasAttribute('data-lg-lottie-scroll')) {\n        element.removeEventListener('scrollprogress', self.onScrollProgress)\n      }\n\n      if (element.player) {\n        element.player.destroy()\n        delete element.player\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.toAutoplay.forEach(element => {\n      if (element.viewportPosition === 'in') {\n        element.play()\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n\n    if (!element.player) {\n      if (element.viewportPosition === 'in') {\n        this.initLazy(element)\n      }\n    } else {\n      if (!element.luge.lottie.force) {\n        if (element.viewportPosition === 'in') {\n          if (element.player.isPaused && (element.player.scrollPaused || element.hasAttribute('data-lg-lottie-autoplay'))) {\n            element.player.scrollPaused = false\n            element.play()\n          }\n        } else {\n          if (!element.player.isPaused) {\n            element.player.scrollPaused = true\n            element.pause()\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Lazy init\n   * @param {HTMLElement} element Container\n   */\n  initLazy (element) {\n    this.initPlayer(element)\n\n    element.player.addEventListener('DOMLoaded', () => {\n      element.play()\n    }, { once: true })\n  }\n\n  /**\n   * Init player\n   * @param {HTMLElement} element Container\n   */\n  initPlayer (element) {\n    const self = this\n\n    this.toLoad++\n\n    // Get options\n    const attributes = this.getAttributes(element)\n\n    element.player = lottie.loadAnimation({\n      container: element,\n      renderer: attributes.renderer,\n      loop: (attributes.loop && !attributes.reverse),\n      autoplay: false,\n      path: attributes.root\n    })\n\n    if (typeof attributes.subframe !== 'undefined') {\n      element.player.setSubframe(attributes.subframe)\n    }\n\n    element.classList.add('lg-lottie')\n    this.setPlayerStateClasses(element, false)\n\n    if (attributes.autoplay) {\n      this.toAutoplay.push(element)\n    }\n\n    if (attributes.required) {\n      this.requireds++\n    }\n\n    if (attributes.scroll) {\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n    } else if (attributes.loop) {\n      element.player.addEventListener('enterFrame', function () {\n        if (element.player.totalFrames > 0) {\n          const currentFrame = Math.round(element.player.currentFrame)\n\n          if (element.player.playDirection === 1) {\n            if (currentFrame === element.player.totalFrames - 1) {\n              element.player.pause()\n\n              if (attributes.reverse) {\n                self.luge.ticker.nextTick(() => {\n                  element.player.setDirection(-1)\n                  element.player.goToAndPlay(element.player.totalFrames, true)\n\n                  self.setPlayerStateClasses(element, 'backward')\n                }, self)\n              } else {\n                self.luge.ticker.nextTick(() => {\n                  element.player.goToAndPlay(attributes.loopFrame, true)\n                }, self)\n              }\n            }\n          } else {\n            if (currentFrame === attributes.loopFrame) {\n              element.player.pause()\n\n              self.luge.ticker.nextTick(() => {\n                element.player.setDirection(1)\n                element.player.goToAndPlay(attributes.loopFrame, true)\n\n                self.setPlayerStateClasses(element, 'forward')\n              }, self)\n            }\n          }\n        }\n      })\n    }\n\n    // Set methods\n    element.play = this.play.bind(this, element)\n    element.pause = this.pause.bind(this, element)\n    element.stop = this.stop.bind(this, element)\n\n    // Loaded\n    element.player.addEventListener('DOMLoaded', () => {\n      element.classList.add('is-loaded')\n\n      self.playerLoaded(attributes.required)\n    }, { once: true })\n  }\n\n  /**\n   * Set player state classes\n   * @param {HTMLElement} el Element\n   * @param {Boolean|String} playing If playing, playing direction\n   */\n  setPlayerStateClasses (el, playing) {\n    el.classList.remove('is-playing', 'is-playing-forward', 'is-playing-backward', 'is-paused')\n\n    if (!playing) {\n      el.classList.add('is-paused')\n    } else {\n      el.classList.add('is-playing')\n\n      if (playing === 'backward') {\n        el.classList.add('is-playing-backward')\n      } else {\n        el.classList.add('is-playing-forward')\n      }\n    }\n  }\n\n  /**\n   * Player loaded\n   */\n  playerLoaded (required = false) {\n    this.toLoad--\n\n    if (required) {\n      this.requireds--\n    }\n\n    // Call doneLoad when required animations have been loaded\n    if (this.requireds === 0 && typeof this.doneLoad === 'function') {\n      this.doneLoad()\n      this.doneLoad = null\n    }\n  }\n\n  /**\n   * Play\n   */\n  play (element) {\n    if (element && element.player) {\n      element.player.play()\n\n      this.setPlayerStateClasses(element, 'forward')\n    }\n  }\n\n  /**\n   * Pause\n   */\n  pause (element) {\n    if (element && element.player) {\n      element.player.pause()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Stop\n   */\n  stop (element) {\n    if (element && element.player) {\n      element.player.stop()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.player.goToAndStop(element.player.totalFrames * element.scrollProgress, true)\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class MouseAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('mouse')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    window.mouseSpeed = 0\n\n    // Listeners\n    // ...\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.getMouseMovement()\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [String, this.luge._settings.mouse.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-mouse]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.mouseobserver.add(element)\n\n      element.luge.mouse.smoothX = 0\n      element.luge.mouse.smoothY = 0\n      element.luge.mouse.smoothProgressX = 0\n      element.luge.mouse.smoothProgressY = 0\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    this.luge.mouseobserver.remove(element)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    this.elements = []\n\n    done()\n  }\n\n  /**\n   * Get mouse movement\n   */\n  getMouseMovement () {\n    const distX = this.mouse.x - window.mouseX\n    const distY = this.mouse.y - window.mouseY\n    const dist = Math.hypot(distX, distY)\n\n    window.mouseSpeed += (dist - window.mouseSpeed) * 0.5\n    if (window.mouseSpeed < 0.001) {\n      window.mouseSpeed = 0\n    }\n\n    if (dist > 1) {\n      const angle = Math.atan2(distY, distX) * (180 / Math.PI) + 180\n\n      window.mouseAngle = angle\n\n      if (angle >= 45 && angle < 135) {\n        window.mouseDirection = 'down'\n      } else if (angle >= 135 && angle < 225) {\n        window.mouseDirection = 'left'\n      } else if (angle >= 225 && angle < 315) {\n        window.mouseDirection = 'up'\n      } else {\n        window.mouseDirection = 'right'\n      }\n    }\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    setTimeout(this.getMouseMovement.bind(this), 20)\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    this.elements.forEach(element => {\n      const mouse = element.luge.mouse\n\n      if (mouse.x) {\n        if (mouse.inertia) {\n          mouse.smoothX += (mouse.x - mouse.smoothX) * mouse.inertia\n          mouse.smoothY += (mouse.y - mouse.smoothY) * mouse.inertia\n          mouse.smoothProgressX += (mouse.progressX - mouse.smoothProgressX) * mouse.inertia\n          mouse.smoothProgressY += (mouse.progressY - mouse.smoothProgressY) * mouse.inertia\n\n          element.style.setProperty('--mouse-x', mouse.smoothX)\n          element.style.setProperty('--mouse-y', mouse.smoothY)\n          element.style.setProperty('--mouse-progress-x', mouse.smoothProgressX)\n          element.style.setProperty('--mouse-progress-y', mouse.smoothProgressY)\n\n          const diffX = Math.round((mouse.x - mouse.smoothX) * 1000) / 1000\n          const diffY = Math.round((mouse.y - mouse.smoothY) * 1000) / 1000\n\n          element.style.setProperty('--abs-diff-x', Math.abs(diffX))\n          element.style.setProperty('--diff-x', diffX)\n          element.style.setProperty('--abs-diff-y', Math.abs(diffY))\n          element.style.setProperty('--diff-y', diffY)\n        } else {\n          element.style.setProperty('--mouse-x', mouse.x)\n          element.style.setProperty('--mouse-y', mouse.y)\n          element.style.setProperty('--mouse-progress-x', mouse.progressX)\n          element.style.setProperty('--mouse-progress-y', mouse.progressY)\n        }\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Parallax extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('parallax')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 30)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      disable: String,\n      amplitude: [String, 1],\n      anchor: String,\n      inertia: [String, this.luge._settings.parallax.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.amplitude) {\n      const randAmplitude = data.amplitude.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randAmplitude) {\n        data.amplitude = Number(randAmplitude[1]) + ((Number(randAmplitude[2]) - Number(randAmplitude[1])) * Math.random())\n      } else {\n        data.amplitude = Number(data.amplitude)\n      }\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    this.elements = []\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    document.querySelectorAll('[data-lg-parallax]').forEach(element => {\n      const attributes = this.getAttributes(element)\n\n      const disable = attributes.disable\n      let enable = true\n\n      const browser = (this.luge.browser || {})\n\n      if (disable && browser.is) {\n        if ((disable === 'desktop' && browser.is('desktop')) ||\n            (disable === 'handheld' && !browser.is('desktop')) ||\n            (disable === 'mobile' && browser.is('mobile')) ||\n            (disable === 'tablet' && browser.is('tablet'))) {\n          enable = false\n        }\n      }\n\n      if (enable) {\n        this.addElement(element)\n      }\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.luge.scrollobserver.add(element)\n\n      if (element.luge.parallax.root === 'child') {\n        element.style.overflow = 'hidden'\n\n        const children = element.children\n        let child = null\n\n        for (let i = 0; i < children.length; i++) {\n          if (children[i].tagName !== 'SOURCE') {\n            child = children[i]\n            break\n          }\n        }\n\n        if (child) {\n          element.luge.parallax.child = child\n        }\n      }\n\n      element.luge.parallax.movement = 0\n      element.luge.parallax.smoothMovement = 0\n\n      this.elements.push(element)\n\n      this.luge.ticker.nextTick(() => {\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n        this.moveElement(element)\n      })\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    this.luge.scrollobserver.remove(element)\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    this.moveElement(e.target)\n  }\n\n  /**\n   * Move element\n   * @param {HTMLElement} element Element to move\n   */\n  moveElement (element) {\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = -element.scrollProgress\n    } else {\n      progress = 1 - element.scrollProgress * 2\n    }\n\n    if (element.luge.parallax.anchor === 'bottom') {\n      progress += 1\n    } else if (element.luge.parallax.anchor === 'top') {\n      progress -= 1\n    }\n\n    if (element.luge.parallax.root === 'child') {\n      element.luge.parallax.movement = (element.luge.parallax.amplitude * 5) * progress\n    } else {\n      element.luge.parallax.movement = element.clientHeight * progress * element.luge.parallax.amplitude / 2\n    }\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    this.elements.forEach(element => {\n      element.luge.parallax.smoothMovement += (element.luge.parallax.movement - element.luge.parallax.smoothMovement) * element.luge.parallax.inertia\n\n      if (element.luge.parallax.root === 'child' && element.luge.parallax.child) {\n        element.luge.parallax.child.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + '%, 0) scale(1.' + (String(Math.abs(element.luge.parallax.amplitude)).replace('.', '')) + ')'\n      } else {\n        element.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + 'px, 0)'\n      }\n    })\n  }\n}\n","// NOTE: this list must be up-to-date with browsers listed in\n// test/acceptance/useragentstrings.yml\nexport const BROWSER_ALIASES_MAP = {\n  'Amazon Silk': 'amazon_silk',\n  'Android Browser': 'android',\n  Bada: 'bada',\n  BlackBerry: 'blackberry',\n  Chrome: 'chrome',\n  Chromium: 'chromium',\n  Electron: 'electron',\n  Epiphany: 'epiphany',\n  Firefox: 'firefox',\n  Focus: 'focus',\n  Generic: 'generic',\n  'Google Search': 'google_search',\n  Googlebot: 'googlebot',\n  'Internet Explorer': 'ie',\n  'K-Meleon': 'k_meleon',\n  Maxthon: 'maxthon',\n  'Microsoft Edge': 'edge',\n  'MZ Browser': 'mz',\n  'NAVER Whale Browser': 'naver',\n  Opera: 'opera',\n  'Opera Coast': 'opera_coast',\n  PhantomJS: 'phantomjs',\n  Puffin: 'puffin',\n  QupZilla: 'qupzilla',\n  QQ: 'qq',\n  QQLite: 'qqlite',\n  Safari: 'safari',\n  Sailfish: 'sailfish',\n  'Samsung Internet for Android': 'samsung_internet',\n  SeaMonkey: 'seamonkey',\n  Sleipnir: 'sleipnir',\n  Swing: 'swing',\n  Tizen: 'tizen',\n  'UC Browser': 'uc',\n  Vivaldi: 'vivaldi',\n  'WebOS Browser': 'webos',\n  WeChat: 'wechat',\n  'Yandex Browser': 'yandex',\n  Roku: 'roku',\n};\n\nexport const BROWSER_MAP = {\n  amazon_silk: 'Amazon Silk',\n  android: 'Android Browser',\n  bada: 'Bada',\n  blackberry: 'BlackBerry',\n  chrome: 'Chrome',\n  chromium: 'Chromium',\n  electron: 'Electron',\n  epiphany: 'Epiphany',\n  firefox: 'Firefox',\n  focus: 'Focus',\n  generic: 'Generic',\n  googlebot: 'Googlebot',\n  google_search: 'Google Search',\n  ie: 'Internet Explorer',\n  k_meleon: 'K-Meleon',\n  maxthon: 'Maxthon',\n  edge: 'Microsoft Edge',\n  mz: 'MZ Browser',\n  naver: 'NAVER Whale Browser',\n  opera: 'Opera',\n  opera_coast: 'Opera Coast',\n  phantomjs: 'PhantomJS',\n  puffin: 'Puffin',\n  qupzilla: 'QupZilla',\n  qq: 'QQ Browser',\n  qqlite: 'QQ Browser Lite',\n  safari: 'Safari',\n  sailfish: 'Sailfish',\n  samsung_internet: 'Samsung Internet for Android',\n  seamonkey: 'SeaMonkey',\n  sleipnir: 'Sleipnir',\n  swing: 'Swing',\n  tizen: 'Tizen',\n  uc: 'UC Browser',\n  vivaldi: 'Vivaldi',\n  webos: 'WebOS Browser',\n  wechat: 'WeChat',\n  yandex: 'Yandex Browser',\n};\n\nexport const PLATFORMS_MAP = {\n  tablet: 'tablet',\n  mobile: 'mobile',\n  desktop: 'desktop',\n  tv: 'tv',\n};\n\nexport const OS_MAP = {\n  WindowsPhone: 'Windows Phone',\n  Windows: 'Windows',\n  MacOS: 'macOS',\n  iOS: 'iOS',\n  Android: 'Android',\n  WebOS: 'WebOS',\n  BlackBerry: 'BlackBerry',\n  Bada: 'Bada',\n  Tizen: 'Tizen',\n  Linux: 'Linux',\n  ChromeOS: 'Chrome OS',\n  PlayStation4: 'PlayStation 4',\n  Roku: 'Roku',\n};\n\nexport const ENGINE_MAP = {\n  EdgeHTML: 'EdgeHTML',\n  Blink: 'Blink',\n  Trident: 'Trident',\n  Presto: 'Presto',\n  Gecko: 'Gecko',\n  WebKit: 'WebKit',\n};\n","import { BROWSER_MAP, BROWSER_ALIASES_MAP } from './constants.js';\n\nexport default class Utils {\n  /**\n   * Get first matched item for a string\n   * @param {RegExp} regexp\n   * @param {String} ua\n   * @return {Array|{index: number, input: string}|*|boolean|string}\n   */\n  static getFirstMatch(regexp, ua) {\n    const match = ua.match(regexp);\n    return (match && match.length > 0 && match[1]) || '';\n  }\n\n  /**\n   * Get second matched item for a string\n   * @param regexp\n   * @param {String} ua\n   * @return {Array|{index: number, input: string}|*|boolean|string}\n   */\n  static getSecondMatch(regexp, ua) {\n    const match = ua.match(regexp);\n    return (match && match.length > 1 && match[2]) || '';\n  }\n\n  /**\n   * Match a regexp and return a constant or undefined\n   * @param {RegExp} regexp\n   * @param {String} ua\n   * @param {*} _const Any const that will be returned if regexp matches the string\n   * @return {*}\n   */\n  static matchAndReturnConst(regexp, ua, _const) {\n    if (regexp.test(ua)) {\n      return _const;\n    }\n    return void (0);\n  }\n\n  static getWindowsVersionName(version) {\n    switch (version) {\n      case 'NT': return 'NT';\n      case 'XP': return 'XP';\n      case 'NT 5.0': return '2000';\n      case 'NT 5.1': return 'XP';\n      case 'NT 5.2': return '2003';\n      case 'NT 6.0': return 'Vista';\n      case 'NT 6.1': return '7';\n      case 'NT 6.2': return '8';\n      case 'NT 6.3': return '8.1';\n      case 'NT 10.0': return '10';\n      default: return undefined;\n    }\n  }\n\n  /**\n   * Get macOS version name\n   *    10.5 - Leopard\n   *    10.6 - Snow Leopard\n   *    10.7 - Lion\n   *    10.8 - Mountain Lion\n   *    10.9 - Mavericks\n   *    10.10 - Yosemite\n   *    10.11 - El Capitan\n   *    10.12 - Sierra\n   *    10.13 - High Sierra\n   *    10.14 - Mojave\n   *    10.15 - Catalina\n   *\n   * @example\n   *   getMacOSVersionName(\"10.14\") // 'Mojave'\n   *\n   * @param  {string} version\n   * @return {string} versionName\n   */\n  static getMacOSVersionName(version) {\n    const v = version.split('.').splice(0, 2).map(s => parseInt(s, 10) || 0);\n    v.push(0);\n    if (v[0] !== 10) return undefined;\n    switch (v[1]) {\n      case 5: return 'Leopard';\n      case 6: return 'Snow Leopard';\n      case 7: return 'Lion';\n      case 8: return 'Mountain Lion';\n      case 9: return 'Mavericks';\n      case 10: return 'Yosemite';\n      case 11: return 'El Capitan';\n      case 12: return 'Sierra';\n      case 13: return 'High Sierra';\n      case 14: return 'Mojave';\n      case 15: return 'Catalina';\n      default: return undefined;\n    }\n  }\n\n  /**\n   * Get Android version name\n   *    1.5 - Cupcake\n   *    1.6 - Donut\n   *    2.0 - Eclair\n   *    2.1 - Eclair\n   *    2.2 - Froyo\n   *    2.x - Gingerbread\n   *    3.x - Honeycomb\n   *    4.0 - Ice Cream Sandwich\n   *    4.1 - Jelly Bean\n   *    4.4 - KitKat\n   *    5.x - Lollipop\n   *    6.x - Marshmallow\n   *    7.x - Nougat\n   *    8.x - Oreo\n   *    9.x - Pie\n   *\n   * @example\n   *   getAndroidVersionName(\"7.0\") // 'Nougat'\n   *\n   * @param  {string} version\n   * @return {string} versionName\n   */\n  static getAndroidVersionName(version) {\n    const v = version.split('.').splice(0, 2).map(s => parseInt(s, 10) || 0);\n    v.push(0);\n    if (v[0] === 1 && v[1] < 5) return undefined;\n    if (v[0] === 1 && v[1] < 6) return 'Cupcake';\n    if (v[0] === 1 && v[1] >= 6) return 'Donut';\n    if (v[0] === 2 && v[1] < 2) return 'Eclair';\n    if (v[0] === 2 && v[1] === 2) return 'Froyo';\n    if (v[0] === 2 && v[1] > 2) return 'Gingerbread';\n    if (v[0] === 3) return 'Honeycomb';\n    if (v[0] === 4 && v[1] < 1) return 'Ice Cream Sandwich';\n    if (v[0] === 4 && v[1] < 4) return 'Jelly Bean';\n    if (v[0] === 4 && v[1] >= 4) return 'KitKat';\n    if (v[0] === 5) return 'Lollipop';\n    if (v[0] === 6) return 'Marshmallow';\n    if (v[0] === 7) return 'Nougat';\n    if (v[0] === 8) return 'Oreo';\n    if (v[0] === 9) return 'Pie';\n    return undefined;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  static getVersionPrecision(version) {\n    return version.split('.').length;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions('1.10.2.1',  '1.8.2.1.90')    // 1\n   *   compareVersions('1.010.2.1', '1.09.2.1.90');  // 1\n   *   compareVersions('1.10.2.1',  '1.10.2.1');     // 0\n   *   compareVersions('1.10.2.1',  '1.0800.2');     // -1\n   *   compareVersions('1.10.2.1',  '1.10',  true);  // 0\n   *\n   * @param {String} versionA versions versions to compare\n   * @param {String} versionB versions versions to compare\n   * @param {boolean} [isLoose] enable loose comparison\n   * @return {Number} comparison result: -1 when versionA is lower,\n   * 1 when versionA is bigger, 0 when both equal\n   */\n  /* eslint consistent-return: 1 */\n  static compareVersions(versionA, versionB, isLoose = false) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    const versionAPrecision = Utils.getVersionPrecision(versionA);\n    const versionBPrecision = Utils.getVersionPrecision(versionB);\n\n    let precision = Math.max(versionAPrecision, versionBPrecision);\n    let lastPrecision = 0;\n\n    const chunks = Utils.map([versionA, versionB], (version) => {\n      const delta = precision - Utils.getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      const _version = version + new Array(delta + 1).join('.0');\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return Utils.map(_version.split('.'), chunk => new Array(20 - chunk.length).join('0') + chunk).reverse();\n    });\n\n    // adjust precision for loose comparison\n    if (isLoose) {\n      lastPrecision = precision - Math.min(versionAPrecision, versionBPrecision);\n    }\n\n    // iterate in reverse order by reversed chunks array\n    precision -= 1;\n    while (precision >= lastPrecision) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n\n      if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === lastPrecision) {\n          // all version chunks are same\n          return 0;\n        }\n\n        precision -= 1;\n      } else if (chunks[0][precision] < chunks[1][precision]) {\n        return -1;\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  static map(arr, iterator) {\n    const result = [];\n    let i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i += 1) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Array::find polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} predicate\n   * @return {Array}\n   */\n  static find(arr, predicate) {\n    let i;\n    let l;\n    if (Array.prototype.find) {\n      return Array.prototype.find.call(arr, predicate);\n    }\n    for (i = 0, l = arr.length; i < l; i += 1) {\n      const value = arr[i];\n      if (predicate(value, i)) {\n        return value;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Object::assign polyfill\n   *\n   * @param  {Object} obj\n   * @param  {Object} ...objs\n   * @return {Object}\n   */\n  static assign(obj, ...assigners) {\n    const result = obj;\n    let i;\n    let l;\n    if (Object.assign) {\n      return Object.assign(obj, ...assigners);\n    }\n    for (i = 0, l = assigners.length; i < l; i += 1) {\n      const assigner = assigners[i];\n      if (typeof assigner === 'object' && assigner !== null) {\n        const keys = Object.keys(assigner);\n        keys.forEach((key) => {\n          result[key] = assigner[key];\n        });\n      }\n    }\n    return obj;\n  }\n\n  /**\n   * Get short version/alias for a browser name\n   *\n   * @example\n   *   getBrowserAlias('Microsoft Edge') // edge\n   *\n   * @param  {string} browserName\n   * @return {string}\n   */\n  static getBrowserAlias(browserName) {\n    return BROWSER_ALIASES_MAP[browserName];\n  }\n\n  /**\n   * Get short version/alias for a browser name\n   *\n   * @example\n   *   getBrowserAlias('edge') // Microsoft Edge\n   *\n   * @param  {string} browserAlias\n   * @return {string}\n   */\n  static getBrowserTypeByAlias(browserAlias) {\n    return BROWSER_MAP[browserAlias] || '';\n  }\n}\n","/**\n * Browsers' descriptors\n *\n * The idea of descriptors is simple. You should know about them two simple things:\n * 1. Every descriptor has a method or property called `test` and a `describe` method.\n * 2. Order of descriptors is important.\n *\n * More details:\n * 1. Method or property `test` serves as a way to detect whether the UA string\n * matches some certain browser or not. The `describe` method helps to make a result\n * object with params that show some browser-specific things: name, version, etc.\n * 2. Order of descriptors is important because a Parser goes through them one by one\n * in course. For example, if you insert Chrome's descriptor as the first one,\n * more then a half of browsers will be described as Chrome, because they will pass\n * the Chrome descriptor's test.\n *\n * Descriptor's `test` could be a property with an array of RegExps, where every RegExp\n * will be applied to a UA string to test it whether it matches or not.\n * If a descriptor has two or more regexps in the `test` array it tests them one by one\n * with a logical sum operation. Parser stops if it has found any RegExp that matches the UA.\n *\n * Or `test` could be a method. In that case it gets a Parser instance and should\n * return true/false to get the Parser know if this browser descriptor matches the UA or not.\n */\n\nimport Utils from './utils.js';\n\nconst commonVersionIdentifier = /version\\/(\\d+(\\.?_?\\d+)+)/i;\n\nconst browsersList = [\n  /* Googlebot */\n  {\n    test: [/googlebot/i],\n    describe(ua) {\n      const browser = {\n        name: 'Googlebot',\n      };\n      const version = Utils.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Opera < 13.0 */\n  {\n    test: [/opera/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Opera > 13.0 */\n  {\n    test: [/opr\\/|opios/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera',\n      };\n      const version = Utils.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/SamsungBrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'Samsung Internet for Android',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/Whale/i],\n    describe(ua) {\n      const browser = {\n        name: 'NAVER Whale Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/MZBrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'MZ Browser',\n      };\n      const version = Utils.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/focus/i],\n    describe(ua) {\n      const browser = {\n        name: 'Focus',\n      };\n      const version = Utils.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/swing/i],\n    describe(ua) {\n      const browser = {\n        name: 'Swing',\n      };\n      const version = Utils.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/coast/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera Coast',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/opt\\/\\d+(?:.?_?\\d+)+/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera Touch',\n      };\n      const version = Utils.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/yabrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'Yandex Browser',\n      };\n      const version = Utils.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/ucbrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'UC Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/Maxthon|mxios/i],\n    describe(ua) {\n      const browser = {\n        name: 'Maxthon',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/epiphany/i],\n    describe(ua) {\n      const browser = {\n        name: 'Epiphany',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/puffin/i],\n    describe(ua) {\n      const browser = {\n        name: 'Puffin',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/sleipnir/i],\n    describe(ua) {\n      const browser = {\n        name: 'Sleipnir',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/k-meleon/i],\n    describe(ua) {\n      const browser = {\n        name: 'K-Meleon',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/micromessenger/i],\n    describe(ua) {\n      const browser = {\n        name: 'WeChat',\n      };\n      const version = Utils.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/qqbrowser/i],\n    describe(ua) {\n      const browser = {\n        name: (/qqbrowserlite/i).test(ua) ? 'QQ Browser Lite' : 'QQ Browser',\n      };\n      const version = Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/msie|trident/i],\n    describe(ua) {\n      const browser = {\n        name: 'Internet Explorer',\n      };\n      const version = Utils.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/\\sedg\\//i],\n    describe(ua) {\n      const browser = {\n        name: 'Microsoft Edge',\n      };\n\n      const version = Utils.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/edg([ea]|ios)/i],\n    describe(ua) {\n      const browser = {\n        name: 'Microsoft Edge',\n      };\n\n      const version = Utils.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/vivaldi/i],\n    describe(ua) {\n      const browser = {\n        name: 'Vivaldi',\n      };\n      const version = Utils.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/seamonkey/i],\n    describe(ua) {\n      const browser = {\n        name: 'SeaMonkey',\n      };\n      const version = Utils.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/sailfish/i],\n    describe(ua) {\n      const browser = {\n        name: 'Sailfish',\n      };\n\n      const version = Utils.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/silk/i],\n    describe(ua) {\n      const browser = {\n        name: 'Amazon Silk',\n      };\n      const version = Utils.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/phantom/i],\n    describe(ua) {\n      const browser = {\n        name: 'PhantomJS',\n      };\n      const version = Utils.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/slimerjs/i],\n    describe(ua) {\n      const browser = {\n        name: 'SlimerJS',\n      };\n      const version = Utils.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n    describe(ua) {\n      const browser = {\n        name: 'BlackBerry',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/(web|hpw)[o0]s/i],\n    describe(ua) {\n      const browser = {\n        name: 'WebOS Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/bada/i],\n    describe(ua) {\n      const browser = {\n        name: 'Bada',\n      };\n      const version = Utils.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/tizen/i],\n    describe(ua) {\n      const browser = {\n        name: 'Tizen',\n      };\n      const version = Utils.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/qupzilla/i],\n    describe(ua) {\n      const browser = {\n        name: 'QupZilla',\n      };\n      const version = Utils.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/firefox|iceweasel|fxios/i],\n    describe(ua) {\n      const browser = {\n        name: 'Firefox',\n      };\n      const version = Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/electron/i],\n    describe(ua) {\n      const browser = {\n        name: 'Electron',\n      };\n      const version = Utils.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/MiuiBrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'Miui',\n      };\n      const version = Utils.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/chromium/i],\n    describe(ua) {\n      const browser = {\n        name: 'Chromium',\n      };\n      const version = Utils.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/chrome|crios|crmo/i],\n    describe(ua) {\n      const browser = {\n        name: 'Chrome',\n      };\n      const version = Utils.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/GSA/i],\n    describe(ua) {\n      const browser = {\n        name: 'Google Search',\n      };\n      const version = Utils.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Android Browser */\n  {\n    test(parser) {\n      const notLikeAndroid = !parser.test(/like android/i);\n      const butAndroid = parser.test(/android/i);\n      return notLikeAndroid && butAndroid;\n    },\n    describe(ua) {\n      const browser = {\n        name: 'Android Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* PlayStation 4 */\n  {\n    test: [/playstation 4/i],\n    describe(ua) {\n      const browser = {\n        name: 'PlayStation 4',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Safari */\n  {\n    test: [/safari|applewebkit/i],\n    describe(ua) {\n      const browser = {\n        name: 'Safari',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Something else */\n  {\n    test: [/.*/i],\n    describe(ua) {\n      /* Here we try to make sure that there are explicit details about the device\n       * in order to decide what regexp exactly we want to apply\n       * (as there is a specific decision based on that conclusion)\n       */\n      const regexpWithoutDeviceSpec = /^(.*)\\/(.*) /;\n      const regexpWithDeviceSpec = /^(.*)\\/(.*)[ \\t]\\((.*)/;\n      const hasDeviceSpec = ua.search('\\\\(') !== -1;\n      const regexp = hasDeviceSpec ? regexpWithDeviceSpec : regexpWithoutDeviceSpec;\n      return {\n        name: Utils.getFirstMatch(regexp, ua),\n        version: Utils.getSecondMatch(regexp, ua),\n      };\n    },\n  },\n];\n\nexport default browsersList;\n","import Utils from './utils.js';\nimport { OS_MAP } from './constants.js';\n\nexport default [\n  /* Roku */\n  {\n    test: [/Roku\\/DVP/],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i, ua);\n      return {\n        name: OS_MAP.Roku,\n        version,\n      };\n    },\n  },\n\n  /* Windows Phone */\n  {\n    test: [/windows phone/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i, ua);\n      return {\n        name: OS_MAP.WindowsPhone,\n        version,\n      };\n    },\n  },\n\n  /* Windows */\n  {\n    test: [/windows /i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i, ua);\n      const versionName = Utils.getWindowsVersionName(version);\n\n      return {\n        name: OS_MAP.Windows,\n        version,\n        versionName,\n      };\n    },\n  },\n\n  /* Firefox on iPad */\n  {\n    test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n    describe(ua) {\n      const result = {\n        name: OS_MAP.iOS,\n      };\n      const version = Utils.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/, ua);\n      if (version) {\n        result.version = version;\n      }\n      return result;\n    },\n  },\n\n  /* macOS */\n  {\n    test: [/macintosh/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i, ua).replace(/[_\\s]/g, '.');\n      const versionName = Utils.getMacOSVersionName(version);\n\n      const os = {\n        name: OS_MAP.MacOS,\n        version,\n      };\n      if (versionName) {\n        os.versionName = versionName;\n      }\n      return os;\n    },\n  },\n\n  /* iOS */\n  {\n    test: [/(ipod|iphone|ipad)/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i, ua).replace(/[_\\s]/g, '.');\n\n      return {\n        name: OS_MAP.iOS,\n        version,\n      };\n    },\n  },\n\n  /* Android */\n  {\n    test(parser) {\n      const notLikeAndroid = !parser.test(/like android/i);\n      const butAndroid = parser.test(/android/i);\n      return notLikeAndroid && butAndroid;\n    },\n    describe(ua) {\n      const version = Utils.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i, ua);\n      const versionName = Utils.getAndroidVersionName(version);\n      const os = {\n        name: OS_MAP.Android,\n        version,\n      };\n      if (versionName) {\n        os.versionName = versionName;\n      }\n      return os;\n    },\n  },\n\n  /* WebOS */\n  {\n    test: [/(web|hpw)[o0]s/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i, ua);\n      const os = {\n        name: OS_MAP.WebOS,\n      };\n\n      if (version && version.length) {\n        os.version = version;\n      }\n      return os;\n    },\n  },\n\n  /* BlackBerry */\n  {\n    test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i, ua)\n        || Utils.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i, ua)\n        || Utils.getFirstMatch(/\\bbb(\\d+)/i, ua);\n\n      return {\n        name: OS_MAP.BlackBerry,\n        version,\n      };\n    },\n  },\n\n  /* Bada */\n  {\n    test: [/bada/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i, ua);\n\n      return {\n        name: OS_MAP.Bada,\n        version,\n      };\n    },\n  },\n\n  /* Tizen */\n  {\n    test: [/tizen/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i, ua);\n\n      return {\n        name: OS_MAP.Tizen,\n        version,\n      };\n    },\n  },\n\n  /* Linux */\n  {\n    test: [/linux/i],\n    describe() {\n      return {\n        name: OS_MAP.Linux,\n      };\n    },\n  },\n\n  /* Chrome OS */\n  {\n    test: [/CrOS/],\n    describe() {\n      return {\n        name: OS_MAP.ChromeOS,\n      };\n    },\n  },\n\n  /* Playstation 4 */\n  {\n    test: [/PlayStation 4/],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i, ua);\n      return {\n        name: OS_MAP.PlayStation4,\n        version,\n      };\n    },\n  },\n];\n","import Utils from './utils.js';\nimport { PLATFORMS_MAP } from './constants.js';\n\n/*\n * Tablets go first since usually they have more specific\n * signs to detect.\n */\n\nexport default [\n  /* Googlebot */\n  {\n    test: [/googlebot/i],\n    describe() {\n      return {\n        type: 'bot',\n        vendor: 'Google',\n      };\n    },\n  },\n\n  /* Huawei */\n  {\n    test: [/huawei/i],\n    describe(ua) {\n      const model = Utils.getFirstMatch(/(can-l01)/i, ua) && 'Nova';\n      const platform = {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Huawei',\n      };\n      if (model) {\n        platform.model = model;\n      }\n      return platform;\n    },\n  },\n\n  /* Nexus Tablet */\n  {\n    test: [/nexus\\s*(?:7|8|9|10).*/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Nexus',\n      };\n    },\n  },\n\n  /* iPad */\n  {\n    test: [/ipad/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Apple',\n        model: 'iPad',\n      };\n    },\n  },\n\n  /* Firefox on iPad */\n  {\n    test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Apple',\n        model: 'iPad',\n      };\n    },\n  },\n\n  /* Amazon Kindle Fire */\n  {\n    test: [/kftt build/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Amazon',\n        model: 'Kindle Fire HD 7',\n      };\n    },\n  },\n\n  /* Another Amazon Tablet with Silk */\n  {\n    test: [/silk/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Amazon',\n      };\n    },\n  },\n\n  /* Tablet */\n  {\n    test: [/tablet(?! pc)/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n      };\n    },\n  },\n\n  /* iPod/iPhone */\n  {\n    test(parser) {\n      const iDevice = parser.test(/ipod|iphone/i);\n      const likeIDevice = parser.test(/like (ipod|iphone)/i);\n      return iDevice && !likeIDevice;\n    },\n    describe(ua) {\n      const model = Utils.getFirstMatch(/(ipod|iphone)/i, ua);\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Apple',\n        model,\n      };\n    },\n  },\n\n  /* Nexus Mobile */\n  {\n    test: [/nexus\\s*[0-6].*/i, /galaxy nexus/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Nexus',\n      };\n    },\n  },\n\n  /* Mobile */\n  {\n    test: [/[^-]mobi/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n      };\n    },\n  },\n\n  /* BlackBerry */\n  {\n    test(parser) {\n      return parser.getBrowserName(true) === 'blackberry';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'BlackBerry',\n      };\n    },\n  },\n\n  /* Bada */\n  {\n    test(parser) {\n      return parser.getBrowserName(true) === 'bada';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n      };\n    },\n  },\n\n  /* Windows Phone */\n  {\n    test(parser) {\n      return parser.getBrowserName() === 'windows phone';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Microsoft',\n      };\n    },\n  },\n\n  /* Android Tablet */\n  {\n    test(parser) {\n      const osMajorVersion = Number(String(parser.getOSVersion()).split('.')[0]);\n      return parser.getOSName(true) === 'android' && (osMajorVersion >= 3);\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n      };\n    },\n  },\n\n  /* Android Mobile */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'android';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n      };\n    },\n  },\n\n  /* desktop */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'macos';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n        vendor: 'Apple',\n      };\n    },\n  },\n\n  /* Windows */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'windows';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n      };\n    },\n  },\n\n  /* Linux */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'linux';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n      };\n    },\n  },\n\n  /* PlayStation 4 */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'playstation 4';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tv,\n      };\n    },\n  },\n\n  /* Roku */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'roku';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tv,\n      };\n    },\n  },\n];\n","import Utils from './utils.js';\nimport { ENGINE_MAP } from './constants.js';\n\n/*\n * More specific goes first\n */\nexport default [\n  /* EdgeHTML */\n  {\n    test(parser) {\n      return parser.getBrowserName(true) === 'microsoft edge';\n    },\n    describe(ua) {\n      const isBlinkBased = /\\sedg\\//i.test(ua);\n\n      // return blink if it's blink-based one\n      if (isBlinkBased) {\n        return {\n          name: ENGINE_MAP.Blink,\n        };\n      }\n\n      // otherwise match the version and return EdgeHTML\n      const version = Utils.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      return {\n        name: ENGINE_MAP.EdgeHTML,\n        version,\n      };\n    },\n  },\n\n  /* Trident */\n  {\n    test: [/trident/i],\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.Trident,\n      };\n\n      const version = Utils.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n\n  /* Presto */\n  {\n    test(parser) {\n      return parser.test(/presto/i);\n    },\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.Presto,\n      };\n\n      const version = Utils.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n\n  /* Gecko */\n  {\n    test(parser) {\n      const isGecko = parser.test(/gecko/i);\n      const likeGecko = parser.test(/like gecko/i);\n      return isGecko && !likeGecko;\n    },\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.Gecko,\n      };\n\n      const version = Utils.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n\n  /* Blink */\n  {\n    test: [/(apple)?webkit\\/537\\.36/i],\n    describe() {\n      return {\n        name: ENGINE_MAP.Blink,\n      };\n    },\n  },\n\n  /* WebKit */\n  {\n    test: [/(apple)?webkit/i],\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.WebKit,\n      };\n\n      const version = Utils.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n];\n","import browserParsersList from './parser-browsers.js';\nimport osParsersList from './parser-os.js';\nimport platformParsersList from './parser-platforms.js';\nimport enginesParsersList from './parser-engines.js';\nimport Utils from './utils.js';\n\n/**\n * The main class that arranges the whole parsing process.\n */\nclass Parser {\n  /**\n   * Create instance of Parser\n   *\n   * @param {String} UA User-Agent string\n   * @param {Boolean} [skipParsing=false] parser can skip parsing in purpose of performance\n   * improvements if you need to make a more particular parsing\n   * like {@link Parser#parseBrowser} or {@link Parser#parsePlatform}\n   *\n   * @throw {Error} in case of empty UA String\n   *\n   * @constructor\n   */\n  constructor(UA, skipParsing = false) {\n    if (UA === void (0) || UA === null || UA === '') {\n      throw new Error(\"UserAgent parameter can't be empty\");\n    }\n\n    this._ua = UA;\n\n    /**\n     * @typedef ParsedResult\n     * @property {Object} browser\n     * @property {String|undefined} [browser.name]\n     * Browser name, like `\"Chrome\"` or `\"Internet Explorer\"`\n     * @property {String|undefined} [browser.version] Browser version as a String `\"12.01.45334.10\"`\n     * @property {Object} os\n     * @property {String|undefined} [os.name] OS name, like `\"Windows\"` or `\"macOS\"`\n     * @property {String|undefined} [os.version] OS version, like `\"NT 5.1\"` or `\"10.11.1\"`\n     * @property {String|undefined} [os.versionName] OS name, like `\"XP\"` or `\"High Sierra\"`\n     * @property {Object} platform\n     * @property {String|undefined} [platform.type]\n     * platform type, can be either `\"desktop\"`, `\"tablet\"` or `\"mobile\"`\n     * @property {String|undefined} [platform.vendor] Vendor of the device,\n     * like `\"Apple\"` or `\"Samsung\"`\n     * @property {String|undefined} [platform.model] Device model,\n     * like `\"iPhone\"` or `\"Kindle Fire HD 7\"`\n     * @property {Object} engine\n     * @property {String|undefined} [engine.name]\n     * Can be any of this: `WebKit`, `Blink`, `Gecko`, `Trident`, `Presto`, `EdgeHTML`\n     * @property {String|undefined} [engine.version] String version of the engine\n     */\n    this.parsedResult = {};\n\n    if (skipParsing !== true) {\n      this.parse();\n    }\n  }\n\n  /**\n   * Get UserAgent string of current Parser instance\n   * @return {String} User-Agent String of the current <Parser> object\n   *\n   * @public\n   */\n  getUA() {\n    return this._ua;\n  }\n\n  /**\n   * Test a UA string for a regexp\n   * @param {RegExp} regex\n   * @return {Boolean}\n   */\n  test(regex) {\n    return regex.test(this._ua);\n  }\n\n  /**\n   * Get parsed browser object\n   * @return {Object}\n   */\n  parseBrowser() {\n    this.parsedResult.browser = {};\n\n    const browserDescriptor = Utils.find(browserParsersList, (_browser) => {\n      if (typeof _browser.test === 'function') {\n        return _browser.test(this);\n      }\n\n      if (_browser.test instanceof Array) {\n        return _browser.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (browserDescriptor) {\n      this.parsedResult.browser = browserDescriptor.describe(this.getUA());\n    }\n\n    return this.parsedResult.browser;\n  }\n\n  /**\n   * Get parsed browser object\n   * @return {Object}\n   *\n   * @public\n   */\n  getBrowser() {\n    if (this.parsedResult.browser) {\n      return this.parsedResult.browser;\n    }\n\n    return this.parseBrowser();\n  }\n\n  /**\n   * Get browser's name\n   * @return {String} Browser's name or an empty string\n   *\n   * @public\n   */\n  getBrowserName(toLowerCase) {\n    if (toLowerCase) {\n      return String(this.getBrowser().name).toLowerCase() || '';\n    }\n    return this.getBrowser().name || '';\n  }\n\n\n  /**\n   * Get browser's version\n   * @return {String} version of browser\n   *\n   * @public\n   */\n  getBrowserVersion() {\n    return this.getBrowser().version;\n  }\n\n  /**\n   * Get OS\n   * @return {Object}\n   *\n   * @example\n   * this.getOS();\n   * {\n   *   name: 'macOS',\n   *   version: '10.11.12'\n   * }\n   */\n  getOS() {\n    if (this.parsedResult.os) {\n      return this.parsedResult.os;\n    }\n\n    return this.parseOS();\n  }\n\n  /**\n   * Parse OS and save it to this.parsedResult.os\n   * @return {*|{}}\n   */\n  parseOS() {\n    this.parsedResult.os = {};\n\n    const os = Utils.find(osParsersList, (_os) => {\n      if (typeof _os.test === 'function') {\n        return _os.test(this);\n      }\n\n      if (_os.test instanceof Array) {\n        return _os.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (os) {\n      this.parsedResult.os = os.describe(this.getUA());\n    }\n\n    return this.parsedResult.os;\n  }\n\n  /**\n   * Get OS name\n   * @param {Boolean} [toLowerCase] return lower-cased value\n   * @return {String} name of the OS  macOS, Windows, Linux, etc.\n   */\n  getOSName(toLowerCase) {\n    const { name } = this.getOS();\n\n    if (toLowerCase) {\n      return String(name).toLowerCase() || '';\n    }\n\n    return name || '';\n  }\n\n  /**\n   * Get OS version\n   * @return {String} full version with dots ('10.11.12', '5.6', etc)\n   */\n  getOSVersion() {\n    return this.getOS().version;\n  }\n\n  /**\n   * Get parsed platform\n   * @return {{}}\n   */\n  getPlatform() {\n    if (this.parsedResult.platform) {\n      return this.parsedResult.platform;\n    }\n\n    return this.parsePlatform();\n  }\n\n  /**\n   * Get platform name\n   * @param {Boolean} [toLowerCase=false]\n   * @return {*}\n   */\n  getPlatformType(toLowerCase = false) {\n    const { type } = this.getPlatform();\n\n    if (toLowerCase) {\n      return String(type).toLowerCase() || '';\n    }\n\n    return type || '';\n  }\n\n  /**\n   * Get parsed platform\n   * @return {{}}\n   */\n  parsePlatform() {\n    this.parsedResult.platform = {};\n\n    const platform = Utils.find(platformParsersList, (_platform) => {\n      if (typeof _platform.test === 'function') {\n        return _platform.test(this);\n      }\n\n      if (_platform.test instanceof Array) {\n        return _platform.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (platform) {\n      this.parsedResult.platform = platform.describe(this.getUA());\n    }\n\n    return this.parsedResult.platform;\n  }\n\n  /**\n   * Get parsed engine\n   * @return {{}}\n   */\n  getEngine() {\n    if (this.parsedResult.engine) {\n      return this.parsedResult.engine;\n    }\n\n    return this.parseEngine();\n  }\n\n  /**\n   * Get engines's name\n   * @return {String} Engines's name or an empty string\n   *\n   * @public\n   */\n  getEngineName(toLowerCase) {\n    if (toLowerCase) {\n      return String(this.getEngine().name).toLowerCase() || '';\n    }\n    return this.getEngine().name || '';\n  }\n\n  /**\n   * Get parsed platform\n   * @return {{}}\n   */\n  parseEngine() {\n    this.parsedResult.engine = {};\n\n    const engine = Utils.find(enginesParsersList, (_engine) => {\n      if (typeof _engine.test === 'function') {\n        return _engine.test(this);\n      }\n\n      if (_engine.test instanceof Array) {\n        return _engine.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (engine) {\n      this.parsedResult.engine = engine.describe(this.getUA());\n    }\n\n    return this.parsedResult.engine;\n  }\n\n  /**\n   * Parse full information about the browser\n   * @returns {Parser}\n   */\n  parse() {\n    this.parseBrowser();\n    this.parseOS();\n    this.parsePlatform();\n    this.parseEngine();\n\n    return this;\n  }\n\n  /**\n   * Get parsed result\n   * @return {ParsedResult}\n   */\n  getResult() {\n    return Utils.assign({}, this.parsedResult);\n  }\n\n  /**\n   * Check if parsed browser matches certain conditions\n   *\n   * @param {Object} checkTree It's one or two layered object,\n   * which can include a platform or an OS on the first layer\n   * and should have browsers specs on the bottom-laying layer\n   *\n   * @returns {Boolean|undefined} Whether the browser satisfies the set conditions or not.\n   * Returns `undefined` when the browser is no described in the checkTree object.\n   *\n   * @example\n   * const browser = Bowser.getParser(window.navigator.userAgent);\n   * if (browser.satisfies({chrome: '>118.01.1322' }))\n   * // or with os\n   * if (browser.satisfies({windows: { chrome: '>118.01.1322' } }))\n   * // or with platforms\n   * if (browser.satisfies({desktop: { chrome: '>118.01.1322' } }))\n   */\n  satisfies(checkTree) {\n    const platformsAndOSes = {};\n    let platformsAndOSCounter = 0;\n    const browsers = {};\n    let browsersCounter = 0;\n\n    const allDefinitions = Object.keys(checkTree);\n\n    allDefinitions.forEach((key) => {\n      const currentDefinition = checkTree[key];\n      if (typeof currentDefinition === 'string') {\n        browsers[key] = currentDefinition;\n        browsersCounter += 1;\n      } else if (typeof currentDefinition === 'object') {\n        platformsAndOSes[key] = currentDefinition;\n        platformsAndOSCounter += 1;\n      }\n    });\n\n    if (platformsAndOSCounter > 0) {\n      const platformsAndOSNames = Object.keys(platformsAndOSes);\n      const OSMatchingDefinition = Utils.find(platformsAndOSNames, name => (this.isOS(name)));\n\n      if (OSMatchingDefinition) {\n        const osResult = this.satisfies(platformsAndOSes[OSMatchingDefinition]);\n\n        if (osResult !== void 0) {\n          return osResult;\n        }\n      }\n\n      const platformMatchingDefinition = Utils.find(\n        platformsAndOSNames,\n        name => (this.isPlatform(name)),\n      );\n      if (platformMatchingDefinition) {\n        const platformResult = this.satisfies(platformsAndOSes[platformMatchingDefinition]);\n\n        if (platformResult !== void 0) {\n          return platformResult;\n        }\n      }\n    }\n\n    if (browsersCounter > 0) {\n      const browserNames = Object.keys(browsers);\n      const matchingDefinition = Utils.find(browserNames, name => (this.isBrowser(name, true)));\n\n      if (matchingDefinition !== void 0) {\n        return this.compareVersion(browsers[matchingDefinition]);\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Check if the browser name equals the passed string\n   * @param browserName The string to compare with the browser name\n   * @param [includingAlias=false] The flag showing whether alias will be included into comparison\n   * @returns {boolean}\n   */\n  isBrowser(browserName, includingAlias = false) {\n    const defaultBrowserName = this.getBrowserName().toLowerCase();\n    let browserNameLower = browserName.toLowerCase();\n    const alias = Utils.getBrowserTypeByAlias(browserNameLower);\n\n    if (includingAlias && alias) {\n      browserNameLower = alias.toLowerCase();\n    }\n    return browserNameLower === defaultBrowserName;\n  }\n\n  compareVersion(version) {\n    let expectedResults = [0];\n    let comparableVersion = version;\n    let isLoose = false;\n\n    const currentBrowserVersion = this.getBrowserVersion();\n\n    if (typeof currentBrowserVersion !== 'string') {\n      return void 0;\n    }\n\n    if (version[0] === '>' || version[0] === '<') {\n      comparableVersion = version.substr(1);\n      if (version[1] === '=') {\n        isLoose = true;\n        comparableVersion = version.substr(2);\n      } else {\n        expectedResults = [];\n      }\n      if (version[0] === '>') {\n        expectedResults.push(1);\n      } else {\n        expectedResults.push(-1);\n      }\n    } else if (version[0] === '=') {\n      comparableVersion = version.substr(1);\n    } else if (version[0] === '~') {\n      isLoose = true;\n      comparableVersion = version.substr(1);\n    }\n\n    return expectedResults.indexOf(\n      Utils.compareVersions(currentBrowserVersion, comparableVersion, isLoose),\n    ) > -1;\n  }\n\n  isOS(osName) {\n    return this.getOSName(true) === String(osName).toLowerCase();\n  }\n\n  isPlatform(platformType) {\n    return this.getPlatformType(true) === String(platformType).toLowerCase();\n  }\n\n  isEngine(engineName) {\n    return this.getEngineName(true) === String(engineName).toLowerCase();\n  }\n\n  /**\n   * Is anything? Check if the browser is called \"anything\",\n   * the OS called \"anything\" or the platform called \"anything\"\n   * @param {String} anything\n   * @param [includingAlias=false] The flag showing whether alias will be included into comparison\n   * @returns {Boolean}\n   */\n  is(anything, includingAlias = false) {\n    return this.isBrowser(anything, includingAlias) || this.isOS(anything)\n      || this.isPlatform(anything);\n  }\n\n  /**\n   * Check if any of the given values satisfies this.is(anything)\n   * @param {String[]} anythings\n   * @returns {Boolean}\n   */\n  some(anythings = []) {\n    return anythings.some(anything => this.is(anything));\n  }\n}\n\nexport default Parser;\n","/*!\n * Bowser - a browser detector\n * https://github.com/lancedikson/bowser\n * MIT License | (c) Dustin Diaz 2012-2015\n * MIT License | (c) Denis Demchenko 2015-2019\n */\nimport Parser from './parser.js';\nimport {\n  BROWSER_MAP,\n  ENGINE_MAP,\n  OS_MAP,\n  PLATFORMS_MAP,\n} from './constants.js';\n\n/**\n * Bowser class.\n * Keep it simple as much as it can be.\n * It's supposed to work with collections of {@link Parser} instances\n * rather then solve one-instance problems.\n * All the one-instance stuff is located in Parser class.\n *\n * @class\n * @classdesc Bowser is a static object, that provides an API to the Parsers\n * @hideconstructor\n */\nclass Bowser {\n  /**\n   * Creates a {@link Parser} instance\n   *\n   * @param {String} UA UserAgent string\n   * @param {Boolean} [skipParsing=false] Will make the Parser postpone parsing until you ask it\n   * explicitly. Same as `skipParsing` for {@link Parser}.\n   * @returns {Parser}\n   * @throws {Error} when UA is not a String\n   *\n   * @example\n   * const parser = Bowser.getParser(window.navigator.userAgent);\n   * const result = parser.getResult();\n   */\n  static getParser(UA, skipParsing = false) {\n    if (typeof UA !== 'string') {\n      throw new Error('UserAgent should be a string');\n    }\n    return new Parser(UA, skipParsing);\n  }\n\n  /**\n   * Creates a {@link Parser} instance and runs {@link Parser.getResult} immediately\n   *\n   * @param UA\n   * @return {ParsedResult}\n   *\n   * @example\n   * const result = Bowser.parse(window.navigator.userAgent);\n   */\n  static parse(UA) {\n    return (new Parser(UA)).getResult();\n  }\n\n  static get BROWSER_MAP() {\n    return BROWSER_MAP;\n  }\n\n  static get ENGINE_MAP() {\n    return ENGINE_MAP;\n  }\n\n  static get OS_MAP() {\n    return OS_MAP;\n  }\n\n  static get PLATFORMS_MAP() {\n    return PLATFORMS_MAP;\n  }\n}\n\nexport default Bowser;\n","import Bowser from 'bowser/src/bowser.js'\n\nexport default class Browser {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    const documentElement = document.documentElement\n\n    // Browser detect\n    const browser = Bowser.getParser(window.navigator.userAgent)\n\n    // Platform type class\n    documentElement.classList.add('is-' + browser.getPlatformType())\n\n    if (browser.is('mobile') || browser.is('tablet')) {\n      documentElement.classList.add('is-handheld')\n    }\n\n    // Browser class\n    if (browser.is('Safari')) {\n      documentElement.classList.add('is-safari')\n      documentElement.classList.add('is-safari-' + browser.getBrowserVersion())\n    }\n\n    luge.browser = browser\n  }\n}\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nclass ViewportObserver {\n  constructor () {\n    this.elements = []\n\n    LifeCycle.add('siteInit', this.init.bind(this), 20)\n  }\n\n  /**\n   * Init\n   */\n  init (done) {\n    this.createObserver()\n\n    done()\n  }\n\n  /**\n   * Create observer\n   */\n  createObserver () {\n    this.observer = new IntersectionObserver(\n      this.intersectionCallback.bind(this),\n      {\n        threshold: [Luge.settings.intersection.threshold]\n      }\n    )\n  }\n\n  /**\n   * Intersection callback\n   * @param {IntersectionObserverEntry[]} entries IntersectionObserverEntry objects\n   */\n  intersectionCallback (entries) {\n    entries.forEach((entry) => {\n      const element = entry.target\n      let position = 'in'\n\n      if (!entry.isIntersecting) {\n        if (entry.boundingClientRect.y <= 0) {\n          position = 'above'\n        } else {\n          position = 'under'\n        }\n      }\n\n      if (element.luge.viewport.position !== position) {\n        element.luge.viewport.position = position\n\n        element.dispatchEvent(new CustomEvent('viewportintersect'))\n\n        if (position === 'in') {\n          element.dispatchEvent(new CustomEvent('viewportin'))\n        } else {\n          element.dispatchEvent(new CustomEvent('viewportout'))\n          element.dispatchEvent(new CustomEvent('viewport' + position))\n        }\n      }\n    })\n  }\n\n  /**\n   * Add element to observe\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    this.observer.observe(element)\n\n    const properties = {\n      viewport: {\n        position: 'out'\n      }\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n  }\n\n  /**\n   * Remove observed element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    this.observer.unobserve(element)\n  }\n}\n\nexport default new ViewportObserver()\n","import Luge from './Core'\n\nclass Ticker {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.callbacks = []\n    this.onceCallbacks = []\n\n    if (!Luge.settings.ticker.external) {\n      this.fps = 60\n      this.fpsInterval = 1000 / this.fps\n      this.lastTickTime = null\n\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Add a tick function\n   * @param {Function} callback Tick function\n   * @param {Object} context Context\n   */\n  add (callback, context) {\n    let exists = false\n    this.callbacks.forEach(object => {\n      if (object.cb === callback && object.context === context) {\n        exists = true\n      }\n    })\n\n    if (!exists) {\n      this.callbacks.push({\n        cb: callback,\n        context: context\n      })\n    }\n  }\n\n  /**\n   * Remove a tick function\n   * @param {String} id Tick ID\n   * @param {Object} context Context\n   */\n  remove (callback, context) {\n    const self = this\n\n    this.callbacks.forEach((object, index) => {\n      if (object.cb === callback && object.context === context) {\n        delete self.callbacks[index]\n      }\n    })\n  }\n\n  /**\n   * Execute function at next tick\n   * @param {Function} callback Function to execute\n   * @param {Object} context Context\n   */\n  nextTick (callback, context) {\n    this.onceCallbacks.push({\n      cb: callback,\n      context: context\n    })\n  }\n\n  /**\n   * Call tick function\n   */\n  _tick (nowTime) {\n    const elapsedTime = nowTime - this.lastTickTime\n\n    if (elapsedTime > this.fpsInterval) {\n      this.tick(nowTime)\n      this.lastTickTime = nowTime - (elapsedTime % this.fpsInterval)\n    }\n\n    if (!Luge.settings.ticker.external) {\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Call tick functions\n   */\n  tick (nowTime) {\n    const self = this\n\n    this.callbacks.forEach(object => {\n      object.cb.apply(object.context, [nowTime])\n    })\n\n    this.onceCallbacks.forEach((object, index) => {\n      object.cb.apply(object.context, [nowTime])\n\n      delete self.onceCallbacks[index]\n    })\n  }\n}\n\nexport default new Ticker()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass MouseObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n\n    this.timeouts = {\n      scroll: null\n    }\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    Ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('mouseMove', this.mouseHandler, this)\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n    }, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    clearTimeout(this.timeouts.scroll)\n    this.timeouts.scroll = setTimeout(this.getBoundingThrottle.bind(this), 75)\n  }\n\n  /**\n   * Mouse handler\n   */\n  mouseHandler () {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.setElementPosition(element)\n    })\n\n    window.mouseLastScrollTop = window.scrollTop\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.elementsToBound = this.elements\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bouding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n      this.setElementPosition(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    const properties = {\n      anchor: {\n        x: bounding.left,\n        y: bounding.top + window.unifiedScrollTop\n      },\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Set element position\n   * @param {HTMLElement} element Element\n   */\n  setElementPosition (element) {\n    if (element.luge && element.luge.anchor) {\n      const mouse = {\n        x: window.mouseX - element.luge.anchor.x,\n        y: window.mouseY - element.luge.anchor.y + window.unifiedScrollTop\n      }\n\n      mouse.progressX = Helpers.clamp(mouse.x / element.luge.width, 0, 1)\n      mouse.progressY = Helpers.clamp(mouse.y / element.luge.height, 0, 1)\n\n      element.luge.mouse = Helpers.mergeDeep(element.luge.mouse, mouse)\n    }\n  }\n\n  /**\n   * Add mouse element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove mouse element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    const self = this\n    const diffScroll = window.scrollTop - window.mouseLastScrollTop\n\n    if (diffScroll !== 0) {\n      this.elements.forEach(element => {\n        self.setElementPosition(element)\n      })\n    }\n  }\n}\n\nexport default new MouseObserver()\n","import Emitter from './Emitter'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass ScrollObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    this.isUpdating = false\n\n    this.setMaxScrollTop()\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n    Emitter.on('update', this.updateHandler, this, false, 5)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.isUpdating = true\n\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n      this.checkElementsThrottle()\n    }, this)\n  }\n\n  /**\n   * Set max scroll top\n   */\n  setMaxScrollTop () {\n    window.maxScrollTop = Math.max(\n      document.body ? document.body.scrollHeight : 0,\n      document.body ? document.body.offsetHeight : 0,\n      document.documentElement.clientHeight,\n      document.documentElement.scrollHeight,\n      document.documentElement.offsetHeight\n    ) - window.innerHeight\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.setMaxScrollTop()\n\n    this.elements.forEach(element => {\n      if (!this.elementsToBound.includes(element)) {\n        element.scrollProgress = 0\n\n        this.elementsToBound.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bounding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    element.scrollStart = bounding.top + window.unifiedScrollTop - (window.innerHeight * element.scrollTriggerStart)\n\n    element.scrollEnd = element.scrollStart + element.clientHeight + (window.innerHeight * (element.scrollTriggerStart - element.scrollTriggerEnd))\n    element.scrollEnd = Math.min(element.scrollEnd, window.maxScrollTop)\n\n    element.scrollMiddle = element.scrollStart + (element.scrollEnd - element.scrollStart) / 2\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Check elements throttle\n   */\n  checkElementsThrottle () {\n    this.elements.forEach(element => {\n      if (!this.elementsToCheck.includes(element)) {\n        this.elementsToCheck.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.checkElements.bind(this))\n  }\n\n  /**\n   * Check elements position\n   */\n  checkElements () {\n    this.elementsToCheck.forEach(element => {\n      this.checkElement(element)\n    })\n    this.elementsToCheck = []\n\n    if (this.isUpdating) {\n      Emitter.emit('afterScrollUpdate')\n      this.isUpdating = false\n    }\n  }\n\n  /**\n   * Check individual element position\n   * @param {HTMLElement} element Element to check\n   */\n  checkElement (element) {\n    const scrollTop = window.unifiedScrollTop\n\n    let position = ''\n    let progress = 0\n\n    if (element.scrollStart < 0 && !element.scrollStartForce) {\n      progress = Math.min(Math.max(scrollTop / element.scrollEnd, 0), 1)\n    } else {\n      progress = Math.min(Math.max((scrollTop - element.scrollStart) / (element.scrollEnd - element.scrollStart), 0), 1)\n    }\n\n    if (isNaN(progress)) {\n      progress = 0\n    }\n\n    if (progress <= 0 && element.scrollStart > 0) {\n      position = 'under'\n    } else if (progress >= 1 && element.scrollEnd < window.maxScrollTop) {\n      position = 'above'\n    } else {\n      position = 'in'\n    }\n\n    if (progress > element.scrollProgress) {\n      element.scrollDirection = 'down'\n    } else {\n      element.scrollDirection = 'up'\n    }\n\n    element.scrollProgress = progress\n\n    if (element.viewportPosition !== position) {\n      element.viewportPosition = position\n\n      element.dispatchEvent(new CustomEvent('viewportintersect'))\n      element.dispatchEvent(new CustomEvent('viewport' + position))\n\n      if (position !== 'in') {\n        element.dispatchEvent(new CustomEvent('viewportout'))\n      }\n\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    } else if (progress > 0 && progress < 1) {\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    }\n  }\n\n  /**\n   * Add scroll element\n   * @param {HTMLElement} element Element\n   * @param {Number} start Trigger start point, in percentage of the viewport height\n   * @param {Number} end Trigger end point, in percentage of the viewport height\n   * @param {Boolean} force Force scroll progress to start from element position\n   */\n  add (element, start = 1, end = 0, force = false) {\n    if (!this.elements.includes(element)) {\n      element.scrollProgress = 0\n      element.scrollTriggerStart = start\n      element.scrollTriggerEnd = end\n\n      element.scrollStartForce = force\n\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n        this.elementsToCheck.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove scroll element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n\n    if (this.elementsToCheck.includes(element)) {\n      this.elementsToCheck.splice(this.elementsToCheck.indexOf(element), 1)\n    }\n  }\n}\n\nexport default new ScrollObserver()\n","import LifeCycle from './LifeCycle'\nimport Core from './Core'\nimport Emitter from './Emitter'\nimport ViewportObserver from './ViewportObserver'\nimport MouseObserver from './MouseObserver'\nimport ScrollObserver from './ScrollObserver'\nimport Ticker from './Ticker'\n\nclass Luge {\n  plugins = {}\n\n  constructor() {\n    this.emitter = {\n      emit: Emitter.emit.bind(Emitter),\n      off: Emitter.off.bind(Emitter),\n      on: Emitter.on.bind(Emitter),\n      once: Emitter.once.bind(Emitter)\n    }\n\n    this.viewportobserver = {\n      add: ViewportObserver.add.bind(ViewportObserver),\n      remove: ViewportObserver.remove.bind(ViewportObserver)\n    }\n\n    this.lifecycle = {\n      add: LifeCycle.add.bind(LifeCycle),\n      refresh: LifeCycle.cycle.bind(LifeCycle, 'refresh'),\n      remove: LifeCycle.remove.bind(LifeCycle),\n      debug: LifeCycle.enableDebug.bind(LifeCycle),\n      _cycle: LifeCycle.cycle.bind(LifeCycle)\n    }\n\n    this.mouseobserver = {\n      add: MouseObserver.add.bind(MouseObserver),\n      remove: MouseObserver.remove.bind(MouseObserver)\n    }\n\n    this.scrollobserver = {\n      add: ScrollObserver.add.bind(ScrollObserver),\n      remove: ScrollObserver.remove.bind(ScrollObserver),\n      updateHandler: ScrollObserver.updateHandler.bind(ScrollObserver)\n    }\n\n    this.ticker = {\n      add: Ticker.add.bind(Ticker),\n      nextTick: Ticker.nextTick.bind(Ticker),\n      remove: Ticker.remove.bind(Ticker),\n      tick: Ticker.tick.bind(Ticker)\n    }\n\n    // TODO!: rename to setSettings\n    this.settings = Core.setSettings.bind(Core)\n  }\n\n  init() {\n    // Site init on DOM ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', LifeCycle.cycle.bind(LifeCycle, 'load'), { once: true })\n    } else {\n      this.ticker.nextTick(() => {\n        LifeCycle.cycle('load')\n      },\n      null)\n    }\n  }\n\n  addPlugin(key, Plugin) {\n    this.plugins[key] = new Plugin(this)\n  }\n\n  get _settings() {\n    return Core.settings\n  }\n}\n\nexport default Luge\n"],"names":["Helpers$1","Helpers","isObject","item","Array","isArray","isString","mergeDeep","target","source","output","Object","assign","keys","forEach","key","_Object$assign","_Object$assign2","toCamelCase","string","replace","word","index","toLowerCase","toUpperCase","deepFreeze","obj","prop","freeze","clamp","x","lower","upper","Math","min","max","Emitter","this","events","_proto","prototype","on","name","callback","context","once","position","push","cb","emit","self","data","slice","call","arguments","sort","a","b","object","apply","off","Emitter$2","LifeCycle$1","LifeCycle","_this","eventsName","eventName","callbacks","done","cycles","load","reload","transition","refresh","debug","cycle","cycleName","current","console","log","proceed","_this2","length","event","next","wait","requestAnimationFrame","bind","add","remove","_this3","enableDebug","value","Luge","settings","cursor","inertia","trailLength","intersection","threshold","lottie","renderer","subFrame","mouse","parallax","preloader","duration","reveal","stagger","scroll","start","end","smooth","ticker","external","credits","show","timeouts","resizeThrottle","scrollEnd","windowWidth","windowHeight","clientWidth","window","scrollTop","scrollY","unifiedScrollTop","maxScrollTop","scrollProgress","previousScrollTop","isScrolling","mouseX","mouseY","mouseLastScrollTop","siteInit","afterPageLoad","bindEvents","setSettings","showCredits","setCSSProperties","scrollHandler","addEventListener","mouseHandler","passive","e","pageY","pageX","clearTimeout","setTimeout","resizeHandler","innerWidth","document","documentElement","innerHeight","clientHeight","style","setProperty","scrollStart","hasSmoothScroll","updateScroll","classList","consoleBaseStyle","consoleBoldStyle","VERSION","includes","Core","Plugin","slug","pluginSlug","beforeInit","isDisabled","disabled","init","setAttributes","pluginAttributes","getAttributes","element","attributes","attribute","attributeKey","attributeValue","dataset","type","defaultValue","undefined","Boolean","luge","PreLoader","_Plugin","intro","playerIn","startTime","Date","now","doneLoad","_assertThisInitialized","_inheritsLoose","el","querySelector","root","initLottie","lifecycle","siteIn","pageLoad","String","Number","_settings","in","reverse","elapsed","remaining","clear","play","getComputedStyle","getPropertyValue","destroy","parentNode","removeChild","animIn","loadAnimation","container","loop","autoplay","path","rendererSettings","preserveAspectRatio","setDirection","goToAndStop","totalFrames","setAttribute","Reveal","elements","toRevealIn","toRevealOut","removed","reveals","out","canReveal","onScrollProgress","pageInit","pageKill","disable","manual","multiple","delay","emitter","updateHandler","afterScrollUpdateHandler","addElements","querySelectorAll","enable","browser","is","addElement","closest","revealName","revealCallback","setRevealClasses","scrollobserver","from","children","child","childRevealName","lgReveal","nextTick","lgRevealChild","isRevealed","removeElement","single","removeEventListener","splice","indexOf","checkElement","checkElements","_this4","state","round","abs","safeHeight","_this5","revealElements","_this6","revealInTimeout","states","split","dispatchEvent","CustomEvent","Transition","url","location","href","oldUrl","pathname","pageFetched","currentPage","prevScrollTop","newScrollTop","transitions","linkTransition","listeners","linkHandler","getOldUrl","getNewUrl","hasAttribute","initLoader","historyStateChanged","pageFetch","pageOut","pageIn","pageCreate","bindLinksEvent","unbindLinksEvent","currentTarget","getAttribute","origin","preventDefault","navigateTo","prefetchLink","createElement","rel","head","appendChild","_cycle","loader","animOut","playerOut","fetch","credentials","then","response","text","body","html","DOMParser","parseFromString","newPage","insertAdjacentElement","opacity","top","left","width","className","oldTitle","newTitle","innerText","behavior","smoothScrollTop","history","pushState","oldPage","page","pageName","onpageout","stop","svgElement","onpagein","contains","goToAndPlay","URL","ScrollAnimation","allowedProperties","transformProperties","presets","tick","yoyo","animate","randInertia","match","random","scrollAnimation","smoothProgress","properties","JSON","parse","declarations","property","values","fromValue","toValue","unit","safeProperty","to","animation","atDest","_step","_iterator","_createForOfIteratorHelperLoose","progress","_i","_Object$entries","entries","_Object$entries$_i","translate3d","transform","_i2","_Object$entries2","_Object$entries2$_i","y","z","join","styles","willChange","_i3","_Object$entries3","_Object$entries3$_i","_i4","_Object$entries4","_Object$entries4$_i","diff","SmoothScroll","smoothscroll","hasSmooth","lenis","Lenis","raf","Cursor","cursors","pointers","trails","hoverTags","hide","hoverHandler","capture","resetHover","pointer","smoothPosition","trail","svg","createElementNS","points","tag","tagName","hover","toggle","newClasses","timestamp","shift","d","controlPoint","previous","pointA","pointB","lengthX","lengthY","o","sqrt","pow","angle","atan2","PI","cos","sin","command","reduce","acc","point","i","_controlPoint","cpsX","cpsY","_controlPoint2","cpeY","svgPath","Intersection","onViewportIntersect","class","viewportobserver","_document$documentEle","_document$documentEle2","viewport","CSSClass","LottiePlayer","deferInit","loopFrame","persistent","required","force","lazy","subframe","waitLoad","player","isLoaded","toAutoplay","toLoad","requireds","initPlayer","viewportPosition","isPaused","scrollPaused","pause","initLazy","setSubframe","setPlayerStateClasses","currentFrame","playDirection","playerLoaded","playing","MouseAnimation","mouseSpeed","getMouseMovement","mouseobserver","smoothX","smoothY","smoothProgressX","smoothProgressY","distX","distY","dist","hypot","mouseAngle","mouseDirection","progressX","progressY","diffX","diffY","Parallax","amplitude","anchor","randAmplitude","overflow","movement","smoothMovement","moveElement","BROWSER_ALIASES_MAP","Bada","BlackBerry","Chrome","Chromium","Electron","Epiphany","Firefox","Focus","Generic","Googlebot","Maxthon","Opera","PhantomJS","Puffin","QupZilla","QQ","QQLite","Safari","Sailfish","SeaMonkey","Sleipnir","Swing","Tizen","Vivaldi","WeChat","Roku","BROWSER_MAP","amazon_silk","android","bada","blackberry","chrome","chromium","electron","epiphany","firefox","focus","generic","googlebot","google_search","ie","k_meleon","maxthon","edge","mz","naver","opera","opera_coast","phantomjs","puffin","qupzilla","qq","qqlite","safari","sailfish","samsung_internet","seamonkey","sleipnir","swing","tizen","uc","vivaldi","webos","wechat","yandex","PLATFORMS_MAP","tablet","mobile","desktop","tv","OS_MAP","WindowsPhone","Windows","MacOS","iOS","Android","WebOS","Linux","ChromeOS","PlayStation4","ENGINE_MAP","EdgeHTML","Blink","Trident","Presto","Gecko","WebKit","Utils","getFirstMatch","regexp","ua","getSecondMatch","matchAndReturnConst","_const","test","getWindowsVersionName","version","getMacOSVersionName","v","map","s","parseInt","getAndroidVersionName","getVersionPrecision","compareVersions","versionA","versionB","isLoose","versionAPrecision","versionBPrecision","precision","lastPrecision","chunks","delta","_version","chunk","arr","iterator","result","find","predicate","l","assigners","assigner","getBrowserAlias","browserName","getBrowserTypeByAlias","browserAlias","commonVersionIdentifier","browsersList","describe","parser","notLikeAndroid","butAndroid","search","osParsersList","versionName","os","platformParsersList","vendor","model","platform","iDevice","likeIDevice","getBrowserName","osMajorVersion","getOSVersion","getOSName","enginesParsersList","engine","isGecko","likeGecko","Parser","constructor","UA","skipParsing","Error","_ua","parsedResult","getUA","regex","parseBrowser","browserDescriptor","browserParsersList","_browser","some","condition","getBrowser","getBrowserVersion","getOS","parseOS","_os","getPlatform","parsePlatform","getPlatformType","_platform","getEngine","parseEngine","getEngineName","_engine","getResult","satisfies","checkTree","platformsAndOSes","platformsAndOSCounter","browsers","browsersCounter","currentDefinition","platformsAndOSNames","OSMatchingDefinition","isOS","osResult","platformMatchingDefinition","isPlatform","platformResult","browserNames","matchingDefinition","isBrowser","compareVersion","includingAlias","defaultBrowserName","browserNameLower","alias","expectedResults","comparableVersion","currentBrowserVersion","substr","osName","platformType","isEngine","engineName","anything","anythings","Bowser","getParser","Browser","navigator","userAgent","ViewportObserver$1","ViewportObserver","createObserver","observer","IntersectionObserver","intersectionCallback","entry","isIntersecting","boundingClientRect","observe","unobserve","Ticker$1","Ticker","onceCallbacks","fps","fpsInterval","lastTickTime","_tick","exists","nowTime","elapsedTime","MouseObserver$1","MouseObserver","elementsToBound","getBoundingThrottle","setElementPosition","getBounding","setElementBounding","bounding","getBoundingClientRect","offsetWidth","height","offsetHeight","ScrollObserver$1","ScrollObserver","elementsToCheck","isUpdating","setMaxScrollTop","checkElementsThrottle","scrollHeight","scrollTriggerStart","scrollTriggerEnd","scrollMiddle","scrollStartForce","isNaN","scrollDirection","plugins","readyState","addPlugin","get","Luge$1"],"mappings":"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"}