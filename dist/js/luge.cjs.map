{"version":3,"file":"luge.cjs","sources":["../../src/js/luge/core/Helpers.js","../../src/js/luge/core/Emitter.js","../../src/js/luge/core/LifeCycle.js","../../src/js/luge/core/Core.js","../../src/js/luge/core/Plugin.js","../../src/js/luge/plugins/Preloader.js","../../src/js/luge/plugins/Reveal.js","../../src/js/luge/plugins/Transition.js","../../src/js/luge/plugins/ScrollAnimation.js","../../src/js/luge/plugins/SmoothScroll.js","../../src/js/luge/plugins/Cursor.js","../../src/js/luge/plugins/Intersection.js","../../src/js/luge/plugins/LottiePlayer.js","../../src/js/luge/plugins/MouseAnimation.js","../../src/js/luge/plugins/Parallax.js","../../src/js/luge/core/ViewportObserver.js","../../src/js/luge/core/Ticker.js","../../src/js/luge/core/MouseObserver.js","../../src/js/luge/core/ScrollObserver.js","../../src/js/luge/core/index.js","../../src/js/luge/plugins/Browser.js"],"sourcesContent":["class Helpers {\n  /**\n   * Check if the variable is an array\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isArray(item) {\n    return (item && typeof item === 'object' && Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is an object\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isObject(item) {\n    return (item && typeof item === 'object' && !Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is a string\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isString(item) {\n    return (item && typeof item === 'string')\n  }\n\n  /**\n   * Deep merge two objects\n   * @param {Object} target\n   * @param {Object} source\n   * @returns {Object} Merged object\n   */\n  static mergeDeep(target, source) {\n    const output = Object.assign({}, target)\n    if (Helpers.isObject(target) && Helpers.isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (Helpers.isObject(source[key])) {\n          if (!(key in target)) {\n            Object.assign(output, { [key]: source[key] })\n          } else {\n            if (Helpers.isObject(target[key]) && Helpers.isObject(source[key])) {\n              output[key] = Helpers.mergeDeep(target[key], source[key])\n            } else {\n              output[key] = source[key]\n            }\n          }\n        } else {\n          Object.assign(output, { [key]: source[key] })\n        }\n      })\n    }\n    return output\n  }\n\n  /**\n   * Convert a string to camelCase\n   * @param {String} string The string to convert\n   */\n  static toCamelCase (string) {\n    if (Helpers.isString(string)) {\n      return string.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (word, index) => {\n        return index === 0 ? word.toLowerCase() : word.toUpperCase()\n      }).replace(/\\W+/g, '')\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Convert a string to UpperCamelCase\n   * @param {String} string The string to convert\n   */\n  static toUpperCamelCase (string) {\n    if (Helpers.isString(string)) {\n      string = Helpers.toCamelCase(string)\n\n      return string.charAt(0).toUpperCase() + string.slice(1)\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Check if an element is still in the page's body\n   * @param {HTMLElement} node\n   * @returns {Boolean}\n   */\n  static isInPage (node) {\n    return (node === document.body) ? false : document.body.contains(node)\n  }\n\n  /**\n   * Deep freeze an object\n   * @param {Object} obj\n   * @returns {Object} freezed object\n   */\n  static deepFreeze(obj) {\n    Object.keys(obj).forEach(prop => {\n      if (typeof obj[prop] === 'object') Helpers.deepFreeze(obj[prop])\n    })\n    return Object.freeze(obj)\n  }\n\n  /**\n   * Clamp x between lower and upper\n   * @param {Number} x\n   * @param {Number} lower\n   * @param {Number} upper\n   * @returns {Number} clamped Number\n   */\n  static clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n}\n\nexport default Helpers\n","class Emitter {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.events = []\n  }\n\n  /**\n   * Attach handler to event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   * @param {Boolean} once Call handler only once\n   */\n  on (name, callback, context, once = false) {\n    (this.events[name] || (this.events[name] = [])).push({\n      cb: callback,\n      context: context,\n      once: once\n    })\n  }\n\n  /**\n   * Single event handler\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   */\n  once (name, callback, context) {\n    this.on(name, callback, context, true)\n  }\n\n  /**\n   * Emit event\n   * @param {String} name Event Name\n   */\n  emit (name) {\n    const self = this\n    const data = [].slice.call(arguments, 1)\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        object.cb.apply(object.context, data)\n\n        if (object.once) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Detact handler from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   */\n  off (name, callback) {\n    const self = this\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        if (object.cb === callback) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n}\n\nexport default new Emitter()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass LifeCycle {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.eventsName = [\n      'siteInit',\n      'pageInit',\n      'siteLoad',\n      'pageLoad',\n      'siteIn',\n      'pageIn',\n      'reveal',\n      'pageFetch',\n      'pageOut',\n      'pageCreate',\n      'pageKill',\n      'siteReload'\n    ]\n\n    this.events = {}\n\n    this.eventsName.forEach(eventName => {\n      this.events[eventName] = {\n        callbacks: [],\n        done: 0\n      }\n    })\n\n    this.cycles = {\n      load: {\n        events: [\n          'siteInit',\n          'pageInit',\n          ['siteLoad', 'pageLoad'],\n          'siteIn',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      reload: {\n        events: [\n          'pageOut',\n          'siteReload'\n        ]\n      },\n      transition: {\n        events: [\n          ['pageFetch', 'pageOut'],\n          'pageCreate',\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      refresh: {\n        events: [\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      }\n    }\n\n    this.debug = false\n  }\n\n  /**\n   * Start a cycle\n   * @param {String} cycleName Cycle name\n   */\n  cycle (cycleName) {\n    if (this.cycles[cycleName]) {\n      this.cycles[cycleName].current = 0\n\n      if (this.debug) {\n        console.log('Start cycle: ' + cycleName)\n      }\n\n      for (const eventName in this.events) {\n        this.events[eventName].done = 0\n      }\n\n      this.proceed(cycleName)\n    }\n  }\n\n  /**\n   * Proceed current cycle event\n   * @param {String} cycleName Cycle name\n   */\n  proceed (cycleName) {\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      // Do current event\n      if (Array.isArray(event)) {\n        event.forEach(eventName => {\n          this.do(cycleName, eventName)\n        })\n      } else {\n        this.do(cycleName, event)\n      }\n    } else {\n      // Cycle ended\n      if (this.debug) {\n        console.log(cycleName + ' cycle ended')\n      }\n    }\n  }\n\n  /**\n   * Move to next cycle event\n   * @param {String} cycleName Cycle name\n   */\n  next (cycleName) {\n    const self = this\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      let next = true\n      let wait = []\n\n      // Get events to wait for\n      if (typeof event === 'string') {\n        wait = Array(event)\n      } else {\n        wait = event\n      }\n\n      // Check if all events are done\n      if (wait.length > 1) {\n        wait.forEach(eventName => {\n          if (self.events[eventName].done === 0 || self.events[eventName].done < self.events[eventName].callbacks.length) {\n            next = false\n          }\n        })\n      }\n\n      if (next) {\n        // Proceed to next event\n        this.cycles[cycleName].current++\n        requestAnimationFrame(this.proceed.bind(this, cycleName))\n      } else {\n        // Wait for all events to be done\n      }\n    }\n  }\n\n  /**\n   * Hook callback to event\n   * @param {String} eventName Event name\n   * @param {Function} callback Callback function\n   * @param {Int} position Execution order\n   * @param {String} cycleName Cycle name\n   */\n  add (eventName, callback, position = 10, cycleName = null) {\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.push({\n        callback: callback,\n        position: position,\n        cycle: cycleName\n      })\n    }\n  }\n\n  /**\n   * Detach callback from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {String} cycleName Cycle name\n   */\n  remove (eventName, callback, cycleName = null) {\n    const self = this\n\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.forEach((event, index) => {\n        if (event.callback === callback && event.cycle === cycleName) {\n          delete self.events[eventName].callbacks[index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Call hooked callbacks\n   * @param {String} cycleName Cycle name\n   * @param {String} eventName Event name\n   */\n  do (cycleName, eventName) {\n    this.events[eventName].done = 0\n\n    // Call hooked callbacks\n    if (this.events[eventName].callbacks.length > 0) {\n      if (this.debug) {\n        console.log('Do event: ' + eventName + ' (' + cycleName + ' cycle)')\n      }\n\n      Emitter.emit(Helpers.toCamelCase('before-' + eventName))\n\n      const callbacks = this.events[eventName].callbacks.sort((a, b) => {\n        return a.position - b.position\n      })\n\n      callbacks.forEach(object => {\n        if (object.cycle === null || object.cycle === cycleName) {\n          object.callback(() => this.done(cycleName, eventName))\n        } else {\n          this.done(cycleName, eventName)\n        }\n      })\n    } else {\n      this.done(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Count done action\n   * @param {String} eventName Event name\n   */\n  done (cycleName, eventName) {\n    this.events[eventName].done++\n\n    if (this.debug) {\n      console.log('Done event: ' + eventName + ' ' + this.events[eventName].done + '/' + this.events[eventName].callbacks.length + ' (' + cycleName + ' cycle)')\n    }\n\n    Emitter.emit(Helpers.toCamelCase('after-' + eventName))\n\n    // All callback are done, call next action\n    if (this.events[eventName].done >= this.events[eventName].callbacks.length) {\n      this.next(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Enable debug\n   * @param {Boolean} value Enable debug\n   */\n  enableDebug (value = true) {\n    this.debug = value\n  }\n}\n\nexport default new LifeCycle()\n","import LifeCycle from './LifeCycle'\nimport Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass Luge {\n  /**\n   * Constructor\n   */\n  constructor () {\n    // Options\n    this.settings = Helpers.deepFreeze({\n      cursor: {\n        inertia: 1,\n        trailLength: 10\n      },\n      intersection: {\n        threshold: 0.3\n      },\n      lottie: {\n        renderer: 'svg',\n        subFrame: true\n      },\n      mouse: {\n        inertia: 0.1\n      },\n      parallax: {\n        inertia: 0.1\n      },\n      preloader: {\n        duration: 0\n      },\n      reveal: {\n        stagger: 0.1,\n        threshold: 0.15\n      },\n      scroll: {\n        inertia: 0.1\n      },\n      smooth: {\n        inertia: 0.1\n      },\n      ticker: {\n        external: false\n      },\n      transition: {\n        reload: false\n      },\n      credits: {\n        show: true\n      }\n    })\n\n    // Timeouts\n    this.timeouts = {\n      resizeThrottle: null,\n      scrollEnd: null\n    }\n\n    // Viewport size\n    this.windowWidth = 1\n    this.windowHeight = 1\n    this.clientWidth = 1\n\n    // Scroll\n    window.scrollTop = window.scrollY\n    window.unifiedScrollTop = window.scrollTop\n    window.maxScrollTop = 1\n    window.scrollProgress = 0\n    this.previousScrollTop = window.scrollY\n    this.isScrolling = false\n\n    // Mouse\n    window.mouseX = -1\n    window.mouseY = -1\n    window.mouseLastScrollTop = 0\n\n    LifeCycle.add('siteInit', this.siteInit.bind(this), 999)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set settings\n   */\n  setSettings (settings) {\n    this.settings = Helpers.deepFreeze(Helpers.mergeDeep(this.settings, settings))\n  }\n\n  /**\n   * Site initialization\n   * @param {Function} done Done function\n   */\n  siteInit (done) {\n    this.showCredits()\n\n    this.setCSSProperties()\n\n    this.scrollHandler()\n\n    done()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    window.addEventListener('mousemove', this.mouseHandler.bind(this), { passive: true })\n    window.addEventListener('resize', this.resizeThrottle.bind(this))\n    window.addEventListener('scroll', this.scrollHandler.bind(this), { passive: true })\n  }\n\n  /**\n   * Mouse handler\n   * @param {Event} e Mouse event\n   */\n  mouseHandler (e) {\n    const mouseX = e.pageX\n    const mouseY = e.pageY - window.scrollTop\n\n    window.mouseX = mouseX\n    window.mouseY = mouseY\n\n    Emitter.emit('mouseMove', e)\n  }\n\n  /**\n   * Resize throttle\n   */\n  resizeThrottle () {\n    clearTimeout(this.timeouts.resizeThrottle)\n    this.timeouts.resizeThrottle = setTimeout(this.resizeHandler.bind(this), 200)\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.setCSSProperties()\n\n    Emitter.emit('resize')\n  }\n\n  /**\n   * Set CSS propertiers\n   */\n  setCSSProperties () {\n    // Pass window widths to CSS\n    const newWidth = window.innerWidth\n    if (this.windowWidth !== newWidth) {\n      this.windowWidth = newWidth\n      this.clientWidth = document.body.clientWidth\n    }\n\n    // Pass window height to CSS\n    const newHeight = window.innerHeight\n    if (this.windowHeight !== newHeight) {\n      this.windowHeight = newHeight\n      this.clientHeight = document.body.clientHeight\n    }\n\n    requestAnimationFrame(() => {\n      document.documentElement.style.setProperty('--vw', (this.windowWidth * 0.01) + 'px')\n      document.documentElement.style.setProperty('--cw', (this.clientWidth * 0.01) + 'px')\n\n      document.documentElement.style.setProperty('--vh', (this.windowHeight * 0.01) + 'px')\n      document.documentElement.style.setProperty('--ch', (this.clientHeight * 0.01) + 'px')\n    })\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    window.scrollTop = window.scrollY\n\n    // Backward compatibility\n    window.unifiedScrollTop = window.scrollTop\n\n    if (!this.isScrolling) {\n      this.scrollStart()\n    }\n\n    clearTimeout(this.timeouts.scrollEnd)\n    this.timeouts.scrollEnd = setTimeout(this.scrollEnd.bind(this), 200)\n\n    this.previousScrollTop = window.scrollTop\n    window.scrollProgress = window.scrollTop / window.maxScrollTop\n\n    Emitter.emit('scroll')\n  }\n\n  /**\n   * Scroll start\n   */\n  scrollStart () {\n    this.isScrolling = true\n\n    document.documentElement.classList.add('is-scrolling')\n\n    Emitter.emit('scrollStart')\n  }\n\n  /**\n   * Scroll end\n   */\n  scrollEnd () {\n    this.isScrolling = false\n\n    document.documentElement.classList.remove('is-scrolling')\n\n    Emitter.emit('scrollEnd')\n  }\n\n  /**\n   * Show credits\n   */\n  showCredits () {\n    if (this.settings.credits.show) {\n      // Output version\n      const consoleBaseStyle = 'background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; '\n      const consoleBoldStyle = consoleBaseStyle + 'font-weight: bold; '\n      const consoleWhiteStyle = 'color: black; font: 400 1em monospace; padding: 0.5em 0; '\n\n      console.log('%c powered by %cluge%c / ' + VERSION + ' %c > https://luge.cool ', consoleBaseStyle, consoleBoldStyle, consoleBaseStyle, consoleWhiteStyle)\n    }\n  }\n}\n\nexport default new Luge()\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nexport default class Plugin {\n  /**\n   * Constructor\n   */\n  constructor (slug) {\n    this.pluginSlug = slug\n\n    LifeCycle.add('siteInit', this.beforeInit.bind(this), 5)\n  }\n\n  /**\n   * Before init\n   */\n  beforeInit (done) {\n    this.isDisabled = this.disabled()\n\n    if (this.isDisabled) {\n      document.documentElement.classList.add('lg-' + this.pluginSlug + '-disabled')\n    } else {\n      this.init()\n    }\n\n    done()\n  }\n\n  /**\n   * Init plugin\n   */\n  init () {\n    this.setAttributes()\n  }\n\n  /**\n   * Check if feature is disabled\n   */\n  disabled () {\n    return !!(Luge.settings[this.pluginSlug] || {}).disabled\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {}\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const attributes = this.pluginAttributes\n    const data = {}\n\n    for (const name in attributes) {\n      const attribute = attributes[name]\n      let attributeKey = 'lg-' + this.pluginSlug\n      if (name !== 'root') {\n        attributeKey += '-' + name\n      }\n\n      attributeKey = Helpers.toCamelCase(attributeKey)\n      const attributeValue = element.dataset[attributeKey]\n\n      let type, value, defaultValue\n\n      if (typeof attribute === 'object') {\n        type = attribute[0]\n        defaultValue = attribute[1]\n      } else {\n        type = attribute\n      }\n\n      if (attributeValue === undefined && defaultValue !== undefined) {\n        value = type(defaultValue)\n      } else if (attributeValue === undefined && type === Boolean) {\n        value = false\n      } else if (attributeValue !== undefined) {\n        if (type === Boolean) {\n          value = (attributeValue !== 'false')\n        } else {\n          value = type(attributeValue)\n        }\n      } else {\n        value = undefined\n      }\n\n      data[name] = value\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge[this.pluginSlug] = data\n    }\n\n    return data\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class PreLoader extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('preloader')\n\n    this.luge = luge\n\n    this.intro = false\n    this.playerIn = false\n    this.startTime = Date.now()\n    this.doneLoad = null\n\n    luge.preloader = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.el = document.querySelector('[data-lg-preloader]')\n\n    if (this.el) {\n      this.attributes = this.getAttributes(this.el)\n\n      this.el.classList.add('lg-preloader', 'lg-preloader--' + this.attributes.root)\n\n      this.initLottie()\n\n      this.luge.lifecycle.add('siteIn', this.siteIn.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: [String, ''],\n      duration: [Number, this.luge._settings.preloader.duration],\n      in: String,\n      reverse: Boolean\n    }\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    if (this.attributes && this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Intro animation\n   * @param {Function} done Done function\n   */\n  siteIn (done) {\n    const elapsed = (Date.now() - this.startTime) / 1000\n    const remaining = this.attributes.duration - elapsed\n\n    if (remaining <= 0) {\n      const clear = this.clear.bind(this, done)\n\n      if (this.playerIn) {\n        this.playerIn.play()\n\n        this.playerIn.addEventListener('complete', clear, { once: true })\n      } else {\n        if (typeof this.intro === 'function') {\n          this.intro(done, this.remove.bind(this))\n        } else {\n          const duration = window.getComputedStyle(this.el).getPropertyValue('transition-duration')\n\n          if (duration !== '' && duration !== '0s') {\n            this.el.addEventListener('transitionend', clear, { once: true })\n            this.el.classList.add('is-hidden')\n          } else {\n            clear()\n          }\n        }\n      }\n    } else {\n      setTimeout(this.siteIn.bind(this, done), remaining * 1000)\n    }\n  }\n\n  /**\n   * Clear preloader\n   * @param {Function} done Done callback\n   */\n  clear (done) {\n    if (this.playerIn) {\n      this.playerIn.destroy()\n    }\n\n    this.remove()\n\n    done()\n  }\n\n  /**\n   * Remove preloader from done\n   */\n  remove (done) {\n    this.el.parentNode.removeChild(this.el)\n    this.el = null\n  }\n\n  /**\n   * Add intro animation\n   * @param {Function} callback Callback function\n   */\n  add (callback) {\n    this.intro = callback\n  }\n\n  /**\n   * Init lottie\n   */\n  initLottie () {\n    const self = this\n\n    if (this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      const animIn = this.attributes.in\n      let playerIn = false\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: this.el,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (this.attributes.reverse) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      playerIn.addEventListener('DOMLoaded', () => {\n        if (self.attributes.reverse) {\n          playerIn.goToAndStop(playerIn.totalFrames - 1, true)\n        }\n\n        self.el.setAttribute('style', '')\n\n        if (typeof self.doneLoad === 'function') {\n          self.doneLoad()\n          self.doneLoad = null\n        }\n      }, { once: true })\n\n      this.playerIn = playerIn\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Reveal extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('reveal')\n\n    this.luge = luge\n\n    this.elements = []\n    this.toRevealIn = []\n    this.toRevealOut = []\n\n    this.reveals = {\n      in: {},\n      out: {}\n    }\n    this.canReveal = false\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.reveal = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 11)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n    this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    super.setAttributes()\n\n    this.pluginAttributes = {\n      root: String,\n      stagger: String,\n      manual: [Boolean, false],\n      multiple: Boolean,\n      delay: [Number, 0]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.stagger !== undefined && data.stagger === '') {\n      data.stagger = this.luge._settings.reveal.stagger\n    } else if (data.stagger === undefined) {\n      data.stagger = false\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('resize', this.resizeHandler, this)\n    this.luge.emitter.on('scroll', this.scrollHandler, this)\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-reveal]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      // Don't add child elements\n      if (!attributes.stagger && element.closest('[data-lg-reveal-stagger]') !== null) {\n        return\n      }\n\n      const revealName = attributes.root\n      element.luge.reveal.name = Helpers.toCamelCase(revealName)\n\n      if (!attributes.manual) {\n        this.luge.scrollobserver.add(element)\n\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n      } else {\n        element.luge.reveal.in = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'in')\n          this.setRevealClasses(element, 'is-in')\n        }\n\n        element.luge.reveal.out = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'out')\n          this.setRevealClasses(element, 'is-out')\n        }\n      }\n\n      element.luge.reveal.delay = attributes.delay * 1000\n\n      if (attributes.stagger) {\n        Array.from(element.children).forEach(child => {\n          const childRevealName = child.dataset.lgReveal\n\n          child.style.transition = 'none'\n          this.luge.ticker.nextTick(() => {\n            child.style.transition = ''\n          })\n\n          child.classList.add('lg-reveal', 'is-out')\n\n          if (childRevealName || revealName) {\n            child.classList.add('lg-reveal--' + (childRevealName ?? revealName))\n          }\n\n          child.dataset.lgRevealChild = ''\n          if (child.luge || (child.luge = {})) {\n            child.luge.reveal = {\n              isRevealed: false\n            }\n          }\n        })\n      } else {\n        element.style.transition = 'none'\n        this.luge.ticker.nextTick(() => {\n          element.style.transition = ''\n        })\n\n        element.classList.add('lg-reveal', 'is-out')\n\n        if (revealName) {\n          element.classList.add('lg-reveal--' + revealName)\n        }\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.canReveal = false\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n    const threshold = this.luge._settings.reveal.threshold\n\n    if (element.scrollProgress >= threshold && element.scrollProgress <= (1 - threshold) && !element.luge.reveal.isRevealed) {\n      if (this.toRevealOut.includes(element)) {\n        this.toRevealOut.splice(this.toRevealOut.indexOf(element), 1)\n      }\n\n      if (!this.toRevealIn.includes(element)) {\n        this.toRevealIn.push(element)\n      }\n    } else if ((element.scrollProgress < threshold || (element.scrollProgress > (1 - threshold) && element.scrollEnd < Math.round(window.unifiedScrollTop))) && element.luge.reveal.isRevealed) {\n      if (this.toRevealIn.includes(element)) {\n        this.toRevealIn.splice(this.toRevealIn.indexOf(element), 1)\n      }\n\n      if (!this.toRevealOut.includes(element)) {\n        this.toRevealOut.push(element)\n      }\n    }\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.canReveal = true\n\n    this.elements.forEach(element => {\n      if (element.scrollStart < 0) {\n        if (!this.toRevealIn.includes(element)) {\n          this.toRevealIn.push(element)\n        }\n      }\n    })\n\n    this.revealElements()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Sroll handler\n   */\n  scrollHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.revealElements()\n  }\n\n  /**\n   * Reveal elements\n   */\n  revealElements () {\n    const self = this\n\n    if (this.canReveal) {\n      let revealInTimeout = 0\n\n      this.toRevealIn.forEach(element => {\n        const delay = true\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        revealInTimeout += element.luge.reveal.delay\n\n        setTimeout(function () {\n          self.revealCallback(element, revealName, 'in')\n\n          if (element.luge.reveal.stagger) {\n            Array.from(element.children).forEach((child, index) => {\n              const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n              setTimeout(() => {\n                if (childRevealName || revealName) {\n                  self.revealCallback(child, (childRevealName ?? revealName), 'in')\n                }\n\n                self.setRevealClasses(child, 'is-in')\n              }, index * element.luge.reveal.stagger * 1000)\n            })\n          } else {\n            self.setRevealClasses(element, 'is-in')\n          }\n        }, delay ? revealInTimeout : 0)\n\n        if (delay) {\n          revealInTimeout += this.luge._settings.reveal.stagger * 1000\n        }\n\n        if (!element.luge.reveal.multiple) {\n          self.removeElement(element)\n        }\n      })\n\n      this.toRevealOut.forEach(element => {\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        if (element.luge.reveal.isRevealed !== undefined) {\n          self.revealCallback(element, revealName, 'out')\n        }\n\n        let state = ''\n        if (element.scrollProgress > 0.5) {\n          state = 'is-out is-out-top'\n        } else {\n          state = 'is-out is-out-bottom'\n        }\n\n        if (element.luge.reveal.stagger) {\n          Array.from(element.children).forEach((child, index) => {\n            const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n            setTimeout(() => {\n              if (childRevealName || revealName) {\n                self.revealCallback(child, (childRevealName ?? revealName), 'out')\n              }\n\n              self.setRevealClasses(child, state)\n            }, index * element.luge.reveal.stagger * 1000)\n          })\n        } else {\n          self.setRevealClasses(element, state)\n        }\n      })\n\n      this.toRevealIn = []\n      this.toRevealOut = []\n    }\n  }\n\n  /**\n   * Set reveal classes\n   * @param {HTMLElement} el Element\n   * @param {String} states Reveal states\n   */\n  setRevealClasses (el, states) {\n    states = states.split(' ')\n\n    el.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    states.forEach(state => {\n      el.classList.add(state)\n    })\n  }\n\n  /**\n   * Call reveal callback\n   * @param {HTMLElement} el Element\n   */\n  revealCallback (el, name, type) {\n    el.dispatchEvent(new CustomEvent('reveal' + type))\n    el.luge.reveal.isRevealed = (type === 'in')\n\n    if (typeof this.reveals[type][name] === 'function') {\n      this.reveals[type][name](el)\n    } else if (typeof el['onreveal' + type] === 'function') {\n      el['onreveal' + type]()\n    }\n  }\n\n  /**\n   * Add reveal animation\n   * @param {String} type Reveal type (in | out)\n   * @param {String} revealName Reveal animation name\n   * @param {Function} callback Callback function\n   */\n  add (type, revealName, callback) {\n    if (this.reveals[type]) {\n      revealName = Helpers.toCamelCase(revealName)\n\n      if (this.reveals[type][revealName]) {\n        console.log('Reveal animation named ' + revealName + ' already exists.')\n      } else {\n        this.reveals[type][revealName] = callback\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Transition extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('transition')\n\n    this.luge = luge\n\n    this.url = window.location.href\n    this.pathname = window.location.pathname\n    this.pageFetched = null\n    this.currentPage = null\n    this.reload = this.luge._settings.transition.reload\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.transitions = {\n      in: {},\n      out: {}\n    }\n\n    this.listeners = { linkHandler: this.linkHandler.bind(this) }\n\n    luge.transition = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    this.currentPage = document.querySelector('[data-lg-page]')\n    if (this.currentPage) {\n      this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n    }\n\n    this.initLoader()\n\n    if (!this.reload) {\n      window.addEventListener('popstate', this.historyStateChanged.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageFetch', this.pageFetch.bind(this))\n    this.luge.lifecycle.add('pageOut', this.pageOut.bind(this))\n    this.luge.lifecycle.add('pageIn', this.pageIn.bind(this), 10, 'transition')\n    this.luge.lifecycle.add('pageCreate', this.pageCreate.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this), 999, 'transition')\n  }\n\n  /**\n   * Bind links event\n   */\n  bindLinksEvent () {\n    if (document.querySelector('[data-lg-page]')) {\n      document.querySelectorAll('a').forEach(el => {\n        el.addEventListener('click', this.listeners.linkHandler)\n      })\n    }\n  }\n\n  /**\n   * Unbind links handler\n   */\n  unbindLinksEvent () {\n    document.querySelectorAll('a').forEach(el => { el.removeEventListener('click', this.listeners.linkHandler) })\n  }\n\n  /**\n   * Link handler\n   * @param {Event} e Mouse event\n   */\n  linkHandler (e) {\n    const element = e.currentTarget\n    const href = element.getAttribute('href')\n\n    if (href &&\n      href.indexOf('#') !== 0 &&\n      href.indexOf('tel') !== 0 &&\n      href.indexOf('mailto') !== 0 &&\n      !element.closest('#wpadminbar') &&\n      element.getAttribute('data-lg-transition') !== 'disabled' &&\n      element.getAttribute('target') !== '_blank') {\n      // Check if it's an internal URL\n      if (href.indexOf(window.location.origin) === 0 ||\n          href.indexOf('/') === 0 ||\n          href.indexOf('/') === -1) {\n        e.preventDefault()\n\n        if (window.location.href === href) {\n          return\n        }\n\n        this.navigateTo(href)\n\n        // Change page url\n        history.pushState(null, null, this.url)\n      }\n    }\n  }\n\n  /**\n   * Navigate to page\n   * @param {URL} url New page URL\n   */\n  navigateTo (url) {\n    this.url = url\n\n    if (this.reload) {\n      // Prefetch new URL\n      const prefetchLink = document.createElement('link')\n      prefetchLink.rel = 'prefetch'\n      prefetchLink.href = url\n      document.head.appendChild(prefetchLink)\n\n      // Change URL after pageOut\n      this.luge.lifecycle.add('siteReload', (done) => {\n        window.location = url\n      })\n\n      // Call cycle\n      this.luge.lifecycle._cycle('reload')\n    } else {\n      this.luge.lifecycle._cycle('transition')\n    }\n  }\n\n  /**\n   * Page init\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.bindLinksEvent()\n\n    done()\n  }\n\n  /**\n   * Init loader\n   */\n  initLoader () {\n    const loader = document.querySelector('[data-lg-loader]')\n\n    if (loader) {\n      loader.style.transition = 'none'\n      loader.classList.add('lg-loader', 'lg-loader--' + loader.getAttribute('data-lg-loader'))\n      this.luge.ticker.nextTick(() => {\n        loader.style.transition = ''\n      })\n    }\n\n    if (loader && loader.getAttribute('data-lg-loader') === 'lottie' && typeof lottie === 'object') {\n      const animOut = loader.getAttribute('data-lg-loader-out')\n      let playerOut = false\n      let animIn = loader.getAttribute('data-lg-loader-in')\n      let playerIn = false\n\n      if (animOut) {\n        playerOut = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animOut,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n      }\n\n      if (animIn === 'reverse') {\n        animIn = animOut\n      }\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (animIn === animOut) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      loader.playerOut = playerOut\n      loader.playerIn = playerIn\n    }\n  }\n\n  /**\n   * Fetch\n   * @param {Function} done Done function\n   */\n  pageFetch (done) {\n    const self = this\n\n    if (this.url) {\n      fetch(this.url, { credentials: 'include' })\n        .then(function (response) {\n          return response.text()\n        }).then(function (body) {\n          self.pageFetched = body\n\n          done()\n        })\n    }\n  }\n\n  /**\n   * Page create\n   * @param {Function} done Done function\n   */\n  pageCreate (done) {\n    // Convert data to HTML\n    const html = new DOMParser().parseFromString(this.pageFetched, 'text/html')\n\n    // Get containers\n    const newPage = html.querySelector('[data-lg-page]')\n\n    if (newPage) {\n      // Switch containers\n      this.currentPage.insertAdjacentElement('beforebegin', newPage)\n\n      newPage.style.opacity = 0\n\n      this.currentPage.style.opacity = 0\n      this.currentPage.style.position = 'absolute'\n      this.currentPage.style.top = 0\n      this.currentPage.style.left = '-999em'\n      this.currentPage.style.width = '100%'\n\n      // Switch classes\n      document.querySelector('body').className = html.querySelector('body').className\n\n      // Switch metas\n      document.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        element.parentNode.removeChild(element)\n      })\n      html.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        document.querySelector('head title').insertAdjacentElement('afterend', element)\n      })\n\n      // Set title\n      const oldTitle = document.querySelector('head title')\n      const newTitle = html.querySelector('head title')\n\n      if (oldTitle && newTitle) {\n        oldTitle.innerText = newTitle.innerText\n      }\n    } else {\n      // Force reload when no page is found\n      window.location = this.url\n      return\n    }\n\n    // Reset scroll\n    window.scroll({\n      top: this.newScrollTop,\n      left: 0,\n      behavior: 'instant'\n    })\n    window.scrollTop = 0\n    window.smoothScrollTop = 0\n    window.unifiedScrollTop = 0\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.luge.emitter.emit('pageTransition', html)\n\n    done()\n  }\n\n  /**\n   * Page kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const oldPage = this.currentPage\n    oldPage.parentNode.removeChild(oldPage)\n\n    this.currentPage = document.querySelector('[data-lg-page]')\n    this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n\n    done()\n  }\n\n  /**\n   * Page out\n   * @param {Function} done Done function\n   */\n  pageOut (done) {\n    const self = this\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      if (typeof this.transitions.out[pageName] === 'function') {\n        transition = this.transitions.out[pageName]\n      } else if (typeof page.onpageout === 'function') {\n        transition = page.onpageout\n      } else if (typeof this.transitions.out.default === 'function') {\n        transition = this.transitions.out.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader) {\n          if (loader.playerOut) {\n            loader.playerOut.stop()\n            loader.playerOut.renderer.svgElement.style.opacity = 1\n            loader.playerOut.play()\n\n            loader.playerOut.addEventListener('complete', () => {\n              if (!self.reload) {\n                loader.playerOut.renderer.svgElement.style.opacity = ''\n              }\n\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n          }\n\n          loader.classList.add('is-visible')\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n\n    this.unbindLinksEvent.bind(this)\n  }\n\n  /**\n   * Page in\n   * @param {Function} done Done function\n   */\n  pageIn (done) {\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      page.style.opacity = ''\n\n      if (typeof this.transitions.in[pageName] === 'function') {\n        transition = this.transitions.in[pageName]\n      } else if (typeof page.onpagein === 'function') {\n        transition = page.onpagein\n      } else if (typeof this.transitions.in.default === 'function') {\n        transition = this.transitions.in.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader && loader.classList.contains('is-visible')) {\n          if (loader.playerIn) {\n            loader.playerIn.stop()\n            loader.playerIn.renderer.svgElement.style.opacity = 1\n            if (loader.getAttribute('data-lg-loader-in') === 'reverse') {\n              loader.playerIn.goToAndPlay(loader.playerIn.totalFrames, true)\n            } else {\n              loader.playerIn.play()\n            }\n\n            loader.playerIn.addEventListener('complete', () => {\n              loader.playerIn.renderer.svgElement.style.opacity = ''\n              loader.classList.remove('is-visible')\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n\n            loader.classList.remove('is-visible')\n          }\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * History change\n   */\n  historyStateChanged () {\n    let url = ''\n    if (this.url.indexOf(window.location.origin) === 0) {\n      url = new URL(this.url)\n    } else {\n      url = new URL(window.location.origin + this.url)\n    }\n\n    if (url.pathname !== window.location.pathname) {\n      this.prevScrollTop = window.scrollY\n\n      this.luge.ticker.nextTick(() => {\n        this.newScrollTop = window.scrollY\n\n        window.scroll({\n          top: this.prevScrollTop,\n          left: 0,\n          behavior: 'instant'\n        })\n      })\n\n      this.navigateTo(window.location.href)\n    }\n  }\n\n  /**\n   * Add transition animation\n   * @param {String} type Transition type (in | out)\n   * @param {Function} callback Callback function\n   * @param {String} pageName Page name\n   */\n  add (type, pageName = 'default', callback) {\n    if (this.transitions[type]) {\n      pageName = Helpers.toCamelCase(pageName)\n\n      if (this.transitions[type][pageName]) {\n        console.log('Transition animation for ' + pageName + ' page already exists.')\n      } else {\n        this.transitions[type][pageName] = callback\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class ScrollAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('scroll')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Properties\n    this.allowedProperties = [\n      'opacity',\n      'background-x',\n      'background-y'\n    ]\n\n    this.transformProperties = [\n      'x',\n      'y',\n      'z',\n      'translate3d',\n      'rotate',\n      'rotateX',\n      'rotateY',\n      'rotateZ',\n      'scale',\n      'scaleX',\n      'scaleY',\n      'scaleZ'\n    ]\n\n    // Presets\n    this.presets = {\n      'background-x': {\n        'background-x': ['0%', '100%']\n      },\n      'background-y': {\n        'background-y': ['0%', '100%']\n      }\n    }\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      yoyo: Boolean,\n      inertia: [String, this.luge._settings.scroll.inertia],\n      animate: String\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-scroll]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      this.luge.scrollobserver.add(element)\n\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n\n      // Set values\n      const scrollAnimation = {}\n\n      // Smooth progress\n      scrollAnimation.smoothProgress = (element.scrollProgress !== undefined ? element.scrollProgress : 0)\n\n      // Yoyo\n      scrollAnimation.yoyo = attributes.yoyo\n\n      // Inertia\n      scrollAnimation.inertia = attributes.inertia\n\n      // Get properties\n      let properties = false\n\n      if (attributes.animate !== undefined) {\n        properties = JSON.parse(attributes.animate.replace(/'/g, '\"'))\n      } else if (this.presets[attributes.root]) {\n        properties = this.presets[attributes.root]\n      }\n\n      if (properties) {\n        const declarations = {}\n\n        for (const property in properties) {\n          if (this.allowedProperties.includes(property) ||\n              this.transformProperties.includes(property)) {\n            const values = properties[property]\n            let fromValue = String(values[0])\n            let toValue = String(values[1])\n\n            let unit = fromValue.match(/\\d+([a-zA-Z%]+)/m)\n            if (unit) {\n              unit = unit[1]\n            } else if (property.indexOf('rotate') === 0) {\n              unit = 'deg'\n            }\n\n            fromValue = Number(fromValue.replace(unit, ''))\n            toValue = Number(toValue.replace(unit, ''))\n\n            let safeProperty = property\n            if (property === 'background-x') {\n              safeProperty = 'background-position-x'\n            } else if (property === 'background-y') {\n              safeProperty = 'background-position-y'\n            }\n\n            declarations[safeProperty] = {\n              from: fromValue,\n              to: toValue,\n              current: fromValue,\n              unit: unit\n            }\n          }\n        }\n\n        scrollAnimation.properties = declarations\n      }\n\n      element.luge.scroll.animation = scrollAnimation\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.luge.scroll.animation.atDest = false\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    for (const element of this.elements) {\n      // Early break if at dest\n      if (element.luge.scroll.animation.atDest) {\n        continue\n      }\n\n      // Yoyo\n      let progress = element.scrollProgress\n      if (element.luge.scroll.yoyo) {\n        progress = 1 - Math.abs(1 - progress * 2)\n      }\n\n      element.luge.scroll.animation.smoothProgress += (progress - element.luge.scroll.animation.smoothProgress) * (1 - element.luge.scroll.inertia)\n\n      if (element.luge.scroll.animation.properties) {\n        const declarations = {}\n\n        for (const [key, property] of Object.entries(element.luge.scroll.animation.properties)) {\n          property.current = property.from + (property.to - property.from) * element.luge.scroll.animation.smoothProgress\n\n          if (['x', 'y', 'z'].includes(key)) {\n            if (declarations.translate3d || (declarations.translate3d = {})) {\n              declarations.translate3d[key] = property.current + property.unit\n            }\n          } else {\n            declarations[key] = property.current + property.unit\n          }\n        }\n\n        // Handle transform shorthand\n        const transform = []\n        for (const [key, property] of Object.entries(declarations)) {\n          if (this.transformProperties.includes(key)) {\n            // Convert object style property value to string\n            if (typeof property === 'object') {\n              if (key === 'translate3d') {\n                const value = Object.assign({ x: 0, y: 0, z: 0 }, property)\n\n                property.string = value.x + ', ' + value.y + ', ' + value.z\n              } else {\n                property.string = Object.values(property).join(', ')\n              }\n            }\n\n            transform.push(key + '(' + (typeof property !== 'object' ? property : property.string) + ')')\n          }\n        }\n\n        // Create style rule\n        const styles = {}\n        const willChange = []\n\n        if (transform.length > 0) {\n          styles.transform = transform.join(' ')\n          willChange.push('transform')\n        }\n\n        for (const [key, property] of Object.entries(declarations)) {\n          if (!this.transformProperties.includes(key)) {\n            styles[key] = property\n            willChange.push(key)\n          }\n        }\n\n        for (const [key, property] of Object.entries(styles)) {\n          element.style.setProperty(key, property)\n        }\n\n        element.style.setProperty('will-change', willChange.join(', '))\n      } else {\n        const diff = Math.round((element.scrollProgress - element.luge.scroll.animation.smoothProgress) * 1000) / 1000\n\n        element.style.setProperty('--progress', element.luge.scroll.animation.smoothProgress)\n        element.style.setProperty('--abs-diff', Math.abs(diff))\n        element.style.setProperty('--diff', diff)\n      }\n\n      // Block future style update if element is at destination\n      if (Math.abs(progress - element.luge.scroll.animation.smoothProgress) < 0.0001) {\n        element.luge.scroll.animation.atDest = true\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nimport VirtualScroll from 'virtual-scroll'\n\nexport default class SmoothScroll extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor() {\n    super('smooth')\n\n    window.hasSmoothScroll = false\n    window.isSmoothScrolling = false\n  }\n\n  /**\n   * Init\n   */\n  init() {\n    super.init()\n\n    this.element = document.documentElement\n\n    this.hasSmooth = this.element.hasAttribute('data-lg-smooth')\n\n    if (this.hasSmooth) {\n      window.hasSmoothScroll = true\n\n      this.smoothScroll = window.scrollTop\n      this.targetScroll = window.scrollTop\n      this.targetSmoothScroll = window.scrollTop\n\n      document.documentElement.classList.add('has-smooth-scroll')\n\n      const platform = navigator?.userAgentData?.platform || navigator?.platform || 'unknown'\n\n      this.virtualScroll = new VirtualScroll({\n        el: this.element,\n        firefoxMultiplier: 50,\n        mouseMultiplier: platform.indexOf('Win') > -1 ? 1 : 0.4,\n        useKeyboard: false,\n        useTouch: false,\n        passive: true\n      })\n\n      this.virtualScroll.on(this.onVirtualScroll.bind(this))\n\n      this.luge.ticker.add(this.tick, this)\n\n      this.bindEvents()\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('scroll', this.onScroll, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  onScroll () {\n    if (!window.isSmoothScrolling) {\n      this.targetScroll = window.scrollTop\n      this.targetSmoothScroll = window.scrollTop\n      this.smoothScroll = window.scrollTop\n    }\n  }\n\n  /**\n   * Virtual scroll handler\n   */\n  onVirtualScroll({ deltaY, originalEvent: e }) {\n    const objects = e.composedPath()\n    const isPrevented = !!objects.find((el) => el?.hasAttribute?.('data-lg-smooth-prevent'))\n\n    if (e.ctrlKey || isPrevented) {\n      return\n    }\n\n    this.targetScroll -= deltaY\n    this.targetScroll = Helpers.clamp(0, this.targetScroll, window.maxScrollTop)\n\n    window.isSmoothScrolling = true\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    const settings = this.luge._settings.smooth\n\n    this.targetSmoothScroll += (this.targetScroll - this.targetSmoothScroll) * settings.inertia\n    this.smoothScroll += (this.targetSmoothScroll - this.smoothScroll) * settings.inertia\n\n    const diff = Math.abs(this.targetSmoothScroll - this.smoothScroll)\n\n    if (window.isSmoothScrolling && diff > 0.5) {\n      window.scrollTo(\n        {\n          top: this.smoothScroll,\n          behavior: 'auto'\n        }\n      )\n    } else if (window.isSmoothScrolling) {\n      this.smoothScroll = this.targetSmoothScroll\n      window.isSmoothScrolling = false\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Cursor extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('cursor')\n\n    this.luge = luge\n\n    this.cursors = []\n    this.pointers = []\n    this.trails = []\n\n    this.hoverTags = ['a', 'button', 'input']\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [Number, this.luge._settings.cursor.inertia],\n      length: [Number, this.luge._settings.cursor.trailLength],\n      hide: Boolean\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    document.documentElement.addEventListener('mouseenter', this.hoverHandler.bind(this), { capture: true, passive: true })\n    document.documentElement.addEventListener('mouseleave', this.hoverHandler.bind(this), { capture: true, passive: true })\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    const self = this\n    const cursors = document.querySelectorAll('[data-lg-cursor]:not(.lg-cursor)')\n\n    if (cursors.length > 0) {\n      cursors.forEach(cursor => {\n        const attributes = this.getAttributes(cursor)\n\n        if (attributes.hide) {\n          document.documentElement.classList.add('lg-cursor-hide')\n        }\n\n        // Pointers\n        const pointers = cursor.querySelectorAll('[data-lg-cursor-pointer')\n        pointers.forEach(pointer => {\n          pointer.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              }\n            }\n          }\n\n          if (pointer.hasAttribute('data-lg-cursor-inertia')) {\n            pointer.luge.cursor.inertia = Number(pointer.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            pointer.luge.cursor.inertia = attributes.inertia\n          }\n\n          pointer.classList.add('lg-cursor-pointer')\n\n          self.pointers.push(pointer)\n        })\n\n        // Trails\n        const trails = cursor.querySelectorAll('[data-lg-cursor-trail')\n        trails.forEach(trail => {\n          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n          svg.appendChild(path)\n\n          trail.appendChild(svg)\n\n          trail.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              },\n              points: [],\n              path: path\n            }\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-inertia')) {\n            trail.luge.cursor.inertia = Number(trail.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            trail.luge.cursor.inertia = attributes.inertia\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-length')) {\n            trail.luge.cursor.length = Number(trail.getAttribute('data-lg-cursor-length'))\n          } else {\n            trail.luge.cursor.length = attributes.length\n          }\n\n          trail.classList.add('lg-cursor-trail')\n\n          self.trails.push(trail)\n        })\n\n        cursor.classList.add('lg-cursor')\n\n        this.cursors.push(cursor)\n      })\n    }\n\n    done()\n  }\n\n  /**\n   * Hover handler\n   */\n  hoverHandler (e) {\n    const element = e.target\n    const tag = element.tagName.toLowerCase()\n    const style = element.getAttribute('data-lg-hover')\n    let hover = null\n\n    if (this.hoverTags.includes(tag) || style !== null) {\n      hover = (e.type === 'mouseenter')\n    }\n\n    if (hover !== null) {\n      this.cursors.forEach(cursor => {\n        cursor.classList.toggle('lg-cursor--hover', hover)\n\n        if (style !== null && style !== '') {\n          cursor.classList.toggle('lg-cursor--hover--' + style, hover)\n        }\n      })\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick (timestamp) {\n    // Pointers\n    this.pointers.forEach(pointer => {\n      // Get position\n      const position = pointer.luge.cursor.position\n      const smoothPosition = pointer.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      smoothPosition.x += (position.x - smoothPosition.x) * pointer.luge.cursor.inertia\n      smoothPosition.y += (position.y - smoothPosition.y) * pointer.luge.cursor.inertia\n\n      pointer.style.transform = 'translate3d(' + smoothPosition.x + 'px, ' + smoothPosition.y + 'px, 0)'\n    })\n\n    // Trails\n    this.trails.forEach(trail => {\n      // Get position\n      const position = trail.luge.cursor.position\n      const smoothPosition = trail.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      if (window.mouseX !== -1) {\n        smoothPosition.x += (position.x - smoothPosition.x) * trail.luge.cursor.inertia\n        smoothPosition.y += (position.y - smoothPosition.y) * trail.luge.cursor.inertia\n\n        // Update points\n        const points = trail.luge.cursor.points\n\n        const point = {\n          x: smoothPosition.x,\n          y: smoothPosition.y\n        }\n        points.push(point)\n\n        if (points.length > trail.luge.cursor.length) {\n          points.shift()\n        }\n\n        // Draw smooth line # https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74\n        let d = ''\n        let trailLength = 0\n\n        const svgPath = (points, command) => {\n          const d = points.reduce((acc, point, i, a) => i === 0\n\n            ? `M ${point.x},${point.y}`\n\n            : `${acc} ${command(point, i, a)}`\n          , '')\n          return `${d}`\n        }\n\n        const line = (pointA, pointB) => {\n          const lengthX = pointB.x - pointA.x\n          const lengthY = pointB.y - pointA.y\n          return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n          }\n        }\n\n        const controlPoint = (current, previous, next, reverse) => {\n          const p = previous || current\n          const n = next || current\n\n          const smoothing = 0.2\n\n          const o = line(p, n)\n\n          trailLength += o.length\n\n          const angle = o.angle + (reverse ? Math.PI : 0)\n          const length = o.length * smoothing\n\n          const x = current.x + Math.cos(angle) * length\n          const y = current.y + Math.sin(angle) * length\n          return [x, y]\n        }\n\n        const bezierCommand = (point, i, a) => {\n          const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point)\n\n          const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true)\n          return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point.x},${point.y}`\n        }\n\n        d = svgPath(points, bezierCommand)\n\n        trail.luge.cursor.path.setAttribute('d', d)\n\n        trail.style.setProperty('--length', trailLength)\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Intersection extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('intersection')\n\n    this.luge = luge\n\n    // Listeners\n    this.listeners = {\n      onViewportIntersect: this.onViewportIntersect.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.elements = []\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      class: String\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-intersection]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.viewportobserver.add(element)\n      element.addEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.luge.viewportobserver.remove(element)\n      element.removeEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * On viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n    const position = element.luge.viewport.position\n    const CSSClass = element.luge.intersection.class ? element.luge.intersection.class.split(' ') : false\n\n    // Set CSS classes\n    element.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    if (position === 'in') {\n      element.classList.add('is-in')\n\n      if (CSSClass) {\n        document.documentElement.classList.add(...CSSClass)\n      }\n    } else {\n      if (CSSClass) {\n        document.documentElement.classList.remove(...CSSClass)\n      }\n\n      if (position === 'above') {\n        element.classList.add('is-out', 'is-out-top')\n      } else {\n        element.classList.add('is-out', 'is-out-bottom')\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class LottiePlayer extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('lottie')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.doneLoad = null\n\n    // Listeners\n    this.onViewportIntersect = this.onViewportIntersect.bind(this)\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.lottie = {\n      deferInit: this.deferInit.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    if (typeof lottie === 'object') {\n      this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n      this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n      this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n      this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n    }\n\n    this.bindEvents()\n  }\n\n  /**\n   * Defer init\n   */\n  deferInit () {\n    if (typeof lottie === 'object') {\n      this.pageInit(() => {})\n      LifeCycle.add('pageKill', this.pageKill.bind(this))\n      LifeCycle.add('reveal', this.reveal.bind(this))\n\n      ScrollObserver.updateHandler()\n    }\n  }\n\n  /**\n   * Set plugin attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      autoplay: Boolean,\n      scroll: Boolean,\n      loop: Boolean,\n      loopFrame: [Number, 0],\n      reverse: Boolean,\n      required: Boolean,\n      force: Boolean,\n      lazy: Boolean,\n      renderer: [String, Luge.settings.lottie.renderer],\n      subframe: [Boolean, Luge.settings.lottie.subFrame]\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.reveal(() => {})\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    let waitLoad = false\n\n    if (this.elements.length > 0) {\n      this.elements.forEach(element => {\n        if (element.luge.lottie.required && !element.player.isLoaded) {\n          waitLoad = true\n        }\n      })\n    }\n\n    if (waitLoad) {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const self = this\n    this.elements = document.querySelectorAll('[data-lg-lottie]')\n    this.toAutoplay = []\n    this.toLoad = 0\n    this.requireds = 0\n\n    this.elements.forEach(element => {\n      if (!element.player) {\n        const attributes = this.getAttributes(element)\n\n        this.luge.scrollobserver.add(element)\n\n        if (attributes.lazy) {\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        } else {\n          self.initPlayer(element)\n\n          element.addEventListener('revealin', self.play)\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        }\n      }\n    })\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n    let elements = []\n\n    const oldPage = document.querySelector('[data-lg-page] + [data-lg-page]')\n\n    if (oldPage) {\n      elements = oldPage.querySelectorAll('[data-lg-lottie]')\n    } else {\n      elements = this.elements\n    }\n\n    elements.forEach(element => {\n      element.removeEventListener('revealin', self.play)\n      element.removeEventListener('viewportintersect', self.onViewportIntersect)\n\n      if (element.hasAttribute('data-lg-lottie-scroll')) {\n        element.removeEventListener('scrollprogress', self.onScrollProgress)\n      }\n\n      if (element.player) {\n        element.player.destroy()\n        delete element.player\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.toAutoplay.forEach(element => {\n      if (element.viewportPosition === 'in') {\n        element.play()\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n\n    if (!element.player) {\n      if (element.viewportPosition === 'in') {\n        this.initLazy(element)\n      }\n    } else {\n      if (!element.luge.lottie.force) {\n        if (element.viewportPosition === 'in') {\n          if (element.player.isPaused && (element.player.scrollPaused || element.hasAttribute('data-lg-lottie-autoplay'))) {\n            element.player.scrollPaused = false\n            element.play()\n          }\n        } else {\n          if (!element.player.isPaused) {\n            element.player.scrollPaused = true\n            element.pause()\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Lazy init\n   * @param {HTMLElement} element Container\n   */\n  initLazy (element) {\n    this.initPlayer(element)\n\n    element.player.addEventListener('DOMLoaded', () => {\n      element.play()\n    }, { once: true })\n  }\n\n  /**\n   * Init player\n   * @param {HTMLElement} element Container\n   */\n  initPlayer (element) {\n    const self = this\n\n    this.toLoad++\n\n    // Get options\n    const attributes = this.getAttributes(element)\n\n    element.player = lottie.loadAnimation({\n      container: element,\n      renderer: attributes.renderer,\n      loop: (attributes.loop && !attributes.reverse),\n      autoplay: false,\n      path: attributes.root\n    })\n\n    if (typeof attributes.subframe !== 'undefined') {\n      element.player.setSubframe(attributes.subframe)\n    }\n\n    element.classList.add('lg-lottie')\n    this.setPlayerStateClasses(element, false)\n\n    if (attributes.autoplay) {\n      this.toAutoplay.push(element)\n    }\n\n    if (attributes.required) {\n      this.requireds++\n    }\n\n    if (attributes.scroll) {\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n    } else if (attributes.loop) {\n      element.player.addEventListener('enterFrame', function () {\n        if (element.player.totalFrames > 0) {\n          const currentFrame = Math.round(element.player.currentFrame)\n\n          if (element.player.playDirection === 1) {\n            if (currentFrame === element.player.totalFrames - 1) {\n              element.player.pause()\n\n              if (attributes.reverse) {\n                this.luge.ticker.nextTick(() => {\n                  element.player.setDirection(-1)\n                  element.player.goToAndPlay(element.player.totalFrames, true)\n\n                  self.setPlayerStateClasses(element, 'backward')\n                }, this)\n              } else {\n                this.luge.ticker.nextTick(() => {\n                  element.player.goToAndPlay(attributes.loopFrame, true)\n                }, this)\n              }\n            }\n          } else {\n            if (currentFrame === attributes.loopFrame) {\n              element.player.pause()\n\n              this.luge.ticker.nextTick(() => {\n                element.player.setDirection(1)\n                element.player.goToAndPlay(attributes.loopFrame, true)\n\n                self.setPlayerStateClasses(element, 'forward')\n              }, this)\n            }\n          }\n        }\n      })\n    }\n\n    // Set methods\n    element.play = this.play.bind(this, element)\n    element.pause = this.pause.bind(this, element)\n    element.stop = this.stop.bind(this, element)\n\n    // Loaded\n    element.player.addEventListener('DOMLoaded', () => {\n      element.classList.add('is-loaded')\n\n      self.playerLoaded(attributes.required)\n    }, { once: true })\n  }\n\n  /**\n   * Set player state classes\n   * @param {HTMLElement} el Element\n   * @param {Boolean|String} playing If playing, playing direction\n   */\n  setPlayerStateClasses (el, playing) {\n    el.classList.remove('is-playing', 'is-playing-forward', 'is-playing-backward', 'is-paused')\n\n    if (!playing) {\n      el.classList.add('is-paused')\n    } else {\n      el.classList.add('is-playing')\n\n      if (playing === 'backward') {\n        el.classList.add('is-playing-backward')\n      } else {\n        el.classList.add('is-playing-forward')\n      }\n    }\n  }\n\n  /**\n   * Player loaded\n   */\n  playerLoaded (required = false) {\n    this.toLoad--\n\n    if (required) {\n      this.requireds--\n    }\n\n    // Call doneLoad when required animations have been loaded\n    if (this.requireds === 0 && typeof this.doneLoad === 'function') {\n      this.doneLoad()\n      this.doneLoad = null\n    }\n\n    // Emit resize event when all animations are loaded\n    if (this.toLoad === 0) {\n      this.luge.ticker.nextTick(() => {\n        this.luge.emitter.emit('resize')\n      })\n    }\n  }\n\n  /**\n   * Play\n   */\n  play (element) {\n    if (element && element.player) {\n      element.player.play()\n\n      this.setPlayerStateClasses(element, 'forward')\n    }\n  }\n\n  /**\n   * Pause\n   */\n  pause (element) {\n    if (element && element.player) {\n      element.player.pause()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Stop\n   */\n  stop (element) {\n    if (element && element.player) {\n      element.player.stop()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.player.goToAndStop(element.player.totalFrames * element.scrollProgress, true)\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class MouseAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('mouse')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    window.mouseSpeed = 0\n\n    // Listeners\n    // ...\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.getMouseMovement()\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [String, this.luge._settings.mouse.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-mouse]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.mouseobserver.add(element)\n\n      element.luge.mouse.smoothX = 0\n      element.luge.mouse.smoothY = 0\n      element.luge.mouse.smoothProgressX = 0\n      element.luge.mouse.smoothProgressY = 0\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Get mouse movement\n   */\n  getMouseMovement () {\n    const distX = this.mouse.x - window.mouseX\n    const distY = this.mouse.y - window.mouseY\n    const dist = Math.hypot(distX, distY)\n\n    window.mouseSpeed += (dist - window.mouseSpeed) * 0.5\n    if (window.mouseSpeed < 0.001) {\n      window.mouseSpeed = 0\n    }\n\n    if (dist > 1) {\n      const angle = Math.atan2(distY, distX) * (180 / Math.PI) + 180\n\n      window.mouseAngle = angle\n\n      if (angle >= 45 && angle < 135) {\n        window.mouseDirection = 'down'\n      } else if (angle >= 135 && angle < 225) {\n        window.mouseDirection = 'left'\n      } else if (angle >= 225 && angle < 315) {\n        window.mouseDirection = 'up'\n      } else {\n        window.mouseDirection = 'right'\n      }\n    }\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    setTimeout(this.getMouseMovement.bind(this), 20)\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    this.elements.forEach(element => {\n      const mouse = element.luge.mouse\n\n      if (mouse.x) {\n        if (mouse.inertia) {\n          mouse.smoothX += (mouse.x - mouse.smoothX) * mouse.inertia\n          mouse.smoothY += (mouse.y - mouse.smoothY) * mouse.inertia\n          mouse.smoothProgressX += (mouse.progressX - mouse.smoothProgressX) * mouse.inertia\n          mouse.smoothProgressY += (mouse.progressY - mouse.smoothProgressY) * mouse.inertia\n\n          element.style.setProperty('--mouse-x', mouse.smoothX)\n          element.style.setProperty('--mouse-y', mouse.smoothY)\n          element.style.setProperty('--mouse-progress-x', mouse.smoothProgressX)\n          element.style.setProperty('--mouse-progress-y', mouse.smoothProgressY)\n\n          const diffX = Math.round((mouse.x - mouse.smoothX) * 1000) / 1000\n          const diffY = Math.round((mouse.y - mouse.smoothY) * 1000) / 1000\n\n          element.style.setProperty('--abs-diff-x', Math.abs(diffX))\n          element.style.setProperty('--diff-x', diffX)\n          element.style.setProperty('--abs-diff-y', Math.abs(diffY))\n          element.style.setProperty('--diff-y', diffY)\n        } else {\n          element.style.setProperty('--mouse-x', mouse.x)\n          element.style.setProperty('--mouse-y', mouse.y)\n          element.style.setProperty('--mouse-progress-x', mouse.progressX)\n          element.style.setProperty('--mouse-progress-y', mouse.progressY)\n        }\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Parallax extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('parallax')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 30)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      disable: String,\n      amplitude: [String, 1],\n      anchor: String,\n      inertia: [String, this.luge._settings.parallax.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.amplitude) {\n      const randAmplitude = data.amplitude.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randAmplitude) {\n        data.amplitude = Number(randAmplitude[1]) + ((Number(randAmplitude[2]) - Number(randAmplitude[1])) * Math.random())\n      } else {\n        data.amplitude = Number(data.amplitude)\n      }\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    document.querySelectorAll('[data-lg-parallax]').forEach(element => {\n      const attributes = this.getAttributes(element)\n\n      const disable = attributes.disable\n      let enable = true\n\n      const is = (window.luge.browser || {}).is\n\n      if (disable && is) {\n        if ((disable === 'desktop' && is('desktop')) ||\n            (disable === 'handheld' && !is('desktop')) ||\n            (disable === 'mobile' && is('mobile')) ||\n            (disable === 'tablet' && is('tablet'))) {\n          enable = false\n        }\n      }\n\n      if (enable) {\n        this.addElement(element)\n      }\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.luge.scrollobserver.add(element)\n\n      if (element.luge.parallax.root === 'child') {\n        element.style.overflow = 'hidden'\n        element.luge.parallax.child = element.firstElementChild\n      }\n\n      element.luge.parallax.movement = 0\n      element.luge.parallax.smoothMovement = 0\n\n      this.elements.push(element)\n\n      this.luge.ticker.nextTick(() => {\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n        this.moveElement(element)\n      })\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    this.moveElement(e.target)\n  }\n\n  /**\n   * Move element\n   * @param {HTMLElement} element Element to move\n   */\n  moveElement (element) {\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = element.scrollProgress\n    } else {\n      progress = 1 - element.scrollProgress * 2\n    }\n\n    if (element.luge.parallax.anchor === 'bottom') {\n      progress += 1\n    } else if (element.luge.parallax.anchor === 'top') {\n      progress -= 1\n    }\n\n    if (element.luge.parallax.root === 'child') {\n      element.luge.parallax.movement = (element.luge.parallax.amplitude * 5) * progress\n    } else {\n      element.luge.parallax.movement = element.clientHeight * progress * element.luge.parallax.amplitude / 2\n    }\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    this.elements.forEach(element => {\n      element.luge.parallax.smoothMovement += (element.luge.parallax.movement - element.luge.parallax.smoothMovement) * element.luge.parallax.inertia\n\n      if (element.luge.parallax.root === 'child' && element.luge.parallax.child) {\n        element.luge.parallax.child.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + '%, 0) scale(1.' + (String(Math.abs(element.luge.parallax.amplitude)).replace('.', '')) + ')'\n      } else {\n        element.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + 'px, 0)'\n      }\n    })\n  }\n}\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nclass ViewportObserver {\n  constructor () {\n    this.elements = []\n\n    LifeCycle.add('siteInit', this.init.bind(this), 20)\n  }\n\n  /**\n   * Init\n   */\n  init (done) {\n    this.createObserver()\n\n    done()\n  }\n\n  /**\n   * Create observer\n   */\n  createObserver () {\n    this.observer = new IntersectionObserver(\n      this.intersectionCallback.bind(this),\n      {\n        threshold: [Luge.settings.intersection.threshold]\n      }\n    )\n  }\n\n  /**\n   * Intersection callback\n   * @param {IntersectionObserverEntry[]} entries IntersectionObserverEntry objects\n   */\n  intersectionCallback (entries) {\n    entries.forEach((entry) => {\n      const element = entry.target\n      let position = 'in'\n\n      if (!entry.isIntersecting) {\n        if (entry.boundingClientRect.y <= 0) {\n          position = 'above'\n        } else {\n          position = 'under'\n        }\n      }\n\n      if (element.luge.viewport.position !== position) {\n        element.luge.viewport.position = position\n\n        element.dispatchEvent(new CustomEvent('viewportintersect'))\n\n        if (position === 'in') {\n          element.dispatchEvent(new CustomEvent('viewportin'))\n        } else {\n          element.dispatchEvent(new CustomEvent('viewportout'))\n          element.dispatchEvent(new CustomEvent('viewport' + position))\n        }\n      }\n    })\n  }\n\n  /**\n   * Add element to observe\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    this.observer.observe(element)\n\n    const properties = {\n      viewport: {\n        position: 'out'\n      }\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n  }\n\n  /**\n   * Remove observed element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    this.observer.unobserve(element)\n  }\n}\n\nexport default new ViewportObserver()\n","import Luge from './Core'\n\nclass Ticker {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.callbacks = []\n    this.onceCallbacks = []\n\n    if (!Luge.settings.ticker.external) {\n      this.fps = 60\n      this.fpsInterval = 1000 / this.fps\n      this.lastTickTime = null\n\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Add a tick function\n   * @param {Function} callback Tick function\n   * @param {Object} context Context\n   */\n  add (callback, context) {\n    let exists = false\n    this.callbacks.forEach(object => {\n      if (object.cb === callback && object.context === context) {\n        exists = true\n      }\n    })\n\n    if (!exists) {\n      this.callbacks.push({\n        cb: callback,\n        context: context\n      })\n    }\n  }\n\n  /**\n   * Remove a tick function\n   * @param {String} id Tick ID\n   * @param {Object} context Context\n   */\n  remove (callback, context) {\n    const self = this\n\n    this.callbacks.forEach((object, index) => {\n      if (object.cb === callback && object.context === context) {\n        delete self.callbacks[index]\n      }\n    })\n  }\n\n  /**\n   * Execute function at next tick\n   * @param {Function} callback Function to execute\n   * @param {Object} context Context\n   */\n  nextTick (callback, context) {\n    this.onceCallbacks.push({\n      cb: callback,\n      context: context\n    })\n  }\n\n  /**\n   * Call tick function\n   */\n  _tick (nowTime) {\n    const elapsedTime = nowTime - this.lastTickTime\n\n    if (elapsedTime > this.fpsInterval) {\n      this.tick(nowTime)\n      this.lastTickTime = nowTime - (elapsedTime % this.fpsInterval)\n    }\n\n    if (!Luge.settings.ticker.external) {\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Call tick functions\n   */\n  tick (nowTime) {\n    const self = this\n\n    this.callbacks.forEach(object => {\n      object.cb.apply(object.context, [nowTime])\n    })\n\n    this.onceCallbacks.forEach((object, index) => {\n      object.cb.apply(object.context, [nowTime])\n\n      delete self.onceCallbacks[index]\n    })\n  }\n}\n\nexport default new Ticker()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass MouseObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n\n    this.timeouts = {\n      scroll: null\n    }\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    Ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('mouseMove', this.mouseHandler, this)\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n    }, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    clearTimeout(this.timeouts.scroll)\n    this.timeouts.scroll = setTimeout(this.getBoundingThrottle.bind(this), 75)\n  }\n\n  /**\n   * Mouse handler\n   */\n  mouseHandler () {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.setElementPosition(element)\n    })\n\n    window.mouseLastScrollTop = window.scrollTop\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.elementsToBound = this.elements\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bouding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n      this.setElementPosition(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    const properties = {\n      anchor: {\n        x: bounding.left,\n        y: bounding.top + window.unifiedScrollTop\n      },\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Set element position\n   * @param {HTMLElement} element Element\n   */\n  setElementPosition (element) {\n    if (element.luge && element.luge.anchor) {\n      const mouse = {\n        x: window.mouseX - element.luge.anchor.x,\n        y: window.mouseY - element.luge.anchor.y + window.unifiedScrollTop\n      }\n\n      mouse.progressX = Helpers.clamp(mouse.x / element.luge.width, 0, 1)\n      mouse.progressY = Helpers.clamp(mouse.y / element.luge.height, 0, 1)\n\n      element.luge.mouse = Helpers.mergeDeep(element.luge.mouse, mouse)\n    }\n  }\n\n  /**\n   * Add mouse element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove mouse element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    const self = this\n    const diffScroll = window.scrollTop - window.mouseLastScrollTop\n\n    if (diffScroll !== 0) {\n      this.elements.forEach(element => {\n        self.setElementPosition(element)\n      })\n    }\n  }\n}\n\nexport default new MouseObserver()\n","import Emitter from './Emitter'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass ScrollObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    this.setMaxScrollTop()\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n      this.checkElementsThrottle()\n    }, this)\n  }\n\n  /**\n   * Set max scroll top\n   */\n  setMaxScrollTop () {\n    window.maxScrollTop = Math.max(\n      document.body ? document.body.scrollHeight : 0,\n      document.body ? document.body.offsetHeight : 0,\n      document.documentElement.clientHeight,\n      document.documentElement.scrollHeight,\n      document.documentElement.offsetHeight\n    ) - window.innerHeight\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.setMaxScrollTop()\n\n    this.elements.forEach(element => {\n      if (!this.elementsToBound.includes(element)) {\n        element.scrollProgress = 0\n\n        this.elementsToBound.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bounding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    element.scrollStart = bounding.top + window.unifiedScrollTop - window.innerHeight\n\n    element.scrollEnd = element.scrollStart + element.clientHeight + window.innerHeight\n    element.scrollEnd = Math.min(element.scrollEnd, window.maxScrollTop)\n\n    element.scrollMiddle = element.scrollStart + (element.scrollEnd - element.scrollStart) / 2\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Check elements throttle\n   */\n  checkElementsThrottle () {\n    this.elements.forEach(element => {\n      if (!this.elementsToCheck.includes(element)) {\n        this.elementsToCheck.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.checkElements.bind(this))\n  }\n\n  /**\n   * Check elements position\n   */\n  checkElements () {\n    this.elementsToCheck.forEach(element => {\n      this.checkElement(element)\n    })\n    this.elementsToCheck = []\n  }\n\n  /**\n   * Check individual element position\n   * @param {HTMLElement} element Element to check\n   */\n  checkElement (element) {\n    const scrollTop = window.unifiedScrollTop\n\n    let position = ''\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = Math.min(Math.max(scrollTop / element.scrollEnd, 0), 1)\n    } else {\n      progress = Math.min(Math.max((scrollTop - element.scrollStart) / (element.scrollEnd - element.scrollStart), 0), 1)\n    }\n\n    if (isNaN(progress)) {\n      progress = 0\n    }\n\n    if (progress <= 0 && element.scrollStart > 0) {\n      position = 'under'\n    } else if (progress >= 1 && element.scrollEnd < window.maxScrollTop) {\n      position = 'above'\n    } else {\n      position = 'in'\n    }\n\n    element.scrollProgress = progress\n\n    if (element.viewportPosition !== position) {\n      element.viewportPosition = position\n\n      element.dispatchEvent(new CustomEvent('viewportintersect'))\n      element.dispatchEvent(new CustomEvent('viewport' + position))\n\n      if (position !== 'in') {\n        element.dispatchEvent(new CustomEvent('viewportout'))\n      }\n\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    } else if (progress > 0 && progress < 1) {\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    }\n  }\n\n  /**\n   * Add scroll element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      element.scrollProgress = 0\n\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n        this.elementsToCheck.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove scroll element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n\n    if (this.elementsToCheck.includes(element)) {\n      this.elementsToCheck.splice(this.elementsToCheck.indexOf(element), 1)\n    }\n  }\n}\n\nexport default new ScrollObserver()\n","import LifeCycle from './LifeCycle'\nimport Core from './Core'\nimport Emitter from './Emitter'\nimport ViewportObserver from './ViewportObserver'\nimport MouseObserver from './MouseObserver'\nimport ScrollObserver from './ScrollObserver'\nimport Ticker from './Ticker'\n\nclass Luge {\n  plugins = {}\n\n  constructor() {\n    this.emitter = {\n      emit: Emitter.emit.bind(Emitter),\n      off: Emitter.off.bind(Emitter),\n      on: Emitter.on.bind(Emitter),\n      once: Emitter.once.bind(Emitter)\n    }\n\n    this.viewportobserver = {\n      add: ViewportObserver.add.bind(ViewportObserver),\n      remove: ViewportObserver.remove.bind(ViewportObserver)\n    }\n\n    this.lifecycle = {\n      add: LifeCycle.add.bind(LifeCycle),\n      refresh: LifeCycle.cycle.bind(LifeCycle, 'refresh'),\n      remove: LifeCycle.remove.bind(LifeCycle),\n      debug: LifeCycle.enableDebug.bind(LifeCycle),\n      _cycle: LifeCycle.cycle.bind(LifeCycle)\n    }\n\n    this.mouseobserver = {\n      add: MouseObserver.add.bind(MouseObserver),\n      remove: MouseObserver.remove.bind(MouseObserver)\n    }\n\n    this.scrollobserver = {\n      add: ScrollObserver.add.bind(ScrollObserver),\n      remove: ScrollObserver.remove.bind(ScrollObserver)\n    }\n\n    this.ticker = {\n      add: Ticker.add.bind(Ticker),\n      nextTick: Ticker.nextTick.bind(Ticker),\n      remove: Ticker.remove.bind(Ticker),\n      tick: Ticker.tick.bind(Ticker)\n    }\n\n    // TODO!: rename to setSettings\n    this.settings = Core.setSettings.bind(Core)\n  }\n\n  init() {\n    // Site init on DOM ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', LifeCycle.cycle('load'), { once: true })\n    } else {\n      this.ticker.nextTick(() => {\n        LifeCycle.cycle('load')\n      },\n      null)\n    }\n  }\n\n  addPlugin(key, Plugin) {\n    this.plugins[key] = new Plugin(this)\n  }\n\n  get _settings() {\n    return Core.settings\n  }\n}\n\nexport default Luge\n","import Bowser from 'bowser/src/bowser.js'\n\nexport default class Browser {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    const documentElement = document.documentElement\n\n    // Browser detect\n    const browser = Bowser.getParser(window.navigator.userAgent)\n\n    // Platform type class\n    documentElement.classList.add('is-' + browser.getPlatformType())\n\n    if (browser.is('mobile') || browser.is('tablet')) {\n      documentElement.classList.add('is-handheld')\n    }\n\n    // Browser class\n    if (browser.is('Safari')) {\n      documentElement.classList.add('is-safari')\n      documentElement.classList.add('is-safari-' + browser.getBrowserVersion())\n    }\n\n    luge.browser = browser\n  }\n}\n"],"names":["Helpers$1","Helpers","isArray","item","Array","isObject","isString","mergeDeep","target","source","output","Object","assign","keys","forEach","key","_Object$assign","_Object$assign2","toCamelCase","string","replace","word","index","toLowerCase","toUpperCase","toUpperCamelCase","charAt","slice","isInPage","node","document","body","contains","deepFreeze","obj","prop","freeze","clamp","x","lower","upper","Math","min","max","Emitter$1","Emitter","this","events","_proto","prototype","on","name","callback","context","once","push","cb","emit","self","data","call","arguments","object","apply","off","LifeCycle$2","LifeCycle","_this","eventsName","eventName","callbacks","done","cycles","load","reload","transition","refresh","debug","cycle","cycleName","current","console","log","proceed","_this2","length","event","next","wait","requestAnimationFrame","bind","add","position","remove","_this3","sort","a","b","enableDebug","value","Core","Luge","settings","cursor","inertia","trailLength","intersection","threshold","lottie","renderer","subFrame","mouse","parallax","preloader","duration","reveal","stagger","scroll","smooth","ticker","external","credits","show","timeouts","resizeThrottle","scrollEnd","windowWidth","windowHeight","clientWidth","window","scrollTop","scrollY","unifiedScrollTop","maxScrollTop","scrollProgress","previousScrollTop","isScrolling","mouseX","mouseY","mouseLastScrollTop","siteInit","bindEvents","setSettings","showCredits","setCSSProperties","scrollHandler","addEventListener","mouseHandler","passive","e","pageY","pageX","clearTimeout","setTimeout","resizeHandler","newWidth","innerWidth","newHeight","innerHeight","clientHeight","documentElement","style","setProperty","scrollStart","classList","consoleBaseStyle","Plugin","slug","pluginSlug","beforeInit","isDisabled","disabled","init","setAttributes","pluginAttributes","getAttributes","element","attributes","attribute","attributeKey","attributeValue","dataset","type","defaultValue","undefined","Boolean","luge","PreLoader","_Plugin","intro","playerIn","startTime","Date","now","doneLoad","_assertThisInitialized","_inheritsLoose","el","querySelector","root","initLottie","lifecycle","siteIn","pageLoad","String","Number","_settings","in","reverse","elapsed","remaining","clear","play","getComputedStyle","getPropertyValue","destroy","parentNode","removeChild","animIn","loadAnimation","container","loop","autoplay","path","rendererSettings","preserveAspectRatio","setDirection","goToAndStop","totalFrames","setAttribute","Reveal","elements","toRevealIn","toRevealOut","reveals","out","canReveal","onScrollProgress","pageInit","pageKill","manual","multiple","delay","emitter","updateHandler","addElements","querySelectorAll","addElement","includes","closest","revealName","revealCallback","setRevealClasses","scrollobserver","from","children","child","childRevealName","lgReveal","nextTick","lgRevealChild","isRevealed","removeElement","removeEventListener","splice","indexOf","round","revealElements","_this4","revealInTimeout","state","states","split","dispatchEvent","CustomEvent","Transition","url","location","href","pathname","pageFetched","currentPage","prevScrollTop","newScrollTop","transitions","listeners","linkHandler","hasAttribute","initLoader","historyStateChanged","pageFetch","pageOut","pageIn","pageCreate","bindLinksEvent","unbindLinksEvent","currentTarget","getAttribute","origin","preventDefault","navigateTo","history","pushState","prefetchLink","createElement","rel","head","appendChild","_cycle","loader","animOut","playerOut","fetch","credentials","then","response","text","html","DOMParser","parseFromString","newPage","insertAdjacentElement","opacity","top","left","width","className","oldTitle","newTitle","innerText","behavior","smoothScrollTop","oldPage","page","pageName","onpageout","stop","svgElement","onpagein","goToAndPlay","URL","ScrollAnimation","allowedProperties","transformProperties","presets","background-x","background-y","tick","yoyo","animate","randInertia","match","random","scrollAnimation","smoothProgress","properties","JSON","parse","declarations","property","values","fromValue","toValue","unit","safeProperty","to","animation","atDest","_step","_iterator","_createForOfIteratorHelperLoose","progress","abs","_i","_Object$entries","entries","_Object$entries$_i","translate3d","transform","_i2","_Object$entries2","_Object$entries2$_i","y","z","join","styles","willChange","_i3","_Object$entries3","_Object$entries3$_i","_i4","_Object$entries4","_Object$entries4$_i","diff","SmoothScroll","hasSmoothScroll","isSmoothScrolling","hasSmooth","_navigator","_navigator2","smoothScroll","targetScroll","targetSmoothScroll","platform","navigator","userAgentData","virtualScroll","VirtualScroll","firefoxMultiplier","mouseMultiplier","useKeyboard","useTouch","onVirtualScroll","onScroll","_ref","deltaY","originalEvent","isPrevented","composedPath","find","ctrlKey","scrollTo","Cursor","cursors","pointers","trails","hoverTags","hide","hoverHandler","capture","pointer","smoothPosition","trail","svg","createElementNS","points","tag","tagName","hover","toggle","timestamp","shift","d","controlPoint","previous","pointA","pointB","lengthX","lengthY","o","sqrt","pow","angle","atan2","PI","cos","sin","command","reduce","acc","point","i","_controlPoint","cpsX","cpsY","_controlPoint2","cpeX","cpeY","svgPath","Intersection","onViewportIntersect","class","viewportobserver","_document$documentEle","_document$documentEle2","viewport","CSSClass","LottiePlayer","deferInit","ScrollObserver","loopFrame","required","force","lazy","subframe","waitLoad","player","isLoaded","toAutoplay","toLoad","requireds","initPlayer","viewportPosition","isPaused","scrollPaused","pause","initLazy","setSubframe","setPlayerStateClasses","currentFrame","playDirection","playerLoaded","playing","MouseAnimation","mouseSpeed","getMouseMovement","mouseobserver","smoothX","smoothY","smoothProgressX","smoothProgressY","distX","distY","dist","hypot","mouseAngle","mouseDirection","progressX","progressY","diffX","diffY","Parallax","disable","amplitude","anchor","randAmplitude","enable","is","browser","overflow","firstElementChild","movement","smoothMovement","moveElement","ViewportObserver$1","ViewportObserver","createObserver","observer","IntersectionObserver","intersectionCallback","entry","isIntersecting","boundingClientRect","observe","unobserve","Ticker$1","Ticker","onceCallbacks","fps","fpsInterval","lastTickTime","_tick","exists","nowTime","elapsedTime","MouseObserver$1","MouseObserver","elementsToBound","getBoundingThrottle","setElementPosition","getBounding","setElementBounding","bounding","getBoundingClientRect","offsetWidth","height","offsetHeight","ScrollObserver$2","elementsToCheck","setMaxScrollTop","checkElementsThrottle","scrollHeight","scrollMiddle","checkElements","_this5","checkElement","isNaN","Luge$2","plugins","readyState","addPlugin","get","Bowser","getParser","userAgent","getPlatformType","getBrowserVersion"],"mappings":"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"}