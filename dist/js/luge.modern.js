import e from"virtual-scroll";import t from"bowser/src/bowser.js";class s{static isArray(e){return e&&"object"==typeof e&&Array.isArray(e)}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static isString(e){return e&&"string"==typeof e}static mergeDeep(e,t){const i=Object.assign({},e);return s.isObject(e)&&s.isObject(t)&&Object.keys(t).forEach(o=>{s.isObject(t[o])?o in e?i[o]=s.isObject(e[o])&&s.isObject(t[o])?s.mergeDeep(e[o],t[o]):t[o]:Object.assign(i,{[o]:t[o]}):Object.assign(i,{[o]:t[o]})}),i}static toCamelCase(e){return s.isString(e)?e.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>0===t?e.toLowerCase():e.toUpperCase()).replace(/\W+/g,""):e}static toUpperCamelCase(e){return s.isString(e)?(e=s.toCamelCase(e)).charAt(0).toUpperCase()+e.slice(1):e}static isInPage(e){return e!==document.body&&document.body.contains(e)}static deepFreeze(e){return Object.keys(e).forEach(t=>{"object"==typeof e[t]&&s.deepFreeze(e[t])}),Object.freeze(e)}static clamp(e,t,s){return Math.min(s,Math.max(t,e))}}var i=s,o=new class{constructor(){this.events=[]}on(e,t,s,i=!1){(this.events[e]||(this.events[e]=[])).push({cb:t,context:s,once:i})}once(e,t,s){this.on(e,t,s,!0)}emit(e){const t=this,s=[].slice.call(arguments,1);this.events[e]&&this.events[e].forEach((i,o)=>{i.cb.apply(i.context,s),i.once&&delete t.events[e][o]})}off(e,t){const s=this;this.events[e]&&this.events[e].forEach((i,o)=>{i.cb===t&&delete s.events[e][o]})}},l=new class{constructor(){this.eventsName=["siteInit","pageInit","siteLoad","pageLoad","siteIn","pageIn","reveal","pageFetch","pageOut","pageCreate","pageKill","siteReload"],this.events={},this.eventsName.forEach(e=>{this.events[e]={callbacks:[],done:0}}),this.cycles={load:{events:["siteInit","pageInit",["siteLoad","pageLoad"],"siteIn","pageIn","reveal"]},reload:{events:["pageOut","siteReload"]},transition:{events:[["pageFetch","pageOut"],"pageCreate","pageKill","pageInit","pageLoad","pageIn","reveal"]},refresh:{events:["pageKill","pageInit","pageLoad","pageIn","reveal"]}},this.debug=!1}cycle(e){if(this.cycles[e]){this.cycles[e].current=0,this.debug&&console.log("Start cycle: "+e);for(const e in this.events)this.events[e].done=0;this.proceed(e)}}proceed(e){const t=this.cycles[e].events,s=this.cycles[e].current;if(s<t.length){const i=t[s];Array.isArray(i)?i.forEach(t=>{this.do(e,t)}):this.do(e,i)}else this.debug&&console.log(e+" cycle ended")}next(e){const t=this,s=this.cycles[e].events,i=this.cycles[e].current;if(i<s.length){const o=s[i];let l=!0,n=[];n="string"==typeof o?Array(o):o,n.length>1&&n.forEach(e=>{(0===t.events[e].done||t.events[e].done<t.events[e].callbacks.length)&&(l=!1)}),l&&(this.cycles[e].current++,requestAnimationFrame(this.proceed.bind(this,e)))}}add(e,t,s=10,i=null){this.events[e]&&this.events[e].callbacks.push({callback:t,position:s,cycle:i})}remove(e,t,s=null){const i=this;this.events[e]&&this.events[e].callbacks.forEach((o,l)=>{o.callback===t&&o.cycle===s&&delete i.events[e].callbacks[l]})}do(e,t){this.events[t].done=0,this.events[t].callbacks.length>0?(this.debug&&console.log("Do event: "+t+" ("+e+" cycle)"),o.emit(i.toCamelCase("before-"+t)),this.events[t].callbacks.sort((e,t)=>e.position-t.position).forEach(s=>{null===s.cycle||s.cycle===e?s.callback(()=>this.done(e,t)):this.done(e,t)})):this.done(e,t)}done(e,t){this.events[t].done++,this.debug&&console.log("Done event: "+t+" "+this.events[t].done+"/"+this.events[t].callbacks.length+" ("+e+" cycle)"),o.emit(i.toCamelCase("after-"+t)),this.events[t].done>=this.events[t].callbacks.length&&this.next(e,t)}enableDebug(e=!0){this.debug=e}},n=new class{constructor(){this.settings=i.deepFreeze({cursor:{inertia:1,trailLength:10},intersection:{threshold:.3},lottie:{renderer:"svg",subFrame:!0},mouse:{inertia:.1},parallax:{inertia:.1},preloader:{duration:0},reveal:{stagger:.1,threshold:.15},scroll:{inertia:.1},smooth:{inertia:.1},ticker:{external:!1},transition:{reload:!1},credits:{show:!0}}),this.timeouts={resizeThrottle:null,scrollEnd:null},this.windowWidth=1,this.windowHeight=1,this.clientWidth=1,window.scrollTop=window.scrollY,window.unifiedScrollTop=window.scrollTop,window.maxScrollTop=1,window.scrollProgress=0,this.previousScrollTop=window.scrollY,this.isScrolling=!1,window.mouseX=-1,window.mouseY=-1,window.mouseLastScrollTop=0,l.add("siteInit",this.siteInit.bind(this),999),this.bindEvents()}setSettings(e){this.settings=i.deepFreeze(i.mergeDeep(this.settings,e))}siteInit(e){this.showCredits(),this.setCSSProperties(),this.scrollHandler(),e()}bindEvents(){window.addEventListener("mousemove",this.mouseHandler.bind(this),{passive:!0}),window.addEventListener("resize",this.resizeThrottle.bind(this)),window.addEventListener("scroll",this.scrollHandler.bind(this),{passive:!0})}mouseHandler(e){const t=e.pageY-window.scrollTop;window.mouseX=e.pageX,window.mouseY=t,o.emit("mouseMove",e)}resizeThrottle(){clearTimeout(this.timeouts.resizeThrottle),this.timeouts.resizeThrottle=setTimeout(this.resizeHandler.bind(this),200)}resizeHandler(){this.setCSSProperties(),o.emit("resize")}setCSSProperties(){const e=window.innerWidth;this.windowWidth!==e&&(this.windowWidth=e,this.clientWidth=document.body.clientWidth);const t=window.innerHeight;this.windowHeight!==t&&(this.windowHeight=t,this.clientHeight=document.body.clientHeight),requestAnimationFrame(()=>{document.documentElement.style.setProperty("--vw",.01*this.windowWidth+"px"),document.documentElement.style.setProperty("--cw",.01*this.clientWidth+"px"),document.documentElement.style.setProperty("--vh",.01*this.windowHeight+"px"),document.documentElement.style.setProperty("--ch",.01*this.clientHeight+"px")})}scrollHandler(){window.scrollTop=window.scrollY,window.unifiedScrollTop=window.scrollTop,this.isScrolling||this.scrollStart(),clearTimeout(this.timeouts.scrollEnd),this.timeouts.scrollEnd=setTimeout(this.scrollEnd.bind(this),200),this.previousScrollTop=window.scrollTop,window.scrollProgress=window.scrollTop/window.maxScrollTop,o.emit("scroll")}scrollStart(){this.isScrolling=!0,document.documentElement.classList.add("is-scrolling"),o.emit("scrollStart")}scrollEnd(){this.isScrolling=!1,document.documentElement.classList.remove("is-scrolling"),o.emit("scrollEnd")}showCredits(){if(this.settings.credits.show){const e="background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; ";console.log("%c powered by %cluge%c / 0.6.17-beta.2 %c > https://luge.cool ",e,e+"font-weight: bold; ",e,"color: black; font: 400 1em monospace; padding: 0.5em 0; ")}}};class r{constructor(e){this.pluginSlug=e,l.add("siteInit",this.beforeInit.bind(this),5)}beforeInit(e){this.isDisabled=this.disabled(),this.isDisabled?document.documentElement.classList.add("lg-"+this.pluginSlug+"-disabled"):this.init(),e()}init(){this.setAttributes()}disabled(){return!!(n.settings[this.pluginSlug]||{}).disabled}setAttributes(){this.pluginAttributes={}}getAttributes(e){const t=this.pluginAttributes,s={};for(const o in t){const l=t[o];let n="lg-"+this.pluginSlug;"root"!==o&&(n+="-"+o),n=i.toCamelCase(n);const r=e.dataset[n];let a,d,c;"object"==typeof l?(a=l[0],c=l[1]):a=l,d=void 0===r&&void 0!==c?a(c):(void 0!==r||a!==Boolean)&&(void 0!==r?a===Boolean?"false"!==r:a(r):void 0),s[o]=d}return(e.luge||(e.luge={}))&&(e.luge[this.pluginSlug]=s),s}}class a extends r{constructor(e){super("preloader"),this.luge=e,this.intro=!1,this.playerIn=!1,this.startTime=Date.now(),this.doneLoad=null,e.preloader={add:this.add.bind(this)}}init(){super.init(),this.el=document.querySelector("[data-lg-preloader]"),this.el&&(this.attributes=this.getAttributes(this.el),this.el.classList.add("lg-preloader","lg-preloader--"+this.attributes.root),this.initLottie(),this.luge.lifecycle.add("siteIn",this.siteIn.bind(this))),this.luge.lifecycle.add("pageLoad",this.pageLoad.bind(this))}setAttributes(){this.pluginAttributes={root:[String,""],duration:[Number,this.luge._settings.preloader.duration],in:String,reverse:Boolean}}pageLoad(e){this.attributes&&"lottie"===this.attributes.root&&"object"==typeof lottie?this.doneLoad=e:e()}siteIn(e){const t=(Date.now()-this.startTime)/1e3,s=this.attributes.duration-t;if(s<=0){const t=this.clear.bind(this,e);if(this.playerIn)this.playerIn.play(),this.playerIn.addEventListener("complete",t,{once:!0});else if("function"==typeof this.intro)this.intro(e,this.remove.bind(this));else{const e=window.getComputedStyle(this.el).getPropertyValue("transition-duration");""!==e&&"0s"!==e?(this.el.addEventListener("transitionend",t,{once:!0}),this.el.classList.add("is-hidden")):t()}}else setTimeout(this.siteIn.bind(this,e),1e3*s)}clear(e){this.playerIn&&this.playerIn.destroy(),this.remove(),e()}remove(e){this.el.parentNode.removeChild(this.el),this.el=null}add(e){this.intro=e}initLottie(){const e=this;if("lottie"===this.attributes.root&&"object"==typeof lottie){const t=this.attributes.in;let s=!1;t&&(s=lottie.loadAnimation({container:this.el,renderer:"svg",loop:!1,autoplay:!1,path:t,rendererSettings:{preserveAspectRatio:"none"}}),this.attributes.reverse&&s.setDirection(-1)),s.addEventListener("DOMLoaded",()=>{e.attributes.reverse&&s.goToAndStop(s.totalFrames-1,!0),e.el.setAttribute("style",""),"function"==typeof e.doneLoad&&(e.doneLoad(),e.doneLoad=null)},{once:!0}),this.playerIn=s}}}class d extends r{constructor(e){super("reveal"),this.luge=e,this.elements=[],this.toRevealIn=[],this.toRevealOut=[],this.reveals={in:{},out:{}},this.canReveal=!1,this.onScrollProgress=this.onScrollProgress.bind(this),e.reveal={add:this.add.bind(this)}}init(){super.init(),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this),11),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.lifecycle.add("reveal",this.reveal.bind(this)),this.bindEvents()}setAttributes(){super.setAttributes(),this.pluginAttributes={root:String,stagger:String,manual:[Boolean,!1],multiple:Boolean,delay:[Number,0]}}getAttributes(e){const t=super.getAttributes(e);return void 0!==t.stagger&&""===t.stagger?t.stagger=this.luge._settings.reveal.stagger:void 0===t.stagger&&(t.stagger=!1),t}bindEvents(){this.luge.emitter.on("resize",this.resizeHandler,this),this.luge.emitter.on("scroll",this.scrollHandler,this),this.luge.emitter.on("update",this.updateHandler,this)}pageInit(e){this.addElements(),e()}addElements(){const e=document.querySelectorAll("[data-lg-reveal]"),t=this;e.forEach(e=>{t.addElement(e)})}addElement(e){if(!this.elements.includes(e)){const t=this.getAttributes(e);if(!t.stagger&&null!==e.closest("[data-lg-reveal-stagger]"))return;const s=t.root;e.luge.reveal.name=i.toCamelCase(s),t.manual?(e.luge.reveal.in=()=>{this.revealCallback(e,e.luge.reveal.name,"in"),this.setRevealClasses(e,"is-in")},e.luge.reveal.out=()=>{this.revealCallback(e,e.luge.reveal.name,"out"),this.setRevealClasses(e,"is-out")}):(this.luge.scrollobserver.add(e),e.addEventListener("scrollprogress",this.onScrollProgress)),e.luge.reveal.delay=1e3*t.delay,t.stagger?Array.from(e.children).forEach(e=>{const t=e.dataset.lgReveal;e.style.transition="none",this.luge.ticker.nextTick(()=>{e.style.transition=""}),e.classList.add("lg-reveal","is-out"),(t||s)&&e.classList.add("lg-reveal--"+(null!=t?t:s)),e.dataset.lgRevealChild="",(e.luge||(e.luge={}))&&(e.luge.reveal={isRevealed:!1})}):(e.style.transition="none",this.luge.ticker.nextTick(()=>{e.style.transition=""}),e.classList.add("lg-reveal","is-out"),s&&e.classList.add("lg-reveal--"+s)),this.elements.push(e)}}removeElement(e){e.removeEventListener("scrollprogress",this.onScrollProgress),this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)}pageKill(e){const t=this;this.canReveal=!1,this.elements.forEach(e=>{t.removeElement(e)}),e()}onScrollProgress(e){const t=e.target,s=this.luge._settings.reveal.threshold;t.scrollProgress>=s&&t.scrollProgress<=1-s&&!t.luge.reveal.isRevealed?(this.toRevealOut.includes(t)&&this.toRevealOut.splice(this.toRevealOut.indexOf(t),1),this.toRevealIn.includes(t)||this.toRevealIn.push(t)):(t.scrollProgress<s||t.scrollProgress>1-s&&t.scrollEnd<Math.round(window.unifiedScrollTop))&&t.luge.reveal.isRevealed&&(this.toRevealIn.includes(t)&&this.toRevealIn.splice(this.toRevealIn.indexOf(t),1),this.toRevealOut.includes(t)||this.toRevealOut.push(t))}reveal(e){this.canReveal=!0,this.elements.forEach(e=>{e.scrollStart<0&&(this.toRevealIn.includes(e)||this.toRevealIn.push(e))}),this.revealElements(),e()}resizeHandler(){this.revealElements()}scrollHandler(){this.revealElements()}updateHandler(){this.addElements(),this.revealElements()}revealElements(){const e=this;if(this.canReveal){let t=0;this.toRevealIn.forEach(s=>{const o=i.toCamelCase(s.luge.reveal.root);t+=s.luge.reveal.delay,setTimeout(function(){e.revealCallback(s,o,"in"),s.luge.reveal.stagger?Array.from(s.children).forEach((t,l)=>{const n=i.toCamelCase(t.dataset.lgReveal);setTimeout(()=>{(n||o)&&e.revealCallback(t,null!=n?n:o,"in"),e.setRevealClasses(t,"is-in")},l*s.luge.reveal.stagger*1e3)}):e.setRevealClasses(s,"is-in")},t),t+=1e3*this.luge._settings.reveal.stagger,s.luge.reveal.multiple||e.removeElement(s)}),this.toRevealOut.forEach(t=>{const s=i.toCamelCase(t.luge.reveal.root);void 0!==t.luge.reveal.isRevealed&&e.revealCallback(t,s,"out");let o="";o=t.scrollProgress>.5?"is-out is-out-top":"is-out is-out-bottom",t.luge.reveal.stagger?Array.from(t.children).forEach((l,n)=>{const r=i.toCamelCase(l.dataset.lgReveal);setTimeout(()=>{(r||s)&&e.revealCallback(l,null!=r?r:s,"out"),e.setRevealClasses(l,o)},n*t.luge.reveal.stagger*1e3)}):e.setRevealClasses(t,o)}),this.toRevealIn=[],this.toRevealOut=[]}}setRevealClasses(e,t){t=t.split(" "),e.classList.remove("is-in","is-out","is-out-top","is-out-bottom"),t.forEach(t=>{e.classList.add(t)})}revealCallback(e,t,s){e.dispatchEvent(new CustomEvent("reveal"+s)),e.luge.reveal.isRevealed="in"===s,"function"==typeof this.reveals[s][t]?this.reveals[s][t](e):"function"==typeof e["onreveal"+s]&&e["onreveal"+s]()}add(e,t,s){this.reveals[e]&&(t=i.toCamelCase(t),this.reveals[e][t]?console.log("Reveal animation named "+t+" already exists."):this.reveals[e][t]=s)}}class c extends r{constructor(e){super("transition"),this.luge=e,this.url=window.location.href,this.pathname=window.location.pathname,this.pageFetched=null,this.currentPage=null,this.reload=this.luge._settings.transition.reload,this.prevScrollTop=0,this.newScrollTop=0,this.transitions={in:{},out:{}},this.listeners={linkHandler:this.linkHandler.bind(this)},e.transition={add:this.add.bind(this)}}init(){this.currentPage=document.querySelector("[data-lg-page]"),this.currentPage&&(this.reload=!!this.currentPage.hasAttribute("data-lg-reload")||this.luge._settings.transition.reload),this.initLoader(),this.reload||window.addEventListener("popstate",this.historyStateChanged.bind(this)),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageFetch",this.pageFetch.bind(this)),this.luge.lifecycle.add("pageOut",this.pageOut.bind(this)),this.luge.lifecycle.add("pageIn",this.pageIn.bind(this),10,"transition"),this.luge.lifecycle.add("pageCreate",this.pageCreate.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this),999,"transition")}bindLinksEvent(){document.querySelector("[data-lg-page]")&&document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",this.listeners.linkHandler)})}unbindLinksEvent(){document.querySelectorAll("a").forEach(e=>{e.removeEventListener("click",this.listeners.linkHandler)})}linkHandler(e){const t=e.currentTarget,s=t.getAttribute("href");if(s&&0!==s.indexOf("#")&&0!==s.indexOf("tel")&&0!==s.indexOf("mailto")&&!t.closest("#wpadminbar")&&"disabled"!==t.getAttribute("data-lg-transition")&&"_blank"!==t.getAttribute("target")&&(0===s.indexOf(window.location.origin)||0===s.indexOf("/")||-1===s.indexOf("/"))){if(e.preventDefault(),window.location.href===s)return;this.navigateTo(s),history.pushState(null,null,this.url)}}navigateTo(e){if(this.url=e,this.reload){const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t),this.luge.lifecycle.add("siteReload",t=>{window.location=e}),this.luge.lifecycle._cycle("reload")}else this.luge.lifecycle._cycle("transition")}pageInit(e){this.bindLinksEvent(),e()}initLoader(){const e=document.querySelector("[data-lg-loader]");if(e&&(e.style.transition="none",e.classList.add("lg-loader","lg-loader--"+e.getAttribute("data-lg-loader")),this.luge.ticker.nextTick(()=>{e.style.transition=""})),e&&"lottie"===e.getAttribute("data-lg-loader")&&"object"==typeof lottie){const t=e.getAttribute("data-lg-loader-out");let s=!1,i=e.getAttribute("data-lg-loader-in"),o=!1;t&&(s=lottie.loadAnimation({container:e,renderer:"svg",loop:!1,autoplay:!1,path:t,rendererSettings:{preserveAspectRatio:"none"}})),"reverse"===i&&(i=t),i&&(o=lottie.loadAnimation({container:e,renderer:"svg",loop:!1,autoplay:!1,path:i,rendererSettings:{preserveAspectRatio:"none"}}),i===t&&o.setDirection(-1)),e.playerOut=s,e.playerIn=o}}pageFetch(e){const t=this;this.url&&fetch(this.url,{credentials:"include"}).then(function(e){return e.text()}).then(function(s){t.pageFetched=s,e()})}pageCreate(e){const t=(new DOMParser).parseFromString(this.pageFetched,"text/html"),s=t.querySelector("[data-lg-page]");if(s){{this.currentPage.insertAdjacentElement("beforebegin",s),s.style.opacity=0,this.currentPage.style.opacity=0,this.currentPage.style.position="absolute",this.currentPage.style.top=0,this.currentPage.style.left="-999em",this.currentPage.style.width="100%",document.querySelector("body").className=t.querySelector("body").className,document.querySelectorAll('meta[name="description"], meta[name="keywords"], meta[property="og:image"]').forEach(e=>{e.parentNode.removeChild(e)}),t.querySelectorAll('meta[name="description"], meta[name="keywords"], meta[property="og:image"]').forEach(e=>{document.querySelector("head title").insertAdjacentElement("afterend",e)});const e=document.querySelector("head title"),i=t.querySelector("head title");e&&i&&(e.innerText=i.innerText)}window.scroll({top:this.newScrollTop,left:0,behavior:"instant"}),window.scrollTop=0,window.smoothScrollTop=0,window.unifiedScrollTop=0,this.prevScrollTop=0,this.newScrollTop=0,this.luge.emitter.emit("pageTransition",t),e()}else window.location=this.url}pageKill(e){const t=this.currentPage;t.parentNode.removeChild(t),this.currentPage=document.querySelector("[data-lg-page]"),this.reload=!!this.currentPage.hasAttribute("data-lg-reload")||this.luge._settings.transition.reload,e()}pageOut(e){const t=this,s=document.querySelector("[data-lg-page]");if(s){const o=i.toCamelCase(s.getAttribute("data-lg-page"));let l=!1;if("function"==typeof this.transitions.out[o]?l=this.transitions.out[o]:"function"==typeof s.onpageout?l=s.onpageout:"function"==typeof this.transitions.out.default&&(l=this.transitions.out.default),l)l(s,e);else{const s=document.querySelector("[data-lg-loader]");if(s){if(s.playerOut)s.playerOut.stop(),s.playerOut.renderer.svgElement.style.opacity=1,s.playerOut.play(),s.playerOut.addEventListener("complete",()=>{t.reload||(s.playerOut.renderer.svgElement.style.opacity=""),e()},{once:!0});else{const t=window.getComputedStyle(document.querySelector("[data-lg-loader]")).getPropertyValue("transition-duration");""!==t&&"0s"!==t?s.addEventListener("transitionend",e,{once:!0}):e()}s.classList.add("is-visible")}else e()}}else e();this.unbindLinksEvent.bind(this)}pageIn(e){const t=document.querySelector("[data-lg-page]");if(t){const s=i.toCamelCase(t.getAttribute("data-lg-page"));let o=!1;if(t.style.opacity="","function"==typeof this.transitions.in[s]?o=this.transitions.in[s]:"function"==typeof t.onpagein?o=t.onpagein:"function"==typeof this.transitions.in.default&&(o=this.transitions.in.default),o)o(t,e);else{const t=document.querySelector("[data-lg-loader]");if(t&&t.classList.contains("is-visible"))if(t.playerIn)t.playerIn.stop(),t.playerIn.renderer.svgElement.style.opacity=1,"reverse"===t.getAttribute("data-lg-loader-in")?t.playerIn.goToAndPlay(t.playerIn.totalFrames,!0):t.playerIn.play(),t.playerIn.addEventListener("complete",()=>{t.playerIn.renderer.svgElement.style.opacity="",t.classList.remove("is-visible"),e()},{once:!0});else{const s=window.getComputedStyle(document.querySelector("[data-lg-loader]")).getPropertyValue("transition-duration");""!==s&&"0s"!==s?t.addEventListener("transitionend",e,{once:!0}):e(),t.classList.remove("is-visible")}else e()}}else e()}historyStateChanged(){let e="";e=0===this.url.indexOf(window.location.origin)?new URL(this.url):new URL(window.location.origin+this.url),e.pathname!==window.location.pathname&&(this.prevScrollTop=window.scrollY,this.luge.ticker.nextTick(()=>{this.newScrollTop=window.scrollY,window.scroll({top:this.prevScrollTop,left:0,behavior:"instant"})}),this.navigateTo(window.location.href))}add(e,t="default",s){this.transitions[e]&&(t=i.toCamelCase(t),this.transitions[e][t]?console.log("Transition animation for "+t+" page already exists."):this.transitions[e][t]=s)}}class h extends r{constructor(e){super("scroll"),this.luge=e,this.elements=[],this.allowedProperties=["opacity","background-x","background-y"],this.transformProperties=["x","y","z","translate3d","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ"],this.presets={"background-x":{"background-x":["0%","100%"]},"background-y":{"background-y":["0%","100%"]}},this.onScrollProgress=this.onScrollProgress.bind(this)}init(){super.init(),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()}setAttributes(){this.pluginAttributes={root:String,yoyo:Boolean,inertia:[String,this.luge._settings.scroll.inertia],animate:String}}getAttributes(e){const t=super.getAttributes(e);if(t.inertia){const e=t.inertia.match(/\{\s*([0-9]*[.]?[0-9]*)\s*,\s*([0-9]*[.]?[0-9]*)\s*\}/m);t.inertia=e?Number(e[1])+(Number(e[2])-Number(e[1]))*Math.random():Number(t.inertia),t.inertia=Math.max(Math.min(t.inertia,.99),0)}return t}bindEvents(){this.luge.emitter.on("update",this.updateHandler,this)}updateHandler(){this.addElements()}pageInit(e){this.addElements(),e()}addElements(){const e=document.querySelectorAll("[data-lg-scroll]"),t=this;e.forEach(e=>{t.addElement(e)})}addElement(e){if(!this.elements.includes(e)){const t=this.getAttributes(e);this.luge.scrollobserver.add(e),e.addEventListener("scrollprogress",this.onScrollProgress);const s={};s.smoothProgress=void 0!==e.scrollProgress?e.scrollProgress:0,s.yoyo=t.yoyo,s.inertia=t.inertia;let i=!1;if(void 0!==t.animate?i=JSON.parse(t.animate.replace(/'/g,'"')):this.presets[t.root]&&(i=this.presets[t.root]),i){const e={};for(const t in i)if(this.allowedProperties.includes(t)||this.transformProperties.includes(t)){const s=i[t];let o=String(s[0]),l=String(s[1]),n=o.match(/\d+([a-zA-Z%]+)/m);n?n=n[1]:0===t.indexOf("rotate")&&(n="deg"),o=Number(o.replace(n,"")),l=Number(l.replace(n,""));let r=t;"background-x"===t?r="background-position-x":"background-y"===t&&(r="background-position-y"),e[r]={from:o,to:l,current:o,unit:n}}s.properties=e}e.luge.scroll.animation=s,this.elements.push(e)}}removeElement(e){e.removeEventListener("scrollprogress",this.onScrollProgress),this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)}pageKill(e){const t=this;this.elements.forEach(e=>{t.removeElement(e)}),e()}onScrollProgress(e){e.target.luge.scroll.animation.atDest=!1}tick(){for(const e of this.elements){if(e.luge.scroll.animation.atDest)continue;let t=e.scrollProgress;if(e.luge.scroll.yoyo&&(t=1-Math.abs(1-2*t)),e.luge.scroll.animation.smoothProgress+=(t-e.luge.scroll.animation.smoothProgress)*(1-e.luge.scroll.inertia),e.luge.scroll.animation.properties){const t={};for(const[s,i]of Object.entries(e.luge.scroll.animation.properties))i.current=i.from+(i.to-i.from)*e.luge.scroll.animation.smoothProgress,["x","y","z"].includes(s)?(t.translate3d||(t.translate3d={}))&&(t.translate3d[s]=i.current+i.unit):t[s]=i.current+i.unit;const s=[];for(const[e,i]of Object.entries(t))if(this.transformProperties.includes(e)){if("object"==typeof i)if("translate3d"===e){const e=Object.assign({x:0,y:0,z:0},i);i.string=e.x+", "+e.y+", "+e.z}else i.string=Object.values(i).join(", ");s.push(e+"("+("object"!=typeof i?i:i.string)+")")}const i={},o=[];s.length>0&&(i.transform=s.join(" "),o.push("transform"));for(const[e,s]of Object.entries(t))this.transformProperties.includes(e)||(i[e]=s,o.push(e));for(const[t,s]of Object.entries(i))e.style.setProperty(t,s);e.style.setProperty("will-change",o.join(", "))}else{const t=Math.round(1e3*(e.scrollProgress-e.luge.scroll.animation.smoothProgress))/1e3;e.style.setProperty("--progress",e.luge.scroll.animation.smoothProgress),e.style.setProperty("--abs-diff",Math.abs(t)),e.style.setProperty("--diff",t)}Math.abs(t-e.luge.scroll.animation.smoothProgress)<1e-4&&(e.luge.scroll.animation.atDest=!0)}}}class u extends r{constructor(){super("smooth"),window.hasSmoothScroll=!1,window.isSmoothScrolling=!1}init(){if(super.init(),this.element=document.documentElement,this.hasSmooth=this.element.hasAttribute("data-lg-smooth"),this.hasSmooth){var t,s;window.hasSmoothScroll=!0,this.smoothScroll=window.scrollTop,this.targetScroll=window.scrollTop,this.targetSmoothScroll=window.scrollTop,document.documentElement.classList.add("has-smooth-scroll");const i=(null==(t=navigator)||null==(t=t.userAgentData)?void 0:t.platform)||(null==(s=navigator)?void 0:s.platform)||"unknown";this.virtualScroll=new e({el:this.element,firefoxMultiplier:50,mouseMultiplier:i.indexOf("Win")>-1?1:.4,useKeyboard:!1,useTouch:!1,passive:!0}),this.virtualScroll.on(this.onVirtualScroll.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()}}bindEvents(){this.luge.emitter.on("scroll",this.onScroll,this)}onScroll(){window.isSmoothScrolling||(this.targetScroll=window.scrollTop,this.targetSmoothScroll=window.scrollTop,this.smoothScroll=window.scrollTop)}onVirtualScroll({deltaY:e,originalEvent:t}){const s=!!t.composedPath().find(e=>null==e||null==e.hasAttribute?void 0:e.hasAttribute("data-lg-smooth-prevent"));t.ctrlKey||s||(this.targetScroll-=e,this.targetScroll=i.clamp(0,this.targetScroll,window.maxScrollTop),window.isSmoothScrolling=!0)}tick(){const e=this.luge._settings.smooth;this.targetSmoothScroll+=(this.targetScroll-this.targetSmoothScroll)*e.inertia,this.smoothScroll+=(this.targetSmoothScroll-this.smoothScroll)*e.inertia;const t=Math.abs(this.targetSmoothScroll-this.smoothScroll);window.isSmoothScrolling&&t>.5?window.scrollTo({top:this.smoothScroll,behavior:"auto"}):window.isSmoothScrolling&&(this.smoothScroll=this.targetSmoothScroll,window.isSmoothScrolling=!1)}}class g extends r{constructor(e){super("cursor"),this.luge=e,this.cursors=[],this.pointers=[],this.trails=[],this.hoverTags=["a","button","input"]}init(){super.init(),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()}setAttributes(){this.pluginAttributes={root:String,inertia:[Number,this.luge._settings.cursor.inertia],length:[Number,this.luge._settings.cursor.trailLength],hide:Boolean}}bindEvents(){document.documentElement.addEventListener("mouseenter",this.hoverHandler.bind(this),{capture:!0,passive:!0}),document.documentElement.addEventListener("mouseleave",this.hoverHandler.bind(this),{capture:!0,passive:!0})}pageInit(e){const t=this,s=document.querySelectorAll("[data-lg-cursor]:not(.lg-cursor)");s.length>0&&s.forEach(e=>{const s=this.getAttributes(e);s.hide&&document.documentElement.classList.add("lg-cursor-hide"),e.querySelectorAll("[data-lg-cursor-pointer").forEach(e=>{e.luge={cursor:{position:{x:0,y:0},smoothPosition:{x:0,y:0}}},e.luge.cursor.inertia=e.hasAttribute("data-lg-cursor-inertia")?Number(e.getAttribute("data-lg-cursor-inertia")):s.inertia,e.classList.add("lg-cursor-pointer"),t.pointers.push(e)}),e.querySelectorAll("[data-lg-cursor-trail").forEach(e=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");i.appendChild(o),e.appendChild(i),e.luge={cursor:{position:{x:0,y:0},smoothPosition:{x:0,y:0},points:[],path:o}},e.luge.cursor.inertia=e.hasAttribute("data-lg-cursor-inertia")?Number(e.getAttribute("data-lg-cursor-inertia")):s.inertia,e.luge.cursor.length=e.hasAttribute("data-lg-cursor-length")?Number(e.getAttribute("data-lg-cursor-length")):s.length,e.classList.add("lg-cursor-trail"),t.trails.push(e)}),e.classList.add("lg-cursor"),this.cursors.push(e)}),e()}hoverHandler(e){const t=e.target,s=t.tagName.toLowerCase(),i=t.getAttribute("data-lg-hover");let o=null;(this.hoverTags.includes(s)||null!==i)&&(o="mouseenter"===e.type),null!==o&&this.cursors.forEach(e=>{e.classList.toggle("lg-cursor--hover",o),null!==i&&""!==i&&e.classList.toggle("lg-cursor--hover--"+i,o)})}tick(e){this.pointers.forEach(e=>{const t=e.luge.cursor.position,s=e.luge.cursor.smoothPosition;t.x=window.mouseX,t.y=window.mouseY,s.x+=(t.x-s.x)*e.luge.cursor.inertia,s.y+=(t.y-s.y)*e.luge.cursor.inertia,e.style.transform="translate3d("+s.x+"px, "+s.y+"px, 0)"}),this.trails.forEach(e=>{const t=e.luge.cursor.position,s=e.luge.cursor.smoothPosition;if(t.x=window.mouseX,t.y=window.mouseY,-1!==window.mouseX){s.x+=(t.x-s.x)*e.luge.cursor.inertia,s.y+=(t.y-s.y)*e.luge.cursor.inertia;const i=e.luge.cursor.points;i.push({x:s.x,y:s.y}),i.length>e.luge.cursor.length&&i.shift();let o="",l=0;const n=(e,t)=>{const s=t.x-e.x,i=t.y-e.y;return{length:Math.sqrt(Math.pow(s,2)+Math.pow(i,2)),angle:Math.atan2(i,s)}},r=(e,t,s,i)=>{const o=n(t||e,s||e);l+=o.length;const r=o.angle+(i?Math.PI:0),a=.2*o.length;return[e.x+Math.cos(r)*a,e.y+Math.sin(r)*a]};o=((e,t)=>`${e.reduce((e,t,s,i)=>0===s?`M ${t.x},${t.y}`:`${e} ${((e,t,s)=>{const[i,o]=r(s[t-1],s[t-2],e),[l,n]=r(e,s[t-1],s[t+1],!0);return`C ${i},${o} ${l},${n} ${e.x},${e.y}`})(t,s,i)}`,"")}`)(i),e.luge.cursor.path.setAttribute("d",o),e.style.setProperty("--length",l)}})}}class p extends r{constructor(e){super("intersection"),this.luge=e,this.listeners={onViewportIntersect:this.onViewportIntersect.bind(this)}}init(){super.init(),this.elements=[],this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.bindEvents()}setAttributes(){this.pluginAttributes={root:String,class:String}}bindEvents(){this.luge.emitter.on("update",this.updateHandler,this)}updateHandler(){this.addElements()}pageInit(e){this.addElements(),e()}addElements(){const e=document.querySelectorAll("[data-lg-intersection]"),t=this;e.forEach(e=>{t.addElement(e)})}addElement(e){this.elements.includes(e)||(this.getAttributes(e),this.luge.viewportobserver.add(e),e.addEventListener("viewportintersect",this.listeners.onViewportIntersect),this.elements.push(e))}removeElement(e){this.elements.includes(e)&&(this.luge.viewportobserver.remove(e),e.removeEventListener("viewportintersect",this.listeners.onViewportIntersect),this.elements.splice(this.elements.indexOf(e),1))}pageKill(e){const t=this;this.elements.forEach(e=>{t.removeElement(e)}),e()}onViewportIntersect(e){const t=e.target,s=t.luge.viewport.position,i=!!t.luge.intersection.class&&t.luge.intersection.class.split(" ");t.classList.remove("is-in","is-out","is-out-top","is-out-bottom"),"in"===s?(t.classList.add("is-in"),i&&document.documentElement.classList.add(...i)):(i&&document.documentElement.classList.remove(...i),t.classList.add("is-out","above"===s?"is-out-top":"is-out-bottom"))}}class m extends r{constructor(e){super("lottie"),this.luge=e,this.elements=[],this.doneLoad=null,this.onViewportIntersect=this.onViewportIntersect.bind(this),this.onScrollProgress=this.onScrollProgress.bind(this),e.lottie={deferInit:this.deferInit.bind(this)}}init(){super.init(),"object"==typeof lottie&&(this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageLoad",this.pageLoad.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.lifecycle.add("reveal",this.reveal.bind(this))),this.bindEvents()}deferInit(){"object"==typeof lottie&&(this.pageInit(()=>{}),LifeCycle.add("pageKill",this.pageKill.bind(this)),LifeCycle.add("reveal",this.reveal.bind(this)),ScrollObserver.updateHandler())}setAttributes(){this.pluginAttributes={root:String,autoplay:Boolean,scroll:Boolean,loop:Boolean,loopFrame:[Number,0],reverse:Boolean,required:Boolean,force:Boolean,lazy:Boolean,renderer:[String,Luge.settings.lottie.renderer],subframe:[Boolean,Luge.settings.lottie.subFrame]}}bindEvents(){this.luge.emitter.on("update",this.updateHandler,this)}updateHandler(){this.addElements(),this.reveal(()=>{})}pageLoad(e){let t=!1;this.elements.length>0&&this.elements.forEach(e=>{e.luge.lottie.required&&!e.player.isLoaded&&(t=!0)}),t?this.doneLoad=e:e()}pageInit(e){this.addElements(),e()}addElements(){const e=this;this.elements=document.querySelectorAll("[data-lg-lottie]"),this.toAutoplay=[],this.toLoad=0,this.requireds=0,this.elements.forEach(t=>{if(!t.player){const s=this.getAttributes(t);this.luge.scrollobserver.add(t),s.lazy||(e.initPlayer(t),t.addEventListener("revealin",e.play)),t.addEventListener("viewportintersect",e.onViewportIntersect)}})}pageKill(e){const t=this;let s=[];const i=document.querySelector("[data-lg-page] + [data-lg-page]");s=i?i.querySelectorAll("[data-lg-lottie]"):this.elements,s.forEach(e=>{e.removeEventListener("revealin",t.play),e.removeEventListener("viewportintersect",t.onViewportIntersect),e.hasAttribute("data-lg-lottie-scroll")&&e.removeEventListener("scrollprogress",t.onScrollProgress),e.player&&(e.player.destroy(),delete e.player)}),e()}reveal(e){this.toAutoplay.forEach(e=>{"in"===e.viewportPosition&&e.play()}),e()}onViewportIntersect(e){const t=e.target;t.player?t.luge.lottie.force||("in"===t.viewportPosition?t.player.isPaused&&(t.player.scrollPaused||t.hasAttribute("data-lg-lottie-autoplay"))&&(t.player.scrollPaused=!1,t.play()):t.player.isPaused||(t.player.scrollPaused=!0,t.pause())):"in"===t.viewportPosition&&this.initLazy(t)}initLazy(e){this.initPlayer(e),e.player.addEventListener("DOMLoaded",()=>{e.play()},{once:!0})}initPlayer(e){const t=this;this.toLoad++;const s=this.getAttributes(e);e.player=lottie.loadAnimation({container:e,renderer:s.renderer,loop:s.loop&&!s.reverse,autoplay:!1,path:s.root}),void 0!==s.subframe&&e.player.setSubframe(s.subframe),e.classList.add("lg-lottie"),this.setPlayerStateClasses(e,!1),s.autoplay&&this.toAutoplay.push(e),s.required&&this.requireds++,s.scroll?e.addEventListener("scrollprogress",this.onScrollProgress):s.loop&&e.player.addEventListener("enterFrame",function(){if(e.player.totalFrames>0){const i=Math.round(e.player.currentFrame);1===e.player.playDirection?i===e.player.totalFrames-1&&(e.player.pause(),this.luge.ticker.nextTick(s.reverse?()=>{e.player.setDirection(-1),e.player.goToAndPlay(e.player.totalFrames,!0),t.setPlayerStateClasses(e,"backward")}:()=>{e.player.goToAndPlay(s.loopFrame,!0)},this)):i===s.loopFrame&&(e.player.pause(),this.luge.ticker.nextTick(()=>{e.player.setDirection(1),e.player.goToAndPlay(s.loopFrame,!0),t.setPlayerStateClasses(e,"forward")},this))}}),e.play=this.play.bind(this,e),e.pause=this.pause.bind(this,e),e.stop=this.stop.bind(this,e),e.player.addEventListener("DOMLoaded",()=>{e.classList.add("is-loaded"),t.playerLoaded(s.required)},{once:!0})}setPlayerStateClasses(e,t){e.classList.remove("is-playing","is-playing-forward","is-playing-backward","is-paused"),t?(e.classList.add("is-playing"),e.classList.add("backward"===t?"is-playing-backward":"is-playing-forward")):e.classList.add("is-paused")}playerLoaded(e=!1){this.toLoad--,e&&this.requireds--,0===this.requireds&&"function"==typeof this.doneLoad&&(this.doneLoad(),this.doneLoad=null),0===this.toLoad&&this.luge.ticker.nextTick(()=>{this.luge.emitter.emit("resize")})}play(e){e&&e.player&&(e.player.play(),this.setPlayerStateClasses(e,"forward"))}pause(e){e&&e.player&&(e.player.pause(),this.setPlayerStateClasses(e,!1))}stop(e){e&&e.player&&(e.player.stop(),this.setPlayerStateClasses(e,!1))}onScrollProgress(e){const t=e.target;t.player.goToAndStop(t.player.totalFrames*t.scrollProgress,!0)}}class v extends r{constructor(e){super("mouse"),this.luge=e,this.elements=[],this.mouse={x:window.mouseX,y:window.mouseY},window.mouseSpeed=0}init(){super.init(),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this)),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.ticker.add(this.tick,this),this.getMouseMovement(),this.bindEvents()}setAttributes(){this.pluginAttributes={root:String,inertia:[String,this.luge._settings.mouse.inertia]}}getAttributes(e){const t=super.getAttributes(e);if(t.inertia){const e=t.inertia.match(/\{\s*([0-9]*[.]?[0-9]*)\s*,\s*([0-9]*[.]?[0-9]*)\s*\}/m);t.inertia=e?Number(e[1])+(Number(e[2])-Number(e[1]))*Math.random():Number(t.inertia),t.inertia=Math.max(Math.min(t.inertia,.99),0)}return t}bindEvents(){this.luge.emitter.on("update",this.updateHandler,this)}updateHandler(){this.addElements()}pageInit(e){this.addElements(),e()}addElements(){const e=document.querySelectorAll("[data-lg-mouse]"),t=this;e.forEach(e=>{t.addElement(e)})}addElement(e){this.elements.includes(e)||(this.getAttributes(e),this.luge.mouseobserver.add(e),e.luge.mouse.smoothX=0,e.luge.mouse.smoothY=0,e.luge.mouse.smoothProgressX=0,e.luge.mouse.smoothProgressY=0,this.elements.push(e))}removeElement(e){this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)}pageKill(e){const t=this;this.elements.forEach(e=>{t.removeElement(e)}),e()}getMouseMovement(){const e=this.mouse.x-window.mouseX,t=this.mouse.y-window.mouseY,s=Math.hypot(e,t);if(window.mouseSpeed+=.5*(s-window.mouseSpeed),window.mouseSpeed<.001&&(window.mouseSpeed=0),s>1){const s=Math.atan2(t,e)*(180/Math.PI)+180;window.mouseAngle=s,window.mouseDirection=s>=45&&s<135?"down":s>=135&&s<225?"left":s>=225&&s<315?"up":"right"}this.mouse={x:window.mouseX,y:window.mouseY},setTimeout(this.getMouseMovement.bind(this),20)}tick(){this.elements.forEach(e=>{const t=e.luge.mouse;if(t.x)if(t.inertia){t.smoothX+=(t.x-t.smoothX)*t.inertia,t.smoothY+=(t.y-t.smoothY)*t.inertia,t.smoothProgressX+=(t.progressX-t.smoothProgressX)*t.inertia,t.smoothProgressY+=(t.progressY-t.smoothProgressY)*t.inertia,e.style.setProperty("--mouse-x",t.smoothX),e.style.setProperty("--mouse-y",t.smoothY),e.style.setProperty("--mouse-progress-x",t.smoothProgressX),e.style.setProperty("--mouse-progress-y",t.smoothProgressY);const s=Math.round(1e3*(t.x-t.smoothX))/1e3,i=Math.round(1e3*(t.y-t.smoothY))/1e3;e.style.setProperty("--abs-diff-x",Math.abs(s)),e.style.setProperty("--diff-x",s),e.style.setProperty("--abs-diff-y",Math.abs(i)),e.style.setProperty("--diff-y",i)}else e.style.setProperty("--mouse-x",t.x),e.style.setProperty("--mouse-y",t.y),e.style.setProperty("--mouse-progress-x",t.progressX),e.style.setProperty("--mouse-progress-y",t.progressY)})}}class b extends r{constructor(e){super("parallax"),this.luge=e,this.elements=[],this.onScrollProgress=this.onScrollProgress.bind(this)}init(){super.init(),this.luge.lifecycle.add("pageInit",this.pageInit.bind(this),30),this.luge.lifecycle.add("pageKill",this.pageKill.bind(this)),this.luge.ticker.add(this.tick,this),this.bindEvents()}setAttributes(){this.pluginAttributes={root:String,disable:String,amplitude:[String,1],anchor:String,inertia:[String,this.luge._settings.parallax.inertia]}}getAttributes(e){const t=super.getAttributes(e);if(t.amplitude){const e=t.amplitude.match(/\{\s*([0-9]*[.]?[0-9]*)\s*,\s*([0-9]*[.]?[0-9]*)\s*\}/m);t.amplitude=e?Number(e[1])+(Number(e[2])-Number(e[1]))*Math.random():Number(t.amplitude)}return t}bindEvents(){this.luge.emitter.on("update",this.updateHandler,this)}updateHandler(){this.addElements()}pageInit(e){this.addElements(),e()}pageKill(e){const t=this;this.elements.forEach(e=>{t.removeElement(e)}),e()}addElements(){document.querySelectorAll("[data-lg-parallax]").forEach(e=>{const t=this.getAttributes(e).disable;let s=!0;const i=(window.luge.browser||{}).is;t&&i&&("desktop"===t&&i("desktop")||"handheld"===t&&!i("desktop")||"mobile"===t&&i("mobile")||"tablet"===t&&i("tablet"))&&(s=!1),s&&this.addElement(e)})}addElement(e){this.elements.includes(e)||(this.luge.scrollobserver.add(e),"child"===e.luge.parallax.root&&(e.style.overflow="hidden",e.luge.parallax.child=e.firstElementChild),e.luge.parallax.movement=0,e.luge.parallax.smoothMovement=0,this.elements.push(e),this.luge.ticker.nextTick(()=>{e.addEventListener("scrollprogress",this.onScrollProgress),this.moveElement(e)}))}removeElement(e){e.removeEventListener("scrollprogress",this.onScrollProgress),this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1)}onScrollProgress(e){this.moveElement(e.target)}moveElement(e){let t=0;t=e.scrollStart<0?e.scrollProgress:1-2*e.scrollProgress,"bottom"===e.luge.parallax.anchor?t+=1:"top"===e.luge.parallax.anchor&&(t-=1),e.luge.parallax.movement="child"===e.luge.parallax.root?5*e.luge.parallax.amplitude*t:e.clientHeight*t*e.luge.parallax.amplitude/2}tick(){this.elements.forEach(e=>{e.luge.parallax.smoothMovement+=(e.luge.parallax.movement-e.luge.parallax.smoothMovement)*e.luge.parallax.inertia,"child"===e.luge.parallax.root&&e.luge.parallax.child?e.luge.parallax.child.style.transform="translate3d(0, "+e.luge.parallax.smoothMovement+"%, 0) scale(1."+String(Math.abs(e.luge.parallax.amplitude)).replace(".","")+")":e.style.transform="translate3d(0, "+e.luge.parallax.smoothMovement+"px, 0)"})}}class y{constructor(e){const s=document.documentElement,i=t.getParser(window.navigator.userAgent);s.classList.add("is-"+i.getPlatformType()),(i.is("mobile")||i.is("tablet"))&&s.classList.add("is-handheld"),i.is("Safari")&&(s.classList.add("is-safari"),s.classList.add("is-safari-"+i.getBrowserVersion())),e.browser=i}}var w=new class{constructor(){this.elements=[],l.add("siteInit",this.init.bind(this),20)}init(e){this.createObserver(),e()}createObserver(){this.observer=new IntersectionObserver(this.intersectionCallback.bind(this),{threshold:[n.settings.intersection.threshold]})}intersectionCallback(e){e.forEach(e=>{const t=e.target;let s="in";e.isIntersecting||(s=e.boundingClientRect.y<=0?"above":"under"),t.luge.viewport.position!==s&&(t.luge.viewport.position=s,t.dispatchEvent(new CustomEvent("viewportintersect")),"in"===s?t.dispatchEvent(new CustomEvent("viewportin")):(t.dispatchEvent(new CustomEvent("viewportout")),t.dispatchEvent(new CustomEvent("viewport"+s))))})}add(e){this.observer.observe(e),(e.luge||(e.luge={}))&&(e.luge=i.mergeDeep(e.luge,{viewport:{position:"out"}}))}remove(e){this.observer.unobserve(e)}},f=new class{constructor(){this.callbacks=[],this.onceCallbacks=[],n.settings.ticker.external||(this.fps=60,this.fpsInterval=1e3/this.fps,this.lastTickTime=null,requestAnimationFrame(this._tick.bind(this)))}add(e,t){let s=!1;this.callbacks.forEach(i=>{i.cb===e&&i.context===t&&(s=!0)}),s||this.callbacks.push({cb:e,context:t})}remove(e,t){const s=this;this.callbacks.forEach((i,o)=>{i.cb===e&&i.context===t&&delete s.callbacks[o]})}nextTick(e,t){this.onceCallbacks.push({cb:e,context:t})}_tick(e){const t=e-this.lastTickTime;t>this.fpsInterval&&(this.tick(e),this.lastTickTime=e-t%this.fpsInterval),n.settings.ticker.external||requestAnimationFrame(this._tick.bind(this))}tick(e){const t=this;this.callbacks.forEach(t=>{t.cb.apply(t.context,[e])}),this.onceCallbacks.forEach((s,i)=>{s.cb.apply(s.context,[e]),delete t.onceCallbacks[i]})}},E=new class{constructor(){this.elements=[],this.elementsToBound=[],this.timeouts={scroll:null},l.add("pageKill",this.pageKill.bind(this)),l.add("pageInit",this.init.bind(this),20),f.add(this.tick,this),this.bindEvents()}bindEvents(){o.on("mouseMove",this.mouseHandler,this),o.on("resize",this.resizeHandler,this),o.on("update",this.updateHandler,this),o.on("scroll",this.scrollHandler,this)}pageKill(e){this.elements=[],this.elementsToBound=[],e()}init(e){this.getBoundingThrottle(),e()}resizeHandler(){this.getBoundingThrottle()}updateHandler(){f.nextTick(()=>{this.getBoundingThrottle()},this)}scrollHandler(){clearTimeout(this.timeouts.scroll),this.timeouts.scroll=setTimeout(this.getBoundingThrottle.bind(this),75)}mouseHandler(){const e=this;this.elements.forEach(t=>{e.setElementPosition(t)}),window.mouseLastScrollTop=window.scrollTop}getBoundingThrottle(){this.elementsToBound=this.elements,f.nextTick(this.getBounding.bind(this))}getBounding(){this.elementsToBound.forEach(e=>{this.setElementBounding(e),this.setElementPosition(e)}),this.elementsToBound=[]}setElementBounding(e){const t=e.getAttribute("style");e.setAttribute("style","");const s=e.getBoundingClientRect(),o={anchor:{x:s.left,y:s.top+window.unifiedScrollTop},width:e.offsetWidth,height:e.offsetHeight};(e.luge||(e.luge={}))&&(e.luge=i.mergeDeep(e.luge,o)),e.setAttribute("style",t)}setElementPosition(e){if(e.luge&&e.luge.anchor){const t={x:window.mouseX-e.luge.anchor.x,y:window.mouseY-e.luge.anchor.y+window.unifiedScrollTop};t.progressX=i.clamp(t.x/e.luge.width,0,1),t.progressY=i.clamp(t.y/e.luge.height,0,1),e.luge.mouse=i.mergeDeep(e.luge.mouse,t)}}add(e){this.elements.includes(e)||(this.elementsToBound.includes(e)||this.elementsToBound.push(e),this.elements.push(e))}remove(e){this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1),this.elementsToBound.includes(e)&&this.elementsToBound.splice(this.elementsToBound.indexOf(e),1)}tick(){const e=this;0!=window.scrollTop-window.mouseLastScrollTop&&this.elements.forEach(t=>{e.setElementPosition(t)})}},S=new class{constructor(){this.elements=[],this.elementsToBound=[],this.elementsToCheck=[],this.setMaxScrollTop(),l.add("pageKill",this.pageKill.bind(this)),l.add("pageInit",this.init.bind(this),20),this.bindEvents()}bindEvents(){o.on("resize",this.resizeHandler,this),o.on("scroll",this.scrollHandler,this),o.on("update",this.updateHandler,this)}pageKill(e){this.elements=[],this.elementsToBound=[],this.elementsToCheck=[],e()}init(e){this.getBoundingThrottle(),this.checkElementsThrottle(),e()}resizeHandler(){this.getBoundingThrottle(),this.checkElementsThrottle()}scrollHandler(){this.checkElementsThrottle()}updateHandler(){f.nextTick(()=>{this.getBoundingThrottle(),this.checkElementsThrottle()},this)}setMaxScrollTop(){window.maxScrollTop=Math.max(document.body?document.body.scrollHeight:0,document.body?document.body.offsetHeight:0,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight}getBoundingThrottle(){this.setMaxScrollTop(),this.elements.forEach(e=>{this.elementsToBound.includes(e)||(e.scrollProgress=0,this.elementsToBound.push(e))}),f.nextTick(this.getBounding.bind(this))}getBounding(){this.elementsToBound.forEach(e=>{this.setElementBounding(e)}),this.elementsToBound=[]}setElementBounding(e){const t=e.getAttribute("style");e.setAttribute("style","");const s=e.getBoundingClientRect();e.scrollStart=s.top+window.unifiedScrollTop-window.innerHeight,e.scrollEnd=e.scrollStart+e.clientHeight+window.innerHeight,e.scrollEnd=Math.min(e.scrollEnd,window.maxScrollTop),e.scrollMiddle=e.scrollStart+(e.scrollEnd-e.scrollStart)/2,e.setAttribute("style",t)}checkElementsThrottle(){this.elements.forEach(e=>{this.elementsToCheck.includes(e)||this.elementsToCheck.push(e)}),f.nextTick(this.checkElements.bind(this))}checkElements(){this.elementsToCheck.forEach(e=>{this.checkElement(e)}),this.elementsToCheck=[]}checkElement(e){const t=window.unifiedScrollTop;let s="",i=0;i=e.scrollStart<0?Math.min(Math.max(t/e.scrollEnd,0),1):Math.min(Math.max((t-e.scrollStart)/(e.scrollEnd-e.scrollStart),0),1),isNaN(i)&&(i=0),s=i<=0&&e.scrollStart>0?"under":i>=1&&e.scrollEnd<window.maxScrollTop?"above":"in",e.scrollProgress=i,e.viewportPosition!==s?(e.viewportPosition=s,e.dispatchEvent(new CustomEvent("viewportintersect")),e.dispatchEvent(new CustomEvent("viewport"+s)),"in"!==s&&e.dispatchEvent(new CustomEvent("viewportout")),e.dispatchEvent(new CustomEvent("scrollprogress"))):i>0&&i<1&&e.dispatchEvent(new CustomEvent("scrollprogress"))}add(e){this.elements.includes(e)||(e.scrollProgress=0,this.elementsToBound.includes(e)||(this.elementsToBound.push(e),this.elementsToCheck.push(e)),this.elements.push(e))}remove(e){this.elements.includes(e)&&this.elements.splice(this.elements.indexOf(e),1),this.elementsToBound.includes(e)&&this.elementsToBound.splice(this.elementsToBound.indexOf(e),1),this.elementsToCheck.includes(e)&&this.elementsToCheck.splice(this.elementsToCheck.indexOf(e),1)}},x=class{constructor(){this.plugins={},this.emitter={emit:o.emit.bind(o),off:o.off.bind(o),on:o.on.bind(o),once:o.once.bind(o)},this.viewportobserver={add:w.add.bind(w),remove:w.remove.bind(w)},this.lifecycle={add:l.add.bind(l),refresh:l.cycle.bind(l,"refresh"),remove:l.remove.bind(l),debug:l.enableDebug.bind(l),_cycle:l.cycle.bind(l)},this.mouseobserver={add:E.add.bind(E),remove:E.remove.bind(E)},this.scrollobserver={add:S.add.bind(S),remove:S.remove.bind(S)},this.ticker={add:f.add.bind(f),nextTick:f.nextTick.bind(f),remove:f.remove.bind(f),tick:f.tick.bind(f)},this.settings=n.setSettings.bind(n)}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l.cycle("load"),{once:!0}):this.ticker.nextTick(()=>{l.cycle("load")},null)}addPlugin(e,t){this.plugins[e]=new t(this)}get _settings(){return n.settings}};export{y as Browser,g as Cursor,p as Intersection,m as LottiePlayer,x as Luge,v as MouseAnimation,b as Parallax,r as Plugin,a as Preloader,d as Reveal,h as ScrollAnimation,u as SmoothScroll,c as Transition};
//# sourceMappingURL=luge.modern.js.map
