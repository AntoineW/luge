{"version":3,"file":"luge.modern.js","sources":["../../src/js/luge/core/Helpers.js","../../src/js/luge/core/Emitter.js","../../src/js/luge/core/LifeCycle.js","../../src/js/luge/core/Core.js","../../src/js/luge/core/Plugin.js","../../src/js/luge/plugins/Preloader.js","../../src/js/luge/plugins/Reveal.js","../../src/js/luge/plugins/Transition.js","../../src/js/luge/plugins/ScrollAnimation.js","../../node_modules/@studio-freight/lenis/dist/lenis.mjs","../../src/js/luge/plugins/SmoothScroll.js","../../src/js/luge/plugins/Cursor.js","../../src/js/luge/plugins/Intersection.js","../../src/js/luge/plugins/LottiePlayer.js","../../src/js/luge/plugins/MouseAnimation.js","../../src/js/luge/plugins/Parallax.js","../../node_modules/bowser/src/constants.js","../../node_modules/bowser/src/utils.js","../../node_modules/bowser/src/parser-browsers.js","../../node_modules/bowser/src/parser-os.js","../../node_modules/bowser/src/parser-platforms.js","../../node_modules/bowser/src/parser-engines.js","../../node_modules/bowser/src/parser.js","../../node_modules/bowser/src/bowser.js","../../src/js/luge/plugins/Browser.js","../../src/js/luge/core/ViewportObserver.js","../../src/js/luge/core/Ticker.js","../../src/js/luge/core/MouseObserver.js","../../src/js/luge/core/ScrollObserver.js","../../src/js/luge/core/index.js"],"sourcesContent":["class Helpers {\n  /**\n   * Check if the variable is an object\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isObject(item) {\n    return (item && typeof item === 'object' && !Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is a string\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isString(item) {\n    return (item && typeof item === 'string')\n  }\n\n  /**\n   * Deep merge two objects\n   * @param {Object} target\n   * @param {Object} source\n   * @returns {Object} Merged object\n   */\n  static mergeDeep(target, source) {\n    const output = Object.assign({}, target)\n    if (Helpers.isObject(target) && Helpers.isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (Helpers.isObject(source[key])) {\n          if (!(key in target)) {\n            Object.assign(output, { [key]: source[key] })\n          } else {\n            if (Helpers.isObject(target[key]) && Helpers.isObject(source[key])) {\n              output[key] = Helpers.mergeDeep(target[key], source[key])\n            } else {\n              output[key] = source[key]\n            }\n          }\n        } else {\n          Object.assign(output, { [key]: source[key] })\n        }\n      })\n    }\n    return output\n  }\n\n  /**\n   * Convert a string to camelCase\n   * @param {String} string The string to convert\n   */\n  static toCamelCase (string) {\n    if (Helpers.isString(string)) {\n      return string.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (word, index) => {\n        return index === 0 ? word.toLowerCase() : word.toUpperCase()\n      }).replace(/\\W+/g, '')\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Deep freeze an object\n   * @param {Object} obj\n   * @returns {Object} freezed object\n   */\n  static deepFreeze(obj) {\n    Object.keys(obj).forEach(prop => {\n      if (typeof obj[prop] === 'object') Helpers.deepFreeze(obj[prop])\n    })\n    return Object.freeze(obj)\n  }\n\n  /**\n   * Clamp x between lower and upper\n   * @param {Number} x\n   * @param {Number} lower\n   * @param {Number} upper\n   * @returns {Number} clamped Number\n   */\n  static clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n}\n\nexport default Helpers\n","class Emitter {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.events = []\n  }\n\n  /**\n   * Attach handler to event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   * @param {Boolean} once Call handler only once\n   */\n  on (name, callback, context, once = false) {\n    (this.events[name] || (this.events[name] = [])).push({\n      cb: callback,\n      context: context,\n      once: once\n    })\n  }\n\n  /**\n   * Single event handler\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   */\n  once (name, callback, context) {\n    this.on(name, callback, context, true)\n  }\n\n  /**\n   * Emit event\n   * @param {String} name Event Name\n   */\n  emit (name) {\n    const self = this\n    const data = [].slice.call(arguments, 1)\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        object.cb.apply(object.context, data)\n\n        if (object.once) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Detact handler from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   */\n  off (name, callback) {\n    const self = this\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        if (object.cb === callback) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n}\n\nexport default new Emitter()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass LifeCycle {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.eventsName = [\n      'siteInit',\n      'pageInit',\n      'siteLoad',\n      'pageLoad',\n      'siteIn',\n      'pageIn',\n      'reveal',\n      'pageFetch',\n      'pageOut',\n      'pageCreate',\n      'pageKill',\n      'siteReload'\n    ]\n\n    this.events = {}\n\n    this.eventsName.forEach(eventName => {\n      this.events[eventName] = {\n        callbacks: [],\n        done: 0\n      }\n    })\n\n    this.cycles = {\n      load: {\n        events: [\n          'siteInit',\n          'pageInit',\n          ['siteLoad', 'pageLoad'],\n          'siteIn',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      reload: {\n        events: [\n          'pageOut',\n          'siteReload'\n        ]\n      },\n      transition: {\n        events: [\n          ['pageFetch', 'pageOut'],\n          'pageCreate',\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      refresh: {\n        events: [\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      }\n    }\n\n    this.debug = false\n  }\n\n  /**\n   * Start a cycle\n   * @param {String} cycleName Cycle name\n   */\n  cycle (cycleName) {\n    if (this.cycles[cycleName]) {\n      this.cycles[cycleName].current = 0\n\n      if (this.debug) {\n        console.log('Start cycle: ' + cycleName)\n      }\n\n      for (const eventName in this.events) {\n        this.events[eventName].done = 0\n      }\n\n      this.proceed(cycleName)\n    }\n  }\n\n  /**\n   * Proceed current cycle event\n   * @param {String} cycleName Cycle name\n   */\n  proceed (cycleName) {\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      // Do current event\n      if (Array.isArray(event)) {\n        event.forEach(eventName => {\n          this.do(cycleName, eventName)\n        })\n      } else {\n        this.do(cycleName, event)\n      }\n    } else {\n      // Cycle ended\n      if (this.debug) {\n        console.log(cycleName + ' cycle ended')\n      }\n    }\n  }\n\n  /**\n   * Move to next cycle event\n   * @param {String} cycleName Cycle name\n   */\n  next (cycleName) {\n    const self = this\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      let next = true\n      let wait = []\n\n      // Get events to wait for\n      if (typeof event === 'string') {\n        wait = Array(event)\n      } else {\n        wait = event\n      }\n\n      // Check if all events are done\n      if (wait.length > 1) {\n        wait.forEach(eventName => {\n          if (self.events[eventName].done === 0 || self.events[eventName].done < self.events[eventName].callbacks.length) {\n            next = false\n          }\n        })\n      }\n\n      if (next) {\n        // Proceed to next event\n        this.cycles[cycleName].current++\n        requestAnimationFrame(this.proceed.bind(this, cycleName))\n      } else {\n        // Wait for all events to be done\n      }\n    }\n  }\n\n  /**\n   * Hook callback to event\n   * @param {String} eventName Event name\n   * @param {Function} callback Callback function\n   * @param {Int} position Execution order\n   * @param {String} cycleName Cycle name\n   */\n  add (eventName, callback, position = 10, cycleName = null) {\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.push({\n        callback: callback,\n        position: position,\n        cycle: cycleName\n      })\n    }\n  }\n\n  /**\n   * Detach callback from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {String} cycleName Cycle name\n   */\n  remove (eventName, callback, cycleName = null) {\n    const self = this\n\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.forEach((event, index) => {\n        if (event.callback === callback && event.cycle === cycleName) {\n          delete self.events[eventName].callbacks[index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Call hooked callbacks\n   * @param {String} cycleName Cycle name\n   * @param {String} eventName Event name\n   */\n  do (cycleName, eventName) {\n    this.events[eventName].done = 0\n\n    // Call hooked callbacks\n    if (this.events[eventName].callbacks.length > 0) {\n      if (this.debug) {\n        console.log('Do event: ' + eventName + ' (' + cycleName + ' cycle)')\n      }\n\n      Emitter.emit(Helpers.toCamelCase('before-' + eventName))\n\n      const callbacks = this.events[eventName].callbacks.sort((a, b) => {\n        return a.position - b.position\n      })\n\n      callbacks.forEach(object => {\n        if (object.cycle === null || object.cycle === cycleName) {\n          object.callback(() => this.done(cycleName, eventName))\n        } else {\n          this.done(cycleName, eventName)\n        }\n      })\n    } else {\n      this.done(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Count done action\n   * @param {String} eventName Event name\n   */\n  done (cycleName, eventName) {\n    this.events[eventName].done++\n\n    if (this.debug) {\n      console.log('Done event: ' + eventName + ' ' + this.events[eventName].done + '/' + this.events[eventName].callbacks.length + ' (' + cycleName + ' cycle)')\n    }\n\n    // All callback are done, call next action\n    if (this.events[eventName].done >= this.events[eventName].callbacks.length) {\n      Emitter.emit(Helpers.toCamelCase('after-' + eventName))\n\n      this.next(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Enable debug\n   * @param {Boolean} value Enable debug\n   */\n  enableDebug (value = true) {\n    this.debug = value\n  }\n}\n\nexport default new LifeCycle()\n","import LifeCycle from './LifeCycle'\nimport Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass Luge {\n  /**\n   * Constructor\n   */\n  constructor () {\n    // Options\n    this.settings = Helpers.deepFreeze({\n      cursor: {\n        inertia: 1,\n        trailLength: 10\n      },\n      intersection: {\n        threshold: 0.3\n      },\n      lottie: {\n        renderer: 'svg',\n        subFrame: true\n      },\n      mouse: {\n        inertia: 0.1\n      },\n      parallax: {\n        inertia: 0.1\n      },\n      preloader: {\n        duration: 0\n      },\n      reveal: {\n        stagger: 0.1,\n        threshold: 0.15\n      },\n      scroll: {\n        inertia: 0.1\n      },\n      smooth: {\n        inertia: 0.1\n      },\n      ticker: {\n        external: false\n      },\n      transition: {\n        reload: false\n      },\n      credits: {\n        show: true\n      }\n    })\n\n    // Timeouts\n    this.timeouts = {\n      resizeThrottle: null,\n      scrollEnd: null\n    }\n\n    // Viewport size\n    this.windowWidth = 1\n    this.windowHeight = 1\n    this.clientWidth = 1\n\n    // Scroll\n    window.scrollTop = window.scrollY\n    window.unifiedScrollTop = window.scrollTop\n    window.maxScrollTop = 1\n    window.scrollProgress = 0\n    this.previousScrollTop = window.scrollY\n    this.isScrolling = false\n\n    // Mouse\n    window.mouseX = -1\n    window.mouseY = -1\n    window.mouseLastScrollTop = 0\n\n    LifeCycle.add('siteInit', this.siteInit.bind(this), 999)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set settings\n   */\n  setSettings (settings) {\n    this.settings = Helpers.deepFreeze(Helpers.mergeDeep(this.settings, settings))\n  }\n\n  /**\n   * Site initialization\n   * @param {Function} done Done function\n   */\n  siteInit (done) {\n    this.showCredits()\n\n    this.setCSSProperties()\n\n    this.scrollHandler()\n\n    done()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    window.addEventListener('mousemove', this.mouseHandler.bind(this), { passive: true })\n    window.addEventListener('resize', this.resizeThrottle.bind(this))\n    window.addEventListener('scroll', this.scrollHandler.bind(this), { passive: true })\n  }\n\n  /**\n   * Mouse handler\n   * @param {Event} e Mouse event\n   */\n  mouseHandler (e) {\n    const mouseX = e.pageX\n    const mouseY = e.pageY - window.scrollTop\n\n    window.mouseX = mouseX\n    window.mouseY = mouseY\n\n    Emitter.emit('mouseMove', e)\n  }\n\n  /**\n   * Resize throttle\n   */\n  resizeThrottle () {\n    clearTimeout(this.timeouts.resizeThrottle)\n    this.timeouts.resizeThrottle = setTimeout(this.resizeHandler.bind(this), 200)\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.setCSSProperties()\n\n    Emitter.emit('resize')\n  }\n\n  /**\n   * Set CSS propertiers\n   */\n  setCSSProperties () {\n    // Pass window widths to CSS\n    const newWidth = window.innerWidth\n    if (this.windowWidth !== newWidth) {\n      this.windowWidth = newWidth\n      this.clientWidth = document.body.clientWidth\n    }\n\n    // Pass window height to CSS\n    const newHeight = window.innerHeight\n    if (this.windowHeight !== newHeight) {\n      this.windowHeight = newHeight\n      this.clientHeight = document.body.clientHeight\n    }\n\n    requestAnimationFrame(() => {\n      document.documentElement.style.setProperty('--vw', (this.windowWidth * 0.01) + 'px')\n      document.documentElement.style.setProperty('--cw', (this.clientWidth * 0.01) + 'px')\n\n      document.documentElement.style.setProperty('--vh', (this.windowHeight * 0.01) + 'px')\n      document.documentElement.style.setProperty('--ch', (this.clientHeight * 0.01) + 'px')\n    })\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    if (!this.isScrolling) {\n      this.scrollStart()\n    }\n\n    clearTimeout(this.timeouts.scrollEnd)\n    this.timeouts.scrollEnd = setTimeout(this.scrollEnd.bind(this), 200)\n\n    if (!window.hasSmoothScroll) {\n      this.updateScroll()\n    }\n  }\n\n  /**\n   * Update scroll\n   */\n  updateScroll () {\n    window.scrollTop = window.scrollY\n\n    // Backward compatibility\n    window.unifiedScrollTop = window.scrollTop\n\n    this.previousScrollTop = window.scrollTop\n    window.scrollProgress = window.scrollTop / window.maxScrollTop\n\n    Emitter.emit('scroll')\n  }\n\n  /**\n   * Scroll start\n   */\n  scrollStart () {\n    this.isScrolling = true\n\n    document.documentElement.classList.add('is-scrolling')\n\n    Emitter.emit('scrollStart')\n  }\n\n  /**\n   * Scroll end\n   */\n  scrollEnd () {\n    this.isScrolling = false\n\n    document.documentElement.classList.remove('is-scrolling')\n\n    Emitter.emit('scrollEnd')\n  }\n\n  /**\n   * Show credits\n   */\n  showCredits () {\n    if (this.settings.credits.show) {\n      // Output version\n      const consoleBaseStyle = 'background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; '\n      const consoleBoldStyle = consoleBaseStyle + 'font-weight: bold; '\n      const consoleWhiteStyle = 'color: black; font: 400 1em monospace; padding: 0.5em 0; '\n\n      console.log('%c powered by %cluge%c / ' + VERSION + ' %c > https://luge.cool ', consoleBaseStyle, consoleBoldStyle, consoleBaseStyle, consoleWhiteStyle)\n    }\n  }\n}\n\nexport default new Luge()\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nexport default class Plugin {\n  /**\n   * Constructor\n   */\n  constructor (slug) {\n    this.pluginSlug = slug\n\n    LifeCycle.add('siteInit', this.beforeInit.bind(this), 5)\n  }\n\n  /**\n   * Before init\n   */\n  beforeInit (done) {\n    this.isDisabled = this.disabled()\n\n    if (this.isDisabled) {\n      document.documentElement.classList.add('lg-' + this.pluginSlug + '-disabled')\n    } else {\n      this.init()\n    }\n\n    done()\n  }\n\n  /**\n   * Init plugin\n   */\n  init () {\n    this.setAttributes()\n  }\n\n  /**\n   * Check if feature is disabled\n   */\n  disabled () {\n    return !!(Luge.settings[this.pluginSlug] || {}).disabled\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {}\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const attributes = this.pluginAttributes\n    const data = {}\n\n    for (const name in attributes) {\n      const attribute = attributes[name]\n      let attributeKey = 'lg-' + this.pluginSlug\n      if (name !== 'root') {\n        attributeKey += '-' + name\n      }\n\n      attributeKey = Helpers.toCamelCase(attributeKey)\n      const attributeValue = element.dataset[attributeKey]\n\n      let type, value, defaultValue\n\n      if (typeof attribute === 'object') {\n        type = attribute[0]\n        defaultValue = attribute[1]\n      } else {\n        type = attribute\n      }\n\n      if (attributeValue === undefined && defaultValue !== undefined) {\n        value = type(defaultValue)\n      } else if (attributeValue === undefined && type === Boolean) {\n        value = false\n      } else if (attributeValue !== undefined) {\n        if (type === Boolean) {\n          value = (attributeValue !== 'false')\n        } else {\n          value = type(attributeValue)\n        }\n      } else {\n        value = undefined\n      }\n\n      data[name] = value\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge[this.pluginSlug] = data\n    }\n\n    return data\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class PreLoader extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('preloader')\n\n    this.luge = luge\n\n    this.intro = false\n    this.playerIn = false\n    this.startTime = Date.now()\n    this.doneLoad = null\n\n    luge.preloader = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.el = document.querySelector('[data-lg-preloader]')\n\n    if (this.el) {\n      this.attributes = this.getAttributes(this.el)\n\n      this.el.classList.add('lg-preloader', 'lg-preloader--' + this.attributes.root)\n\n      this.initLottie()\n\n      this.luge.lifecycle.add('siteIn', this.siteIn.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: [String, ''],\n      duration: [Number, this.luge._settings.preloader.duration],\n      in: String,\n      reverse: Boolean\n    }\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    if (this.attributes && this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Intro animation\n   * @param {Function} done Done function\n   */\n  siteIn (done) {\n    const elapsed = (Date.now() - this.startTime) / 1000\n    const remaining = this.attributes.duration - elapsed\n\n    if (remaining <= 0) {\n      const clear = this.clear.bind(this, done)\n\n      if (this.playerIn) {\n        this.playerIn.play()\n\n        this.playerIn.addEventListener('complete', clear, { once: true })\n      } else {\n        if (typeof this.intro === 'function') {\n          this.intro(done, this.remove.bind(this))\n        } else {\n          const duration = window.getComputedStyle(this.el).getPropertyValue('transition-duration')\n\n          if (duration !== '' && duration !== '0s') {\n            this.el.addEventListener('transitionend', clear, { once: true })\n            this.el.classList.add('is-hidden')\n          } else {\n            clear()\n          }\n        }\n      }\n    } else {\n      setTimeout(this.siteIn.bind(this, done), remaining * 1000)\n    }\n  }\n\n  /**\n   * Clear preloader\n   * @param {Function} done Done callback\n   */\n  clear (done) {\n    if (this.playerIn) {\n      this.playerIn.destroy()\n    }\n\n    this.remove()\n\n    done()\n  }\n\n  /**\n   * Remove preloader from done\n   */\n  remove (done) {\n    this.el.parentNode.removeChild(this.el)\n    this.el = null\n  }\n\n  /**\n   * Add intro animation\n   * @param {Function} callback Callback function\n   */\n  add (callback) {\n    this.intro = callback\n  }\n\n  /**\n   * Init lottie\n   */\n  initLottie () {\n    const self = this\n\n    if (this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      const animIn = this.attributes.in\n      let playerIn = false\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: this.el,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (this.attributes.reverse) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      playerIn.addEventListener('DOMLoaded', () => {\n        if (self.attributes.reverse) {\n          playerIn.goToAndStop(playerIn.totalFrames - 1, true)\n        }\n\n        self.el.setAttribute('style', '')\n\n        if (typeof self.doneLoad === 'function') {\n          self.doneLoad()\n          self.doneLoad = null\n        }\n      }, { once: true })\n\n      this.playerIn = playerIn\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Reveal extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('reveal')\n\n    this.luge = luge\n\n    this.elements = []\n    this.toRevealIn = []\n    this.toRevealOut = []\n\n    this.reveals = {\n      in: {},\n      out: {}\n    }\n    this.canReveal = false\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.reveal = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 11)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n    this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    super.setAttributes()\n\n    this.pluginAttributes = {\n      root: String,\n      stagger: String,\n      manual: [Boolean, false],\n      multiple: Boolean,\n      delay: [Number, 0]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.stagger !== undefined && data.stagger === '') {\n      data.stagger = this.luge._settings.reveal.stagger\n    } else if (data.stagger === undefined) {\n      data.stagger = false\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('resize', this.resizeHandler, this)\n    this.luge.emitter.on('scroll', this.scrollHandler, this)\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-reveal]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      // Don't add child elements\n      if (!attributes.stagger && element.closest('[data-lg-reveal-stagger]') !== null) {\n        return\n      }\n\n      const revealName = attributes.root\n      element.luge.reveal.name = Helpers.toCamelCase(revealName)\n\n      if (!attributes.manual) {\n        this.luge.scrollobserver.add(element)\n\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n      } else {\n        element.luge.reveal.in = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'in')\n          this.setRevealClasses(element, 'is-in')\n        }\n\n        element.luge.reveal.out = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'out')\n          this.setRevealClasses(element, 'is-out')\n        }\n      }\n\n      element.luge.reveal.delay = attributes.delay * 1000\n\n      if (attributes.stagger) {\n        Array.from(element.children).forEach(child => {\n          const childRevealName = child.dataset.lgReveal\n\n          child.style.transition = 'none'\n          this.luge.ticker.nextTick(() => {\n            child.style.transition = ''\n          })\n\n          child.classList.add('lg-reveal', 'is-out')\n\n          if (childRevealName || revealName) {\n            child.classList.add('lg-reveal--' + (childRevealName ?? revealName))\n          }\n\n          child.dataset.lgRevealChild = ''\n          if (child.luge || (child.luge = {})) {\n            child.luge.reveal = {\n              isRevealed: false\n            }\n          }\n        })\n      } else {\n        element.style.transition = 'none'\n        this.luge.ticker.nextTick(() => {\n          element.style.transition = ''\n        })\n\n        element.classList.add('lg-reveal', 'is-out')\n\n        if (revealName) {\n          element.classList.add('lg-reveal--' + revealName)\n        }\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.canReveal = false\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n    const threshold = this.luge._settings.reveal.threshold\n\n    if (element.scrollProgress >= threshold && element.scrollProgress <= (1 - threshold) && !element.luge.reveal.isRevealed) {\n      if (this.toRevealOut.includes(element)) {\n        this.toRevealOut.splice(this.toRevealOut.indexOf(element), 1)\n      }\n\n      if (!this.toRevealIn.includes(element)) {\n        this.toRevealIn.push(element)\n      }\n    } else if ((element.scrollProgress < threshold || (element.scrollProgress > (1 - threshold) && element.scrollEnd < Math.round(window.unifiedScrollTop))) && element.luge.reveal.isRevealed) {\n      if (this.toRevealIn.includes(element)) {\n        this.toRevealIn.splice(this.toRevealIn.indexOf(element), 1)\n      }\n\n      if (!this.toRevealOut.includes(element)) {\n        this.toRevealOut.push(element)\n      }\n    }\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.canReveal = true\n\n    this.elements.forEach(element => {\n      if (element.scrollStart < 0) {\n        if (!this.toRevealIn.includes(element)) {\n          this.toRevealIn.push(element)\n        }\n      }\n    })\n\n    this.revealElements()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Sroll handler\n   */\n  scrollHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.revealElements()\n  }\n\n  /**\n   * Reveal elements\n   */\n  revealElements () {\n    const self = this\n\n    if (this.canReveal) {\n      let revealInTimeout = 0\n\n      this.toRevealIn.forEach(element => {\n        const delay = true\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        revealInTimeout += element.luge.reveal.delay\n\n        setTimeout(function () {\n          self.revealCallback(element, revealName, 'in')\n\n          if (element.luge.reveal.stagger) {\n            Array.from(element.children).forEach((child, index) => {\n              const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n              setTimeout(() => {\n                if (childRevealName || revealName) {\n                  self.revealCallback(child, (childRevealName ?? revealName), 'in')\n                }\n\n                self.setRevealClasses(child, 'is-in')\n              }, index * element.luge.reveal.stagger * 1000)\n            })\n          } else {\n            self.setRevealClasses(element, 'is-in')\n          }\n        }, delay ? revealInTimeout : 0)\n\n        if (delay) {\n          revealInTimeout += this.luge._settings.reveal.stagger * 1000\n        }\n\n        if (!element.luge.reveal.multiple) {\n          self.removeElement(element)\n        }\n      })\n\n      this.toRevealOut.forEach(element => {\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        if (element.luge.reveal.isRevealed !== undefined) {\n          self.revealCallback(element, revealName, 'out')\n        }\n\n        let state = ''\n        if (element.scrollProgress > 0.5) {\n          state = 'is-out is-out-top'\n        } else {\n          state = 'is-out is-out-bottom'\n        }\n\n        if (element.luge.reveal.stagger) {\n          Array.from(element.children).forEach((child, index) => {\n            const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n            setTimeout(() => {\n              if (childRevealName || revealName) {\n                self.revealCallback(child, (childRevealName ?? revealName), 'out')\n              }\n\n              self.setRevealClasses(child, state)\n            }, index * element.luge.reveal.stagger * 1000)\n          })\n        } else {\n          self.setRevealClasses(element, state)\n        }\n      })\n\n      this.toRevealIn = []\n      this.toRevealOut = []\n    }\n  }\n\n  /**\n   * Set reveal classes\n   * @param {HTMLElement} el Element\n   * @param {String} states Reveal states\n   */\n  setRevealClasses (el, states) {\n    states = states.split(' ')\n\n    el.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    states.forEach(state => {\n      el.classList.add(state)\n    })\n  }\n\n  /**\n   * Call reveal callback\n   * @param {HTMLElement} el Element\n   */\n  revealCallback (el, name, type) {\n    el.dispatchEvent(new CustomEvent('reveal' + type))\n    el.luge.reveal.isRevealed = (type === 'in')\n\n    if (typeof this.reveals[type][name] === 'function') {\n      this.reveals[type][name](el)\n    } else if (typeof el['onreveal' + type] === 'function') {\n      el['onreveal' + type]()\n    }\n  }\n\n  /**\n   * Add reveal animation\n   * @param {String} type Reveal type (in | out)\n   * @param {String} revealName Reveal animation name\n   * @param {Function} callback Callback function\n   */\n  add (type, revealName, callback) {\n    if (this.reveals[type]) {\n      revealName = Helpers.toCamelCase(revealName)\n\n      if (this.reveals[type][revealName]) {\n        console.log('Reveal animation named ' + revealName + ' already exists.')\n      } else {\n        this.reveals[type][revealName] = callback\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Transition extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('transition')\n\n    this.luge = luge\n\n    this.url = window.location.href\n    this.pathname = window.location.pathname\n    this.pageFetched = null\n    this.currentPage = null\n    this.reload = this.luge._settings.transition.reload\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.transitions = {\n      in: {},\n      out: {}\n    }\n\n    this.listeners = { linkHandler: this.linkHandler.bind(this) }\n\n    luge.transition = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    this.currentPage = document.querySelector('[data-lg-page]')\n    if (this.currentPage) {\n      this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n    }\n\n    this.initLoader()\n\n    if (!this.reload) {\n      window.addEventListener('popstate', this.historyStateChanged.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageFetch', this.pageFetch.bind(this))\n    this.luge.lifecycle.add('pageOut', this.pageOut.bind(this))\n    this.luge.lifecycle.add('pageIn', this.pageIn.bind(this), 10, 'transition')\n    this.luge.lifecycle.add('pageCreate', this.pageCreate.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this), 999, 'transition')\n  }\n\n  /**\n   * Bind links event\n   */\n  bindLinksEvent () {\n    if (document.querySelector('[data-lg-page]')) {\n      document.querySelectorAll('a').forEach(el => {\n        el.addEventListener('click', this.listeners.linkHandler)\n      })\n    }\n  }\n\n  /**\n   * Unbind links handler\n   */\n  unbindLinksEvent () {\n    document.querySelectorAll('a').forEach(el => { el.removeEventListener('click', this.listeners.linkHandler) })\n  }\n\n  /**\n   * Link handler\n   * @param {Event} e Mouse event\n   */\n  linkHandler (e) {\n    const element = e.currentTarget\n    const href = element.getAttribute('href')\n\n    if (href &&\n      href.indexOf('#') !== 0 &&\n      href.indexOf('tel') !== 0 &&\n      href.indexOf('mailto') !== 0 &&\n      !element.closest('#wpadminbar') &&\n      element.getAttribute('data-lg-transition') !== 'disabled' &&\n      element.getAttribute('target') !== '_blank') {\n      // Check if it's an internal URL\n      if (href.indexOf(window.location.origin) === 0 ||\n          href.indexOf('/') === 0 ||\n          href.indexOf('/') === -1) {\n        e.preventDefault()\n\n        if (window.location.href === href) {\n          return\n        }\n\n        this.navigateTo(href)\n\n        // Change page url\n        history.pushState(null, null, this.url)\n      }\n    }\n  }\n\n  /**\n   * Navigate to page\n   * @param {URL} url New page URL\n   */\n  navigateTo (url) {\n    this.url = url\n\n    if (this.reload) {\n      // Prefetch new URL\n      const prefetchLink = document.createElement('link')\n      prefetchLink.rel = 'prefetch'\n      prefetchLink.href = url\n      document.head.appendChild(prefetchLink)\n\n      // Change URL after pageOut\n      this.luge.lifecycle.add('siteReload', (done) => {\n        window.location = url\n      })\n\n      // Call cycle\n      this.luge.lifecycle._cycle('reload')\n    } else {\n      this.luge.lifecycle._cycle('transition')\n    }\n  }\n\n  /**\n   * Page init\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.bindLinksEvent()\n\n    done()\n  }\n\n  /**\n   * Init loader\n   */\n  initLoader () {\n    const loader = document.querySelector('[data-lg-loader]')\n\n    if (loader) {\n      loader.style.transition = 'none'\n      loader.classList.add('lg-loader', 'lg-loader--' + loader.getAttribute('data-lg-loader'))\n      this.luge.ticker.nextTick(() => {\n        loader.style.transition = ''\n      })\n    }\n\n    if (loader && loader.getAttribute('data-lg-loader') === 'lottie' && typeof lottie === 'object') {\n      const animOut = loader.getAttribute('data-lg-loader-out')\n      let playerOut = false\n      let animIn = loader.getAttribute('data-lg-loader-in')\n      let playerIn = false\n\n      if (animOut) {\n        playerOut = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animOut,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n      }\n\n      if (animIn === 'reverse') {\n        animIn = animOut\n      }\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (animIn === animOut) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      loader.playerOut = playerOut\n      loader.playerIn = playerIn\n    }\n  }\n\n  /**\n   * Fetch\n   * @param {Function} done Done function\n   */\n  pageFetch (done) {\n    const self = this\n\n    if (this.url) {\n      fetch(this.url, { credentials: 'include' })\n        .then(function (response) {\n          return response.text()\n        }).then(function (body) {\n          self.pageFetched = body\n\n          done()\n        })\n    }\n  }\n\n  /**\n   * Page create\n   * @param {Function} done Done function\n   */\n  pageCreate (done) {\n    // Convert data to HTML\n    const html = new DOMParser().parseFromString(this.pageFetched, 'text/html')\n\n    // Get containers\n    const newPage = html.querySelector('[data-lg-page]')\n\n    if (newPage) {\n      // Switch containers\n      this.currentPage.insertAdjacentElement('beforebegin', newPage)\n\n      newPage.style.opacity = 0\n\n      this.currentPage.style.opacity = 0\n      this.currentPage.style.position = 'absolute'\n      this.currentPage.style.top = 0\n      this.currentPage.style.left = '-999em'\n      this.currentPage.style.width = '100%'\n\n      // Switch classes\n      document.querySelector('body').className = html.querySelector('body').className\n\n      // Switch metas\n      document.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        element.parentNode.removeChild(element)\n      })\n      html.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        document.querySelector('head title').insertAdjacentElement('afterend', element)\n      })\n\n      // Set title\n      const oldTitle = document.querySelector('head title')\n      const newTitle = html.querySelector('head title')\n\n      if (oldTitle && newTitle) {\n        oldTitle.innerText = newTitle.innerText\n      }\n    } else {\n      // Force reload when no page is found\n      window.location = this.url\n      return\n    }\n\n    // Reset scroll\n    window.scroll({\n      top: this.newScrollTop,\n      left: 0,\n      behavior: 'instant'\n    })\n    window.scrollTop = 0\n    window.smoothScrollTop = 0\n    window.unifiedScrollTop = 0\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.luge.emitter.emit('pageTransition', html)\n\n    done()\n  }\n\n  /**\n   * Page kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const oldPage = this.currentPage\n    oldPage.parentNode.removeChild(oldPage)\n\n    this.currentPage = document.querySelector('[data-lg-page]')\n    this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n\n    done()\n  }\n\n  /**\n   * Page out\n   * @param {Function} done Done function\n   */\n  pageOut (done) {\n    const self = this\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      if (typeof this.transitions.out[pageName] === 'function') {\n        transition = this.transitions.out[pageName]\n      } else if (typeof page.onpageout === 'function') {\n        transition = page.onpageout\n      } else if (typeof this.transitions.out.default === 'function') {\n        transition = this.transitions.out.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader) {\n          if (loader.playerOut) {\n            loader.playerOut.stop()\n            loader.playerOut.renderer.svgElement.style.opacity = 1\n            loader.playerOut.play()\n\n            loader.playerOut.addEventListener('complete', () => {\n              if (!self.reload) {\n                loader.playerOut.renderer.svgElement.style.opacity = ''\n              }\n\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n          }\n\n          loader.classList.add('is-visible')\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n\n    this.unbindLinksEvent.bind(this)\n  }\n\n  /**\n   * Page in\n   * @param {Function} done Done function\n   */\n  pageIn (done) {\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      page.style.opacity = ''\n\n      if (typeof this.transitions.in[pageName] === 'function') {\n        transition = this.transitions.in[pageName]\n      } else if (typeof page.onpagein === 'function') {\n        transition = page.onpagein\n      } else if (typeof this.transitions.in.default === 'function') {\n        transition = this.transitions.in.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader && loader.classList.contains('is-visible')) {\n          if (loader.playerIn) {\n            loader.playerIn.stop()\n            loader.playerIn.renderer.svgElement.style.opacity = 1\n            if (loader.getAttribute('data-lg-loader-in') === 'reverse') {\n              loader.playerIn.goToAndPlay(loader.playerIn.totalFrames, true)\n            } else {\n              loader.playerIn.play()\n            }\n\n            loader.playerIn.addEventListener('complete', () => {\n              loader.playerIn.renderer.svgElement.style.opacity = ''\n              loader.classList.remove('is-visible')\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n\n            loader.classList.remove('is-visible')\n          }\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * History change\n   */\n  historyStateChanged () {\n    let url = ''\n    if (this.url.indexOf(window.location.origin) === 0) {\n      url = new URL(this.url)\n    } else {\n      url = new URL(window.location.origin + this.url)\n    }\n\n    if (url.pathname !== window.location.pathname) {\n      this.prevScrollTop = window.scrollY\n\n      this.luge.ticker.nextTick(() => {\n        this.newScrollTop = window.scrollY\n\n        window.scroll({\n          top: this.prevScrollTop,\n          left: 0,\n          behavior: 'instant'\n        })\n      })\n\n      this.navigateTo(window.location.href)\n    }\n  }\n\n  /**\n   * Add transition animation\n   * @param {String} type Transition type (in | out)\n   * @param {Function} callback Callback function\n   * @param {String} pageName Page name\n   */\n  add (type, pageName = 'default', callback) {\n    if (this.transitions[type]) {\n      pageName = Helpers.toCamelCase(pageName)\n\n      if (this.transitions[type][pageName]) {\n        console.log('Transition animation for ' + pageName + ' page already exists.')\n      } else {\n        this.transitions[type][pageName] = callback\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class ScrollAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('scroll')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Properties\n    this.allowedProperties = [\n      'opacity',\n      'background-x',\n      'background-y'\n    ]\n\n    this.transformProperties = [\n      'x',\n      'y',\n      'z',\n      'translate3d',\n      'rotate',\n      'rotateX',\n      'rotateY',\n      'rotateZ',\n      'scale',\n      'scaleX',\n      'scaleY',\n      'scaleZ'\n    ]\n\n    // Presets\n    this.presets = {\n      'background-x': {\n        'background-x': ['0%', '100%']\n      },\n      'background-y': {\n        'background-y': ['0%', '100%']\n      }\n    }\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      yoyo: Boolean,\n      inertia: [String, this.luge._settings.scroll.inertia],\n      animate: String\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-scroll]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      this.luge.scrollobserver.add(element)\n\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n\n      // Set values\n      const scrollAnimation = {}\n\n      // Smooth progress\n      scrollAnimation.smoothProgress = (element.scrollProgress !== undefined ? element.scrollProgress : 0)\n\n      // Yoyo\n      scrollAnimation.yoyo = attributes.yoyo\n\n      // Inertia\n      scrollAnimation.inertia = attributes.inertia\n\n      // Get properties\n      let properties = false\n\n      if (attributes.animate !== undefined) {\n        properties = JSON.parse(attributes.animate.replace(/'/g, '\"'))\n      } else if (this.presets[attributes.root]) {\n        properties = this.presets[attributes.root]\n      }\n\n      if (properties) {\n        const declarations = {}\n\n        for (const property in properties) {\n          if (this.allowedProperties.includes(property) ||\n              this.transformProperties.includes(property)) {\n            const values = properties[property]\n            let fromValue = String(values[0])\n            let toValue = String(values[1])\n\n            let unit = fromValue.match(/\\d+([a-zA-Z%]+)/m)\n            if (unit) {\n              unit = unit[1]\n            } else if (property.indexOf('rotate') === 0) {\n              unit = 'deg'\n            }\n\n            fromValue = Number(fromValue.replace(unit, ''))\n            toValue = Number(toValue.replace(unit, ''))\n\n            let safeProperty = property\n            if (property === 'background-x') {\n              safeProperty = 'background-position-x'\n            } else if (property === 'background-y') {\n              safeProperty = 'background-position-y'\n            }\n\n            declarations[safeProperty] = {\n              from: fromValue,\n              to: toValue,\n              current: fromValue,\n              unit: unit\n            }\n          }\n        }\n\n        scrollAnimation.properties = declarations\n      }\n\n      element.luge.scroll.animation = scrollAnimation\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.luge.scroll.animation.atDest = false\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    for (const element of this.elements) {\n      // Early break if at dest\n      if (element.luge.scroll.animation.atDest) {\n        continue\n      }\n\n      // Yoyo\n      let progress = element.scrollProgress\n      if (element.luge.scroll.yoyo) {\n        progress = 1 - Math.abs(1 - progress * 2)\n      }\n\n      element.luge.scroll.animation.smoothProgress += (progress - element.luge.scroll.animation.smoothProgress) * (1 - element.luge.scroll.inertia)\n\n      if (element.luge.scroll.animation.properties) {\n        const declarations = {}\n\n        for (const [key, property] of Object.entries(element.luge.scroll.animation.properties)) {\n          property.current = property.from + (property.to - property.from) * element.luge.scroll.animation.smoothProgress\n\n          if (['x', 'y', 'z'].includes(key)) {\n            if (declarations.translate3d || (declarations.translate3d = {})) {\n              declarations.translate3d[key] = property.current + property.unit\n            }\n          } else {\n            declarations[key] = property.current + property.unit\n          }\n        }\n\n        // Handle transform shorthand\n        const transform = []\n        for (const [key, property] of Object.entries(declarations)) {\n          if (this.transformProperties.includes(key)) {\n            // Convert object style property value to string\n            if (typeof property === 'object') {\n              if (key === 'translate3d') {\n                const value = Object.assign({ x: 0, y: 0, z: 0 }, property)\n\n                property.string = value.x + ', ' + value.y + ', ' + value.z\n              } else {\n                property.string = Object.values(property).join(', ')\n              }\n            }\n\n            transform.push(key + '(' + (typeof property !== 'object' ? property : property.string) + ')')\n          }\n        }\n\n        // Create style rule\n        const styles = {}\n        const willChange = []\n\n        if (transform.length > 0) {\n          styles.transform = transform.join(' ')\n          willChange.push('transform')\n        }\n\n        for (const [key, property] of Object.entries(declarations)) {\n          if (!this.transformProperties.includes(key)) {\n            styles[key] = property\n            willChange.push(key)\n          }\n        }\n\n        for (const [key, property] of Object.entries(styles)) {\n          element.style.setProperty(key, property)\n        }\n\n        element.style.setProperty('will-change', willChange.join(', '))\n      } else {\n        const diff = Math.round((element.scrollProgress - element.luge.scroll.animation.smoothProgress) * 1000) / 1000\n\n        element.style.setProperty('--progress', element.luge.scroll.animation.smoothProgress)\n        element.style.setProperty('--abs-diff', Math.abs(diff))\n        element.style.setProperty('--diff', diff)\n      }\n\n      // Block future style update if element is at destination\n      if (Math.abs(progress - element.luge.scroll.animation.smoothProgress) < 0.0001) {\n        element.luge.scroll.animation.atDest = true\n      }\n    }\n  }\n}\n","function t(t,e,i){return Math.max(t,Math.min(e,i))}class Animate{advance(e){if(!this.isRunning)return;let i=!1;if(this.lerp)this.value=(s=this.value,o=this.to,n=60*this.lerp,l=e,function(t,e,i){return(1-i)*t+i*e}(s,o,1-Math.exp(-n*l))),Math.round(this.value)===this.to&&(this.value=this.to,i=!0);else{this.currentTime+=e;const s=t(0,this.currentTime/this.duration,1);i=s>=1;const o=i?1:this.easing(s);this.value=this.from+(this.to-this.from)*o}var s,o,n,l;this.onUpdate?.(this.value,i),i&&this.stop()}stop(){this.isRunning=!1}fromTo(t,e,{lerp:i=.1,duration:s=1,easing:o=(t=>t),onStart:n,onUpdate:l}){this.from=this.value=t,this.to=e,this.lerp=i,this.duration=s,this.easing=o,this.currentTime=0,this.isRunning=!0,n?.(),this.onUpdate=l}}class Dimensions{constructor({wrapper:t,content:e,autoResize:i=!0}={}){if(this.wrapper=t,this.content=e,i){const t=function(t,e){let i;return function(){let s=arguments,o=this;clearTimeout(i),i=setTimeout((function(){t.apply(o,s)}),e)}}(this.resize,250);this.wrapper!==window&&(this.wrapperResizeObserver=new ResizeObserver(t),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(t),this.contentResizeObserver.observe(this.content)}this.resize()}destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect()}resize=()=>{this.onWrapperResize(),this.onContentResize()};onWrapperResize=()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)};onContentResize=()=>{this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth};get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(t,...e){let i=this.events[t]||[];for(let t=0,s=i.length;t<s;t++)i[t](...e)}on(t,e){return this.events[t]?.push(e)||(this.events[t]=[e]),()=>{this.events[t]=this.events[t]?.filter((t=>e!==t))}}off(t,e){this.events[t]=this.events[t]?.filter((t=>e!==t))}destroy(){this.events={}}}class VirtualScroll{constructor(t,{wheelMultiplier:e=1,touchMultiplier:i=2,normalizeWheel:s=!1}){this.element=t,this.wheelMultiplier=e,this.touchMultiplier=i,this.normalizeWheel=s,this.touchStart={x:null,y:null},this.emitter=new Emitter,this.element.addEventListener(\"wheel\",this.onWheel,{passive:!1}),this.element.addEventListener(\"touchstart\",this.onTouchStart,{passive:!1}),this.element.addEventListener(\"touchmove\",this.onTouchMove,{passive:!1}),this.element.addEventListener(\"touchend\",this.onTouchEnd,{passive:!1})}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.destroy(),this.element.removeEventListener(\"wheel\",this.onWheel,{passive:!1}),this.element.removeEventListener(\"touchstart\",this.onTouchStart,{passive:!1}),this.element.removeEventListener(\"touchmove\",this.onTouchMove,{passive:!1}),this.element.removeEventListener(\"touchend\",this.onTouchEnd,{passive:!1})}onTouchStart=t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:0,y:0},this.emitter.emit(\"scroll\",{deltaX:0,deltaY:0,event:t})};onTouchMove=t=>{const{clientX:e,clientY:i}=t.targetTouches?t.targetTouches[0]:t,s=-(e-this.touchStart.x)*this.touchMultiplier,o=-(i-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=e,this.touchStart.y=i,this.lastDelta={x:s,y:o},this.emitter.emit(\"scroll\",{deltaX:s,deltaY:o,event:t})};onTouchEnd=t=>{this.emitter.emit(\"scroll\",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:t})};onWheel=e=>{let{deltaX:i,deltaY:s}=e;this.normalizeWheel&&(i=t(-100,i,100),s=t(-100,s,100)),i*=this.wheelMultiplier,s*=this.wheelMultiplier,this.emitter.emit(\"scroll\",{deltaX:i,deltaY:s,event:e})}}class Lenis{constructor({wrapper:t=window,content:e=document.documentElement,wheelEventsTarget:i=t,eventsTarget:s=i,smoothWheel:o=!0,syncTouch:n=!1,syncTouchLerp:l=.075,touchInertiaMultiplier:r=35,duration:h,easing:a=(t=>Math.min(1,1.001-Math.pow(2,-10*t))),lerp:c=!h&&.1,infinite:u=!1,orientation:p=\"vertical\",gestureOrientation:d=\"vertical\",touchMultiplier:m=1,wheelMultiplier:g=1,normalizeWheel:v=!1,autoResize:S=!0}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:t,deltaY:e,event:i})=>{if(i.ctrlKey)return;const s=i.type.includes(\"touch\"),o=i.type.includes(\"wheel\");if(this.options.syncTouch&&s&&\"touchstart\"===i.type)return void this.reset();const n=0===t&&0===e,l=\"vertical\"===this.options.gestureOrientation&&0===e||\"horizontal\"===this.options.gestureOrientation&&0===t;if(n||l)return;let r=i.composedPath();if(r=r.slice(0,r.indexOf(this.rootElement)),r.find((t=>{var e,i,n,l;return(null===(e=t.hasAttribute)||void 0===e?void 0:e.call(t,\"data-lenis-prevent\"))||s&&(null===(i=t.hasAttribute)||void 0===i?void 0:i.call(t,\"data-lenis-prevent-touch\"))||o&&(null===(n=t.hasAttribute)||void 0===n?void 0:n.call(t,\"data-lenis-prevent-wheel\"))||(null===(l=t.classList)||void 0===l?void 0:l.contains(\"lenis\"))})))return;if(this.isStopped||this.isLocked)return void i.preventDefault();if(this.isSmooth=this.options.syncTouch&&s||this.options.smoothWheel&&o,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();i.preventDefault();let h=e;\"both\"===this.options.gestureOrientation?h=Math.abs(e)>Math.abs(t)?e:t:\"horizontal\"===this.options.gestureOrientation&&(h=t);const a=s&&this.options.syncTouch,c=s&&\"touchend\"===i.type&&Math.abs(h)>5;c&&(h=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+h,Object.assign({programmatic:!1},a?{lerp:c?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const t=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-t),this.emit()}},window.lenisVersion=\"1.0.37\",t!==document.documentElement&&t!==document.body||(t=window),this.options={wrapper:t,content:e,wheelEventsTarget:i,eventsTarget:s,smoothWheel:o,syncTouch:n,syncTouchLerp:l,touchInertiaMultiplier:r,duration:h,easing:a,lerp:c,infinite:u,gestureOrientation:d,orientation:p,touchMultiplier:m,wheelMultiplier:g,normalizeWheel:v,autoResize:S},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:t,content:e,autoResize:S}),this.toggleClassName(\"lenis\",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=n||o,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener(\"scroll\",this.onNativeScroll,{passive:!1}),this.virtualScroll=new VirtualScroll(s,{touchMultiplier:m,wheelMultiplier:g,normalizeWheel:v}),this.virtualScroll.on(\"scroll\",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener(\"scroll\",this.onNativeScroll,{passive:!1}),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName(\"lenis\",!1),this.toggleClassName(\"lenis-smooth\",!1),this.toggleClassName(\"lenis-scrolling\",!1),this.toggleClassName(\"lenis-stopped\",!1),this.toggleClassName(\"lenis-locked\",!1)}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.off(t,e)}setScroll(t){this.isHorizontal?this.rootElement.scrollLeft=t:this.rootElement.scrollTop=t}resize(){this.dimensions.resize()}emit(){this.emitter.emit(\"scroll\",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(t){const e=t-(this.time||t);this.time=t,this.animate.advance(.001*e)}scrollTo(e,{offset:i=0,immediate:s=!1,lock:o=!1,duration:n=this.options.duration,easing:l=this.options.easing,lerp:r=!n&&this.options.lerp,onComplete:h,force:a=!1,programmatic:c=!0}={}){if(!this.isStopped&&!this.isLocked||a){if([\"top\",\"left\",\"start\"].includes(e))e=0;else if([\"bottom\",\"right\",\"end\"].includes(e))e=this.limit;else{let t;if(\"string\"==typeof e?t=document.querySelector(e):(null==e?void 0:e.nodeType)&&(t=e),t){if(this.options.wrapper!==window){const t=this.options.wrapper.getBoundingClientRect();i-=this.isHorizontal?t.left:t.top}const s=t.getBoundingClientRect();e=(this.isHorizontal?s.left:s.top)+this.animatedScroll}}if(\"number\"==typeof e){if(e+=i,e=Math.round(e),this.options.infinite?c&&(this.targetScroll=this.animatedScroll=this.scroll):e=t(0,e,this.limit),s)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(null==h||h(this));if(!c){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:n,easing:l,lerp:r,onStart:()=>{o&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(t,e)=>{this.isScrolling=!0,this.velocity=t-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=t,this.setScroll(this.scroll),c&&(this.targetScroll=t),e||this.emit(),e&&(this.reset(),this.emit(),null==h||h(this),this.__preventNextScrollEvent=!0,requestAnimationFrame((()=>{delete this.__preventNextScrollEvent})))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.dimensions.limit[this.isHorizontal?\"x\":\"y\"]}get isHorizontal(){return\"horizontal\"===this.options.orientation}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(t=this.animatedScroll,e=this.limit,(t%e+e)%e):this.animatedScroll;var t,e}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(t){this.__isSmooth!==t&&(this.__isSmooth=t,this.toggleClassName(\"lenis-smooth\",t))}get isScrolling(){return this.__isScrolling}set isScrolling(t){this.__isScrolling!==t&&(this.__isScrolling=t,this.toggleClassName(\"lenis-scrolling\",t))}get isStopped(){return this.__isStopped}set isStopped(t){this.__isStopped!==t&&(this.__isStopped=t,this.toggleClassName(\"lenis-stopped\",t))}get isLocked(){return this.__isLocked}set isLocked(t){this.__isLocked!==t&&(this.__isLocked=t,this.toggleClassName(\"lenis-locked\",t))}get className(){let t=\"lenis\";return this.isStopped&&(t+=\" lenis-stopped\"),this.isLocked&&(t+=\" lenis-locked\"),this.isScrolling&&(t+=\" lenis-scrolling\"),this.isSmooth&&(t+=\" lenis-smooth\"),t}toggleClassName(t,e){this.rootElement.classList.toggle(t,e),this.emitter.emit(\"className change\",this)}}export{Lenis as default};\n//# sourceMappingURL=lenis.mjs.map\n","import Core from '../core/Core'\nimport Plugin from '../core/Plugin'\n\nimport Lenis from '@studio-freight/lenis'\n\nexport default class SmoothScroll extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor(luge) {\n    super('smooth')\n\n    this.luge = luge\n\n    window.hasSmoothScroll = false\n  }\n\n  /**\n   * Init\n   */\n  init() {\n    super.init()\n\n    this.element = document.documentElement\n\n    this.hasSmooth = this.element.hasAttribute('data-lg-smooth')\n\n    if (this.hasSmooth) {\n      window.hasSmoothScroll = true\n\n      this.lenis = new Lenis()\n\n      this.lenis.on('scroll', () => {\n        Core.updateScroll()\n      })\n\n      document.documentElement.classList.add('has-smooth-scroll')\n\n      this.luge.ticker.add(this.lenis.raf, this.lenis)\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Cursor extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('cursor')\n\n    this.luge = luge\n\n    this.cursors = []\n    this.pointers = []\n    this.trails = []\n\n    this.hoverTags = ['a', 'button', 'input']\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [Number, this.luge._settings.cursor.inertia],\n      length: [Number, this.luge._settings.cursor.trailLength],\n      hide: Boolean\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    document.documentElement.addEventListener('mouseenter', this.hoverHandler.bind(this), { capture: true, passive: true })\n    document.documentElement.addEventListener('mouseleave', this.hoverHandler.bind(this), { capture: true, passive: true })\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    const self = this\n    const cursors = document.querySelectorAll('[data-lg-cursor]:not(.lg-cursor)')\n\n    if (cursors.length > 0) {\n      cursors.forEach(cursor => {\n        const attributes = this.getAttributes(cursor)\n\n        if (attributes.hide) {\n          document.documentElement.classList.add('lg-cursor-hide')\n        }\n\n        // Pointers\n        const pointers = cursor.querySelectorAll('[data-lg-cursor-pointer')\n        pointers.forEach(pointer => {\n          pointer.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              }\n            }\n          }\n\n          if (pointer.hasAttribute('data-lg-cursor-inertia')) {\n            pointer.luge.cursor.inertia = Number(pointer.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            pointer.luge.cursor.inertia = attributes.inertia\n          }\n\n          pointer.classList.add('lg-cursor-pointer')\n\n          self.pointers.push(pointer)\n        })\n\n        // Trails\n        const trails = cursor.querySelectorAll('[data-lg-cursor-trail')\n        trails.forEach(trail => {\n          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n          svg.appendChild(path)\n\n          trail.appendChild(svg)\n\n          trail.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              },\n              points: [],\n              path: path\n            }\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-inertia')) {\n            trail.luge.cursor.inertia = Number(trail.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            trail.luge.cursor.inertia = attributes.inertia\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-length')) {\n            trail.luge.cursor.length = Number(trail.getAttribute('data-lg-cursor-length'))\n          } else {\n            trail.luge.cursor.length = attributes.length\n          }\n\n          trail.classList.add('lg-cursor-trail')\n\n          self.trails.push(trail)\n        })\n\n        cursor.classList.add('lg-cursor')\n\n        this.cursors.push(cursor)\n      })\n    }\n\n    done()\n  }\n\n  /**\n   * Hover handler\n   */\n  hoverHandler (e) {\n    const element = e.target\n    const tag = element.tagName.toLowerCase()\n    const style = element.getAttribute('data-lg-hover')\n    let hover = null\n\n    if (this.hoverTags.includes(tag) || style !== null) {\n      hover = (e.type === 'mouseenter')\n    }\n\n    if (hover !== null) {\n      this.cursors.forEach(cursor => {\n        cursor.classList.toggle('lg-cursor--hover', hover)\n\n        if (style !== null && style !== '') {\n          cursor.classList.toggle('lg-cursor--hover--' + style, hover)\n        }\n      })\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick (timestamp) {\n    // Pointers\n    this.pointers.forEach(pointer => {\n      // Get position\n      const position = pointer.luge.cursor.position\n      const smoothPosition = pointer.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      smoothPosition.x += (position.x - smoothPosition.x) * pointer.luge.cursor.inertia\n      smoothPosition.y += (position.y - smoothPosition.y) * pointer.luge.cursor.inertia\n\n      pointer.style.transform = 'translate3d(' + smoothPosition.x + 'px, ' + smoothPosition.y + 'px, 0)'\n    })\n\n    // Trails\n    this.trails.forEach(trail => {\n      // Get position\n      const position = trail.luge.cursor.position\n      const smoothPosition = trail.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      if (window.mouseX !== -1) {\n        smoothPosition.x += (position.x - smoothPosition.x) * trail.luge.cursor.inertia\n        smoothPosition.y += (position.y - smoothPosition.y) * trail.luge.cursor.inertia\n\n        // Update points\n        const points = trail.luge.cursor.points\n\n        const point = {\n          x: smoothPosition.x,\n          y: smoothPosition.y\n        }\n        points.push(point)\n\n        if (points.length > trail.luge.cursor.length) {\n          points.shift()\n        }\n\n        // Draw smooth line # https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74\n        let d = ''\n        let trailLength = 0\n\n        const svgPath = (points, command) => {\n          const d = points.reduce((acc, point, i, a) => i === 0\n\n            ? `M ${point.x},${point.y}`\n\n            : `${acc} ${command(point, i, a)}`\n          , '')\n          return `${d}`\n        }\n\n        const line = (pointA, pointB) => {\n          const lengthX = pointB.x - pointA.x\n          const lengthY = pointB.y - pointA.y\n          return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n          }\n        }\n\n        const controlPoint = (current, previous, next, reverse) => {\n          const p = previous || current\n          const n = next || current\n\n          const smoothing = 0.2\n\n          const o = line(p, n)\n\n          trailLength += o.length\n\n          const angle = o.angle + (reverse ? Math.PI : 0)\n          const length = o.length * smoothing\n\n          const x = current.x + Math.cos(angle) * length\n          const y = current.y + Math.sin(angle) * length\n          return [x, y]\n        }\n\n        const bezierCommand = (point, i, a) => {\n          const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point)\n\n          const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true)\n          return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point.x},${point.y}`\n        }\n\n        d = svgPath(points, bezierCommand)\n\n        trail.luge.cursor.path.setAttribute('d', d)\n\n        trail.style.setProperty('--length', trailLength)\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Intersection extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('intersection')\n\n    this.luge = luge\n\n    // Listeners\n    this.listeners = {\n      onViewportIntersect: this.onViewportIntersect.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.elements = []\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      class: String\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-intersection]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.viewportobserver.add(element)\n      element.addEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.luge.viewportobserver.remove(element)\n      element.removeEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * On viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n    const position = element.luge.viewport.position\n    const CSSClass = element.luge.intersection.class ? element.luge.intersection.class.split(' ') : false\n\n    // Set CSS classes\n    element.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    if (position === 'in') {\n      element.classList.add('is-in')\n\n      if (CSSClass) {\n        document.documentElement.classList.add(...CSSClass)\n      }\n    } else {\n      if (CSSClass) {\n        document.documentElement.classList.remove(...CSSClass)\n      }\n\n      if (position === 'above') {\n        element.classList.add('is-out', 'is-out-top')\n      } else {\n        element.classList.add('is-out', 'is-out-bottom')\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class LottiePlayer extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('lottie')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.doneLoad = null\n\n    // Listeners\n    this.onViewportIntersect = this.onViewportIntersect.bind(this)\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.lottie = {\n      deferInit: this.deferInit.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    if (typeof lottie === 'object') {\n      this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n      this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n      this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n      this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n    }\n\n    this.bindEvents()\n  }\n\n  /**\n   * Defer init\n   */\n  deferInit () {\n    if (typeof lottie === 'object') {\n      this.pageInit(() => {})\n      LifeCycle.add('pageKill', this.pageKill.bind(this))\n      LifeCycle.add('reveal', this.reveal.bind(this))\n\n      ScrollObserver.updateHandler()\n    }\n  }\n\n  /**\n   * Set plugin attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      autoplay: Boolean,\n      scroll: Boolean,\n      loop: Boolean,\n      loopFrame: [Number, 0],\n      reverse: Boolean,\n      required: Boolean,\n      force: Boolean,\n      lazy: Boolean,\n      renderer: [String, this.luge._settings.lottie.renderer],\n      subframe: [Boolean, this.luge._settings.lottie.subFrame]\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.reveal(() => {})\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    let waitLoad = false\n\n    if (this.elements.length > 0) {\n      this.elements.forEach(element => {\n        if (element.luge.lottie.required && !element.player.isLoaded) {\n          waitLoad = true\n        }\n      })\n    }\n\n    if (waitLoad) {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const self = this\n    this.elements = document.querySelectorAll('[data-lg-lottie]')\n    this.toAutoplay = []\n    this.toLoad = 0\n    this.requireds = 0\n\n    this.elements.forEach(element => {\n      if (!element.player) {\n        const attributes = this.getAttributes(element)\n\n        this.luge.scrollobserver.add(element)\n\n        if (attributes.lazy) {\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        } else {\n          self.initPlayer(element)\n\n          element.addEventListener('revealin', self.play)\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        }\n      }\n    })\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n    let elements = []\n\n    const oldPage = document.querySelector('[data-lg-page] + [data-lg-page]')\n\n    if (oldPage) {\n      elements = oldPage.querySelectorAll('[data-lg-lottie]')\n    } else {\n      elements = this.elements\n    }\n\n    elements.forEach(element => {\n      element.removeEventListener('revealin', self.play)\n      element.removeEventListener('viewportintersect', self.onViewportIntersect)\n\n      if (element.hasAttribute('data-lg-lottie-scroll')) {\n        element.removeEventListener('scrollprogress', self.onScrollProgress)\n      }\n\n      if (element.player) {\n        element.player.destroy()\n        delete element.player\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.toAutoplay.forEach(element => {\n      if (element.viewportPosition === 'in') {\n        element.play()\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n\n    if (!element.player) {\n      if (element.viewportPosition === 'in') {\n        this.initLazy(element)\n      }\n    } else {\n      if (!element.luge.lottie.force) {\n        if (element.viewportPosition === 'in') {\n          if (element.player.isPaused && (element.player.scrollPaused || element.hasAttribute('data-lg-lottie-autoplay'))) {\n            element.player.scrollPaused = false\n            element.play()\n          }\n        } else {\n          if (!element.player.isPaused) {\n            element.player.scrollPaused = true\n            element.pause()\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Lazy init\n   * @param {HTMLElement} element Container\n   */\n  initLazy (element) {\n    this.initPlayer(element)\n\n    element.player.addEventListener('DOMLoaded', () => {\n      element.play()\n    }, { once: true })\n  }\n\n  /**\n   * Init player\n   * @param {HTMLElement} element Container\n   */\n  initPlayer (element) {\n    const self = this\n    console.log(this)\n\n    this.toLoad++\n\n    // Get options\n    const attributes = this.getAttributes(element)\n\n    element.player = lottie.loadAnimation({\n      container: element,\n      renderer: attributes.renderer,\n      loop: (attributes.loop && !attributes.reverse),\n      autoplay: false,\n      path: attributes.root\n    })\n\n    if (typeof attributes.subframe !== 'undefined') {\n      element.player.setSubframe(attributes.subframe)\n    }\n\n    element.classList.add('lg-lottie')\n    this.setPlayerStateClasses(element, false)\n\n    if (attributes.autoplay) {\n      this.toAutoplay.push(element)\n    }\n\n    if (attributes.required) {\n      this.requireds++\n    }\n\n    if (attributes.scroll) {\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n    } else if (attributes.loop) {\n      element.player.addEventListener('enterFrame', function () {\n        if (element.player.totalFrames > 0) {\n          const currentFrame = Math.round(element.player.currentFrame)\n\n          if (element.player.playDirection === 1) {\n            if (currentFrame === element.player.totalFrames - 1) {\n              element.player.pause()\n\n              if (attributes.reverse) {\n                self.luge.ticker.nextTick(() => {\n                  element.player.setDirection(-1)\n                  element.player.goToAndPlay(element.player.totalFrames, true)\n\n                  self.setPlayerStateClasses(element, 'backward')\n                }, self)\n              } else {\n                self.luge.ticker.nextTick(() => {\n                  element.player.goToAndPlay(attributes.loopFrame, true)\n                }, self)\n              }\n            }\n          } else {\n            if (currentFrame === attributes.loopFrame) {\n              element.player.pause()\n\n              self.luge.ticker.nextTick(() => {\n                element.player.setDirection(1)\n                element.player.goToAndPlay(attributes.loopFrame, true)\n\n                self.setPlayerStateClasses(element, 'forward')\n              }, self)\n            }\n          }\n        }\n      })\n    }\n\n    // Set methods\n    element.play = this.play.bind(this, element)\n    element.pause = this.pause.bind(this, element)\n    element.stop = this.stop.bind(this, element)\n\n    // Loaded\n    element.player.addEventListener('DOMLoaded', () => {\n      element.classList.add('is-loaded')\n\n      self.playerLoaded(attributes.required)\n    }, { once: true })\n  }\n\n  /**\n   * Set player state classes\n   * @param {HTMLElement} el Element\n   * @param {Boolean|String} playing If playing, playing direction\n   */\n  setPlayerStateClasses (el, playing) {\n    el.classList.remove('is-playing', 'is-playing-forward', 'is-playing-backward', 'is-paused')\n\n    if (!playing) {\n      el.classList.add('is-paused')\n    } else {\n      el.classList.add('is-playing')\n\n      if (playing === 'backward') {\n        el.classList.add('is-playing-backward')\n      } else {\n        el.classList.add('is-playing-forward')\n      }\n    }\n  }\n\n  /**\n   * Player loaded\n   */\n  playerLoaded (required = false) {\n    this.toLoad--\n\n    if (required) {\n      this.requireds--\n    }\n\n    // Call doneLoad when required animations have been loaded\n    if (this.requireds === 0 && typeof this.doneLoad === 'function') {\n      this.doneLoad()\n      this.doneLoad = null\n    }\n\n    // Emit resize event when all animations are loaded\n    if (this.toLoad === 0) {\n      this.luge.ticker.nextTick(() => {\n        this.luge.emitter.emit('resize')\n      })\n    }\n  }\n\n  /**\n   * Play\n   */\n  play (element) {\n    if (element && element.player) {\n      element.player.play()\n\n      this.setPlayerStateClasses(element, 'forward')\n    }\n  }\n\n  /**\n   * Pause\n   */\n  pause (element) {\n    if (element && element.player) {\n      element.player.pause()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Stop\n   */\n  stop (element) {\n    if (element && element.player) {\n      element.player.stop()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.player.goToAndStop(element.player.totalFrames * element.scrollProgress, true)\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class MouseAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('mouse')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    window.mouseSpeed = 0\n\n    // Listeners\n    // ...\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.getMouseMovement()\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [String, this.luge._settings.mouse.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-mouse]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.mouseobserver.add(element)\n\n      element.luge.mouse.smoothX = 0\n      element.luge.mouse.smoothY = 0\n      element.luge.mouse.smoothProgressX = 0\n      element.luge.mouse.smoothProgressY = 0\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Get mouse movement\n   */\n  getMouseMovement () {\n    const distX = this.mouse.x - window.mouseX\n    const distY = this.mouse.y - window.mouseY\n    const dist = Math.hypot(distX, distY)\n\n    window.mouseSpeed += (dist - window.mouseSpeed) * 0.5\n    if (window.mouseSpeed < 0.001) {\n      window.mouseSpeed = 0\n    }\n\n    if (dist > 1) {\n      const angle = Math.atan2(distY, distX) * (180 / Math.PI) + 180\n\n      window.mouseAngle = angle\n\n      if (angle >= 45 && angle < 135) {\n        window.mouseDirection = 'down'\n      } else if (angle >= 135 && angle < 225) {\n        window.mouseDirection = 'left'\n      } else if (angle >= 225 && angle < 315) {\n        window.mouseDirection = 'up'\n      } else {\n        window.mouseDirection = 'right'\n      }\n    }\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    setTimeout(this.getMouseMovement.bind(this), 20)\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    this.elements.forEach(element => {\n      const mouse = element.luge.mouse\n\n      if (mouse.x) {\n        if (mouse.inertia) {\n          mouse.smoothX += (mouse.x - mouse.smoothX) * mouse.inertia\n          mouse.smoothY += (mouse.y - mouse.smoothY) * mouse.inertia\n          mouse.smoothProgressX += (mouse.progressX - mouse.smoothProgressX) * mouse.inertia\n          mouse.smoothProgressY += (mouse.progressY - mouse.smoothProgressY) * mouse.inertia\n\n          element.style.setProperty('--mouse-x', mouse.smoothX)\n          element.style.setProperty('--mouse-y', mouse.smoothY)\n          element.style.setProperty('--mouse-progress-x', mouse.smoothProgressX)\n          element.style.setProperty('--mouse-progress-y', mouse.smoothProgressY)\n\n          const diffX = Math.round((mouse.x - mouse.smoothX) * 1000) / 1000\n          const diffY = Math.round((mouse.y - mouse.smoothY) * 1000) / 1000\n\n          element.style.setProperty('--abs-diff-x', Math.abs(diffX))\n          element.style.setProperty('--diff-x', diffX)\n          element.style.setProperty('--abs-diff-y', Math.abs(diffY))\n          element.style.setProperty('--diff-y', diffY)\n        } else {\n          element.style.setProperty('--mouse-x', mouse.x)\n          element.style.setProperty('--mouse-y', mouse.y)\n          element.style.setProperty('--mouse-progress-x', mouse.progressX)\n          element.style.setProperty('--mouse-progress-y', mouse.progressY)\n        }\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Parallax extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('parallax')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 30)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      disable: String,\n      amplitude: [String, 1],\n      anchor: String,\n      inertia: [String, this.luge._settings.parallax.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.amplitude) {\n      const randAmplitude = data.amplitude.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randAmplitude) {\n        data.amplitude = Number(randAmplitude[1]) + ((Number(randAmplitude[2]) - Number(randAmplitude[1])) * Math.random())\n      } else {\n        data.amplitude = Number(data.amplitude)\n      }\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    document.querySelectorAll('[data-lg-parallax]').forEach(element => {\n      const attributes = this.getAttributes(element)\n\n      const disable = attributes.disable\n      let enable = true\n\n      const browser = (this.luge.browser || {})\n\n      if (disable && browser.is) {\n        if ((disable === 'desktop' && browser.is('desktop')) ||\n            (disable === 'handheld' && !browser.is('desktop')) ||\n            (disable === 'mobile' && browser.is('mobile')) ||\n            (disable === 'tablet' && browser.is('tablet'))) {\n          enable = false\n        }\n      }\n\n      if (enable) {\n        this.addElement(element)\n      }\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.luge.scrollobserver.add(element)\n\n      if (element.luge.parallax.root === 'child') {\n        element.style.overflow = 'hidden'\n        element.luge.parallax.child = element.firstElementChild\n      }\n\n      element.luge.parallax.movement = 0\n      element.luge.parallax.smoothMovement = 0\n\n      this.elements.push(element)\n\n      this.luge.ticker.nextTick(() => {\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n        this.moveElement(element)\n      })\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    this.moveElement(e.target)\n  }\n\n  /**\n   * Move element\n   * @param {HTMLElement} element Element to move\n   */\n  moveElement (element) {\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = element.scrollProgress\n    } else {\n      progress = 1 - element.scrollProgress * 2\n    }\n\n    if (element.luge.parallax.anchor === 'bottom') {\n      progress += 1\n    } else if (element.luge.parallax.anchor === 'top') {\n      progress -= 1\n    }\n\n    if (element.luge.parallax.root === 'child') {\n      element.luge.parallax.movement = (element.luge.parallax.amplitude * 5) * progress\n    } else {\n      element.luge.parallax.movement = element.clientHeight * progress * element.luge.parallax.amplitude / 2\n    }\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    this.elements.forEach(element => {\n      element.luge.parallax.smoothMovement += (element.luge.parallax.movement - element.luge.parallax.smoothMovement) * element.luge.parallax.inertia\n\n      if (element.luge.parallax.root === 'child' && element.luge.parallax.child) {\n        element.luge.parallax.child.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + '%, 0) scale(1.' + (String(Math.abs(element.luge.parallax.amplitude)).replace('.', '')) + ')'\n      } else {\n        element.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + 'px, 0)'\n      }\n    })\n  }\n}\n","// NOTE: this list must be up-to-date with browsers listed in\n// test/acceptance/useragentstrings.yml\nexport const BROWSER_ALIASES_MAP = {\n  'Amazon Silk': 'amazon_silk',\n  'Android Browser': 'android',\n  Bada: 'bada',\n  BlackBerry: 'blackberry',\n  Chrome: 'chrome',\n  Chromium: 'chromium',\n  Electron: 'electron',\n  Epiphany: 'epiphany',\n  Firefox: 'firefox',\n  Focus: 'focus',\n  Generic: 'generic',\n  'Google Search': 'google_search',\n  Googlebot: 'googlebot',\n  'Internet Explorer': 'ie',\n  'K-Meleon': 'k_meleon',\n  Maxthon: 'maxthon',\n  'Microsoft Edge': 'edge',\n  'MZ Browser': 'mz',\n  'NAVER Whale Browser': 'naver',\n  Opera: 'opera',\n  'Opera Coast': 'opera_coast',\n  PhantomJS: 'phantomjs',\n  Puffin: 'puffin',\n  QupZilla: 'qupzilla',\n  QQ: 'qq',\n  QQLite: 'qqlite',\n  Safari: 'safari',\n  Sailfish: 'sailfish',\n  'Samsung Internet for Android': 'samsung_internet',\n  SeaMonkey: 'seamonkey',\n  Sleipnir: 'sleipnir',\n  Swing: 'swing',\n  Tizen: 'tizen',\n  'UC Browser': 'uc',\n  Vivaldi: 'vivaldi',\n  'WebOS Browser': 'webos',\n  WeChat: 'wechat',\n  'Yandex Browser': 'yandex',\n  Roku: 'roku',\n};\n\nexport const BROWSER_MAP = {\n  amazon_silk: 'Amazon Silk',\n  android: 'Android Browser',\n  bada: 'Bada',\n  blackberry: 'BlackBerry',\n  chrome: 'Chrome',\n  chromium: 'Chromium',\n  electron: 'Electron',\n  epiphany: 'Epiphany',\n  firefox: 'Firefox',\n  focus: 'Focus',\n  generic: 'Generic',\n  googlebot: 'Googlebot',\n  google_search: 'Google Search',\n  ie: 'Internet Explorer',\n  k_meleon: 'K-Meleon',\n  maxthon: 'Maxthon',\n  edge: 'Microsoft Edge',\n  mz: 'MZ Browser',\n  naver: 'NAVER Whale Browser',\n  opera: 'Opera',\n  opera_coast: 'Opera Coast',\n  phantomjs: 'PhantomJS',\n  puffin: 'Puffin',\n  qupzilla: 'QupZilla',\n  qq: 'QQ Browser',\n  qqlite: 'QQ Browser Lite',\n  safari: 'Safari',\n  sailfish: 'Sailfish',\n  samsung_internet: 'Samsung Internet for Android',\n  seamonkey: 'SeaMonkey',\n  sleipnir: 'Sleipnir',\n  swing: 'Swing',\n  tizen: 'Tizen',\n  uc: 'UC Browser',\n  vivaldi: 'Vivaldi',\n  webos: 'WebOS Browser',\n  wechat: 'WeChat',\n  yandex: 'Yandex Browser',\n};\n\nexport const PLATFORMS_MAP = {\n  tablet: 'tablet',\n  mobile: 'mobile',\n  desktop: 'desktop',\n  tv: 'tv',\n};\n\nexport const OS_MAP = {\n  WindowsPhone: 'Windows Phone',\n  Windows: 'Windows',\n  MacOS: 'macOS',\n  iOS: 'iOS',\n  Android: 'Android',\n  WebOS: 'WebOS',\n  BlackBerry: 'BlackBerry',\n  Bada: 'Bada',\n  Tizen: 'Tizen',\n  Linux: 'Linux',\n  ChromeOS: 'Chrome OS',\n  PlayStation4: 'PlayStation 4',\n  Roku: 'Roku',\n};\n\nexport const ENGINE_MAP = {\n  EdgeHTML: 'EdgeHTML',\n  Blink: 'Blink',\n  Trident: 'Trident',\n  Presto: 'Presto',\n  Gecko: 'Gecko',\n  WebKit: 'WebKit',\n};\n","import { BROWSER_MAP, BROWSER_ALIASES_MAP } from './constants.js';\n\nexport default class Utils {\n  /**\n   * Get first matched item for a string\n   * @param {RegExp} regexp\n   * @param {String} ua\n   * @return {Array|{index: number, input: string}|*|boolean|string}\n   */\n  static getFirstMatch(regexp, ua) {\n    const match = ua.match(regexp);\n    return (match && match.length > 0 && match[1]) || '';\n  }\n\n  /**\n   * Get second matched item for a string\n   * @param regexp\n   * @param {String} ua\n   * @return {Array|{index: number, input: string}|*|boolean|string}\n   */\n  static getSecondMatch(regexp, ua) {\n    const match = ua.match(regexp);\n    return (match && match.length > 1 && match[2]) || '';\n  }\n\n  /**\n   * Match a regexp and return a constant or undefined\n   * @param {RegExp} regexp\n   * @param {String} ua\n   * @param {*} _const Any const that will be returned if regexp matches the string\n   * @return {*}\n   */\n  static matchAndReturnConst(regexp, ua, _const) {\n    if (regexp.test(ua)) {\n      return _const;\n    }\n    return void (0);\n  }\n\n  static getWindowsVersionName(version) {\n    switch (version) {\n      case 'NT': return 'NT';\n      case 'XP': return 'XP';\n      case 'NT 5.0': return '2000';\n      case 'NT 5.1': return 'XP';\n      case 'NT 5.2': return '2003';\n      case 'NT 6.0': return 'Vista';\n      case 'NT 6.1': return '7';\n      case 'NT 6.2': return '8';\n      case 'NT 6.3': return '8.1';\n      case 'NT 10.0': return '10';\n      default: return undefined;\n    }\n  }\n\n  /**\n   * Get macOS version name\n   *    10.5 - Leopard\n   *    10.6 - Snow Leopard\n   *    10.7 - Lion\n   *    10.8 - Mountain Lion\n   *    10.9 - Mavericks\n   *    10.10 - Yosemite\n   *    10.11 - El Capitan\n   *    10.12 - Sierra\n   *    10.13 - High Sierra\n   *    10.14 - Mojave\n   *    10.15 - Catalina\n   *\n   * @example\n   *   getMacOSVersionName(\"10.14\") // 'Mojave'\n   *\n   * @param  {string} version\n   * @return {string} versionName\n   */\n  static getMacOSVersionName(version) {\n    const v = version.split('.').splice(0, 2).map(s => parseInt(s, 10) || 0);\n    v.push(0);\n    if (v[0] !== 10) return undefined;\n    switch (v[1]) {\n      case 5: return 'Leopard';\n      case 6: return 'Snow Leopard';\n      case 7: return 'Lion';\n      case 8: return 'Mountain Lion';\n      case 9: return 'Mavericks';\n      case 10: return 'Yosemite';\n      case 11: return 'El Capitan';\n      case 12: return 'Sierra';\n      case 13: return 'High Sierra';\n      case 14: return 'Mojave';\n      case 15: return 'Catalina';\n      default: return undefined;\n    }\n  }\n\n  /**\n   * Get Android version name\n   *    1.5 - Cupcake\n   *    1.6 - Donut\n   *    2.0 - Eclair\n   *    2.1 - Eclair\n   *    2.2 - Froyo\n   *    2.x - Gingerbread\n   *    3.x - Honeycomb\n   *    4.0 - Ice Cream Sandwich\n   *    4.1 - Jelly Bean\n   *    4.4 - KitKat\n   *    5.x - Lollipop\n   *    6.x - Marshmallow\n   *    7.x - Nougat\n   *    8.x - Oreo\n   *    9.x - Pie\n   *\n   * @example\n   *   getAndroidVersionName(\"7.0\") // 'Nougat'\n   *\n   * @param  {string} version\n   * @return {string} versionName\n   */\n  static getAndroidVersionName(version) {\n    const v = version.split('.').splice(0, 2).map(s => parseInt(s, 10) || 0);\n    v.push(0);\n    if (v[0] === 1 && v[1] < 5) return undefined;\n    if (v[0] === 1 && v[1] < 6) return 'Cupcake';\n    if (v[0] === 1 && v[1] >= 6) return 'Donut';\n    if (v[0] === 2 && v[1] < 2) return 'Eclair';\n    if (v[0] === 2 && v[1] === 2) return 'Froyo';\n    if (v[0] === 2 && v[1] > 2) return 'Gingerbread';\n    if (v[0] === 3) return 'Honeycomb';\n    if (v[0] === 4 && v[1] < 1) return 'Ice Cream Sandwich';\n    if (v[0] === 4 && v[1] < 4) return 'Jelly Bean';\n    if (v[0] === 4 && v[1] >= 4) return 'KitKat';\n    if (v[0] === 5) return 'Lollipop';\n    if (v[0] === 6) return 'Marshmallow';\n    if (v[0] === 7) return 'Nougat';\n    if (v[0] === 8) return 'Oreo';\n    if (v[0] === 9) return 'Pie';\n    return undefined;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  static getVersionPrecision(version) {\n    return version.split('.').length;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions('1.10.2.1',  '1.8.2.1.90')    // 1\n   *   compareVersions('1.010.2.1', '1.09.2.1.90');  // 1\n   *   compareVersions('1.10.2.1',  '1.10.2.1');     // 0\n   *   compareVersions('1.10.2.1',  '1.0800.2');     // -1\n   *   compareVersions('1.10.2.1',  '1.10',  true);  // 0\n   *\n   * @param {String} versionA versions versions to compare\n   * @param {String} versionB versions versions to compare\n   * @param {boolean} [isLoose] enable loose comparison\n   * @return {Number} comparison result: -1 when versionA is lower,\n   * 1 when versionA is bigger, 0 when both equal\n   */\n  /* eslint consistent-return: 1 */\n  static compareVersions(versionA, versionB, isLoose = false) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    const versionAPrecision = Utils.getVersionPrecision(versionA);\n    const versionBPrecision = Utils.getVersionPrecision(versionB);\n\n    let precision = Math.max(versionAPrecision, versionBPrecision);\n    let lastPrecision = 0;\n\n    const chunks = Utils.map([versionA, versionB], (version) => {\n      const delta = precision - Utils.getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      const _version = version + new Array(delta + 1).join('.0');\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return Utils.map(_version.split('.'), chunk => new Array(20 - chunk.length).join('0') + chunk).reverse();\n    });\n\n    // adjust precision for loose comparison\n    if (isLoose) {\n      lastPrecision = precision - Math.min(versionAPrecision, versionBPrecision);\n    }\n\n    // iterate in reverse order by reversed chunks array\n    precision -= 1;\n    while (precision >= lastPrecision) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n\n      if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === lastPrecision) {\n          // all version chunks are same\n          return 0;\n        }\n\n        precision -= 1;\n      } else if (chunks[0][precision] < chunks[1][precision]) {\n        return -1;\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  static map(arr, iterator) {\n    const result = [];\n    let i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i += 1) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Array::find polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} predicate\n   * @return {Array}\n   */\n  static find(arr, predicate) {\n    let i;\n    let l;\n    if (Array.prototype.find) {\n      return Array.prototype.find.call(arr, predicate);\n    }\n    for (i = 0, l = arr.length; i < l; i += 1) {\n      const value = arr[i];\n      if (predicate(value, i)) {\n        return value;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Object::assign polyfill\n   *\n   * @param  {Object} obj\n   * @param  {Object} ...objs\n   * @return {Object}\n   */\n  static assign(obj, ...assigners) {\n    const result = obj;\n    let i;\n    let l;\n    if (Object.assign) {\n      return Object.assign(obj, ...assigners);\n    }\n    for (i = 0, l = assigners.length; i < l; i += 1) {\n      const assigner = assigners[i];\n      if (typeof assigner === 'object' && assigner !== null) {\n        const keys = Object.keys(assigner);\n        keys.forEach((key) => {\n          result[key] = assigner[key];\n        });\n      }\n    }\n    return obj;\n  }\n\n  /**\n   * Get short version/alias for a browser name\n   *\n   * @example\n   *   getBrowserAlias('Microsoft Edge') // edge\n   *\n   * @param  {string} browserName\n   * @return {string}\n   */\n  static getBrowserAlias(browserName) {\n    return BROWSER_ALIASES_MAP[browserName];\n  }\n\n  /**\n   * Get short version/alias for a browser name\n   *\n   * @example\n   *   getBrowserAlias('edge') // Microsoft Edge\n   *\n   * @param  {string} browserAlias\n   * @return {string}\n   */\n  static getBrowserTypeByAlias(browserAlias) {\n    return BROWSER_MAP[browserAlias] || '';\n  }\n}\n","/**\n * Browsers' descriptors\n *\n * The idea of descriptors is simple. You should know about them two simple things:\n * 1. Every descriptor has a method or property called `test` and a `describe` method.\n * 2. Order of descriptors is important.\n *\n * More details:\n * 1. Method or property `test` serves as a way to detect whether the UA string\n * matches some certain browser or not. The `describe` method helps to make a result\n * object with params that show some browser-specific things: name, version, etc.\n * 2. Order of descriptors is important because a Parser goes through them one by one\n * in course. For example, if you insert Chrome's descriptor as the first one,\n * more then a half of browsers will be described as Chrome, because they will pass\n * the Chrome descriptor's test.\n *\n * Descriptor's `test` could be a property with an array of RegExps, where every RegExp\n * will be applied to a UA string to test it whether it matches or not.\n * If a descriptor has two or more regexps in the `test` array it tests them one by one\n * with a logical sum operation. Parser stops if it has found any RegExp that matches the UA.\n *\n * Or `test` could be a method. In that case it gets a Parser instance and should\n * return true/false to get the Parser know if this browser descriptor matches the UA or not.\n */\n\nimport Utils from './utils.js';\n\nconst commonVersionIdentifier = /version\\/(\\d+(\\.?_?\\d+)+)/i;\n\nconst browsersList = [\n  /* Googlebot */\n  {\n    test: [/googlebot/i],\n    describe(ua) {\n      const browser = {\n        name: 'Googlebot',\n      };\n      const version = Utils.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Opera < 13.0 */\n  {\n    test: [/opera/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Opera > 13.0 */\n  {\n    test: [/opr\\/|opios/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera',\n      };\n      const version = Utils.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/SamsungBrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'Samsung Internet for Android',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/Whale/i],\n    describe(ua) {\n      const browser = {\n        name: 'NAVER Whale Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/MZBrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'MZ Browser',\n      };\n      const version = Utils.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/focus/i],\n    describe(ua) {\n      const browser = {\n        name: 'Focus',\n      };\n      const version = Utils.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/swing/i],\n    describe(ua) {\n      const browser = {\n        name: 'Swing',\n      };\n      const version = Utils.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/coast/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera Coast',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/opt\\/\\d+(?:.?_?\\d+)+/i],\n    describe(ua) {\n      const browser = {\n        name: 'Opera Touch',\n      };\n      const version = Utils.getFirstMatch(/(?:opt)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/yabrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'Yandex Browser',\n      };\n      const version = Utils.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/ucbrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'UC Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/Maxthon|mxios/i],\n    describe(ua) {\n      const browser = {\n        name: 'Maxthon',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/epiphany/i],\n    describe(ua) {\n      const browser = {\n        name: 'Epiphany',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/puffin/i],\n    describe(ua) {\n      const browser = {\n        name: 'Puffin',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/sleipnir/i],\n    describe(ua) {\n      const browser = {\n        name: 'Sleipnir',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/k-meleon/i],\n    describe(ua) {\n      const browser = {\n        name: 'K-Meleon',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/micromessenger/i],\n    describe(ua) {\n      const browser = {\n        name: 'WeChat',\n      };\n      const version = Utils.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/qqbrowser/i],\n    describe(ua) {\n      const browser = {\n        name: (/qqbrowserlite/i).test(ua) ? 'QQ Browser Lite' : 'QQ Browser',\n      };\n      const version = Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/msie|trident/i],\n    describe(ua) {\n      const browser = {\n        name: 'Internet Explorer',\n      };\n      const version = Utils.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/\\sedg\\//i],\n    describe(ua) {\n      const browser = {\n        name: 'Microsoft Edge',\n      };\n\n      const version = Utils.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/edg([ea]|ios)/i],\n    describe(ua) {\n      const browser = {\n        name: 'Microsoft Edge',\n      };\n\n      const version = Utils.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/vivaldi/i],\n    describe(ua) {\n      const browser = {\n        name: 'Vivaldi',\n      };\n      const version = Utils.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/seamonkey/i],\n    describe(ua) {\n      const browser = {\n        name: 'SeaMonkey',\n      };\n      const version = Utils.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/sailfish/i],\n    describe(ua) {\n      const browser = {\n        name: 'Sailfish',\n      };\n\n      const version = Utils.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/silk/i],\n    describe(ua) {\n      const browser = {\n        name: 'Amazon Silk',\n      };\n      const version = Utils.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/phantom/i],\n    describe(ua) {\n      const browser = {\n        name: 'PhantomJS',\n      };\n      const version = Utils.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/slimerjs/i],\n    describe(ua) {\n      const browser = {\n        name: 'SlimerJS',\n      };\n      const version = Utils.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n    describe(ua) {\n      const browser = {\n        name: 'BlackBerry',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/(web|hpw)[o0]s/i],\n    describe(ua) {\n      const browser = {\n        name: 'WebOS Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua) || Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/bada/i],\n    describe(ua) {\n      const browser = {\n        name: 'Bada',\n      };\n      const version = Utils.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/tizen/i],\n    describe(ua) {\n      const browser = {\n        name: 'Tizen',\n      };\n      const version = Utils.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/qupzilla/i],\n    describe(ua) {\n      const browser = {\n        name: 'QupZilla',\n      };\n      const version = Utils.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/firefox|iceweasel|fxios/i],\n    describe(ua) {\n      const browser = {\n        name: 'Firefox',\n      };\n      const version = Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/electron/i],\n    describe(ua) {\n      const browser = {\n        name: 'Electron',\n      };\n      const version = Utils.getFirstMatch(/(?:electron)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/MiuiBrowser/i],\n    describe(ua) {\n      const browser = {\n        name: 'Miui',\n      };\n      const version = Utils.getFirstMatch(/(?:MiuiBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/chromium/i],\n    describe(ua) {\n      const browser = {\n        name: 'Chromium',\n      };\n      const version = Utils.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i, ua) || Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/chrome|crios|crmo/i],\n    describe(ua) {\n      const browser = {\n        name: 'Chrome',\n      };\n      const version = Utils.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n  {\n    test: [/GSA/i],\n    describe(ua) {\n      const browser = {\n        name: 'Google Search',\n      };\n      const version = Utils.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Android Browser */\n  {\n    test(parser) {\n      const notLikeAndroid = !parser.test(/like android/i);\n      const butAndroid = parser.test(/android/i);\n      return notLikeAndroid && butAndroid;\n    },\n    describe(ua) {\n      const browser = {\n        name: 'Android Browser',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* PlayStation 4 */\n  {\n    test: [/playstation 4/i],\n    describe(ua) {\n      const browser = {\n        name: 'PlayStation 4',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Safari */\n  {\n    test: [/safari|applewebkit/i],\n    describe(ua) {\n      const browser = {\n        name: 'Safari',\n      };\n      const version = Utils.getFirstMatch(commonVersionIdentifier, ua);\n\n      if (version) {\n        browser.version = version;\n      }\n\n      return browser;\n    },\n  },\n\n  /* Something else */\n  {\n    test: [/.*/i],\n    describe(ua) {\n      /* Here we try to make sure that there are explicit details about the device\n       * in order to decide what regexp exactly we want to apply\n       * (as there is a specific decision based on that conclusion)\n       */\n      const regexpWithoutDeviceSpec = /^(.*)\\/(.*) /;\n      const regexpWithDeviceSpec = /^(.*)\\/(.*)[ \\t]\\((.*)/;\n      const hasDeviceSpec = ua.search('\\\\(') !== -1;\n      const regexp = hasDeviceSpec ? regexpWithDeviceSpec : regexpWithoutDeviceSpec;\n      return {\n        name: Utils.getFirstMatch(regexp, ua),\n        version: Utils.getSecondMatch(regexp, ua),\n      };\n    },\n  },\n];\n\nexport default browsersList;\n","import Utils from './utils.js';\nimport { OS_MAP } from './constants.js';\n\nexport default [\n  /* Roku */\n  {\n    test: [/Roku\\/DVP/],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i, ua);\n      return {\n        name: OS_MAP.Roku,\n        version,\n      };\n    },\n  },\n\n  /* Windows Phone */\n  {\n    test: [/windows phone/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i, ua);\n      return {\n        name: OS_MAP.WindowsPhone,\n        version,\n      };\n    },\n  },\n\n  /* Windows */\n  {\n    test: [/windows /i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i, ua);\n      const versionName = Utils.getWindowsVersionName(version);\n\n      return {\n        name: OS_MAP.Windows,\n        version,\n        versionName,\n      };\n    },\n  },\n\n  /* Firefox on iPad */\n  {\n    test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n    describe(ua) {\n      const result = {\n        name: OS_MAP.iOS,\n      };\n      const version = Utils.getSecondMatch(/(Version\\/)(\\d[\\d.]+)/, ua);\n      if (version) {\n        result.version = version;\n      }\n      return result;\n    },\n  },\n\n  /* macOS */\n  {\n    test: [/macintosh/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i, ua).replace(/[_\\s]/g, '.');\n      const versionName = Utils.getMacOSVersionName(version);\n\n      const os = {\n        name: OS_MAP.MacOS,\n        version,\n      };\n      if (versionName) {\n        os.versionName = versionName;\n      }\n      return os;\n    },\n  },\n\n  /* iOS */\n  {\n    test: [/(ipod|iphone|ipad)/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i, ua).replace(/[_\\s]/g, '.');\n\n      return {\n        name: OS_MAP.iOS,\n        version,\n      };\n    },\n  },\n\n  /* Android */\n  {\n    test(parser) {\n      const notLikeAndroid = !parser.test(/like android/i);\n      const butAndroid = parser.test(/android/i);\n      return notLikeAndroid && butAndroid;\n    },\n    describe(ua) {\n      const version = Utils.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i, ua);\n      const versionName = Utils.getAndroidVersionName(version);\n      const os = {\n        name: OS_MAP.Android,\n        version,\n      };\n      if (versionName) {\n        os.versionName = versionName;\n      }\n      return os;\n    },\n  },\n\n  /* WebOS */\n  {\n    test: [/(web|hpw)[o0]s/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i, ua);\n      const os = {\n        name: OS_MAP.WebOS,\n      };\n\n      if (version && version.length) {\n        os.version = version;\n      }\n      return os;\n    },\n  },\n\n  /* BlackBerry */\n  {\n    test: [/blackberry|\\bbb\\d+/i, /rim\\stablet/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i, ua)\n        || Utils.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i, ua)\n        || Utils.getFirstMatch(/\\bbb(\\d+)/i, ua);\n\n      return {\n        name: OS_MAP.BlackBerry,\n        version,\n      };\n    },\n  },\n\n  /* Bada */\n  {\n    test: [/bada/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i, ua);\n\n      return {\n        name: OS_MAP.Bada,\n        version,\n      };\n    },\n  },\n\n  /* Tizen */\n  {\n    test: [/tizen/i],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i, ua);\n\n      return {\n        name: OS_MAP.Tizen,\n        version,\n      };\n    },\n  },\n\n  /* Linux */\n  {\n    test: [/linux/i],\n    describe() {\n      return {\n        name: OS_MAP.Linux,\n      };\n    },\n  },\n\n  /* Chrome OS */\n  {\n    test: [/CrOS/],\n    describe() {\n      return {\n        name: OS_MAP.ChromeOS,\n      };\n    },\n  },\n\n  /* Playstation 4 */\n  {\n    test: [/PlayStation 4/],\n    describe(ua) {\n      const version = Utils.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i, ua);\n      return {\n        name: OS_MAP.PlayStation4,\n        version,\n      };\n    },\n  },\n];\n","import Utils from './utils.js';\nimport { PLATFORMS_MAP } from './constants.js';\n\n/*\n * Tablets go first since usually they have more specific\n * signs to detect.\n */\n\nexport default [\n  /* Googlebot */\n  {\n    test: [/googlebot/i],\n    describe() {\n      return {\n        type: 'bot',\n        vendor: 'Google',\n      };\n    },\n  },\n\n  /* Huawei */\n  {\n    test: [/huawei/i],\n    describe(ua) {\n      const model = Utils.getFirstMatch(/(can-l01)/i, ua) && 'Nova';\n      const platform = {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Huawei',\n      };\n      if (model) {\n        platform.model = model;\n      }\n      return platform;\n    },\n  },\n\n  /* Nexus Tablet */\n  {\n    test: [/nexus\\s*(?:7|8|9|10).*/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Nexus',\n      };\n    },\n  },\n\n  /* iPad */\n  {\n    test: [/ipad/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Apple',\n        model: 'iPad',\n      };\n    },\n  },\n\n  /* Firefox on iPad */\n  {\n    test: [/Macintosh(.*?) FxiOS(.*?)\\//],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Apple',\n        model: 'iPad',\n      };\n    },\n  },\n\n  /* Amazon Kindle Fire */\n  {\n    test: [/kftt build/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Amazon',\n        model: 'Kindle Fire HD 7',\n      };\n    },\n  },\n\n  /* Another Amazon Tablet with Silk */\n  {\n    test: [/silk/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n        vendor: 'Amazon',\n      };\n    },\n  },\n\n  /* Tablet */\n  {\n    test: [/tablet(?! pc)/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n      };\n    },\n  },\n\n  /* iPod/iPhone */\n  {\n    test(parser) {\n      const iDevice = parser.test(/ipod|iphone/i);\n      const likeIDevice = parser.test(/like (ipod|iphone)/i);\n      return iDevice && !likeIDevice;\n    },\n    describe(ua) {\n      const model = Utils.getFirstMatch(/(ipod|iphone)/i, ua);\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Apple',\n        model,\n      };\n    },\n  },\n\n  /* Nexus Mobile */\n  {\n    test: [/nexus\\s*[0-6].*/i, /galaxy nexus/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Nexus',\n      };\n    },\n  },\n\n  /* Mobile */\n  {\n    test: [/[^-]mobi/i],\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n      };\n    },\n  },\n\n  /* BlackBerry */\n  {\n    test(parser) {\n      return parser.getBrowserName(true) === 'blackberry';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'BlackBerry',\n      };\n    },\n  },\n\n  /* Bada */\n  {\n    test(parser) {\n      return parser.getBrowserName(true) === 'bada';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n      };\n    },\n  },\n\n  /* Windows Phone */\n  {\n    test(parser) {\n      return parser.getBrowserName() === 'windows phone';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n        vendor: 'Microsoft',\n      };\n    },\n  },\n\n  /* Android Tablet */\n  {\n    test(parser) {\n      const osMajorVersion = Number(String(parser.getOSVersion()).split('.')[0]);\n      return parser.getOSName(true) === 'android' && (osMajorVersion >= 3);\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tablet,\n      };\n    },\n  },\n\n  /* Android Mobile */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'android';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.mobile,\n      };\n    },\n  },\n\n  /* desktop */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'macos';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n        vendor: 'Apple',\n      };\n    },\n  },\n\n  /* Windows */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'windows';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n      };\n    },\n  },\n\n  /* Linux */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'linux';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.desktop,\n      };\n    },\n  },\n\n  /* PlayStation 4 */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'playstation 4';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tv,\n      };\n    },\n  },\n\n  /* Roku */\n  {\n    test(parser) {\n      return parser.getOSName(true) === 'roku';\n    },\n    describe() {\n      return {\n        type: PLATFORMS_MAP.tv,\n      };\n    },\n  },\n];\n","import Utils from './utils.js';\nimport { ENGINE_MAP } from './constants.js';\n\n/*\n * More specific goes first\n */\nexport default [\n  /* EdgeHTML */\n  {\n    test(parser) {\n      return parser.getBrowserName(true) === 'microsoft edge';\n    },\n    describe(ua) {\n      const isBlinkBased = /\\sedg\\//i.test(ua);\n\n      // return blink if it's blink-based one\n      if (isBlinkBased) {\n        return {\n          name: ENGINE_MAP.Blink,\n        };\n      }\n\n      // otherwise match the version and return EdgeHTML\n      const version = Utils.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      return {\n        name: ENGINE_MAP.EdgeHTML,\n        version,\n      };\n    },\n  },\n\n  /* Trident */\n  {\n    test: [/trident/i],\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.Trident,\n      };\n\n      const version = Utils.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n\n  /* Presto */\n  {\n    test(parser) {\n      return parser.test(/presto/i);\n    },\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.Presto,\n      };\n\n      const version = Utils.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n\n  /* Gecko */\n  {\n    test(parser) {\n      const isGecko = parser.test(/gecko/i);\n      const likeGecko = parser.test(/like gecko/i);\n      return isGecko && !likeGecko;\n    },\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.Gecko,\n      };\n\n      const version = Utils.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n\n  /* Blink */\n  {\n    test: [/(apple)?webkit\\/537\\.36/i],\n    describe() {\n      return {\n        name: ENGINE_MAP.Blink,\n      };\n    },\n  },\n\n  /* WebKit */\n  {\n    test: [/(apple)?webkit/i],\n    describe(ua) {\n      const engine = {\n        name: ENGINE_MAP.WebKit,\n      };\n\n      const version = Utils.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i, ua);\n\n      if (version) {\n        engine.version = version;\n      }\n\n      return engine;\n    },\n  },\n];\n","import browserParsersList from './parser-browsers.js';\nimport osParsersList from './parser-os.js';\nimport platformParsersList from './parser-platforms.js';\nimport enginesParsersList from './parser-engines.js';\nimport Utils from './utils.js';\n\n/**\n * The main class that arranges the whole parsing process.\n */\nclass Parser {\n  /**\n   * Create instance of Parser\n   *\n   * @param {String} UA User-Agent string\n   * @param {Boolean} [skipParsing=false] parser can skip parsing in purpose of performance\n   * improvements if you need to make a more particular parsing\n   * like {@link Parser#parseBrowser} or {@link Parser#parsePlatform}\n   *\n   * @throw {Error} in case of empty UA String\n   *\n   * @constructor\n   */\n  constructor(UA, skipParsing = false) {\n    if (UA === void (0) || UA === null || UA === '') {\n      throw new Error(\"UserAgent parameter can't be empty\");\n    }\n\n    this._ua = UA;\n\n    /**\n     * @typedef ParsedResult\n     * @property {Object} browser\n     * @property {String|undefined} [browser.name]\n     * Browser name, like `\"Chrome\"` or `\"Internet Explorer\"`\n     * @property {String|undefined} [browser.version] Browser version as a String `\"12.01.45334.10\"`\n     * @property {Object} os\n     * @property {String|undefined} [os.name] OS name, like `\"Windows\"` or `\"macOS\"`\n     * @property {String|undefined} [os.version] OS version, like `\"NT 5.1\"` or `\"10.11.1\"`\n     * @property {String|undefined} [os.versionName] OS name, like `\"XP\"` or `\"High Sierra\"`\n     * @property {Object} platform\n     * @property {String|undefined} [platform.type]\n     * platform type, can be either `\"desktop\"`, `\"tablet\"` or `\"mobile\"`\n     * @property {String|undefined} [platform.vendor] Vendor of the device,\n     * like `\"Apple\"` or `\"Samsung\"`\n     * @property {String|undefined} [platform.model] Device model,\n     * like `\"iPhone\"` or `\"Kindle Fire HD 7\"`\n     * @property {Object} engine\n     * @property {String|undefined} [engine.name]\n     * Can be any of this: `WebKit`, `Blink`, `Gecko`, `Trident`, `Presto`, `EdgeHTML`\n     * @property {String|undefined} [engine.version] String version of the engine\n     */\n    this.parsedResult = {};\n\n    if (skipParsing !== true) {\n      this.parse();\n    }\n  }\n\n  /**\n   * Get UserAgent string of current Parser instance\n   * @return {String} User-Agent String of the current <Parser> object\n   *\n   * @public\n   */\n  getUA() {\n    return this._ua;\n  }\n\n  /**\n   * Test a UA string for a regexp\n   * @param {RegExp} regex\n   * @return {Boolean}\n   */\n  test(regex) {\n    return regex.test(this._ua);\n  }\n\n  /**\n   * Get parsed browser object\n   * @return {Object}\n   */\n  parseBrowser() {\n    this.parsedResult.browser = {};\n\n    const browserDescriptor = Utils.find(browserParsersList, (_browser) => {\n      if (typeof _browser.test === 'function') {\n        return _browser.test(this);\n      }\n\n      if (_browser.test instanceof Array) {\n        return _browser.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (browserDescriptor) {\n      this.parsedResult.browser = browserDescriptor.describe(this.getUA());\n    }\n\n    return this.parsedResult.browser;\n  }\n\n  /**\n   * Get parsed browser object\n   * @return {Object}\n   *\n   * @public\n   */\n  getBrowser() {\n    if (this.parsedResult.browser) {\n      return this.parsedResult.browser;\n    }\n\n    return this.parseBrowser();\n  }\n\n  /**\n   * Get browser's name\n   * @return {String} Browser's name or an empty string\n   *\n   * @public\n   */\n  getBrowserName(toLowerCase) {\n    if (toLowerCase) {\n      return String(this.getBrowser().name).toLowerCase() || '';\n    }\n    return this.getBrowser().name || '';\n  }\n\n\n  /**\n   * Get browser's version\n   * @return {String} version of browser\n   *\n   * @public\n   */\n  getBrowserVersion() {\n    return this.getBrowser().version;\n  }\n\n  /**\n   * Get OS\n   * @return {Object}\n   *\n   * @example\n   * this.getOS();\n   * {\n   *   name: 'macOS',\n   *   version: '10.11.12'\n   * }\n   */\n  getOS() {\n    if (this.parsedResult.os) {\n      return this.parsedResult.os;\n    }\n\n    return this.parseOS();\n  }\n\n  /**\n   * Parse OS and save it to this.parsedResult.os\n   * @return {*|{}}\n   */\n  parseOS() {\n    this.parsedResult.os = {};\n\n    const os = Utils.find(osParsersList, (_os) => {\n      if (typeof _os.test === 'function') {\n        return _os.test(this);\n      }\n\n      if (_os.test instanceof Array) {\n        return _os.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (os) {\n      this.parsedResult.os = os.describe(this.getUA());\n    }\n\n    return this.parsedResult.os;\n  }\n\n  /**\n   * Get OS name\n   * @param {Boolean} [toLowerCase] return lower-cased value\n   * @return {String} name of the OS  macOS, Windows, Linux, etc.\n   */\n  getOSName(toLowerCase) {\n    const { name } = this.getOS();\n\n    if (toLowerCase) {\n      return String(name).toLowerCase() || '';\n    }\n\n    return name || '';\n  }\n\n  /**\n   * Get OS version\n   * @return {String} full version with dots ('10.11.12', '5.6', etc)\n   */\n  getOSVersion() {\n    return this.getOS().version;\n  }\n\n  /**\n   * Get parsed platform\n   * @return {{}}\n   */\n  getPlatform() {\n    if (this.parsedResult.platform) {\n      return this.parsedResult.platform;\n    }\n\n    return this.parsePlatform();\n  }\n\n  /**\n   * Get platform name\n   * @param {Boolean} [toLowerCase=false]\n   * @return {*}\n   */\n  getPlatformType(toLowerCase = false) {\n    const { type } = this.getPlatform();\n\n    if (toLowerCase) {\n      return String(type).toLowerCase() || '';\n    }\n\n    return type || '';\n  }\n\n  /**\n   * Get parsed platform\n   * @return {{}}\n   */\n  parsePlatform() {\n    this.parsedResult.platform = {};\n\n    const platform = Utils.find(platformParsersList, (_platform) => {\n      if (typeof _platform.test === 'function') {\n        return _platform.test(this);\n      }\n\n      if (_platform.test instanceof Array) {\n        return _platform.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (platform) {\n      this.parsedResult.platform = platform.describe(this.getUA());\n    }\n\n    return this.parsedResult.platform;\n  }\n\n  /**\n   * Get parsed engine\n   * @return {{}}\n   */\n  getEngine() {\n    if (this.parsedResult.engine) {\n      return this.parsedResult.engine;\n    }\n\n    return this.parseEngine();\n  }\n\n  /**\n   * Get engines's name\n   * @return {String} Engines's name or an empty string\n   *\n   * @public\n   */\n  getEngineName(toLowerCase) {\n    if (toLowerCase) {\n      return String(this.getEngine().name).toLowerCase() || '';\n    }\n    return this.getEngine().name || '';\n  }\n\n  /**\n   * Get parsed platform\n   * @return {{}}\n   */\n  parseEngine() {\n    this.parsedResult.engine = {};\n\n    const engine = Utils.find(enginesParsersList, (_engine) => {\n      if (typeof _engine.test === 'function') {\n        return _engine.test(this);\n      }\n\n      if (_engine.test instanceof Array) {\n        return _engine.test.some(condition => this.test(condition));\n      }\n\n      throw new Error(\"Browser's test function is not valid\");\n    });\n\n    if (engine) {\n      this.parsedResult.engine = engine.describe(this.getUA());\n    }\n\n    return this.parsedResult.engine;\n  }\n\n  /**\n   * Parse full information about the browser\n   * @returns {Parser}\n   */\n  parse() {\n    this.parseBrowser();\n    this.parseOS();\n    this.parsePlatform();\n    this.parseEngine();\n\n    return this;\n  }\n\n  /**\n   * Get parsed result\n   * @return {ParsedResult}\n   */\n  getResult() {\n    return Utils.assign({}, this.parsedResult);\n  }\n\n  /**\n   * Check if parsed browser matches certain conditions\n   *\n   * @param {Object} checkTree It's one or two layered object,\n   * which can include a platform or an OS on the first layer\n   * and should have browsers specs on the bottom-laying layer\n   *\n   * @returns {Boolean|undefined} Whether the browser satisfies the set conditions or not.\n   * Returns `undefined` when the browser is no described in the checkTree object.\n   *\n   * @example\n   * const browser = Bowser.getParser(window.navigator.userAgent);\n   * if (browser.satisfies({chrome: '>118.01.1322' }))\n   * // or with os\n   * if (browser.satisfies({windows: { chrome: '>118.01.1322' } }))\n   * // or with platforms\n   * if (browser.satisfies({desktop: { chrome: '>118.01.1322' } }))\n   */\n  satisfies(checkTree) {\n    const platformsAndOSes = {};\n    let platformsAndOSCounter = 0;\n    const browsers = {};\n    let browsersCounter = 0;\n\n    const allDefinitions = Object.keys(checkTree);\n\n    allDefinitions.forEach((key) => {\n      const currentDefinition = checkTree[key];\n      if (typeof currentDefinition === 'string') {\n        browsers[key] = currentDefinition;\n        browsersCounter += 1;\n      } else if (typeof currentDefinition === 'object') {\n        platformsAndOSes[key] = currentDefinition;\n        platformsAndOSCounter += 1;\n      }\n    });\n\n    if (platformsAndOSCounter > 0) {\n      const platformsAndOSNames = Object.keys(platformsAndOSes);\n      const OSMatchingDefinition = Utils.find(platformsAndOSNames, name => (this.isOS(name)));\n\n      if (OSMatchingDefinition) {\n        const osResult = this.satisfies(platformsAndOSes[OSMatchingDefinition]);\n\n        if (osResult !== void 0) {\n          return osResult;\n        }\n      }\n\n      const platformMatchingDefinition = Utils.find(\n        platformsAndOSNames,\n        name => (this.isPlatform(name)),\n      );\n      if (platformMatchingDefinition) {\n        const platformResult = this.satisfies(platformsAndOSes[platformMatchingDefinition]);\n\n        if (platformResult !== void 0) {\n          return platformResult;\n        }\n      }\n    }\n\n    if (browsersCounter > 0) {\n      const browserNames = Object.keys(browsers);\n      const matchingDefinition = Utils.find(browserNames, name => (this.isBrowser(name, true)));\n\n      if (matchingDefinition !== void 0) {\n        return this.compareVersion(browsers[matchingDefinition]);\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Check if the browser name equals the passed string\n   * @param browserName The string to compare with the browser name\n   * @param [includingAlias=false] The flag showing whether alias will be included into comparison\n   * @returns {boolean}\n   */\n  isBrowser(browserName, includingAlias = false) {\n    const defaultBrowserName = this.getBrowserName().toLowerCase();\n    let browserNameLower = browserName.toLowerCase();\n    const alias = Utils.getBrowserTypeByAlias(browserNameLower);\n\n    if (includingAlias && alias) {\n      browserNameLower = alias.toLowerCase();\n    }\n    return browserNameLower === defaultBrowserName;\n  }\n\n  compareVersion(version) {\n    let expectedResults = [0];\n    let comparableVersion = version;\n    let isLoose = false;\n\n    const currentBrowserVersion = this.getBrowserVersion();\n\n    if (typeof currentBrowserVersion !== 'string') {\n      return void 0;\n    }\n\n    if (version[0] === '>' || version[0] === '<') {\n      comparableVersion = version.substr(1);\n      if (version[1] === '=') {\n        isLoose = true;\n        comparableVersion = version.substr(2);\n      } else {\n        expectedResults = [];\n      }\n      if (version[0] === '>') {\n        expectedResults.push(1);\n      } else {\n        expectedResults.push(-1);\n      }\n    } else if (version[0] === '=') {\n      comparableVersion = version.substr(1);\n    } else if (version[0] === '~') {\n      isLoose = true;\n      comparableVersion = version.substr(1);\n    }\n\n    return expectedResults.indexOf(\n      Utils.compareVersions(currentBrowserVersion, comparableVersion, isLoose),\n    ) > -1;\n  }\n\n  isOS(osName) {\n    return this.getOSName(true) === String(osName).toLowerCase();\n  }\n\n  isPlatform(platformType) {\n    return this.getPlatformType(true) === String(platformType).toLowerCase();\n  }\n\n  isEngine(engineName) {\n    return this.getEngineName(true) === String(engineName).toLowerCase();\n  }\n\n  /**\n   * Is anything? Check if the browser is called \"anything\",\n   * the OS called \"anything\" or the platform called \"anything\"\n   * @param {String} anything\n   * @param [includingAlias=false] The flag showing whether alias will be included into comparison\n   * @returns {Boolean}\n   */\n  is(anything, includingAlias = false) {\n    return this.isBrowser(anything, includingAlias) || this.isOS(anything)\n      || this.isPlatform(anything);\n  }\n\n  /**\n   * Check if any of the given values satisfies this.is(anything)\n   * @param {String[]} anythings\n   * @returns {Boolean}\n   */\n  some(anythings = []) {\n    return anythings.some(anything => this.is(anything));\n  }\n}\n\nexport default Parser;\n","/*!\n * Bowser - a browser detector\n * https://github.com/lancedikson/bowser\n * MIT License | (c) Dustin Diaz 2012-2015\n * MIT License | (c) Denis Demchenko 2015-2019\n */\nimport Parser from './parser.js';\nimport {\n  BROWSER_MAP,\n  ENGINE_MAP,\n  OS_MAP,\n  PLATFORMS_MAP,\n} from './constants.js';\n\n/**\n * Bowser class.\n * Keep it simple as much as it can be.\n * It's supposed to work with collections of {@link Parser} instances\n * rather then solve one-instance problems.\n * All the one-instance stuff is located in Parser class.\n *\n * @class\n * @classdesc Bowser is a static object, that provides an API to the Parsers\n * @hideconstructor\n */\nclass Bowser {\n  /**\n   * Creates a {@link Parser} instance\n   *\n   * @param {String} UA UserAgent string\n   * @param {Boolean} [skipParsing=false] Will make the Parser postpone parsing until you ask it\n   * explicitly. Same as `skipParsing` for {@link Parser}.\n   * @returns {Parser}\n   * @throws {Error} when UA is not a String\n   *\n   * @example\n   * const parser = Bowser.getParser(window.navigator.userAgent);\n   * const result = parser.getResult();\n   */\n  static getParser(UA, skipParsing = false) {\n    if (typeof UA !== 'string') {\n      throw new Error('UserAgent should be a string');\n    }\n    return new Parser(UA, skipParsing);\n  }\n\n  /**\n   * Creates a {@link Parser} instance and runs {@link Parser.getResult} immediately\n   *\n   * @param UA\n   * @return {ParsedResult}\n   *\n   * @example\n   * const result = Bowser.parse(window.navigator.userAgent);\n   */\n  static parse(UA) {\n    return (new Parser(UA)).getResult();\n  }\n\n  static get BROWSER_MAP() {\n    return BROWSER_MAP;\n  }\n\n  static get ENGINE_MAP() {\n    return ENGINE_MAP;\n  }\n\n  static get OS_MAP() {\n    return OS_MAP;\n  }\n\n  static get PLATFORMS_MAP() {\n    return PLATFORMS_MAP;\n  }\n}\n\nexport default Bowser;\n","import Bowser from 'bowser/src/bowser.js'\n\nexport default class Browser {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    const documentElement = document.documentElement\n\n    // Browser detect\n    const browser = Bowser.getParser(window.navigator.userAgent)\n\n    // Platform type class\n    documentElement.classList.add('is-' + browser.getPlatformType())\n\n    if (browser.is('mobile') || browser.is('tablet')) {\n      documentElement.classList.add('is-handheld')\n    }\n\n    // Browser class\n    if (browser.is('Safari')) {\n      documentElement.classList.add('is-safari')\n      documentElement.classList.add('is-safari-' + browser.getBrowserVersion())\n    }\n\n    luge.browser = browser\n  }\n}\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nclass ViewportObserver {\n  constructor () {\n    this.elements = []\n\n    LifeCycle.add('siteInit', this.init.bind(this), 20)\n  }\n\n  /**\n   * Init\n   */\n  init (done) {\n    this.createObserver()\n\n    done()\n  }\n\n  /**\n   * Create observer\n   */\n  createObserver () {\n    this.observer = new IntersectionObserver(\n      this.intersectionCallback.bind(this),\n      {\n        threshold: [Luge.settings.intersection.threshold]\n      }\n    )\n  }\n\n  /**\n   * Intersection callback\n   * @param {IntersectionObserverEntry[]} entries IntersectionObserverEntry objects\n   */\n  intersectionCallback (entries) {\n    entries.forEach((entry) => {\n      const element = entry.target\n      let position = 'in'\n\n      if (!entry.isIntersecting) {\n        if (entry.boundingClientRect.y <= 0) {\n          position = 'above'\n        } else {\n          position = 'under'\n        }\n      }\n\n      if (element.luge.viewport.position !== position) {\n        element.luge.viewport.position = position\n\n        element.dispatchEvent(new CustomEvent('viewportintersect'))\n\n        if (position === 'in') {\n          element.dispatchEvent(new CustomEvent('viewportin'))\n        } else {\n          element.dispatchEvent(new CustomEvent('viewportout'))\n          element.dispatchEvent(new CustomEvent('viewport' + position))\n        }\n      }\n    })\n  }\n\n  /**\n   * Add element to observe\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    this.observer.observe(element)\n\n    const properties = {\n      viewport: {\n        position: 'out'\n      }\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n  }\n\n  /**\n   * Remove observed element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    this.observer.unobserve(element)\n  }\n}\n\nexport default new ViewportObserver()\n","import Luge from './Core'\n\nclass Ticker {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.callbacks = []\n    this.onceCallbacks = []\n\n    if (!Luge.settings.ticker.external) {\n      this.fps = 60\n      this.fpsInterval = 1000 / this.fps\n      this.lastTickTime = null\n\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Add a tick function\n   * @param {Function} callback Tick function\n   * @param {Object} context Context\n   */\n  add (callback, context) {\n    let exists = false\n    this.callbacks.forEach(object => {\n      if (object.cb === callback && object.context === context) {\n        exists = true\n      }\n    })\n\n    if (!exists) {\n      this.callbacks.push({\n        cb: callback,\n        context: context\n      })\n    }\n  }\n\n  /**\n   * Remove a tick function\n   * @param {String} id Tick ID\n   * @param {Object} context Context\n   */\n  remove (callback, context) {\n    const self = this\n\n    this.callbacks.forEach((object, index) => {\n      if (object.cb === callback && object.context === context) {\n        delete self.callbacks[index]\n      }\n    })\n  }\n\n  /**\n   * Execute function at next tick\n   * @param {Function} callback Function to execute\n   * @param {Object} context Context\n   */\n  nextTick (callback, context) {\n    this.onceCallbacks.push({\n      cb: callback,\n      context: context\n    })\n  }\n\n  /**\n   * Call tick function\n   */\n  _tick (nowTime) {\n    const elapsedTime = nowTime - this.lastTickTime\n\n    if (elapsedTime > this.fpsInterval) {\n      this.tick(nowTime)\n      this.lastTickTime = nowTime - (elapsedTime % this.fpsInterval)\n    }\n\n    if (!Luge.settings.ticker.external) {\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Call tick functions\n   */\n  tick (nowTime) {\n    const self = this\n\n    this.callbacks.forEach(object => {\n      object.cb.apply(object.context, [nowTime])\n    })\n\n    this.onceCallbacks.forEach((object, index) => {\n      object.cb.apply(object.context, [nowTime])\n\n      delete self.onceCallbacks[index]\n    })\n  }\n}\n\nexport default new Ticker()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass MouseObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n\n    this.timeouts = {\n      scroll: null\n    }\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    Ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('mouseMove', this.mouseHandler, this)\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n    }, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    clearTimeout(this.timeouts.scroll)\n    this.timeouts.scroll = setTimeout(this.getBoundingThrottle.bind(this), 75)\n  }\n\n  /**\n   * Mouse handler\n   */\n  mouseHandler () {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.setElementPosition(element)\n    })\n\n    window.mouseLastScrollTop = window.scrollTop\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.elementsToBound = this.elements\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bouding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n      this.setElementPosition(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    const properties = {\n      anchor: {\n        x: bounding.left,\n        y: bounding.top + window.unifiedScrollTop\n      },\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Set element position\n   * @param {HTMLElement} element Element\n   */\n  setElementPosition (element) {\n    if (element.luge && element.luge.anchor) {\n      const mouse = {\n        x: window.mouseX - element.luge.anchor.x,\n        y: window.mouseY - element.luge.anchor.y + window.unifiedScrollTop\n      }\n\n      mouse.progressX = Helpers.clamp(mouse.x / element.luge.width, 0, 1)\n      mouse.progressY = Helpers.clamp(mouse.y / element.luge.height, 0, 1)\n\n      element.luge.mouse = Helpers.mergeDeep(element.luge.mouse, mouse)\n    }\n  }\n\n  /**\n   * Add mouse element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove mouse element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    const self = this\n    const diffScroll = window.scrollTop - window.mouseLastScrollTop\n\n    if (diffScroll !== 0) {\n      this.elements.forEach(element => {\n        self.setElementPosition(element)\n      })\n    }\n  }\n}\n\nexport default new MouseObserver()\n","import Emitter from './Emitter'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass ScrollObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    this.setMaxScrollTop()\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n      this.checkElementsThrottle()\n    }, this)\n  }\n\n  /**\n   * Set max scroll top\n   */\n  setMaxScrollTop () {\n    window.maxScrollTop = Math.max(\n      document.body ? document.body.scrollHeight : 0,\n      document.body ? document.body.offsetHeight : 0,\n      document.documentElement.clientHeight,\n      document.documentElement.scrollHeight,\n      document.documentElement.offsetHeight\n    ) - window.innerHeight\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.setMaxScrollTop()\n\n    this.elements.forEach(element => {\n      if (!this.elementsToBound.includes(element)) {\n        element.scrollProgress = 0\n\n        this.elementsToBound.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bounding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    element.scrollStart = bounding.top + window.unifiedScrollTop - window.innerHeight\n\n    element.scrollEnd = element.scrollStart + element.clientHeight + window.innerHeight\n    element.scrollEnd = Math.min(element.scrollEnd, window.maxScrollTop)\n\n    element.scrollMiddle = element.scrollStart + (element.scrollEnd - element.scrollStart) / 2\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Check elements throttle\n   */\n  checkElementsThrottle () {\n    this.elements.forEach(element => {\n      if (!this.elementsToCheck.includes(element)) {\n        this.elementsToCheck.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.checkElements.bind(this))\n  }\n\n  /**\n   * Check elements position\n   */\n  checkElements () {\n    this.elementsToCheck.forEach(element => {\n      this.checkElement(element)\n    })\n    this.elementsToCheck = []\n  }\n\n  /**\n   * Check individual element position\n   * @param {HTMLElement} element Element to check\n   */\n  checkElement (element) {\n    const scrollTop = window.unifiedScrollTop\n\n    let position = ''\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = Math.min(Math.max(scrollTop / element.scrollEnd, 0), 1)\n    } else {\n      progress = Math.min(Math.max((scrollTop - element.scrollStart) / (element.scrollEnd - element.scrollStart), 0), 1)\n    }\n\n    if (isNaN(progress)) {\n      progress = 0\n    }\n\n    if (progress <= 0 && element.scrollStart > 0) {\n      position = 'under'\n    } else if (progress >= 1 && element.scrollEnd < window.maxScrollTop) {\n      position = 'above'\n    } else {\n      position = 'in'\n    }\n\n    element.scrollProgress = progress\n\n    if (element.viewportPosition !== position) {\n      element.viewportPosition = position\n\n      element.dispatchEvent(new CustomEvent('viewportintersect'))\n      element.dispatchEvent(new CustomEvent('viewport' + position))\n\n      if (position !== 'in') {\n        element.dispatchEvent(new CustomEvent('viewportout'))\n      }\n\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    } else if (progress > 0 && progress < 1) {\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    }\n  }\n\n  /**\n   * Add scroll element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      element.scrollProgress = 0\n\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n        this.elementsToCheck.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove scroll element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n\n    if (this.elementsToCheck.includes(element)) {\n      this.elementsToCheck.splice(this.elementsToCheck.indexOf(element), 1)\n    }\n  }\n}\n\nexport default new ScrollObserver()\n","import LifeCycle from './LifeCycle'\nimport Core from './Core'\nimport Emitter from './Emitter'\nimport ViewportObserver from './ViewportObserver'\nimport MouseObserver from './MouseObserver'\nimport ScrollObserver from './ScrollObserver'\nimport Ticker from './Ticker'\n\nclass Luge {\n  plugins = {}\n\n  constructor() {\n    this.emitter = {\n      emit: Emitter.emit.bind(Emitter),\n      off: Emitter.off.bind(Emitter),\n      on: Emitter.on.bind(Emitter),\n      once: Emitter.once.bind(Emitter)\n    }\n\n    this.viewportobserver = {\n      add: ViewportObserver.add.bind(ViewportObserver),\n      remove: ViewportObserver.remove.bind(ViewportObserver)\n    }\n\n    this.lifecycle = {\n      add: LifeCycle.add.bind(LifeCycle),\n      refresh: LifeCycle.cycle.bind(LifeCycle, 'refresh'),\n      remove: LifeCycle.remove.bind(LifeCycle),\n      debug: LifeCycle.enableDebug.bind(LifeCycle),\n      _cycle: LifeCycle.cycle.bind(LifeCycle)\n    }\n\n    this.mouseobserver = {\n      add: MouseObserver.add.bind(MouseObserver),\n      remove: MouseObserver.remove.bind(MouseObserver)\n    }\n\n    this.scrollobserver = {\n      add: ScrollObserver.add.bind(ScrollObserver),\n      remove: ScrollObserver.remove.bind(ScrollObserver)\n    }\n\n    this.ticker = {\n      add: Ticker.add.bind(Ticker),\n      nextTick: Ticker.nextTick.bind(Ticker),\n      remove: Ticker.remove.bind(Ticker),\n      tick: Ticker.tick.bind(Ticker)\n    }\n\n    // TODO!: rename to setSettings\n    this.settings = Core.setSettings.bind(Core)\n  }\n\n  init() {\n    // Site init on DOM ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', LifeCycle.cycle.bind(LifeCycle, 'load'), { once: true })\n    } else {\n      this.ticker.nextTick(() => {\n        LifeCycle.cycle('load')\n      },\n      null)\n    }\n  }\n\n  addPlugin(key, Plugin) {\n    this.plugins[key] = new Plugin(this)\n  }\n\n  get _settings() {\n    return Core.settings\n  }\n}\n\nexport default Luge\n"],"names":["Helpers","isObject","item","Array","isArray","isString","mergeDeep","target","source","output","Object","assign","keys","forEach","key","toCamelCase","string","replace","word","index","toLowerCase","toUpperCase","deepFreeze","obj","prop","freeze","clamp","x","lower","upper","Math","min","max","Emitter$2","constructor","this","events","on","name","callback","context","once","push","cb","emit","self","data","slice","call","arguments","object","apply","off","LifeCycle$2","eventsName","eventName","callbacks","done","cycles","load","reload","transition","refresh","debug","cycle","cycleName","current","console","log","proceed","length","event","do","next","wait","requestAnimationFrame","bind","add","position","remove","Emitter","sort","a","b","enableDebug","value","Core","settings","cursor","inertia","trailLength","intersection","threshold","lottie","renderer","subFrame","mouse","parallax","preloader","duration","reveal","stagger","scroll","smooth","ticker","external","credits","show","timeouts","resizeThrottle","scrollEnd","windowWidth","windowHeight","clientWidth","window","scrollTop","scrollY","unifiedScrollTop","maxScrollTop","scrollProgress","previousScrollTop","isScrolling","mouseX","mouseY","mouseLastScrollTop","LifeCycle","siteInit","bindEvents","setSettings","showCredits","setCSSProperties","scrollHandler","addEventListener","mouseHandler","passive","e","pageY","pageX","clearTimeout","setTimeout","resizeHandler","newWidth","innerWidth","document","body","newHeight","innerHeight","clientHeight","documentElement","style","setProperty","scrollStart","hasSmoothScroll","updateScroll","classList","consoleBaseStyle","Plugin","slug","pluginSlug","beforeInit","isDisabled","disabled","init","setAttributes","Luge","pluginAttributes","getAttributes","element","attributes","attribute","attributeKey","attributeValue","dataset","type","defaultValue","undefined","Boolean","luge","PreLoader","super","intro","playerIn","startTime","Date","now","doneLoad","el","querySelector","root","initLottie","lifecycle","siteIn","pageLoad","String","Number","_settings","in","reverse","elapsed","remaining","clear","play","getComputedStyle","getPropertyValue","destroy","parentNode","removeChild","animIn","loadAnimation","container","loop","autoplay","path","rendererSettings","preserveAspectRatio","setDirection","goToAndStop","totalFrames","setAttribute","Reveal","elements","toRevealIn","toRevealOut","reveals","out","canReveal","onScrollProgress","pageInit","pageKill","manual","multiple","delay","emitter","updateHandler","addElements","querySelectorAll","addElement","includes","closest","revealName","revealCallback","setRevealClasses","scrollobserver","from","children","child","childRevealName","lgReveal","nextTick","lgRevealChild","isRevealed","removeElement","removeEventListener","splice","indexOf","round","revealElements","revealInTimeout","state","states","split","dispatchEvent","CustomEvent","Transition","url","location","href","pathname","pageFetched","currentPage","prevScrollTop","newScrollTop","transitions","listeners","linkHandler","hasAttribute","initLoader","historyStateChanged","pageFetch","pageOut","pageIn","pageCreate","bindLinksEvent","unbindLinksEvent","currentTarget","getAttribute","origin","preventDefault","navigateTo","history","pushState","prefetchLink","createElement","rel","head","appendChild","_cycle","loader","animOut","playerOut","fetch","credentials","then","response","text","html","DOMParser","parseFromString","newPage","insertAdjacentElement","opacity","top","left","width","className","oldTitle","newTitle","innerText","behavior","smoothScrollTop","oldPage","page","pageName","onpageout","default","stop","svgElement","onpagein","contains","goToAndPlay","URL","ScrollAnimation","allowedProperties","transformProperties","presets","tick","yoyo","animate","randInertia","match","random","scrollAnimation","smoothProgress","properties","JSON","parse","declarations","property","values","fromValue","toValue","unit","safeProperty","to","animation","atDest","progress","abs","entries","translate3d","transform","y","z","join","styles","willChange","diff","t","i","exp","SmoothScroll","hasSmooth","lenis","Lenis","raf","Cursor","cursors","pointers","trails","hoverTags","hide","hoverHandler","capture","pointer","smoothPosition","trail","svg","createElementNS","points","tag","tagName","hover","toggle","timestamp","shift","d","svgPath","command","reduce","acc","point","line","pointA","pointB","lengthX","lengthY","sqrt","pow","angle","atan2","controlPoint","previous","o","PI","cos","sin","bezierCommand","cpsX","cpsY","cpeX","cpeY","Intersection","onViewportIntersect","class","viewportobserver","viewport","CSSClass","LottiePlayer","deferInit","ScrollObserver","loopFrame","required","force","lazy","subframe","waitLoad","player","isLoaded","toAutoplay","toLoad","requireds","initPlayer","viewportPosition","isPaused","scrollPaused","pause","initLazy","setSubframe","setPlayerStateClasses","currentFrame","playDirection","playerLoaded","playing","MouseAnimation","mouseSpeed","getMouseMovement","mouseobserver","smoothX","smoothY","smoothProgressX","smoothProgressY","distX","distY","dist","hypot","mouseAngle","mouseDirection","progressX","progressY","diffX","diffY","Parallax","disable","amplitude","anchor","randAmplitude","enable","browser","is","overflow","firstElementChild","movement","smoothMovement","moveElement","BROWSER_ALIASES_MAP","Bada","BlackBerry","Chrome","Chromium","Electron","Epiphany","Firefox","Focus","Generic","Googlebot","Maxthon","Opera","PhantomJS","Puffin","QupZilla","QQ","QQLite","Safari","Sailfish","SeaMonkey","Sleipnir","Swing","Tizen","Vivaldi","WeChat","Roku","BROWSER_MAP","amazon_silk","android","bada","blackberry","chrome","chromium","electron","epiphany","firefox","focus","generic","googlebot","google_search","ie","k_meleon","maxthon","edge","mz","naver","opera","opera_coast","phantomjs","puffin","qupzilla","qq","qqlite","safari","sailfish","samsung_internet","seamonkey","sleipnir","swing","tizen","uc","vivaldi","webos","wechat","yandex","PLATFORMS_MAP","tablet","mobile","desktop","tv","OS_MAP","WindowsPhone","Windows","MacOS","iOS","Android","WebOS","Linux","ChromeOS","PlayStation4","ENGINE_MAP","EdgeHTML","Blink","Trident","Presto","Gecko","WebKit","Utils","getFirstMatch","regexp","ua","getSecondMatch","matchAndReturnConst","_const","test","getWindowsVersionName","version","getMacOSVersionName","v","map","s","parseInt","getAndroidVersionName","getVersionPrecision","compareVersions","versionA","versionB","isLoose","versionAPrecision","versionBPrecision","precision","lastPrecision","chunks","delta","_version","chunk","arr","iterator","result","prototype","find","predicate","l","assigners","assigner","getBrowserAlias","browserName","getBrowserTypeByAlias","browserAlias","commonVersionIdentifier","browsersList","describe","parser","notLikeAndroid","butAndroid","search","osParsersList","versionName","os","platformParsersList","vendor","model","platform","iDevice","likeIDevice","getBrowserName","osMajorVersion","getOSVersion","getOSName","enginesParsersList","engine","isGecko","likeGecko","Parser","UA","skipParsing","Error","_ua","parsedResult","getUA","regex","parseBrowser","browserDescriptor","browserParsersList","_browser","some","condition","getBrowser","getBrowserVersion","getOS","parseOS","_os","getPlatform","parsePlatform","getPlatformType","_platform","getEngine","parseEngine","getEngineName","_engine","getResult","satisfies","checkTree","platformsAndOSes","platformsAndOSCounter","browsers","browsersCounter","currentDefinition","platformsAndOSNames","OSMatchingDefinition","isOS","osResult","platformMatchingDefinition","isPlatform","platformResult","browserNames","matchingDefinition","isBrowser","compareVersion","includingAlias","defaultBrowserName","browserNameLower","alias","expectedResults","comparableVersion","currentBrowserVersion","substr","osName","platformType","isEngine","engineName","anything","anythings","Bowser$1","getParser","Browser","Bowser","navigator","userAgent","ViewportObserver$1","createObserver","observer","IntersectionObserver","intersectionCallback","entry","isIntersecting","boundingClientRect","observe","unobserve","Ticker$1","onceCallbacks","fps","fpsInterval","lastTickTime","_tick","exists","nowTime","elapsedTime","MouseObserver$1","elementsToBound","Ticker","getBoundingThrottle","setElementPosition","getBounding","setElementBounding","bounding","getBoundingClientRect","offsetWidth","height","offsetHeight","ScrollObserver$2","elementsToCheck","setMaxScrollTop","checkElementsThrottle","scrollHeight","scrollMiddle","checkElements","checkElement","isNaN","plugins","ViewportObserver","MouseObserver","readyState","addPlugin"],"mappings":"AAAA,MAAMA,EAMJ,eAAOC,CAASC,GACd,OAAQA,GAAwB,iBAATA,IAAsBC,MAAMC,QAAQF,EAC7D,CAOA,eAAOG,CAASH,GACd,OAAQA,GAAwB,iBAATA,CACzB,CAQA,gBAAOI,CAAUC,EAAQC,GACvB,MAAMC,EAASC,OAAOC,OAAO,GAAIJ,GAkBjC,OAjBIP,EAAQC,SAASM,IAAWP,EAAQC,SAASO,IAC/CE,OAAOE,KAAKJ,GAAQK,QAAQC,IACtBd,EAAQC,SAASO,EAAOM,IACpBA,KAAOP,EAITE,EAAOK,GADLd,EAAQC,SAASM,EAAOO,KAASd,EAAQC,SAASO,EAAOM,IAC7Cd,EAAQM,UAAUC,EAAOO,GAAMN,EAAOM,IAEtCN,EAAOM,GALvBJ,OAAOC,OAAOF,EAAQ,CAAEK,CAACA,GAAMN,EAAOM,KASxCJ,OAAOC,OAAOF,EAAQ,CAAEK,CAACA,GAAMN,EAAOM,IACxC,GAGGL,CACT,CAMA,kBAAOM,CAAaC,GAClB,OAAIhB,EAAQK,SAASW,GACZA,EAAOC,QAAQ,sBAAuB,CAACC,EAAMC,IACjC,IAAVA,EAAcD,EAAKE,cAAgBF,EAAKG,eAC9CJ,QAAQ,OAAQ,IAEZD,CAEX,CAOA,iBAAOM,CAAWC,GAIhB,OAHAb,OAAOE,KAAKW,GAAKV,QAAQW,IACE,iBAAdD,EAAIC,IAAoBxB,EAAQsB,WAAWC,EAAIC,GAC5D,GACOd,OAAOe,OAAOF,EACvB,CASA,YAAOG,CAAMC,EAAGC,EAAOC,GACrB,OAAOC,KAAKC,IAAIF,EAAOC,KAAKE,IAAIJ,EAAOD,GACzC,EAGF,MAAe3B,ECfIiC,EAAA,IAtEnB,MAIEC,WAAAA,GACEC,KAAKC,OAAS,EAChB,CASAC,EAAAA,CAAIC,EAAMC,EAAUC,EAASC,GAAO,IACjCN,KAAKC,OAAOE,KAAUH,KAAKC,OAAOE,GAAQ,KAAKI,KAAK,CACnDC,GAAIJ,EACJC,QAASA,EACTC,KAAMA,GAEV,CAQAA,IAAAA,CAAMH,EAAMC,EAAUC,GACpBL,KAAKE,GAAGC,EAAMC,EAAUC,GAAS,EACnC,CAMAI,IAAAA,CAAMN,GACJ,MAAMO,EAAOV,KACPW,EAAO,GAAGC,MAAMC,KAAKC,UAAW,GAElCd,KAAKC,OAAOE,IACdH,KAAKC,OAAOE,GAAMzB,QAAQ,CAACqC,EAAQ/B,KACjC+B,EAAOP,GAAGQ,MAAMD,EAAOV,QAASM,GAE5BI,EAAOT,aACFI,EAAKT,OAAOE,GAAMnB,EAC3B,EAGN,CAOAiC,GAAAA,CAAKd,EAAMC,GACT,MAAMM,EAAOV,KAETA,KAAKC,OAAOE,IACdH,KAAKC,OAAOE,GAAMzB,QAAQ,CAACqC,EAAQ/B,KAC7B+B,EAAOP,KAAOJ,UACTM,EAAKT,OAAOE,GAAMnB,EAC3B,EAGN,GC8LiBkC,EAAA,IA9PnB,MAIEnB,WAAAA,GACEC,KAAKmB,WAAa,CAChB,WACA,WACA,WACA,WACA,SACA,SACA,SACA,YACA,UACA,aACA,WACA,cAGFnB,KAAKC,OAAS,CAAA,EAEdD,KAAKmB,WAAWzC,QAAQ0C,IACtBpB,KAAKC,OAAOmB,GAAa,CACvBC,UAAW,GACXC,KAAM,EACR,GAGFtB,KAAKuB,OAAS,CACZC,KAAM,CACJvB,OAAQ,CACN,WACA,WACA,CAAC,WAAY,YACb,SACA,SACA,WAGJwB,OAAQ,CACNxB,OAAQ,CACN,UACA,eAGJyB,WAAY,CACVzB,OAAQ,CACN,CAAC,YAAa,WACd,aACA,WACA,WACA,WACA,SACA,WAGJ0B,QAAS,CACP1B,OAAQ,CACN,WACA,WACA,WACA,SACA,YAKND,KAAK4B,OAAQ,CACf,CAMAC,KAAAA,CAAOC,GACL,GAAI9B,KAAKuB,OAAOO,GAAY,CAC1B9B,KAAKuB,OAAOO,GAAWC,QAAU,EAE7B/B,KAAK4B,OACPI,QAAQC,IAAI,gBAAkBH,GAGhC,IAAK,MAAMV,KAAapB,KAAKC,OAC3BD,KAAKC,OAAOmB,GAAWE,KAAO,EAGhCtB,KAAKkC,QAAQJ,EACf,CACF,CAMAI,OAAAA,CAASJ,GACP,MAAM7B,EAASD,KAAKuB,OAAOO,GAAW7B,OAChC8B,EAAU/B,KAAKuB,OAAOO,GAAWC,QAEvC,GAAIA,EAAU9B,EAAOkC,OAAQ,CAC3B,MAAMC,EAAQnC,EAAO8B,GAGjB/D,MAAMC,QAAQmE,GAChBA,EAAM1D,QAAQ0C,IACZpB,KAAKqC,GAAGP,EAAWV,EACrB,GAEApB,KAAKqC,GAAGP,EAAWM,EAEvB,MAEMpC,KAAK4B,OACPI,QAAQC,IAAIH,EAAY,eAG9B,CAMAQ,IAAAA,CAAMR,GACJ,MAAMpB,EAAOV,KACPC,EAASD,KAAKuB,OAAOO,GAAW7B,OAChC8B,EAAU/B,KAAKuB,OAAOO,GAAWC,QAEvC,GAAIA,EAAU9B,EAAOkC,OAAQ,CAC3B,MAAMC,EAAQnC,EAAO8B,GAErB,IAAIO,GAAO,EACPC,EAAO,GAITA,EADmB,iBAAVH,EACFpE,MAAMoE,GAENA,EAILG,EAAKJ,OAAS,GAChBI,EAAK7D,QAAQ0C,KACyB,IAAhCV,EAAKT,OAAOmB,GAAWE,MAAcZ,EAAKT,OAAOmB,GAAWE,KAAOZ,EAAKT,OAAOmB,GAAWC,UAAUc,UACtGG,GAAO,EACT,GAIAA,IAEFtC,KAAKuB,OAAOO,GAAWC,UACvBS,sBAAsBxC,KAAKkC,QAAQO,KAAKzC,KAAM8B,IAIlD,CACF,CASAY,GAAAA,CAAKtB,EAAWhB,EAAUuC,EAAW,GAAIb,EAAY,MAC/C9B,KAAKC,OAAOmB,IACdpB,KAAKC,OAAOmB,GAAWC,UAAUd,KAAK,CACpCH,SAAUA,EACVuC,SAAUA,EACVd,MAAOC,GAGb,CAQAc,MAAAA,CAAQxB,EAAWhB,EAAU0B,EAAY,MACvC,MAAMpB,EAAOV,KAETA,KAAKC,OAAOmB,IACdpB,KAAKC,OAAOmB,GAAWC,UAAU3C,QAAQ,CAAC0D,EAAOpD,KAC3CoD,EAAMhC,WAAaA,GAAYgC,EAAMP,QAAUC,UAC1CpB,EAAKT,OAAOmB,GAAWC,UAAUrC,EAC1C,EAGN,CAOAqD,GAAIP,EAAWV,GACbpB,KAAKC,OAAOmB,GAAWE,KAAO,EAG1BtB,KAAKC,OAAOmB,GAAWC,UAAUc,OAAS,GACxCnC,KAAK4B,OACPI,QAAQC,IAAI,aAAeb,EAAY,KAAOU,EAAY,WAG5De,EAAQpC,KAAK5C,EAAQe,YAAY,UAAYwC,IAE3BpB,KAAKC,OAAOmB,GAAWC,UAAUyB,KAAK,CAACC,EAAGC,IACnDD,EAAEJ,SAAWK,EAAEL,UAGdjE,QAAQqC,IACK,OAAjBA,EAAOc,OAAkBd,EAAOc,QAAUC,EAC5Cf,EAAOX,SAAS,IAAMJ,KAAKsB,KAAKQ,EAAWV,IAE3CpB,KAAKsB,KAAKQ,EAAWV,EACvB,IAGFpB,KAAKsB,KAAKQ,EAAWV,EAEzB,CAMAE,IAAAA,CAAMQ,EAAWV,GACfpB,KAAKC,OAAOmB,GAAWE,OAEnBtB,KAAK4B,OACPI,QAAQC,IAAI,eAAiBb,EAAY,IAAMpB,KAAKC,OAAOmB,GAAWE,KAAO,IAAMtB,KAAKC,OAAOmB,GAAWC,UAAUc,OAAS,KAAOL,EAAY,WAI9I9B,KAAKC,OAAOmB,GAAWE,MAAQtB,KAAKC,OAAOmB,GAAWC,UAAUc,SAClEU,EAAQpC,KAAK5C,EAAQe,YAAY,SAAWwC,IAE5CpB,KAAKsC,KAAKR,EAAWV,GAEzB,CAMA6B,WAAAA,CAAaC,GAAQ,GACnBlD,KAAK4B,MAAQsB,CACf,GCjBiBC,EAAA,IAzOnB,MAIEpD,WAAAA,GAEEC,KAAKoD,SAAWvF,EAAQsB,WAAW,CACjCkE,OAAQ,CACNC,QAAS,EACTC,YAAa,IAEfC,aAAc,CACZC,UAAW,IAEbC,OAAQ,CACNC,SAAU,MACVC,UAAU,GAEZC,MAAO,CACLP,QAAS,IAEXQ,SAAU,CACRR,QAAS,IAEXS,UAAW,CACTC,SAAU,GAEZC,OAAQ,CACNC,QAAS,GACTT,UAAW,KAEbU,OAAQ,CACNb,QAAS,IAEXc,OAAQ,CACNd,QAAS,IAEXe,OAAQ,CACNC,UAAU,GAEZ5C,WAAY,CACVD,QAAQ,GAEV8C,QAAS,CACPC,MAAM,KAKVxE,KAAKyE,SAAW,CACdC,eAAgB,KAChBC,UAAW,MAIb3E,KAAK4E,YAAc,EACnB5E,KAAK6E,aAAe,EACpB7E,KAAK8E,YAAc,EAGnBC,OAAOC,UAAYD,OAAOE,QAC1BF,OAAOG,iBAAmBH,OAAOC,UACjCD,OAAOI,aAAe,EACtBJ,OAAOK,eAAiB,EACxBpF,KAAKqF,kBAAoBN,OAAOE,QAChCjF,KAAKsF,aAAc,EAGnBP,OAAOQ,QAAU,EACjBR,OAAOS,QAAU,EACjBT,OAAOU,mBAAqB,EAE5BC,EAAUhD,IAAI,WAAY1C,KAAK2F,SAASlD,KAAKzC,MAAO,KAEpDA,KAAK4F,YACP,CAKAC,WAAAA,CAAazC,GACXpD,KAAKoD,SAAWvF,EAAQsB,WAAWtB,EAAQM,UAAU6B,KAAKoD,SAAUA,GACtE,CAMAuC,QAAAA,CAAUrE,GACRtB,KAAK8F,cAEL9F,KAAK+F,mBAEL/F,KAAKgG,gBAEL1E,GACF,CAKAsE,UAAAA,GACEb,OAAOkB,iBAAiB,YAAajG,KAAKkG,aAAazD,KAAKzC,MAAO,CAAEmG,SAAS,IAC9EpB,OAAOkB,iBAAiB,SAAUjG,KAAK0E,eAAejC,KAAKzC,OAC3D+E,OAAOkB,iBAAiB,SAAUjG,KAAKgG,cAAcvD,KAAKzC,MAAO,CAAEmG,SAAS,GAC9E,CAMAD,YAAAA,CAAcE,GACZ,MACMZ,EAASY,EAAEC,MAAQtB,OAAOC,UAEhCD,OAAOQ,OAHQa,EAAEE,MAIjBvB,OAAOS,OAASA,EAEhB3C,EAAQpC,KAAK,YAAa2F,EAC5B,CAKA1B,cAAAA,GACE6B,aAAavG,KAAKyE,SAASC,gBAC3B1E,KAAKyE,SAASC,eAAiB8B,WAAWxG,KAAKyG,cAAchE,KAAKzC,MAAO,IAC3E,CAKAyG,aAAAA,GACEzG,KAAK+F,mBAELlD,EAAQpC,KAAK,SACf,CAKAsF,gBAAAA,GAEE,MAAMW,EAAW3B,OAAO4B,WACpB3G,KAAK4E,cAAgB8B,IACvB1G,KAAK4E,YAAc8B,EACnB1G,KAAK8E,YAAc8B,SAASC,KAAK/B,aAInC,MAAMgC,EAAY/B,OAAOgC,YACrB/G,KAAK6E,eAAiBiC,IACxB9G,KAAK6E,aAAeiC,EACpB9G,KAAKgH,aAAeJ,SAASC,KAAKG,cAGpCxE,sBAAsB,KACpBoE,SAASK,gBAAgBC,MAAMC,YAAY,OAA4B,IAAnBnH,KAAK4E,YAAsB,MAC/EgC,SAASK,gBAAgBC,MAAMC,YAAY,OAA4B,IAAnBnH,KAAK8E,YAAsB,MAE/E8B,SAASK,gBAAgBC,MAAMC,YAAY,OAA6B,IAApBnH,KAAK6E,aAAuB,MAChF+B,SAASK,gBAAgBC,MAAMC,YAAY,OAA6B,IAApBnH,KAAKgH,aAAuB,KAClF,EACF,CAKAhB,aAAAA,GACOhG,KAAKsF,aACRtF,KAAKoH,cAGPb,aAAavG,KAAKyE,SAASE,WAC3B3E,KAAKyE,SAASE,UAAY6B,WAAWxG,KAAK2E,UAAUlC,KAAKzC,MAAO,KAE3D+E,OAAOsC,iBACVrH,KAAKsH,cAET,CAKAA,YAAAA,GACEvC,OAAOC,UAAYD,OAAOE,QAG1BF,OAAOG,iBAAmBH,OAAOC,UAEjChF,KAAKqF,kBAAoBN,OAAOC,UAChCD,OAAOK,eAAiBL,OAAOC,UAAYD,OAAOI,aAElDtC,EAAQpC,KAAK,SACf,CAKA2G,WAAAA,GACEpH,KAAKsF,aAAc,EAEnBsB,SAASK,gBAAgBM,UAAU7E,IAAI,gBAEvCG,EAAQpC,KAAK,cACf,CAKAkE,SAAAA,GACE3E,KAAKsF,aAAc,EAEnBsB,SAASK,gBAAgBM,UAAU3E,OAAO,gBAE1CC,EAAQpC,KAAK,YACf,CAKAqF,WAAAA,GACE,GAAI9F,KAAKoD,SAASmB,QAAQC,KAAM,CAE9B,MAAMgD,EAAmB,uFAIzBxF,QAAQC,IAAI,wEAAoEuF,EAHvDA,EAAmB,sBAGwEA,EAF1F,4DAG5B,CACF,GCtOmB,MAAAC,EAInB1H,WAAAA,CAAa2H,GACX1H,KAAK2H,WAAaD,EAElBhC,EAAUhD,IAAI,WAAY1C,KAAK4H,WAAWnF,KAAKzC,MAAO,EACxD,CAKA4H,UAAAA,CAAYtG,GACVtB,KAAK6H,WAAa7H,KAAK8H,WAEnB9H,KAAK6H,WACPjB,SAASK,gBAAgBM,UAAU7E,IAAI,MAAQ1C,KAAK2H,WAAa,aAEjE3H,KAAK+H,OAGPzG,GACF,CAKAyG,IAAAA,GACE/H,KAAKgI,eACP,CAKAF,QAAAA,GACE,SAAUG,EAAK7E,SAASpD,KAAK2H,aAAe,CAAE,GAAEG,QAClD,CAKAE,aAAAA,GACEhI,KAAKkI,iBAAmB,CAAA,CAC1B,CAKAC,aAAAA,CAAeC,GACb,MAAMC,EAAarI,KAAKkI,iBAClBvH,EAAO,CAAA,EAEb,IAAK,MAAMR,KAAQkI,EAAY,CAC7B,MAAMC,EAAYD,EAAWlI,GAC7B,IAAIoI,EAAe,MAAQvI,KAAK2H,WACnB,SAATxH,IACFoI,GAAgB,IAAMpI,GAGxBoI,EAAe1K,EAAQe,YAAY2J,GACnC,MAAMC,EAAiBJ,EAAQK,QAAQF,GAEvC,IAAIG,EAAMxF,EAAOyF,EAEQ,iBAAdL,GACTI,EAAOJ,EAAU,GACjBK,EAAeL,EAAU,IAEzBI,EAAOJ,EAIPpF,OADqB0F,IAAnBJ,QAAiDI,IAAjBD,EAC1BD,EAAKC,SACeC,IAAnBJ,GAAgCE,IAASG,gBAEtBD,IAAnBJ,EACLE,IAASG,QACiB,UAAnBL,EAEDE,EAAKF,QAGPI,GAGVjI,EAAKR,GAAQ+C,CACf,CAMA,OAJIkF,EAAQU,OAASV,EAAQU,KAAO,OAClCV,EAAQU,KAAK9I,KAAK2H,YAAchH,GAG3BA,CACT,QChGmBoI,UAAkBtB,EAIrC1H,WAAAA,CAAa+I,GACXE,MAAM,aAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKiJ,OAAQ,EACbjJ,KAAKkJ,UAAW,EAChBlJ,KAAKmJ,UAAYC,KAAKC,MACtBrJ,KAAKsJ,SAAW,KAEhBR,EAAK/E,UAAY,CACfrB,IAAK1C,KAAK0C,IAAID,KAAKzC,MAEvB,CAKA+H,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAKuJ,GAAK3C,SAAS4C,cAAc,uBAE7BxJ,KAAKuJ,KACPvJ,KAAKqI,WAAarI,KAAKmI,cAAcnI,KAAKuJ,IAE1CvJ,KAAKuJ,GAAGhC,UAAU7E,IAAI,eAAgB,iBAAmB1C,KAAKqI,WAAWoB,MAEzEzJ,KAAK0J,aAEL1J,KAAK8I,KAAKa,UAAUjH,IAAI,SAAU1C,KAAK4J,OAAOnH,KAAKzC,QAGrDA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAK6J,SAASpH,KAAKzC,MACzD,CAKAgI,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAM,CAACK,OAAQ,IACf9F,SAAU,CAAC+F,OAAQ/J,KAAK8I,KAAKkB,UAAUjG,UAAUC,UACjDiG,GAAIH,OACJI,QAASrB,QAEb,CAMAgB,QAAAA,CAAUvI,GACJtB,KAAKqI,YAAuC,WAAzBrI,KAAKqI,WAAWoB,MAAuC,iBAAX/F,OACjE1D,KAAKsJ,SAAWhI,EAEhBA,GAEJ,CAMAsI,MAAAA,CAAQtI,GACN,MAAM6I,GAAWf,KAAKC,MAAQrJ,KAAKmJ,WAAa,IAC1CiB,EAAYpK,KAAKqI,WAAWrE,SAAWmG,EAE7C,GAAIC,GAAa,EAAG,CAClB,MAAMC,EAAQrK,KAAKqK,MAAM5H,KAAKzC,KAAMsB,GAEpC,GAAItB,KAAKkJ,SACPlJ,KAAKkJ,SAASoB,OAEdtK,KAAKkJ,SAASjD,iBAAiB,WAAYoE,EAAO,CAAE/J,MAAM,SAE1D,GAA0B,mBAAXN,KAACiJ,MACdjJ,KAAKiJ,MAAM3H,EAAMtB,KAAK4C,OAAOH,KAAKzC,WAC7B,CACL,MAAMgE,EAAWe,OAAOwF,iBAAiBvK,KAAKuJ,IAAIiB,iBAAiB,uBAElD,KAAbxG,GAAgC,OAAbA,GACrBhE,KAAKuJ,GAAGtD,iBAAiB,gBAAiBoE,EAAO,CAAE/J,MAAM,IACzDN,KAAKuJ,GAAGhC,UAAU7E,IAAI,cAEtB2H,GAEJ,CAEJ,MACE7D,WAAWxG,KAAK4J,OAAOnH,KAAKzC,KAAMsB,GAAmB,IAAZ8I,EAE7C,CAMAC,KAAAA,CAAO/I,GACDtB,KAAKkJ,UACPlJ,KAAKkJ,SAASuB,UAGhBzK,KAAK4C,SAELtB,GACF,CAKAsB,MAAAA,CAAQtB,GACNtB,KAAKuJ,GAAGmB,WAAWC,YAAY3K,KAAKuJ,IACpCvJ,KAAKuJ,GAAK,IACZ,CAMA7G,GAAAA,CAAKtC,GACHJ,KAAKiJ,MAAQ7I,CACf,CAKAsJ,UAAAA,GACE,MAAMhJ,EAAOV,KAEb,GAA6B,WAAzBA,KAAKqI,WAAWoB,MAAuC,iBAAX/F,OAAqB,CACnE,MAAMkH,EAAS5K,KAAKqI,WAAW4B,GAC/B,IAAIf,GAAW,EAEX0B,IACF1B,EAAWxF,OAAOmH,cAAc,CAC9BC,UAAW9K,KAAKuJ,GAChB5F,SAAU,MACVoH,MAAM,EACNC,UAAU,EACVC,KAAML,EACNM,iBAAkB,CAChBC,oBAAqB,UAIrBnL,KAAKqI,WAAW6B,SAClBhB,EAASkC,cAAc,IAI3BlC,EAASjD,iBAAiB,YAAa,KACjCvF,EAAK2H,WAAW6B,SAClBhB,EAASmC,YAAYnC,EAASoC,YAAc,GAAG,GAGjD5K,EAAK6I,GAAGgC,aAAa,QAAS,IAED,mBAAlB7K,EAAK4I,WACd5I,EAAK4I,WACL5I,EAAK4I,SAAW,KAClB,EACC,CAAEhJ,MAAM,IAEXN,KAAKkJ,SAAWA,CAClB,CACF,ECzKmB,MAAAsC,UAAe/D,EAIlC1H,WAAAA,CAAa+I,GACXE,MAAM,UAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKyL,SAAW,GAChBzL,KAAK0L,WAAa,GAClB1L,KAAK2L,YAAc,GAEnB3L,KAAK4L,QAAU,CACb3B,GAAI,CAAE,EACN4B,IAAK,CACP,GACA7L,KAAK8L,WAAY,EAGjB9L,KAAK+L,iBAAmB/L,KAAK+L,iBAAiBtJ,KAAKzC,MAEnD8I,EAAK7E,OAAS,CACZvB,IAAK1C,KAAK0C,IAAID,KAAKzC,MAEvB,CAKA+H,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,MAAO,IAC9DA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,SAAU1C,KAAKiE,OAAOxB,KAAKzC,OAEnDA,KAAK4F,YACP,CAKAoC,aAAAA,GACEgB,MAAMhB,gBAENhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACN5F,QAAS4F,OACToC,OAAQ,CAACrD,SAAS,GAClBsD,SAAUtD,QACVuD,MAAO,CAACrC,OAAQ,GAEpB,CAKA5B,aAAAA,CAAeC,GACb,MAAMzH,EAAOqI,MAAMb,cAAcC,GAQjC,YANqBQ,IAAjBjI,EAAKuD,SAA0C,KAAjBvD,EAAKuD,QACrCvD,EAAKuD,QAAUlE,KAAK8I,KAAKkB,UAAU/F,OAAOC,aAChB0E,IAAjBjI,EAAKuD,UACdvD,EAAKuD,SAAU,GAGVvD,CACT,CAKAiF,UAAAA,GACE5F,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKyG,cAAezG,MACnDA,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKgG,cAAehG,MACnDA,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKsM,cAAetM,KACrD,CAMAgM,QAAAA,CAAU1K,GACRtB,KAAKuM,cAELjL,GACF,CAKAiL,WAAAA,GACE,MAAMd,EAAW7E,SAAS4F,iBAAiB,oBACrC9L,EAAOV,KAEbyL,EAAS/M,QAAQ0J,IACf1H,EAAK+L,WAAWrE,EAClB,EACF,CAMAqE,UAAAA,CAAYrE,GACV,IAAKpI,KAAKyL,SAASiB,SAAStE,GAAU,CACpC,MAAMC,EAAarI,KAAKmI,cAAcC,GAGtC,IAAKC,EAAWnE,SAA2D,OAAhDkE,EAAQuE,QAAQ,4BACzC,OAGF,MAAMC,EAAavE,EAAWoB,KAC9BrB,EAAQU,KAAK7E,OAAO9D,KAAOtC,EAAQe,YAAYgO,GAE1CvE,EAAW6D,QAKd9D,EAAQU,KAAK7E,OAAOgG,GAAK,KACvBjK,KAAK6M,eAAezE,EAASA,EAAQU,KAAK7E,OAAO9D,KAAM,MACvDH,KAAK8M,iBAAiB1E,EAAS,QACjC,EAEAA,EAAQU,KAAK7E,OAAO4H,IAAM,KACxB7L,KAAK6M,eAAezE,EAASA,EAAQU,KAAK7E,OAAO9D,KAAM,OACvDH,KAAK8M,iBAAiB1E,EAAS,SACjC,IAZApI,KAAK8I,KAAKiE,eAAerK,IAAI0F,GAE7BA,EAAQnC,iBAAiB,iBAAkBjG,KAAK+L,mBAalD3D,EAAQU,KAAK7E,OAAOmI,MAA2B,IAAnB/D,EAAW+D,MAEnC/D,EAAWnE,QACblG,MAAMgP,KAAK5E,EAAQ6E,UAAUvO,QAAQwO,IACnC,MAAMC,EAAkBD,EAAMzE,QAAQ2E,SAEtCF,EAAMhG,MAAMxF,WAAa,OACzB1B,KAAK8I,KAAKzE,OAAOgJ,SAAS,KACxBH,EAAMhG,MAAMxF,WAAa,EAAA,GAG3BwL,EAAM3F,UAAU7E,IAAI,YAAa,WAE7ByK,GAAmBP,IACrBM,EAAM3F,UAAU7E,IAAI,eAAgC,MAAfyK,EAAAA,EAAmBP,IAG1DM,EAAMzE,QAAQ6E,cAAgB,IAC1BJ,EAAMpE,OAASoE,EAAMpE,KAAO,OAC9BoE,EAAMpE,KAAK7E,OAAS,CAClBsJ,YAAY,GAEhB,IAGFnF,EAAQlB,MAAMxF,WAAa,OAC3B1B,KAAK8I,KAAKzE,OAAOgJ,SAAS,KACxBjF,EAAQlB,MAAMxF,WAAa,EAC7B,GAEA0G,EAAQb,UAAU7E,IAAI,YAAa,UAE/BkK,GACFxE,EAAQb,UAAU7E,IAAI,cAAgBkK,IAI1C5M,KAAKyL,SAASlL,KAAK6H,EACrB,CACF,CAMAoF,aAAAA,CAAepF,GACbA,EAAQqF,oBAAoB,iBAAkBzN,KAAK+L,kBAE/C/L,KAAKyL,SAASiB,SAAStE,IACzBpI,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,EAEzD,CAMA6D,QAAAA,CAAU3K,GACR,MAAMZ,EAAOV,KAEbA,KAAK8L,WAAY,EAEjB9L,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK8M,cAAcpF,KAGrB9G,GACF,CAMAyK,gBAAAA,CAAkB3F,GAChB,MAAMgC,EAAUhC,EAAEhI,OACZqF,EAAYzD,KAAK8I,KAAKkB,UAAU/F,OAAOR,UAEzC2E,EAAQhD,gBAAkB3B,GAAa2E,EAAQhD,gBAAmB,EAAI3B,IAAe2E,EAAQU,KAAK7E,OAAOsJ,YACvGvN,KAAK2L,YAAYe,SAAStE,IAC5BpI,KAAK2L,YAAY+B,OAAO1N,KAAK2L,YAAYgC,QAAQvF,GAAU,GAGxDpI,KAAK0L,WAAWgB,SAAStE,IAC5BpI,KAAK0L,WAAWnL,KAAK6H,KAEbA,EAAQhD,eAAiB3B,GAAc2E,EAAQhD,eAAkB,EAAI3B,GAAc2E,EAAQzD,UAAYhF,KAAKiO,MAAM7I,OAAOG,oBAAuBkD,EAAQU,KAAK7E,OAAOsJ,aAC1KvN,KAAK0L,WAAWgB,SAAStE,IAC3BpI,KAAK0L,WAAWgC,OAAO1N,KAAK0L,WAAWiC,QAAQvF,GAAU,GAGtDpI,KAAK2L,YAAYe,SAAStE,IAC7BpI,KAAK2L,YAAYpL,KAAK6H,GAG5B,CAMAnE,MAAAA,CAAQ3C,GACNtB,KAAK8L,WAAY,EAEjB9L,KAAKyL,SAAS/M,QAAQ0J,IAChBA,EAAQhB,YAAc,IACnBpH,KAAK0L,WAAWgB,SAAStE,IAC5BpI,KAAK0L,WAAWnL,KAAK6H,GAEzB,GAGFpI,KAAK6N,iBAELvM,GACF,CAKAmF,aAAAA,GACEzG,KAAK6N,gBACP,CAKA7H,aAAAA,GACEhG,KAAK6N,gBACP,CAKAvB,aAAAA,GACEtM,KAAKuM,cACLvM,KAAK6N,gBACP,CAKAA,cAAAA,GACE,MAAMnN,EAAOV,KAEb,GAAIA,KAAK8L,UAAW,CAClB,IAAIgC,EAAkB,EAEtB9N,KAAK0L,WAAWhN,QAAQ0J,IAEtB,MAAMwE,EAAa/O,EAAQe,YAAYwJ,EAAQU,KAAK7E,OAAOwF,MAE3DqE,GAAmB1F,EAAQU,KAAK7E,OAAOmI,MAEvC5F,WAAW,WACT9F,EAAKmM,eAAezE,EAASwE,EAAY,MAErCxE,EAAQU,KAAK7E,OAAOC,QACtBlG,MAAMgP,KAAK5E,EAAQ6E,UAAUvO,QAAQ,CAACwO,EAAOlO,KAC3C,MAAMmO,EAAkBtP,EAAQe,YAAYsO,EAAMzE,QAAQ2E,UAE1D5G,WAAW,MACL2G,GAAmBP,IACrBlM,EAAKmM,eAAeK,EAAuB,MAAfC,EAAAA,EAAmBP,EAAa,MAG9DlM,EAAKoM,iBAAiBI,EAAO,QAC/B,EAAGlO,EAAQoJ,EAAQU,KAAK7E,OAAOC,QAAU,IAAI,GAG/CxD,EAAKoM,iBAAiB1E,EAAS,QAEnC,EAAW0F,GAGTA,GAAwD,IAArC9N,KAAK8I,KAAKkB,UAAU/F,OAAOC,QAG3CkE,EAAQU,KAAK7E,OAAOkI,UACvBzL,EAAK8M,cAAcpF,EACrB,GAGFpI,KAAK2L,YAAYjN,QAAQ0J,IACvB,MAAMwE,EAAa/O,EAAQe,YAAYwJ,EAAQU,KAAK7E,OAAOwF,WAEpBb,IAAnCR,EAAQU,KAAK7E,OAAOsJ,YACtB7M,EAAKmM,eAAezE,EAASwE,EAAY,OAG3C,IAAImB,EAAQ,GAEVA,EADE3F,EAAQhD,eAAiB,GACnB,oBAEA,uBAGNgD,EAAQU,KAAK7E,OAAOC,QACtBlG,MAAMgP,KAAK5E,EAAQ6E,UAAUvO,QAAQ,CAACwO,EAAOlO,KAC3C,MAAMmO,EAAkBtP,EAAQe,YAAYsO,EAAMzE,QAAQ2E,UAE1D5G,WAAW,MACL2G,GAAmBP,IACrBlM,EAAKmM,eAAeK,EAAQC,MAAAA,EAAAA,EAAmBP,EAAa,OAG9DlM,EAAKoM,iBAAiBI,EAAOa,EAAK,EACjC/O,EAAQoJ,EAAQU,KAAK7E,OAAOC,QAAU,IAC3C,GAEAxD,EAAKoM,iBAAiB1E,EAAS2F,EACjC,GAGF/N,KAAK0L,WAAa,GAClB1L,KAAK2L,YAAc,EACrB,CACF,CAOAmB,gBAAAA,CAAkBvD,EAAIyE,GACpBA,EAASA,EAAOC,MAAM,KAEtB1E,EAAGhC,UAAU3E,OAAO,QAAS,SAAU,aAAc,iBAErDoL,EAAOtP,QAAQqP,IACbxE,EAAGhC,UAAU7E,IAAIqL,EACnB,EACF,CAMAlB,cAAAA,CAAgBtD,EAAIpJ,EAAMuI,GACxBa,EAAG2E,cAAc,IAAIC,YAAY,SAAWzF,IAC5Ca,EAAGT,KAAK7E,OAAOsJ,WAAuB,OAAT7E,EAEW,mBAA7B1I,KAAK4L,QAAQlD,GAAMvI,GAC5BH,KAAK4L,QAAQlD,GAAMvI,GAAMoJ,GACiB,mBAA1BA,EAAG,WAAab,IAChCa,EAAG,WAAab,IAEpB,CAQAhG,GAAAA,CAAKgG,EAAMkE,EAAYxM,GACjBJ,KAAK4L,QAAQlD,KACfkE,EAAa/O,EAAQe,YAAYgO,GAE7B5M,KAAK4L,QAAQlD,GAAMkE,GACrB5K,QAAQC,IAAI,0BAA4B2K,EAAa,oBAErD5M,KAAK4L,QAAQlD,GAAMkE,GAAcxM,EAGvC,QC7YmBgO,UAAmB3G,EAItC1H,WAAAA,CAAa+I,GACXE,MAAM,cAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKqO,IAAMtJ,OAAOuJ,SAASC,KAC3BvO,KAAKwO,SAAWzJ,OAAOuJ,SAASE,SAChCxO,KAAKyO,YAAc,KACnBzO,KAAK0O,YAAc,KACnB1O,KAAKyB,OAASzB,KAAK8I,KAAKkB,UAAUtI,WAAWD,OAE7CzB,KAAK2O,cAAgB,EACrB3O,KAAK4O,aAAe,EAEpB5O,KAAK6O,YAAc,CACjB5E,GAAI,CAAA,EACJ4B,IAAK,CAAA,GAGP7L,KAAK8O,UAAY,CAAEC,YAAa/O,KAAK+O,YAAYtM,KAAKzC,OAEtD8I,EAAKpH,WAAa,CAChBgB,IAAK1C,KAAK0C,IAAID,KAAKzC,MAEvB,CAKA+H,IAAAA,GACE/H,KAAK0O,YAAc9H,SAAS4C,cAAc,kBACtCxJ,KAAK0O,cACP1O,KAAKyB,SAASzB,KAAK0O,YAAYM,aAAa,mBAA2BhP,KAAK8I,KAAKkB,UAAUtI,WAAWD,QAGxGzB,KAAKiP,aAEAjP,KAAKyB,QACRsD,OAAOkB,iBAAiB,WAAYjG,KAAKkP,oBAAoBzM,KAAKzC,OAGpEA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,YAAa1C,KAAKmP,UAAU1M,KAAKzC,OACzDA,KAAK8I,KAAKa,UAAUjH,IAAI,UAAW1C,KAAKoP,QAAQ3M,KAAKzC,OACrDA,KAAK8I,KAAKa,UAAUjH,IAAI,SAAU1C,KAAKqP,OAAO5M,KAAKzC,MAAO,GAAI,cAC9DA,KAAK8I,KAAKa,UAAUjH,IAAI,aAAc1C,KAAKsP,WAAW7M,KAAKzC,OAC3DA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,MAAO,IAAK,aACrE,CAKAuP,cAAAA,GACM3I,SAAS4C,cAAc,mBACzB5C,SAAS4F,iBAAiB,KAAK9N,QAAQ6K,IACrCA,EAAGtD,iBAAiB,QAASjG,KAAK8O,UAAUC,YAAW,EAG7D,CAKAS,gBAAAA,GACE5I,SAAS4F,iBAAiB,KAAK9N,QAAQ6K,IAAQA,EAAGkE,oBAAoB,QAASzN,KAAK8O,UAAUC,YAAW,EAC3G,CAMAA,WAAAA,CAAa3I,GACX,MAAMgC,EAAUhC,EAAEqJ,cACZlB,EAAOnG,EAAQsH,aAAa,QAElC,GAAInB,GACoB,IAAtBA,EAAKZ,QAAQ,MACW,IAAxBY,EAAKZ,QAAQ,QACc,IAA3BY,EAAKZ,QAAQ,YACZvF,EAAQuE,QAAQ,gBAC8B,aAA/CvE,EAAQsH,aAAa,uBACc,WAAnCtH,EAAQsH,aAAa,YAEwB,IAAzCnB,EAAKZ,QAAQ5I,OAAOuJ,SAASqB,SACP,IAAtBpB,EAAKZ,QAAQ,OACU,IAAvBY,EAAKZ,QAAQ,MAAa,CAG5B,GAFAvH,EAAEwJ,iBAEE7K,OAAOuJ,SAASC,OAASA,EAC3B,OAGFvO,KAAK6P,WAAWtB,GAGhBuB,QAAQC,UAAU,KAAM,KAAM/P,KAAKqO,IACrC,CAEJ,CAMAwB,UAAAA,CAAYxB,GAGV,GAFArO,KAAKqO,IAAMA,EAEPrO,KAAKyB,OAAQ,CAEf,MAAMuO,EAAepJ,SAASqJ,cAAc,QAC5CD,EAAaE,IAAM,WACnBF,EAAazB,KAAOF,EACpBzH,SAASuJ,KAAKC,YAAYJ,GAG1BhQ,KAAK8I,KAAKa,UAAUjH,IAAI,aAAepB,IACrCyD,OAAOuJ,SAAWD,CAAAA,GAIpBrO,KAAK8I,KAAKa,UAAU0G,OAAO,SAC7B,MACErQ,KAAK8I,KAAKa,UAAU0G,OAAO,aAE/B,CAMArE,QAAAA,CAAU1K,GACRtB,KAAKuP,iBAELjO,GACF,CAKA2N,UAAAA,GACE,MAAMqB,EAAS1J,SAAS4C,cAAc,oBAUtC,GARI8G,IACFA,EAAOpJ,MAAMxF,WAAa,OAC1B4O,EAAO/I,UAAU7E,IAAI,YAAa,cAAgB4N,EAAOZ,aAAa,mBACtE1P,KAAK8I,KAAKzE,OAAOgJ,SAAS,KACxBiD,EAAOpJ,MAAMxF,WAAa,EAAA,IAI1B4O,GAAoD,WAA1CA,EAAOZ,aAAa,mBAAoD,iBAAXhM,OAAqB,CAC9F,MAAM6M,EAAUD,EAAOZ,aAAa,sBACpC,IAAIc,GAAY,EACZ5F,EAAS0F,EAAOZ,aAAa,qBAC7BxG,GAAW,EAEXqH,IACFC,EAAY9M,OAAOmH,cAAc,CAC/BC,UAAWwF,EACX3M,SAAU,MACVoH,MAAM,EACNC,UAAU,EACVC,KAAMsF,EACNrF,iBAAkB,CAChBC,oBAAqB,WAKZ,YAAXP,IACFA,EAAS2F,GAGP3F,IACF1B,EAAWxF,OAAOmH,cAAc,CAC9BC,UAAWwF,EACX3M,SAAU,MACVoH,MAAM,EACNC,UAAU,EACVC,KAAML,EACNM,iBAAkB,CAChBC,oBAAqB,UAIrBP,IAAW2F,GACbrH,EAASkC,cAAc,IAI3BkF,EAAOE,UAAYA,EACnBF,EAAOpH,SAAWA,CACpB,CACF,CAMAiG,SAAAA,CAAW7N,GACT,MAAMZ,EAAOV,KAETA,KAAKqO,KACPoC,MAAMzQ,KAAKqO,IAAK,CAAEqC,YAAa,YAC5BC,KAAK,SAAUC,GACd,OAAOA,EAASC,MAClB,GAAGF,KAAK,SAAU9J,GAChBnG,EAAK+N,YAAc5H,EAEnBvF,GACF,EAEN,CAMAgO,UAAAA,CAAYhO,GAEV,MAAMwP,GAAO,IAAIC,WAAYC,gBAAgBhR,KAAKyO,YAAa,aAGzDwC,EAAUH,EAAKtH,cAAc,kBAEnC,GAAIyH,EAAJ,CAAa,CAEXjR,KAAK0O,YAAYwC,sBAAsB,cAAeD,GAEtDA,EAAQ/J,MAAMiK,QAAU,EAExBnR,KAAK0O,YAAYxH,MAAMiK,QAAU,EACjCnR,KAAK0O,YAAYxH,MAAMvE,SAAW,WAClC3C,KAAK0O,YAAYxH,MAAMkK,IAAM,EAC7BpR,KAAK0O,YAAYxH,MAAMmK,KAAO,SAC9BrR,KAAK0O,YAAYxH,MAAMoK,MAAQ,OAG/B1K,SAAS4C,cAAc,QAAQ+H,UAAYT,EAAKtH,cAAc,QAAQ+H,UAGtE3K,SAAS4F,iBAAiB,8EAA8E9N,QAAQ0J,IAC9GA,EAAQsC,WAAWC,YAAYvC,EACjC,GACA0I,EAAKtE,iBAAiB,8EAA8E9N,QAAQ0J,IAC1GxB,SAAS4C,cAAc,cAAc0H,sBAAsB,WAAY9I,EACzE,GAGA,MAAMoJ,EAAW5K,SAAS4C,cAAc,cAClCiI,EAAWX,EAAKtH,cAAc,cAEhCgI,GAAYC,IACdD,EAASE,UAAYD,EAASC,UAElC,CAOA3M,OAAOZ,OAAO,CACZiN,IAAKpR,KAAK4O,aACVyC,KAAM,EACNM,SAAU,YAEZ5M,OAAOC,UAAY,EACnBD,OAAO6M,gBAAkB,EACzB7M,OAAOG,iBAAmB,EAE1BlF,KAAK2O,cAAgB,EACrB3O,KAAK4O,aAAe,EAEpB5O,KAAK8I,KAAKuD,QAAQ5L,KAAK,iBAAkBqQ,GAEzCxP,GAjBA,MAFEyD,OAAOuJ,SAAWtO,KAAKqO,GAoB3B,CAMApC,QAAAA,CAAU3K,GACR,MAAMuQ,EAAU7R,KAAK0O,YACrBmD,EAAQnH,WAAWC,YAAYkH,GAE/B7R,KAAK0O,YAAc9H,SAAS4C,cAAc,kBAC1CxJ,KAAKyB,SAASzB,KAAK0O,YAAYM,aAAa,mBAA2BhP,KAAK8I,KAAKkB,UAAUtI,WAAWD,OAEtGH,GACF,CAMA8N,OAAAA,CAAS9N,GACP,MAAMZ,EAAOV,KACP8R,EAAOlL,SAAS4C,cAAc,kBAEpC,GAAIsI,EAAM,CACR,MAAMC,EAAWlU,EAAQe,YAAYkT,EAAKpC,aAAa,iBACvD,IAAIhO,GAAa,EAUjB,GAR8C,mBAAnC1B,KAAK6O,YAAYhD,IAAIkG,GAC9BrQ,EAAa1B,KAAK6O,YAAYhD,IAAIkG,GACC,mBAAnBD,EAAKE,UACrBtQ,EAAaoQ,EAAKE,UAC+B,mBAAjChS,KAAK6O,YAAYhD,IAAIoG,UACrCvQ,EAAa1B,KAAK6O,YAAYhD,IAAIoG,SAGhCvQ,EACFA,EAAWoQ,EAAMxQ,OACZ,CACL,MAAMgP,EAAS1J,SAAS4C,cAAc,oBAEtC,GAAI8G,EAAQ,CACV,GAAIA,EAAOE,UACTF,EAAOE,UAAU0B,OACjB5B,EAAOE,UAAU7M,SAASwO,WAAWjL,MAAMiK,QAAU,EACrDb,EAAOE,UAAUlG,OAEjBgG,EAAOE,UAAUvK,iBAAiB,WAAY,KACvCvF,EAAKe,SACR6O,EAAOE,UAAU7M,SAASwO,WAAWjL,MAAMiK,QAAU,IAGvD7P,GACF,EAAG,CAAEhB,MAAM,QACN,CACL,MAAM0D,EAAWe,OAAOwF,iBAAiB3D,SAAS4C,cAAc,qBAAqBgB,iBAAiB,uBAErF,KAAbxG,GAAgC,OAAbA,EACrBsM,EAAOrK,iBAAiB,gBAAiB3E,EAAM,CAAEhB,MAAM,IAEvDgB,GAEJ,CAEAgP,EAAO/I,UAAU7E,IAAI,aACvB,MACEpB,GAEJ,CACF,MACEA,IAGFtB,KAAKwP,iBAAiB/M,KAAKzC,KAC7B,CAMAqP,MAAAA,CAAQ/N,GACN,MAAMwQ,EAAOlL,SAAS4C,cAAc,kBAEpC,GAAIsI,EAAM,CACR,MAAMC,EAAWlU,EAAQe,YAAYkT,EAAKpC,aAAa,iBACvD,IAAIhO,GAAa,EAYjB,GAVAoQ,EAAK5K,MAAMiK,QAAU,GAEwB,mBAAlCnR,KAAK6O,YAAY5E,GAAG8H,GAC7BrQ,EAAa1B,KAAK6O,YAAY5E,GAAG8H,GACC,mBAAlBD,EAAKM,SACrB1Q,EAAaoQ,EAAKM,SAC8B,mBAAhCpS,KAAK6O,YAAY5E,GAAGgI,UACpCvQ,EAAa1B,KAAK6O,YAAY5E,GAAGgI,SAG/BvQ,EACFA,EAAWoQ,EAAMxQ,OACZ,CACL,MAAMgP,EAAS1J,SAAS4C,cAAc,oBAEtC,GAAI8G,GAAUA,EAAO/I,UAAU8K,SAAS,cACtC,GAAI/B,EAAOpH,SACToH,EAAOpH,SAASgJ,OAChB5B,EAAOpH,SAASvF,SAASwO,WAAWjL,MAAMiK,QAAU,EACH,YAA7Cb,EAAOZ,aAAa,qBACtBY,EAAOpH,SAASoJ,YAAYhC,EAAOpH,SAASoC,aAAa,GAEzDgF,EAAOpH,SAASoB,OAGlBgG,EAAOpH,SAASjD,iBAAiB,WAAY,KAC3CqK,EAAOpH,SAASvF,SAASwO,WAAWjL,MAAMiK,QAAU,GACpDb,EAAO/I,UAAU3E,OAAO,cACxBtB,GACF,EAAG,CAAEhB,MAAM,QACN,CACL,MAAM0D,EAAWe,OAAOwF,iBAAiB3D,SAAS4C,cAAc,qBAAqBgB,iBAAiB,uBAErF,KAAbxG,GAAgC,OAAbA,EACrBsM,EAAOrK,iBAAiB,gBAAiB3E,EAAM,CAAEhB,MAAM,IAEvDgB,IAGFgP,EAAO/I,UAAU3E,OAAO,aAC1B,MAEAtB,GAEJ,CACF,MACEA,GAEJ,CAKA4N,mBAAAA,GACE,IAAIb,EAAM,GAERA,EAD+C,IAA7CrO,KAAKqO,IAAIV,QAAQ5I,OAAOuJ,SAASqB,QAC7B,IAAI4C,IAAIvS,KAAKqO,KAEb,IAAIkE,IAAIxN,OAAOuJ,SAASqB,OAAS3P,KAAKqO,KAG1CA,EAAIG,WAAazJ,OAAOuJ,SAASE,WACnCxO,KAAK2O,cAAgB5J,OAAOE,QAE5BjF,KAAK8I,KAAKzE,OAAOgJ,SAAS,KACxBrN,KAAK4O,aAAe7J,OAAOE,QAE3BF,OAAOZ,OAAO,CACZiN,IAAKpR,KAAK2O,cACV0C,KAAM,EACNM,SAAU,WACX,GAGH3R,KAAK6P,WAAW9K,OAAOuJ,SAASC,MAEpC,CAQA7L,GAAAA,CAAKgG,EAAMqJ,EAAW,UAAW3R,GAC3BJ,KAAK6O,YAAYnG,KACnBqJ,EAAWlU,EAAQe,YAAYmT,GAE3B/R,KAAK6O,YAAYnG,GAAMqJ,GACzB/P,QAAQC,IAAI,4BAA8B8P,EAAW,yBAErD/R,KAAK6O,YAAYnG,GAAMqJ,GAAY3R,EAGzC,QC/cmBoS,UAAwB/K,EAI3C1H,WAAAA,CAAa+I,GACXE,MAAM,UAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKyL,SAAW,GAGhBzL,KAAKyS,kBAAoB,CACvB,UACA,eACA,gBAGFzS,KAAK0S,oBAAsB,CACzB,IACA,IACA,IACA,cACA,SACA,UACA,UACA,UACA,QACA,SACA,SACA,UAIF1S,KAAK2S,QAAU,CACb,eAAgB,CACd,eAAgB,CAAC,KAAM,SAEzB,eAAgB,CACd,eAAgB,CAAC,KAAM,UAK3B3S,KAAK+L,iBAAmB/L,KAAK+L,iBAAiBtJ,KAAKzC,KACrD,CAKA+H,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAEvDA,KAAK8I,KAAKzE,OAAO3B,IAAI1C,KAAK4S,KAAM5S,MAEhCA,KAAK4F,YACP,CAKAoC,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACN+I,KAAMhK,QACNvF,QAAS,CAACwG,OAAQ9J,KAAK8I,KAAKkB,UAAU7F,OAAOb,SAC7CwP,QAAShJ,OAEb,CAKA3B,aAAAA,CAAeC,GACb,MAAMzH,EAAOqI,MAAMb,cAAcC,GAEjC,GAAIzH,EAAK2C,QAAS,CAChB,MAAMyP,EAAcpS,EAAK2C,QAAQ0P,MAAM,0DAGrCrS,EAAK2C,QADHyP,EACahJ,OAAOgJ,EAAY,KAAQhJ,OAAOgJ,EAAY,IAAMhJ,OAAOgJ,EAAY,KAAOpT,KAAKsT,SAEnFlJ,OAAOpJ,EAAK2C,SAG7B3C,EAAK2C,QAAU3D,KAAKE,IAAIF,KAAKC,IAAIe,EAAK2C,QAAS,KAAO,EACxD,CAEA,OAAO3C,CACT,CAKAiF,UAAAA,GACE5F,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKsM,cAAetM,KACrD,CAKAsM,aAAAA,GACEtM,KAAKuM,aACP,CAMAP,QAAAA,CAAU1K,GACRtB,KAAKuM,cAELjL,GACF,CAKAiL,WAAAA,GACE,MAAMd,EAAW7E,SAAS4F,iBAAiB,oBACrC9L,EAAOV,KAEbyL,EAAS/M,QAAQ0J,IACf1H,EAAK+L,WAAWrE,EAAO,EAE3B,CAMAqE,UAAAA,CAAYrE,GACV,IAAKpI,KAAKyL,SAASiB,SAAStE,GAAU,CACpC,MAAMC,EAAarI,KAAKmI,cAAcC,GAEtCpI,KAAK8I,KAAKiE,eAAerK,IAAI0F,GAE7BA,EAAQnC,iBAAiB,iBAAkBjG,KAAK+L,kBAGhD,MAAMmH,EAAkB,CAAA,EAGxBA,EAAgBC,oBAA6CvK,IAA3BR,EAAQhD,eAA+BgD,EAAQhD,eAAiB,EAGlG8N,EAAgBL,KAAOxK,EAAWwK,KAGlCK,EAAgB5P,QAAU+E,EAAW/E,QAGrC,IAAI8P,GAAa,EAQjB,QAN2BxK,IAAvBP,EAAWyK,QACbM,EAAaC,KAAKC,MAAMjL,EAAWyK,QAAQhU,QAAQ,KAAM,MAChDkB,KAAK2S,QAAQtK,EAAWoB,QACjC2J,EAAapT,KAAK2S,QAAQtK,EAAWoB,OAGnC2J,EAAY,CACd,MAAMG,EAAe,CAAA,EAErB,IAAK,MAAMC,KAAYJ,EACrB,GAAIpT,KAAKyS,kBAAkB/F,SAAS8G,IAChCxT,KAAK0S,oBAAoBhG,SAAS8G,GAAW,CAC/C,MAAMC,EAASL,EAAWI,GAC1B,IAAIE,EAAY5J,OAAO2J,EAAO,IAC1BE,EAAU7J,OAAO2J,EAAO,IAExBG,EAAOF,EAAUV,MAAM,oBACvBY,EACFA,EAAOA,EAAK,GAC4B,IAA/BJ,EAAS7F,QAAQ,YAC1BiG,EAAO,OAGTF,EAAY3J,OAAO2J,EAAU5U,QAAQ8U,EAAM,KAC3CD,EAAU5J,OAAO4J,EAAQ7U,QAAQ8U,EAAM,KAEvC,IAAIC,EAAeL,EACF,iBAAbA,EACFK,EAAe,wBACO,iBAAbL,IACTK,EAAe,yBAGjBN,EAAaM,GAAgB,CAC3B7G,KAAM0G,EACNI,GAAIH,EACJ5R,QAAS2R,EACTE,KAAMA,EAEV,CAGFV,EAAgBE,WAAaG,CAC/B,CAEAnL,EAAQU,KAAK3E,OAAO4P,UAAYb,EAEhClT,KAAKyL,SAASlL,KAAK6H,EACrB,CACF,CAMAoF,aAAAA,CAAepF,GACbA,EAAQqF,oBAAoB,iBAAkBzN,KAAK+L,kBAE/C/L,KAAKyL,SAASiB,SAAStE,IACzBpI,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,EAEzD,CAMA6D,QAAAA,CAAU3K,GACR,MAAMZ,EAAOV,KAEbA,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK8M,cAAcpF,KAGrB9G,GACF,CAMAyK,gBAAAA,CAAkB3F,GACAA,EAAEhI,OAEV0K,KAAK3E,OAAO4P,UAAUC,QAAS,CACzC,CAKApB,IAAAA,GACE,IAAK,MAAMxK,UAAgBqD,SAAU,CAEnC,GAAIrD,EAAQU,KAAK3E,OAAO4P,UAAUC,OAChC,SAIF,IAAIC,EAAW7L,EAAQhD,eAOvB,GANIgD,EAAQU,KAAK3E,OAAO0O,OACtBoB,EAAW,EAAItU,KAAKuU,IAAI,EAAe,EAAXD,IAG9B7L,EAAQU,KAAK3E,OAAO4P,UAAUZ,iBAAmBc,EAAW7L,EAAQU,KAAK3E,OAAO4P,UAAUZ,iBAAmB,EAAI/K,EAAQU,KAAK3E,OAAOb,SAEjI8E,EAAQU,KAAK3E,OAAO4P,UAAUX,WAAY,CAC5C,MAAMG,EAAe,GAErB,IAAK,MAAO5U,EAAK6U,KAAajV,OAAO4V,QAAQ/L,EAAQU,KAAK3E,OAAO4P,UAAUX,YACzEI,EAASzR,QAAUyR,EAASxG,MAAQwG,EAASM,GAAKN,EAASxG,MAAQ5E,EAAQU,KAAK3E,OAAO4P,UAAUZ,eAE7F,CAAC,IAAK,IAAK,KAAKzG,SAAS/N,IACvB4U,EAAaa,cAAgBb,EAAaa,YAAc,CAAE,MAC5Db,EAAaa,YAAYzV,GAAO6U,EAASzR,QAAUyR,EAASI,MAG9DL,EAAa5U,GAAO6U,EAASzR,QAAUyR,EAASI,KAKpD,MAAMS,EAAY,GAClB,IAAK,MAAO1V,EAAK6U,KAAajV,OAAO4V,QAAQZ,GAC3C,GAAIvT,KAAK0S,oBAAoBhG,SAAS/N,GAAM,CAE1C,GAAwB,iBAAb6U,EACT,GAAY,gBAAR7U,EAAuB,CACzB,MAAMuE,EAAQ3E,OAAOC,OAAO,CAAEgB,EAAG,EAAG8U,EAAG,EAAGC,EAAG,GAAKf,GAElDA,EAAS3U,OAASqE,EAAM1D,EAAI,KAAO0D,EAAMoR,EAAI,KAAOpR,EAAMqR,CAC5D,MACEf,EAAS3U,OAASN,OAAOkV,OAAOD,GAAUgB,KAAK,MAInDH,EAAU9T,KAAK5B,EAAM,KAA2B,iBAAb6U,EAAwBA,EAAWA,EAAS3U,QAAU,IAC3F,CAIF,MAAM4V,EAAS,CAAE,EACXC,EAAa,GAEfL,EAAUlS,OAAS,IACrBsS,EAAOJ,UAAYA,EAAUG,KAAK,KAClCE,EAAWnU,KAAK,cAGlB,IAAK,MAAO5B,EAAK6U,KAAajV,OAAO4V,QAAQZ,GACtCvT,KAAK0S,oBAAoBhG,SAAS/N,KACrC8V,EAAO9V,GAAO6U,EACdkB,EAAWnU,KAAK5B,IAIpB,IAAK,MAAOA,EAAK6U,KAAajV,OAAO4V,QAAQM,GAC3CrM,EAAQlB,MAAMC,YAAYxI,EAAK6U,GAGjCpL,EAAQlB,MAAMC,YAAY,cAAeuN,EAAWF,KAAK,MAC3D,KAAO,CACL,MAAMG,EAAOhV,KAAKiO,MAAgF,KAAzExF,EAAQhD,eAAiBgD,EAAQU,KAAK3E,OAAO4P,UAAUZ,iBAA0B,IAE1G/K,EAAQlB,MAAMC,YAAY,aAAciB,EAAQU,KAAK3E,OAAO4P,UAAUZ,gBACtE/K,EAAQlB,MAAMC,YAAY,aAAcxH,KAAKuU,IAAIS,IACjDvM,EAAQlB,MAAMC,YAAY,SAAUwN,EACtC,CAGIhV,KAAKuU,IAAID,EAAW7L,EAAQU,KAAK3E,OAAO4P,UAAUZ,gBAAkB,OACtE/K,EAAQU,KAAK3E,OAAO4P,UAAUC,QAAS,EAE3C,CACF,EC3UK,SAASY,EAAMA,EAAKxO,EAAOyO,GAChC,OAAOlV,KAAKE,IAAI+U,EAAKjV,KAAKC,IAAIwG,EAAOyO,GACvC,+EAQO,SAAcD,EAAGxO,EAAGyO,GACzB,OAAQ,EAAIA,GAAKD,EAAIC,EAAIzO,CAKlB,CANF,oBAMa,EAAIzG,KAAKmV,ujSAKH1O,cACNA,GAAKA,sBADlB,IAAmBA,u5BCjBL,MAAA2O,UAAqBtN,EAIxC1H,WAAAA,CAAY+I,GACVE,MAAM,UAENhJ,KAAK8I,KAAOA,EAEZ/D,OAAOsC,iBAAkB,CAC3B,CAKAU,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAKoI,QAAUxB,SAASK,gBAExBjH,KAAKgV,UAAYhV,KAAKoI,QAAQ4G,aAAa,kBAEvChP,KAAKgV,YACPjQ,OAAOsC,iBAAkB,EAEzBrH,KAAKiV,MAAQ,IAAIC,EAEjBlV,KAAKiV,MAAM/U,GAAG,SAAU,KACtBiD,EAAKmE,cACP,GAEAV,SAASK,gBAAgBM,UAAU7E,IAAI,qBAEvC1C,KAAK8I,KAAKzE,OAAO3B,IAAI1C,KAAKiV,MAAME,IAAKnV,KAAKiV,OAE9C,QCtCmBG,UAAe3N,EAIlC1H,WAAAA,CAAa+I,GACXE,MAAM,UAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKqV,QAAU,GACfrV,KAAKsV,SAAW,GAChBtV,KAAKuV,OAAS,GAEdvV,KAAKwV,UAAY,CAAC,IAAK,SAAU,QACnC,CAKAzN,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,OAEvDA,KAAK8I,KAAKzE,OAAO3B,IAAI1C,KAAK4S,KAAM5S,MAEhCA,KAAK4F,YACP,CAKAoC,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACNxG,QAAS,CAACyG,OAAQ/J,KAAK8I,KAAKkB,UAAU3G,OAAOC,SAC7CnB,OAAQ,CAAC4H,OAAQ/J,KAAK8I,KAAKkB,UAAU3G,OAAOE,aAC5CkS,KAAM5M,QAEV,CAKAjD,UAAAA,GACEgB,SAASK,gBAAgBhB,iBAAiB,aAAcjG,KAAK0V,aAAajT,KAAKzC,MAAO,CAAE2V,SAAS,EAAMxP,SAAS,IAChHS,SAASK,gBAAgBhB,iBAAiB,aAAcjG,KAAK0V,aAAajT,KAAKzC,MAAO,CAAE2V,SAAS,EAAMxP,SAAS,GAClH,CAMA6F,QAAAA,CAAU1K,GACR,MAAMZ,EAAOV,KACPqV,EAAUzO,SAAS4F,iBAAiB,oCAEtC6I,EAAQlT,OAAS,GACnBkT,EAAQ3W,QAAQ2E,IACd,MAAMgF,EAAarI,KAAKmI,cAAc9E,GAElCgF,EAAWoN,MACb7O,SAASK,gBAAgBM,UAAU7E,IAAI,kBAIxBW,EAAOmJ,iBAAiB,2BAChC9N,QAAQkX,IACfA,EAAQ9M,KAAO,CACbzF,OAAQ,CACNV,SAAU,CACRnD,EAAG,EACH8U,EAAG,GAELuB,eAAgB,CACdrW,EAAG,EACH8U,EAAG,KAMPsB,EAAQ9M,KAAKzF,OAAOC,QADlBsS,EAAQ5G,aAAa,0BACOjF,OAAO6L,EAAQlG,aAAa,2BAE5BrH,EAAW/E,QAG3CsS,EAAQrO,UAAU7E,IAAI,qBAEtBhC,EAAK4U,SAAS/U,KAAKqV,EAAO,GAIbvS,EAAOmJ,iBAAiB,yBAChC9N,QAAQoX,IACb,MAAMC,EAAMnP,SAASoP,gBAAgB,6BAA8B,OAC7D/K,EAAOrE,SAASoP,gBAAgB,6BAA8B,QACpED,EAAI3F,YAAYnF,GAEhB6K,EAAM1F,YAAY2F,GAElBD,EAAMhN,KAAO,CACXzF,OAAQ,CACNV,SAAU,CACRnD,EAAG,EACH8U,EAAG,GAELuB,eAAgB,CACdrW,EAAG,EACH8U,EAAG,GAEL2B,OAAQ,GACRhL,KAAMA,IAKR6K,EAAMhN,KAAKzF,OAAOC,QADhBwS,EAAM9G,aAAa,0BACOjF,OAAO+L,EAAMpG,aAAa,2BAE1BrH,EAAW/E,QAIvCwS,EAAMhN,KAAKzF,OAAOlB,OADhB2T,EAAM9G,aAAa,yBACMjF,OAAO+L,EAAMpG,aAAa,0BAE1BrH,EAAWlG,OAGxC2T,EAAMvO,UAAU7E,IAAI,mBAEpBhC,EAAK6U,OAAOhV,KAAKuV,EACnB,GAEAzS,EAAOkE,UAAU7E,IAAI,aAErB1C,KAAKqV,QAAQ9U,KAAK8C,EAAM,GAI5B/B,GACF,CAKAoU,YAAAA,CAActP,GACZ,MAAMgC,EAAUhC,EAAEhI,OACZ8X,EAAM9N,EAAQ+N,QAAQlX,cACtBiI,EAAQkB,EAAQsH,aAAa,iBACnC,IAAI0G,EAAQ,MAERpW,KAAKwV,UAAU9I,SAASwJ,IAAkB,OAAVhP,KAClCkP,EAAoB,eAAXhQ,EAAEsC,MAGC,OAAV0N,GACFpW,KAAKqV,QAAQ3W,QAAQ2E,IACnBA,EAAOkE,UAAU8O,OAAO,mBAAoBD,GAE9B,OAAVlP,GAA4B,KAAVA,GACpB7D,EAAOkE,UAAU8O,OAAO,qBAAuBnP,EAAOkP,EACxD,EAGN,CAKAxD,IAAAA,CAAM0D,GAEJtW,KAAKsV,SAAS5W,QAAQkX,IAEpB,MAAMjT,EAAWiT,EAAQ9M,KAAKzF,OAAOV,SAC/BkT,EAAiBD,EAAQ9M,KAAKzF,OAAOwS,eAE3ClT,EAASnD,EAAIuF,OAAOQ,OACpB5C,EAAS2R,EAAIvP,OAAOS,OAEpBqQ,EAAerW,IAAMmD,EAASnD,EAAIqW,EAAerW,GAAKoW,EAAQ9M,KAAKzF,OAAOC,QAC1EuS,EAAevB,IAAM3R,EAAS2R,EAAIuB,EAAevB,GAAKsB,EAAQ9M,KAAKzF,OAAOC,QAE1EsS,EAAQ1O,MAAMmN,UAAY,eAAiBwB,EAAerW,EAAI,OAASqW,EAAevB,EAAI,QAC5F,GAGAtU,KAAKuV,OAAO7W,QAAQoX,IAElB,MAAMnT,EAAWmT,EAAMhN,KAAKzF,OAAOV,SAC7BkT,EAAiBC,EAAMhN,KAAKzF,OAAOwS,eAKzC,GAHAlT,EAASnD,EAAIuF,OAAOQ,OACpB5C,EAAS2R,EAAIvP,OAAOS,QAEG,IAAnBT,OAAOQ,OAAe,CACxBsQ,EAAerW,IAAMmD,EAASnD,EAAIqW,EAAerW,GAAKsW,EAAMhN,KAAKzF,OAAOC,QACxEuS,EAAevB,IAAM3R,EAAS2R,EAAIuB,EAAevB,GAAKwB,EAAMhN,KAAKzF,OAAOC,QAGxE,MAAM2S,EAASH,EAAMhN,KAAKzF,OAAO4S,OAMjCA,EAAO1V,KAJO,CACZf,EAAGqW,EAAerW,EAClB8U,EAAGuB,EAAevB,IAIhB2B,EAAO9T,OAAS2T,EAAMhN,KAAKzF,OAAOlB,QACpC8T,EAAOM,QAIT,IAAIC,EAAI,GACJjT,EAAc,EAElB,MAAMkT,EAAUA,CAACR,EAAQS,IAOf,GANET,EAAOU,OAAO,CAACC,EAAKC,EAAOhC,EAAG9R,IAAY,IAAN8R,EAEzC,KAAIgC,EAAMrX,KAAKqX,EAAMvC,IAErB,GAAEsC,KAAOF,EAAQG,EAAOhC,EAAG9R,KAC9B,MAIE+T,EAAOA,CAACC,EAAQC,KACpB,MAAMC,EAAUD,EAAOxX,EAAIuX,EAAOvX,EAC5B0X,EAAUF,EAAO1C,EAAIyC,EAAOzC,EAClC,MAAO,CACLnS,OAAQxC,KAAKwX,KAAKxX,KAAKyX,IAAIH,EAAS,GAAKtX,KAAKyX,IAAIF,EAAS,IAC3DG,MAAO1X,KAAK2X,MAAMJ,EAASD,GAC7B,EAGIM,EAAeA,CAACxV,EAASyV,EAAUlV,EAAM4H,KAC7C,MAKMuN,EAAIX,EALAU,GAAYzV,EACZO,GAAQP,GAMlBwB,GAAekU,EAAEtV,OAEjB,MAAMkV,EAAQI,EAAEJ,OAASnN,EAAUvK,KAAK+X,GAAK,GACvCvV,EAPY,GAOHsV,EAAEtV,OAIjB,MAAO,CAFGJ,EAAQvC,EAAIG,KAAKgY,IAAIN,GAASlV,EAC9BJ,EAAQuS,EAAI3U,KAAKiY,IAAIP,GAASlV,EAC5B,EAUdqU,EAAIC,EAAQR,EAPU4B,CAAChB,EAAOhC,EAAG9R,KAC/B,MAAO+U,EAAMC,GAAQR,EAAaxU,EAAE8R,EAAI,GAAI9R,EAAE8R,EAAI,GAAIgC,IAE/CmB,EAAMC,GAAQV,EAAaV,EAAO9T,EAAE8R,EAAI,GAAI9R,EAAE8R,EAAI,IAAI,GAC7D,MAAQ,KAAIiD,KAAQC,KAAQC,KAAQC,KAAQpB,EAAMrX,KAAKqX,EAAMvC,GAAE,GAKjEwB,EAAMhN,KAAKzF,OAAO4H,KAAKM,aAAa,IAAKiL,GAEzCV,EAAM5O,MAAMC,YAAY,WAAY5D,EACtC,GAEJ,EC1Qa,MAAM2U,UAAqBzQ,EAIxC1H,WAAAA,CAAa+I,GACXE,MAAM,gBAENhJ,KAAK8I,KAAOA,EAGZ9I,KAAK8O,UAAY,CACfqJ,oBAAqBnY,KAAKmY,oBAAoB1V,KAAKzC,MAEvD,CAKA+H,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAKyL,SAAW,GAEhBzL,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAEvDA,KAAK4F,YACP,CAKAoC,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACNsO,MAAOtO,OAEX,CAKAlE,UAAAA,GACE5F,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKsM,cAAetM,KACrD,CAKAsM,aAAAA,GACEtM,KAAKuM,aACP,CAMAP,QAAAA,CAAU1K,GACRtB,KAAKuM,cAELjL,GACF,CAKAiL,WAAAA,GACE,MAAMd,EAAW7E,SAAS4F,iBAAiB,0BACrC9L,EAAOV,KAEbyL,EAAS/M,QAAQ0J,IACf1H,EAAK+L,WAAWrE,EAClB,EACF,CAMAqE,UAAAA,CAAYrE,GACLpI,KAAKyL,SAASiB,SAAStE,KAC1BpI,KAAKmI,cAAcC,GAEnBpI,KAAK8I,KAAKuP,iBAAiB3V,IAAI0F,GAC/BA,EAAQnC,iBAAiB,oBAAqBjG,KAAK8O,UAAUqJ,qBAE7DnY,KAAKyL,SAASlL,KAAK6H,GAEvB,CAMAoF,aAAAA,CAAepF,GACTpI,KAAKyL,SAASiB,SAAStE,KACzBpI,KAAK8I,KAAKuP,iBAAiBzV,OAAOwF,GAClCA,EAAQqF,oBAAoB,oBAAqBzN,KAAK8O,UAAUqJ,qBAEhEnY,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,GAEzD,CAMA6D,QAAAA,CAAU3K,GACR,MAAMZ,EAAOV,KAEbA,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK8M,cAAcpF,EAAO,GAG5B9G,GACF,CAMA6W,mBAAAA,CAAqB/R,GACnB,MAAMgC,EAAUhC,EAAEhI,OACZuE,EAAWyF,EAAQU,KAAKwP,SAAS3V,SACjC4V,IAAWnQ,EAAQU,KAAKtF,aAAa4U,OAAQhQ,EAAQU,KAAKtF,aAAa4U,MAAMnK,MAAM,KAGzF7F,EAAQb,UAAU3E,OAAO,QAAS,SAAU,aAAc,iBAEzC,OAAbD,GACFyF,EAAQb,UAAU7E,IAAI,SAElB6V,GACF3R,SAASK,gBAAgBM,UAAU7E,OAAO6V,KAGxCA,GACF3R,SAASK,gBAAgBM,UAAU3E,UAAU2V,GAI7CnQ,EAAQb,UAAU7E,IAAI,SADP,UAAbC,EAC8B,aAEA,iBAGtC,EClJa,MAAM6V,UAAqB/Q,EAIxC1H,WAAAA,CAAa+I,GACXE,MAAM,UAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKyL,SAAW,GAEhBzL,KAAKsJ,SAAW,KAGhBtJ,KAAKmY,oBAAsBnY,KAAKmY,oBAAoB1V,KAAKzC,MACzDA,KAAK+L,iBAAmB/L,KAAK+L,iBAAiBtJ,KAAKzC,MAEnD8I,EAAKpF,OAAS,CACZ+U,UAAWzY,KAAKyY,UAAUhW,KAAKzC,MAEnC,CAKA+H,IAAAA,GACEiB,MAAMjB,OAEgB,iBAAXrE,SACT1D,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAK6J,SAASpH,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,SAAU1C,KAAKiE,OAAOxB,KAAKzC,QAGrDA,KAAK4F,YACP,CAKA6S,SAAAA,GACwB,iBAAX/U,SACT1D,KAAKgM,SAAS,QACdtG,UAAUhD,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAC7C0F,UAAUhD,IAAI,SAAU1C,KAAKiE,OAAOxB,KAAKzC,OAEzC0Y,eAAepM,gBAEnB,CAKAtE,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACNkB,SAAUnC,QACV1E,OAAQ0E,QACRkC,KAAMlC,QACN8P,UAAW,CAAC5O,OAAQ,GACpBG,QAASrB,QACT+P,SAAU/P,QACVgQ,MAAOhQ,QACPiQ,KAAMjQ,QACNlF,SAAU,CAACmG,OAAQ9J,KAAK8I,KAAKkB,UAAUtG,OAAOC,UAC9CoV,SAAU,CAAClQ,QAAS7I,KAAK8I,KAAKkB,UAAUtG,OAAOE,UAEnD,CAKAgC,UAAAA,GACE5F,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKsM,cAAetM,KACrD,CAKAsM,aAAAA,GACEtM,KAAKuM,cACLvM,KAAKiE,OAAO,OACd,CAMA4F,QAAAA,CAAUvI,GACR,IAAI0X,GAAW,EAEXhZ,KAAKyL,SAAStJ,OAAS,GACzBnC,KAAKyL,SAAS/M,QAAQ0J,IAChBA,EAAQU,KAAKpF,OAAOkV,WAAaxQ,EAAQ6Q,OAAOC,WAClDF,GAAW,EACb,GAIAA,EACFhZ,KAAKsJ,SAAWhI,EAEhBA,GAEJ,CAMA0K,QAAAA,CAAU1K,GACRtB,KAAKuM,cAELjL,GACF,CAKAiL,WAAAA,GACE,MAAM7L,EAAOV,KACbA,KAAKyL,SAAW7E,SAAS4F,iBAAiB,oBAC1CxM,KAAKmZ,WAAa,GAClBnZ,KAAKoZ,OAAS,EACdpZ,KAAKqZ,UAAY,EAEjBrZ,KAAKyL,SAAS/M,QAAQ0J,IACpB,IAAKA,EAAQ6Q,OAAQ,CACnB,MAAM5Q,EAAarI,KAAKmI,cAAcC,GAEtCpI,KAAK8I,KAAKiE,eAAerK,IAAI0F,GAEzBC,EAAWyQ,OAGbpY,EAAK4Y,WAAWlR,GAEhBA,EAAQnC,iBAAiB,WAAYvF,EAAK4J,OAJ1ClC,EAAQnC,iBAAiB,oBAAqBvF,EAAKyX,oBAOvD,GAEJ,CAMAlM,QAAAA,CAAU3K,GACR,MAAMZ,EAAOV,KACb,IAAIyL,EAAW,GAEf,MAAMoG,EAAUjL,SAAS4C,cAAc,mCAGrCiC,EADEoG,EACSA,EAAQrF,iBAAiB,oBAEzBxM,KAAKyL,SAGlBA,EAAS/M,QAAQ0J,IACfA,EAAQqF,oBAAoB,WAAY/M,EAAK4J,MAC7ClC,EAAQqF,oBAAoB,oBAAqB/M,EAAKyX,qBAElD/P,EAAQ4G,aAAa,0BACvB5G,EAAQqF,oBAAoB,iBAAkB/M,EAAKqL,kBAGjD3D,EAAQ6Q,SACV7Q,EAAQ6Q,OAAOxO,iBACRrC,EAAQ6Q,OACjB,GAGF3X,GACF,CAMA2C,MAAAA,CAAQ3C,GACNtB,KAAKmZ,WAAWza,QAAQ0J,IACW,OAA7BA,EAAQmR,kBACVnR,EAAQkC,MACV,GAGFhJ,GACF,CAMA6W,mBAAAA,CAAqB/R,GACnB,MAAMgC,EAAUhC,EAAEhI,OAEbgK,EAAQ6Q,OAKN7Q,EAAQU,KAAKpF,OAAOmV,QACU,OAA7BzQ,EAAQmR,iBACNnR,EAAQ6Q,OAAOO,WAAapR,EAAQ6Q,OAAOQ,cAAgBrR,EAAQ4G,aAAa,8BAClF5G,EAAQ6Q,OAAOQ,cAAe,EAC9BrR,EAAQkC,QAGLlC,EAAQ6Q,OAAOO,WAClBpR,EAAQ6Q,OAAOQ,cAAe,EAC9BrR,EAAQsR,UAbmB,OAA7BtR,EAAQmR,kBACVvZ,KAAK2Z,SAASvR,EAiBpB,CAMAuR,QAAAA,CAAUvR,GACRpI,KAAKsZ,WAAWlR,GAEhBA,EAAQ6Q,OAAOhT,iBAAiB,YAAa,KAC3CmC,EAAQkC,QACP,CAAEhK,MAAM,GACb,CAMAgZ,UAAAA,CAAYlR,GACV,MAAM1H,EAAOV,KACbgC,QAAQC,IAAIjC,MAEZA,KAAKoZ,SAGL,MAAM/Q,EAAarI,KAAKmI,cAAcC,GAEtCA,EAAQ6Q,OAASvV,OAAOmH,cAAc,CACpCC,UAAW1C,EACXzE,SAAU0E,EAAW1E,SACrBoH,KAAO1C,EAAW0C,OAAS1C,EAAW6B,QACtCc,UAAU,EACVC,KAAM5C,EAAWoB,YAGgB,IAAxBpB,EAAW0Q,UACpB3Q,EAAQ6Q,OAAOW,YAAYvR,EAAW0Q,UAGxC3Q,EAAQb,UAAU7E,IAAI,aACtB1C,KAAK6Z,sBAAsBzR,GAAS,GAEhCC,EAAW2C,UACbhL,KAAKmZ,WAAW5Y,KAAK6H,GAGnBC,EAAWuQ,UACb5Y,KAAKqZ,YAGHhR,EAAWlE,OACbiE,EAAQnC,iBAAiB,iBAAkBjG,KAAK+L,kBACvC1D,EAAW0C,MACpB3C,EAAQ6Q,OAAOhT,iBAAiB,aAAc,WAC5C,GAAImC,EAAQ6Q,OAAO3N,YAAc,EAAG,CAClC,MAAMwO,EAAena,KAAKiO,MAAMxF,EAAQ6Q,OAAOa,cAEV,IAAjC1R,EAAQ6Q,OAAOc,cACbD,IAAiB1R,EAAQ6Q,OAAO3N,YAAc,IAChDlD,EAAQ6Q,OAAOS,QAGbhZ,EAAKoI,KAAKzE,OAAOgJ,SADfhF,EAAW6B,QACa,KACxB9B,EAAQ6Q,OAAO7N,cAAc,GAC7BhD,EAAQ6Q,OAAO3G,YAAYlK,EAAQ6Q,OAAO3N,aAAa,GAEvD5K,EAAKmZ,sBAAsBzR,EAAS,WAAU,EAGtB,KACxBA,EAAQ6Q,OAAO3G,YAAYjK,EAAWsQ,WAAW,IAHhDjY,IAQHoZ,IAAiBzR,EAAWsQ,YAC9BvQ,EAAQ6Q,OAAOS,QAEfhZ,EAAKoI,KAAKzE,OAAOgJ,SAAS,KACxBjF,EAAQ6Q,OAAO7N,aAAa,GAC5BhD,EAAQ6Q,OAAO3G,YAAYjK,EAAWsQ,WAAW,GAEjDjY,EAAKmZ,sBAAsBzR,EAAS,UACtC,EAAG1H,GAGT,CACF,GAIF0H,EAAQkC,KAAOtK,KAAKsK,KAAK7H,KAAKzC,KAAMoI,GACpCA,EAAQsR,MAAQ1Z,KAAK0Z,MAAMjX,KAAKzC,KAAMoI,GACtCA,EAAQ8J,KAAOlS,KAAKkS,KAAKzP,KAAKzC,KAAMoI,GAGpCA,EAAQ6Q,OAAOhT,iBAAiB,YAAa,KAC3CmC,EAAQb,UAAU7E,IAAI,aAEtBhC,EAAKsZ,aAAa3R,EAAWuQ,SAAQ,EACpC,CAAEtY,MAAM,GACb,CAOAuZ,qBAAAA,CAAuBtQ,EAAI0Q,GACzB1Q,EAAGhC,UAAU3E,OAAO,aAAc,qBAAsB,sBAAuB,aAE1EqX,GAGH1Q,EAAGhC,UAAU7E,IAAI,cAGf6G,EAAGhC,UAAU7E,IADC,aAAZuX,EACe,sBAEA,uBAPnB1Q,EAAGhC,UAAU7E,IAAI,YAUrB,CAKAsX,YAAAA,CAAcpB,GAAW,GACvB5Y,KAAKoZ,SAEDR,GACF5Y,KAAKqZ,YAIgB,IAAnBrZ,KAAKqZ,WAA4C,mBAAlBrZ,KAAKsJ,WACtCtJ,KAAKsJ,WACLtJ,KAAKsJ,SAAW,MAIE,IAAhBtJ,KAAKoZ,QACPpZ,KAAK8I,KAAKzE,OAAOgJ,SAAS,KACxBrN,KAAK8I,KAAKuD,QAAQ5L,KAAK,SACzB,EAEJ,CAKA6J,IAAAA,CAAMlC,GACAA,GAAWA,EAAQ6Q,SACrB7Q,EAAQ6Q,OAAO3O,OAEftK,KAAK6Z,sBAAsBzR,EAAS,WAExC,CAKAsR,KAAAA,CAAOtR,GACDA,GAAWA,EAAQ6Q,SACrB7Q,EAAQ6Q,OAAOS,QAEf1Z,KAAK6Z,sBAAsBzR,GAAS,GAExC,CAKA8J,IAAAA,CAAM9J,GACAA,GAAWA,EAAQ6Q,SACrB7Q,EAAQ6Q,OAAO/G,OAEflS,KAAK6Z,sBAAsBzR,GAAS,GAExC,CAMA2D,gBAAAA,CAAkB3F,GAChB,MAAMgC,EAAUhC,EAAEhI,OAElBgK,EAAQ6Q,OAAO5N,YAAYjD,EAAQ6Q,OAAO3N,YAAclD,EAAQhD,gBAAgB,EAClF,ECvZmB,MAAA8U,UAAuBzS,EAI1C1H,WAAAA,CAAa+I,GACXE,MAAM,SAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKyL,SAAW,GAEhBzL,KAAK6D,MAAQ,CACXrE,EAAGuF,OAAOQ,OACV+O,EAAGvP,OAAOS,QAGZT,OAAOoV,WAAa,CAItB,CAKApS,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,OACvDA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAEvDA,KAAK8I,KAAKzE,OAAO3B,IAAI1C,KAAK4S,KAAM5S,MAEhCA,KAAKoa,mBAELpa,KAAK4F,YACP,CAKAoC,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACNxG,QAAS,CAACwG,OAAQ9J,KAAK8I,KAAKkB,UAAUnG,MAAMP,SAEhD,CAKA6E,aAAAA,CAAeC,GACb,MAAMzH,EAAOqI,MAAMb,cAAcC,GAEjC,GAAIzH,EAAK2C,QAAS,CAChB,MAAMyP,EAAcpS,EAAK2C,QAAQ0P,MAAM,0DAGrCrS,EAAK2C,QADHyP,EACahJ,OAAOgJ,EAAY,KAAQhJ,OAAOgJ,EAAY,IAAMhJ,OAAOgJ,EAAY,KAAOpT,KAAKsT,SAEnFlJ,OAAOpJ,EAAK2C,SAG7B3C,EAAK2C,QAAU3D,KAAKE,IAAIF,KAAKC,IAAIe,EAAK2C,QAAS,KAAO,EACxD,CAEA,OAAO3C,CACT,CAKAiF,UAAAA,GACE5F,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKsM,cAAetM,KACrD,CAKAsM,aAAAA,GACEtM,KAAKuM,aACP,CAMAP,QAAAA,CAAU1K,GACRtB,KAAKuM,cAELjL,GACF,CAKAiL,WAAAA,GACE,MAAMd,EAAW7E,SAAS4F,iBAAiB,mBACrC9L,EAAOV,KAEbyL,EAAS/M,QAAQ0J,IACf1H,EAAK+L,WAAWrE,EAAO,EAE3B,CAMAqE,UAAAA,CAAYrE,GACLpI,KAAKyL,SAASiB,SAAStE,KAC1BpI,KAAKmI,cAAcC,GAEnBpI,KAAK8I,KAAKuR,cAAc3X,IAAI0F,GAE5BA,EAAQU,KAAKjF,MAAMyW,QAAU,EAC7BlS,EAAQU,KAAKjF,MAAM0W,QAAU,EAC7BnS,EAAQU,KAAKjF,MAAM2W,gBAAkB,EACrCpS,EAAQU,KAAKjF,MAAM4W,gBAAkB,EAErCza,KAAKyL,SAASlL,KAAK6H,GAEvB,CAMAoF,aAAAA,CAAepF,GACTpI,KAAKyL,SAASiB,SAAStE,IACzBpI,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,EAEzD,CAMA6D,QAAAA,CAAU3K,GACR,MAAMZ,EAAOV,KAEbA,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK8M,cAAcpF,EACrB,GAEA9G,GACF,CAKA8Y,gBAAAA,GACE,MAAMM,EAAQ1a,KAAK6D,MAAMrE,EAAIuF,OAAOQ,OAC9BoV,EAAQ3a,KAAK6D,MAAMyQ,EAAIvP,OAAOS,OAC9BoV,EAAOjb,KAAKkb,MAAMH,EAAOC,GAO/B,GALA5V,OAAOoV,YAA2C,IAA5BS,EAAO7V,OAAOoV,YAChCpV,OAAOoV,WAAa,OACtBpV,OAAOoV,WAAa,GAGlBS,EAAO,EAAG,CACZ,MAAMvD,EAAQ1X,KAAK2X,MAAMqD,EAAOD,IAAU,IAAM/a,KAAK+X,IAAM,IAE3D3S,OAAO+V,WAAazD,EAGlBtS,OAAOgW,eADL1D,GAAS,IAAMA,EAAQ,IACD,OACfA,GAAS,KAAOA,EAAQ,IACT,OACfA,GAAS,KAAOA,EAAQ,IACT,KAEA,OAE5B,CAEArX,KAAK6D,MAAQ,CACXrE,EAAGuF,OAAOQ,OACV+O,EAAGvP,OAAOS,QAGZgB,WAAWxG,KAAKoa,iBAAiB3X,KAAKzC,MAAO,GAC/C,CAKA4S,IAAAA,GACE5S,KAAKyL,SAAS/M,QAAQ0J,IACpB,MAAMvE,EAAQuE,EAAQU,KAAKjF,MAE3B,GAAIA,EAAMrE,EACR,GAAIqE,EAAMP,QAAS,CACjBO,EAAMyW,UAAYzW,EAAMrE,EAAIqE,EAAMyW,SAAWzW,EAAMP,QACnDO,EAAM0W,UAAY1W,EAAMyQ,EAAIzQ,EAAM0W,SAAW1W,EAAMP,QACnDO,EAAM2W,kBAAoB3W,EAAMmX,UAAYnX,EAAM2W,iBAAmB3W,EAAMP,QAC3EO,EAAM4W,kBAAoB5W,EAAMoX,UAAYpX,EAAM4W,iBAAmB5W,EAAMP,QAE3E8E,EAAQlB,MAAMC,YAAY,YAAatD,EAAMyW,SAC7ClS,EAAQlB,MAAMC,YAAY,YAAatD,EAAM0W,SAC7CnS,EAAQlB,MAAMC,YAAY,qBAAsBtD,EAAM2W,iBACtDpS,EAAQlB,MAAMC,YAAY,qBAAsBtD,EAAM4W,iBAEtD,MAAMS,EAAQvb,KAAKiO,MAAkC,KAA3B/J,EAAMrE,EAAIqE,EAAMyW,UAAmB,IACvDa,EAAQxb,KAAKiO,MAAkC,KAA3B/J,EAAMyQ,EAAIzQ,EAAM0W,UAAmB,IAE7DnS,EAAQlB,MAAMC,YAAY,eAAgBxH,KAAKuU,IAAIgH,IACnD9S,EAAQlB,MAAMC,YAAY,WAAY+T,GACtC9S,EAAQlB,MAAMC,YAAY,eAAgBxH,KAAKuU,IAAIiH,IACnD/S,EAAQlB,MAAMC,YAAY,WAAYgU,EACxC,MACE/S,EAAQlB,MAAMC,YAAY,YAAatD,EAAMrE,GAC7C4I,EAAQlB,MAAMC,YAAY,YAAatD,EAAMyQ,GAC7ClM,EAAQlB,MAAMC,YAAY,qBAAsBtD,EAAMmX,WACtD5S,EAAQlB,MAAMC,YAAY,qBAAsBtD,EAAMoX,UAE1D,EAEJ,EC3NmB,MAAAG,UAAiB3T,EAIpC1H,WAAAA,CAAa+I,GACXE,MAAM,YAENhJ,KAAK8I,KAAOA,EAEZ9I,KAAKyL,SAAW,GAGhBzL,KAAK+L,iBAAmB/L,KAAK+L,iBAAiBtJ,KAAKzC,KACrD,CAKA+H,IAAAA,GACEiB,MAAMjB,OAEN/H,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKgM,SAASvJ,KAAKzC,MAAO,IAC9DA,KAAK8I,KAAKa,UAAUjH,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAEvDA,KAAK8I,KAAKzE,OAAO3B,IAAI1C,KAAK4S,KAAM5S,MAEhCA,KAAK4F,YACP,CAKAoC,aAAAA,GACEhI,KAAKkI,iBAAmB,CACtBuB,KAAMK,OACNuR,QAASvR,OACTwR,UAAW,CAACxR,OAAQ,GACpByR,OAAQzR,OACRxG,QAAS,CAACwG,OAAQ9J,KAAK8I,KAAKkB,UAAUlG,SAASR,SAEnD,CAKA6E,aAAAA,CAAeC,GACb,MAAMzH,EAAOqI,MAAMb,cAAcC,GAEjC,GAAIzH,EAAK2a,UAAW,CAClB,MAAME,EAAgB7a,EAAK2a,UAAUtI,MAAM,0DAGzCrS,EAAK2a,UADHE,EACezR,OAAOyR,EAAc,KAAQzR,OAAOyR,EAAc,IAAMzR,OAAOyR,EAAc,KAAO7b,KAAKsT,SAEzFlJ,OAAOpJ,EAAK2a,UAEjC,CAEA,OAAO3a,CACT,CAKAiF,UAAAA,GACE5F,KAAK8I,KAAKuD,QAAQnM,GAAG,SAAUF,KAAKsM,cAAetM,KACrD,CAKAsM,aAAAA,GACEtM,KAAKuM,aACP,CAMAP,QAAAA,CAAU1K,GACRtB,KAAKuM,cAELjL,GACF,CAMA2K,QAAAA,CAAU3K,GACR,MAAMZ,EAAOV,KAEbA,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK8M,cAAcpF,EAAO,GAG5B9G,GACF,CAKAiL,WAAAA,GACE3F,SAAS4F,iBAAiB,sBAAsB9N,QAAQ0J,IACtD,MAEMiT,EAFarb,KAAKmI,cAAcC,GAEXiT,QAC3B,IAAII,GAAS,EAEb,MAAMC,EAAW1b,KAAK8I,KAAK4S,SAAW,CAAA,EAElCL,GAAWK,EAAQC,KACJ,YAAZN,GAAyBK,EAAQC,GAAG,YACxB,aAAZN,IAA2BK,EAAQC,GAAG,YAC1B,WAAZN,GAAwBK,EAAQC,GAAG,WACvB,WAAZN,GAAwBK,EAAQC,GAAG,aACtCF,GAAS,GAITA,GACFzb,KAAKyM,WAAWrE,EAClB,EAEJ,CAMAqE,UAAAA,CAAYrE,GACLpI,KAAKyL,SAASiB,SAAStE,KAC1BpI,KAAK8I,KAAKiE,eAAerK,IAAI0F,GAEM,UAA/BA,EAAQU,KAAKhF,SAAS2F,OACxBrB,EAAQlB,MAAM0U,SAAW,SACzBxT,EAAQU,KAAKhF,SAASoJ,MAAQ9E,EAAQyT,mBAGxCzT,EAAQU,KAAKhF,SAASgY,SAAW,EACjC1T,EAAQU,KAAKhF,SAASiY,eAAiB,EAEvC/b,KAAKyL,SAASlL,KAAK6H,GAEnBpI,KAAK8I,KAAKzE,OAAOgJ,SAAS,KACxBjF,EAAQnC,iBAAiB,iBAAkBjG,KAAK+L,kBAChD/L,KAAKgc,YAAY5T,EACnB,GAEJ,CAMAoF,aAAAA,CAAepF,GACbA,EAAQqF,oBAAoB,iBAAkBzN,KAAK+L,kBAE/C/L,KAAKyL,SAASiB,SAAStE,IACzBpI,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,EAEzD,CAMA2D,gBAAAA,CAAkB3F,GAChBpG,KAAKgc,YAAY5V,EAAEhI,OACrB,CAMA4d,WAAAA,CAAa5T,GACX,IAAI6L,EAAW,EAGbA,EADE7L,EAAQhB,YAAc,EACbgB,EAAQhD,eAER,EAA6B,EAAzBgD,EAAQhD,eAGY,WAAjCgD,EAAQU,KAAKhF,SAASyX,OACxBtH,GAAY,EAC8B,QAAjC7L,EAAQU,KAAKhF,SAASyX,SAC/BtH,GAAY,GAIZ7L,EAAQU,KAAKhF,SAASgY,SADW,UAA/B1T,EAAQU,KAAKhF,SAAS2F,KAC4C,EAAlCrB,EAAQU,KAAKhF,SAASwX,UAAiBrH,EAExC7L,EAAQpB,aAAeiN,EAAW7L,EAAQU,KAAKhF,SAASwX,UAAY,CAEzG,CAKA1I,IAAAA,GACE5S,KAAKyL,SAAS/M,QAAQ0J,IACpBA,EAAQU,KAAKhF,SAASiY,iBAAmB3T,EAAQU,KAAKhF,SAASgY,SAAW1T,EAAQU,KAAKhF,SAASiY,gBAAkB3T,EAAQU,KAAKhF,SAASR,QAErG,UAA/B8E,EAAQU,KAAKhF,SAAS2F,MAAoBrB,EAAQU,KAAKhF,SAASoJ,MAClE9E,EAAQU,KAAKhF,SAASoJ,MAAMhG,MAAMmN,UAAY,kBAAoBjM,EAAQU,KAAKhF,SAASiY,eAAiB,iBAAoBjS,OAAOnK,KAAKuU,IAAI9L,EAAQU,KAAKhF,SAASwX,YAAYxc,QAAQ,IAAK,IAAO,IAEnMsJ,EAAQlB,MAAMmN,UAAY,kBAAoBjM,EAAQU,KAAKhF,SAASiY,eAAiB,QACvF,EAEJ,EClNK,MAAME,EAAsB,CACjC,cAAe,cACf,kBAAmB,UACnBC,KAAM,OACNC,WAAY,aACZC,OAAQ,SACRC,SAAU,WACVC,SAAU,WACVC,SAAU,WACVC,QAAS,UACTC,MAAO,QACPC,QAAS,UACT,gBAAiB,gBACjBC,UAAW,YACX,oBAAqB,KACrB,WAAY,WACZC,QAAS,UACT,iBAAkB,OAClB,aAAc,KACd,sBAAuB,QACvBC,MAAO,QACP,cAAe,cACfC,UAAW,YACXC,OAAQ,SACRC,SAAU,WACVC,GAAI,KACJC,OAAQ,SACRC,OAAQ,SACRC,SAAU,WACV,+BAAgC,mBAChCC,UAAW,YACXC,SAAU,WACVC,MAAO,QACPC,MAAO,QACP,aAAc,KACdC,QAAS,UACT,gBAAiB,QACjBC,OAAQ,SACR,iBAAkB,SAClBC,KAAM,QAGKC,EAAc,CACzBC,YAAa,cACbC,QAAS,kBACTC,KAAM,OACNC,WAAY,aACZC,OAAQ,SACRC,SAAU,WACVC,SAAU,WACVC,SAAU,WACVC,QAAS,UACTC,MAAO,QACPC,QAAS,UACTC,UAAW,YACXC,cAAe,gBACfC,GAAI,oBACJC,SAAU,WACVC,QAAS,UACTC,KAAM,iBACNC,GAAI,aACJC,MAAO,sBACPC,MAAO,QACPC,YAAa,cACbC,UAAW,YACXC,OAAQ,SACRC,SAAU,WACVC,GAAI,aACJC,OAAQ,kBACRC,OAAQ,SACRC,SAAU,WACVC,iBAAkB,+BAClBC,UAAW,YACXC,SAAU,WACVC,MAAO,QACPC,MAAO,QACPC,GAAI,aACJC,QAAS,UACTC,MAAO,gBACPC,OAAQ,SACRC,OAAQ,kBAGGC,EAAgB,CAC3BC,OAAQ,SACRC,OAAQ,SACRC,QAAS,UACTC,GAAI,MAGOC,EAAS,CACpBC,aAAc,gBACdC,QAAS,UACTC,MAAO,QACPC,IAAK,MACLC,QAAS,UACTC,MAAO,QACP3E,WAAY,aACZD,KAAM,OACNsB,MAAO,QACPuD,MAAO,QACPC,SAAU,YACVC,aAAc,gBACdtD,KAAM,QAGKuD,EAAa,CACxBC,SAAU,WACVC,MAAO,QACPC,QAAS,UACTC,OAAQ,SACRC,MAAO,QACPC,OAAQ,UChHK,MAAMC,EAOnB,oBAAOC,CAAcC,EAAQC,GAC3B,MAAM5O,EAAQ4O,EAAG5O,MAAM2O,GACvB,OAAQ3O,GAASA,EAAM7Q,OAAS,GAAK6Q,EAAM,IAAO,EACpD,CAQA,qBAAO6O,CAAeF,EAAQC,GAC5B,MAAM5O,EAAQ4O,EAAG5O,MAAM2O,GACvB,OAAQ3O,GAASA,EAAM7Q,OAAS,GAAK6Q,EAAM,IAAO,EACpD,CASA,0BAAO8O,CAAoBH,EAAQC,EAAIG,GACrC,GAAIJ,EAAOK,KAAKJ,GACd,OAAOG,CAGX,CAEA,4BAAOE,CAAsBC,GAC3B,OAAQA,GACN,IAAK,KAAM,MAAO,KAClB,IAAK,KAEL,IAAK,SAAU,MAAO,KADtB,IAAK,SAAU,MAAO,OAEtB,IAAK,SAAU,MAAO,OACtB,IAAK,SAAU,MAAO,QACtB,IAAK,SAAU,MAAO,IACtB,IAAK,SAAU,MAAO,IACtB,IAAK,SAAU,MAAO,MACtB,IAAK,UAAW,MAAO,KACvB,QAAS,OAEb,CAsBA,0BAAOC,CAAoBD,GACzB,MAAME,EAAIF,EAAQjU,MAAM,KAAKP,OAAO,EAAG,GAAG2U,IAAIC,GAAKC,SAASD,EAAG,KAAO,GAEtE,GADAF,EAAE7hB,KAAK,GACM,KAAT6hB,EAAE,GACN,OAAQA,EAAE,IACR,KAAK,EAAG,MAAO,UACf,KAAK,EAAG,MAAO,eACf,KAAK,EAAG,MAAO,OACf,KAAK,EAAG,MAAO,gBACf,KAAK,EAAG,MAAO,YACf,KAAK,GAAI,MAAO,WAChB,KAAK,GAAI,MAAO,aAChB,KAAK,GAAI,MAAO,SAChB,KAAK,GAAI,MAAO,cAChB,KAAK,GAAI,MAAO,SAChB,KAAK,GAAI,MAAO,WAChB,QAAS,OAEb,CA0BA,4BAAOI,CAAsBN,GAC3B,MAAME,EAAIF,EAAQjU,MAAM,KAAKP,OAAO,EAAG,GAAG2U,IAAIC,GAAKC,SAASD,EAAG,KAAO,GAEtE,GADAF,EAAE7hB,KAAK,KACM,IAAT6hB,EAAE,IAAYA,EAAE,GAAK,GACzB,OAAa,IAATA,EAAE,IAAYA,EAAE,GAAK,EAAU,UACtB,IAATA,EAAE,IAAYA,EAAE,IAAM,EAAU,QACvB,IAATA,EAAE,IAAYA,EAAE,GAAK,EAAU,SACtB,IAATA,EAAE,IAAqB,IAATA,EAAE,GAAiB,QACxB,IAATA,EAAE,IAAYA,EAAE,GAAK,EAAU,cACtB,IAATA,EAAE,GAAiB,YACV,IAATA,EAAE,IAAYA,EAAE,GAAK,EAAU,qBACtB,IAATA,EAAE,IAAYA,EAAE,GAAK,EAAU,aACtB,IAATA,EAAE,IAAYA,EAAE,IAAM,EAAU,SACvB,IAATA,EAAE,GAAiB,WACV,IAATA,EAAE,GAAiB,cACV,IAATA,EAAE,GAAiB,SACV,IAATA,EAAE,GAAiB,OACV,IAATA,EAAE,GAAiB,WAAvB,CAEF,CAWA,0BAAOK,CAAoBP,GACzB,OAAOA,EAAQjU,MAAM,KAAK9L,MAC5B,CAmBA,sBAAOugB,CAAgBC,EAAUC,EAAUC,GAAU,GAEnD,MAAMC,EAAoBrB,EAAMgB,oBAAoBE,GAC9CI,EAAoBtB,EAAMgB,oBAAoBG,GAEpD,IAAII,EAAYrjB,KAAKE,IAAIijB,EAAmBC,GACxCE,EAAgB,EAEpB,MAAMC,EAASzB,EAAMY,IAAI,CAACM,EAAUC,GAAYV,IAC9C,MAAMiB,EAAQH,EAAYvB,EAAMgB,oBAAoBP,GAG9CkB,EAAWlB,EAAU,IAAIlkB,MAAMmlB,EAAQ,GAAG3O,KAAK,MAGrD,OAAOiN,EAAMY,IAAIe,EAASnV,MAAM,KAAMoV,GAAS,IAAIrlB,MAAM,GAAKqlB,EAAMlhB,QAAQqS,KAAK,KAAO6O,GAAOnZ,SAAS,GAU1G,IANI2Y,IACFI,EAAgBD,EAAYrjB,KAAKC,IAAIkjB,EAAmBC,IAI1DC,GAAa,EACNA,GAAaC,GAAe,CAEjC,GAAIC,EAAO,GAAGF,GAAaE,EAAO,GAAGF,GACnC,OAAO,EAGT,GAAIE,EAAO,GAAGF,KAAeE,EAAO,GAAGF,GAAY,CACjD,GAAIA,IAAcC,EAEhB,OAAO,EAGTD,GAAa,CACf,MAAO,GAAIE,EAAO,GAAGF,GAAaE,EAAO,GAAGF,GAC1C,OAAQ,CAEZ,CAGF,CASA,UAAOX,CAAIiB,EAAKC,GACd,MAAMC,EAAS,GACf,IAAI3O,EACJ,GAAI7W,MAAMylB,UAAUpB,IAClB,OAAOrkB,MAAMylB,UAAUpB,IAAIxhB,KAAKyiB,EAAKC,GAEvC,IAAK1O,EAAI,EAAGA,EAAIyO,EAAInhB,OAAQ0S,GAAK,EAC/B2O,EAAOjjB,KAAKgjB,EAASD,EAAIzO,KAE3B,OAAO2O,CACT,CASA,WAAOE,CAAKJ,EAAKK,GACf,IAAI9O,EACA+O,EACJ,GAAI5lB,MAAMylB,UAAUC,KAClB,OAAO1lB,MAAMylB,UAAUC,KAAK7iB,KAAKyiB,EAAKK,GAExC,IAAK9O,EAAI,EAAG+O,EAAIN,EAAInhB,OAAQ0S,EAAI+O,EAAG/O,GAAK,EAAG,CACzC,MAAM3R,EAAQogB,EAAIzO,GAClB,GAAI8O,EAAUzgB,EAAO2R,GACnB,OAAO3R,CAEX,CAEF,CASA,aAAO1E,CAAOY,KAAQykB,GACpB,MAAML,EAASpkB,EACf,IAAIyV,EACA+O,EACJ,GAAIrlB,OAAOC,OACT,OAAOD,OAAOC,OAAOY,KAAQykB,GAE/B,IAAKhP,EAAI,EAAG+O,EAAIC,EAAU1hB,OAAQ0S,EAAI+O,EAAG/O,GAAK,EAAG,CAC/C,MAAMiP,EAAWD,EAAUhP,GACH,iBAAbiP,GAAsC,OAAbA,GACrBvlB,OAAOE,KAAKqlB,GACpBplB,QAASC,IACZ6kB,EAAO7kB,GAAOmlB,EAASnlB,EAAI,EAGjC,CACA,OAAOS,CACT,CAWA,sBAAO2kB,CAAgBC,GACrB,OAAO/H,EAAoB+H,EAC7B,CAWA,4BAAOC,CAAsBC,GAC3B,OAAOtG,EAAYsG,IAAiB,EACtC,ECxRF,MAAMC,EAA0B,6BAE1BC,EAAe,CAEnB,CACEpC,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,aAEF+hB,EAAUT,EAAMC,cAAc,2BAA4BE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAMpH,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAIF,CACEsG,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,SAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,kCAAmCE,GAM3H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAIF,CACEsG,KAAM,CAAC,gBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,SAEF+hB,EAAUT,EAAMC,cAAc,2BAA4BE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAMpH,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,mBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,gCAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,2CAA4CE,GAMpI,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,uBAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,iCAAkCE,GAM1H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,cAEF+hB,EAAUT,EAAMC,cAAc,qCAAsCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,SAEF+hB,EAAUT,EAAMC,cAAc,iCAAkCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM1H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,SAEF+hB,EAAUT,EAAMC,cAAc,iCAAkCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM1H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,eAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,kCAAmCE,GAM3H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,yBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,eAEF+hB,EAAUT,EAAMC,cAAc,gCAAiCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAMzH,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,kBAEF+hB,EAAUT,EAAMC,cAAc,sCAAuCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM/H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,cAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,sCAAuCE,GAM/H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,kBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,WAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,0CAA2CE,GAMnI,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,qCAAsCE,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,WACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,UAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,mCAAoCE,GAM5H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,qCAAsCE,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,qCAAsCE,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,mBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,UAEF+hB,EAAUT,EAAMC,cAAc,2CAA4CE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAMpI,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAO,iBAAkB6hB,KAAKJ,GAAM,kBAAoB,cAEpDM,EAAUT,EAAMC,cAAc,kDAAmDE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM3I,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,iBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,qBAEF+hB,EAAUT,EAAMC,cAAc,iCAAkCE,GAMtE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,YACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,kBAGF+hB,EAAUT,EAAMC,cAAc,2BAA4BE,GAMhE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,kBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,kBAGF+hB,EAAUT,EAAMI,eAAe,mCAAoCD,GAMzE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,YACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,WAEF+hB,EAAUT,EAAMC,cAAc,6BAA8BE,GAMlE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,aAEF+hB,EAAUT,EAAMC,cAAc,+BAAgCE,GAMpE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAGF+hB,EAAUT,EAAMC,cAAc,qCAAsCE,GAM1E,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,SACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,eAEF+hB,EAAUT,EAAMC,cAAc,0BAA2BE,GAM/D,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,YACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,aAEF+hB,EAAUT,EAAMC,cAAc,+BAAgCE,GAMpE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAc,8BAA+BE,GAMnE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,sBAAuB,gBAC9BqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,cAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,qCAAsCE,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,mBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,iBAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,IAAOH,EAAMC,cAAc,0CAA2CE,GAMnI,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,SACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,QAEF+hB,EAAUT,EAAMC,cAAc,4BAA6BE,GAMjE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,SAEF+hB,EAAUT,EAAMC,cAAc,0CAA2CE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAMnI,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAc,qCAAsCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,4BACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,WAEF+hB,EAAUT,EAAMC,cAAc,oDAAqDE,GAMzF,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAc,kCAAmCE,GAMvE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,gBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,QAEF+hB,EAAUT,EAAMC,cAAc,wCAAyCE,GAM7E,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,YAEF+hB,EAAUT,EAAMC,cAAc,qCAAsCE,IAAOH,EAAMC,cAAcyC,EAAyBvC,GAM9H,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,sBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,UAEF+hB,EAAUT,EAAMC,cAAc,2CAA4CE,GAMhF,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAEF,CACEsG,KAAM,CAAC,QACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,iBAEF+hB,EAAUT,EAAMC,cAAc,6BAA8BE,GAMlE,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAIF,CACEsG,IAAAA,CAAKsC,GACH,MAAMC,GAAkBD,EAAOtC,KAAK,iBAC9BwC,EAAaF,EAAOtC,KAAK,YAC/B,OAAOuC,GAAkBC,CAC1B,EACDH,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,mBAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,GAM7D,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAIF,CACEsG,KAAM,CAAC,kBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,iBAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,GAM7D,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAIF,CACEsG,KAAM,CAAC,uBACPqC,QAAAA,CAASzC,GACP,MAAMlG,EAAU,CACdvb,KAAM,UAEF+hB,EAAUT,EAAMC,cAAcyC,EAAyBvC,GAM7D,OAJIM,IACFxG,EAAQwG,QAAUA,GAGbxG,CACT,GAIF,CACEsG,KAAM,CAAC,OACPqC,QAAAA,CAASzC,GAKP,MAGMD,GADsC,IAAtBC,EAAG6C,OAAO,OADH,yBADG,eAIhC,MAAO,CACLtkB,KAAMshB,EAAMC,cAAcC,EAAQC,GAClCM,QAAST,EAAMI,eAAeF,EAAQC,GAE1C,ICprBJ,IAAe8C,EAAA,CAEb,CACE1C,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,wBAAyBE,GAC7D,MAAO,CACLzhB,KAAMqgB,EAAO7C,KACbuE,UAEJ,GAIF,CACEF,KAAM,CAAC,kBACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,yCAA0CE,GAC9E,MAAO,CACLzhB,KAAMqgB,EAAOC,aACbyB,UAEJ,GAIF,CACEF,KAAM,CAAC,aACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,iCAAkCE,GAChE+C,EAAclD,EAAMQ,sBAAsBC,GAEhD,MAAO,CACL/hB,KAAMqgB,EAAOE,QACbwB,UACAyC,cAEJ,GAIF,CACE3C,KAAM,CAAC,+BACPqC,QAAAA,CAASzC,GACP,MAAM4B,EAAS,CACbrjB,KAAMqgB,EAAOI,KAETsB,EAAUT,EAAMI,eAAe,wBAAyBD,GAI9D,OAHIM,IACFsB,EAAOtB,QAAUA,GAEZsB,CACT,GAIF,CACExB,KAAM,CAAC,cACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,6BAA8BE,GAAI9iB,QAAQ,SAAU,KAClF6lB,EAAclD,EAAMU,oBAAoBD,GAExC0C,EAAK,CACTzkB,KAAMqgB,EAAOG,MACbuB,WAKF,OAHIyC,IACFC,EAAGD,YAAcA,GAEZC,CACT,GAIF,CACE5C,KAAM,CAAC,uBACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,qCAAsCE,GAAI9iB,QAAQ,SAAU,KAEhG,MAAO,CACLqB,KAAMqgB,EAAOI,IACbsB,UAEJ,GAIF,CACEF,IAAAA,CAAKsC,GACH,MAAMC,GAAkBD,EAAOtC,KAAK,iBAC9BwC,EAAaF,EAAOtC,KAAK,YAC/B,OAAOuC,GAAkBC,CAC1B,EACDH,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,8BAA+BE,GAC7D+C,EAAclD,EAAMe,sBAAsBN,GAC1C0C,EAAK,CACTzkB,KAAMqgB,EAAOK,QACbqB,WAKF,OAHIyC,IACFC,EAAGD,YAAcA,GAEZC,CACT,GAIF,CACE5C,KAAM,CAAC,mBACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,mCAAoCE,GAClEgD,EAAK,CACTzkB,KAAMqgB,EAAOM,OAMf,OAHIoB,GAAWA,EAAQ/f,SACrByiB,EAAG1C,QAAUA,GAER0C,CACT,GAIF,CACE5C,KAAM,CAAC,sBAAuB,gBAC9BqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,kCAAmCE,IAClEH,EAAMC,cAAc,mCAAoCE,IACxDH,EAAMC,cAAc,aAAcE,GAEvC,MAAO,CACLzhB,KAAMqgB,EAAOrE,WACb+F,UAEJ,GAIF,CACEF,KAAM,CAAC,SACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,uBAAwBE,GAE5D,MAAO,CACLzhB,KAAMqgB,EAAOtE,KACbgG,UAEJ,GAIF,CACEF,KAAM,CAAC,UACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,2BAA4BE,GAEhE,MAAO,CACLzhB,KAAMqgB,EAAOhD,MACb0E,UAEJ,GAIF,CACEF,KAAM,CAAC,UACPqC,SAAQA,KACC,CACLlkB,KAAMqgB,EAAOO,SAMnB,CACEiB,KAAM,CAAC,QACPqC,SAAQA,KACC,CACLlkB,KAAMqgB,EAAOQ,YAMnB,CACEgB,KAAM,CAAC,iBACPqC,QAAAA,CAASzC,GACP,MAAMM,EAAUT,EAAMC,cAAc,mCAAoCE,GACxE,MAAO,CACLzhB,KAAMqgB,EAAOS,aACbiB,UAEJ,IC5LW2C,EAAA,CAEb,CACE7C,KAAM,CAAC,cACPqC,SAAQA,KACC,CACL3b,KAAM,MACNoc,OAAQ,YAMd,CACE9C,KAAM,CAAC,WACPqC,QAAAA,CAASzC,GACP,MAAMmD,EAAQtD,EAAMC,cAAc,aAAcE,IAAO,OACjDoD,EAAW,CACftc,KAAMyX,EAAcE,OACpByE,OAAQ,UAKV,OAHIC,IACFC,EAASD,MAAQA,GAEZC,CACT,GAIF,CACEhD,KAAM,CAAC,2BACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,OACpB0E,OAAQ,WAMd,CACE9C,KAAM,CAAC,SACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,OACpB0E,OAAQ,QACRC,MAAO,UAMb,CACE/C,KAAM,CAAC,+BACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,OACpB0E,OAAQ,QACRC,MAAO,UAMb,CACE/C,KAAM,CAAC,eACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,OACpB0E,OAAQ,SACRC,MAAO,sBAMb,CACE/C,KAAM,CAAC,SACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,OACpB0E,OAAQ,YAMd,CACE9C,KAAM,CAAC,kBACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,UAM1B,CACE4B,IAAAA,CAAKsC,GACH,MAAMW,EAAUX,EAAOtC,KAAK,gBACtBkD,EAAcZ,EAAOtC,KAAK,uBAChC,OAAOiD,IAAYC,CACpB,EACDb,QAAAA,CAASzC,GACP,MAAMmD,EAAQtD,EAAMC,cAAc,iBAAkBE,GACpD,MAAO,CACLlZ,KAAMyX,EAAcE,OACpByE,OAAQ,QACRC,QAEJ,GAIF,CACE/C,KAAM,CAAC,mBAAoB,iBAC3BqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcE,OACpByE,OAAQ,WAMd,CACE9C,KAAM,CAAC,aACPqC,SAAQA,KACC,CACL3b,KAAMyX,EAAcE,UAM1B,CACE2B,KAAKsC,GACoC,eAAhCA,EAAOa,gBAAe,GAE/Bd,SAAQA,KACC,CACL3b,KAAMyX,EAAcE,OACpByE,OAAQ,gBAMd,CACE9C,KAAKsC,GACoC,SAAhCA,EAAOa,gBAAe,GAE/Bd,SAAQA,KACC,CACL3b,KAAMyX,EAAcE,UAM1B,CACE2B,KAAKsC,GACgC,kBAA5BA,EAAOa,iBAEhBd,SAAQA,KACC,CACL3b,KAAMyX,EAAcE,OACpByE,OAAQ,eAMd,CACE9C,IAAAA,CAAKsC,GACH,MAAMc,EAAiBrb,OAAOD,OAAOwa,EAAOe,gBAAgBpX,MAAM,KAAK,IACvE,MAAkC,YAA3BqW,EAAOgB,WAAU,IAAwBF,GAAkB,CACnE,EACDf,SAAQA,KACC,CACL3b,KAAMyX,EAAcC,UAM1B,CACE4B,KAAKsC,GAC+B,YAA3BA,EAAOgB,WAAU,GAE1BjB,SAAQA,KACC,CACL3b,KAAMyX,EAAcE,UAM1B,CACE2B,KAAKsC,GAC+B,UAA3BA,EAAOgB,WAAU,GAE1BjB,SAAQA,KACC,CACL3b,KAAMyX,EAAcG,QACpBwE,OAAQ,WAMd,CACE9C,KAAKsC,GAC+B,YAA3BA,EAAOgB,WAAU,GAE1BjB,SAAQA,KACC,CACL3b,KAAMyX,EAAcG,WAM1B,CACE0B,KAAKsC,GAC+B,UAA3BA,EAAOgB,WAAU,GAE1BjB,SAAQA,KACC,CACL3b,KAAMyX,EAAcG,WAM1B,CACE0B,KAAKsC,GAC+B,kBAA3BA,EAAOgB,WAAU,GAE1BjB,SAAQA,KACC,CACL3b,KAAMyX,EAAcI,MAM1B,CACEyB,KAAKsC,GAC+B,SAA3BA,EAAOgB,WAAU,GAE1BjB,SAAQA,KACC,CACL3b,KAAMyX,EAAcI,OC/PbgF,EAAA,CAEb,CACEvD,KAAKsC,GACoC,mBAAhCA,EAAOa,gBAAe,GAE/Bd,QAAAA,CAASzC,GAIP,GAHqB,WAAWI,KAAKJ,GAInC,MAAO,CACLzhB,KAAM+gB,EAAWE,OAKrB,MAAMc,EAAUT,EAAMC,cAAc,0BAA2BE,GAE/D,MAAO,CACLzhB,KAAM+gB,EAAWC,SACjBe,UAEJ,GAIF,CACEF,KAAM,CAAC,YACPqC,QAAAA,CAASzC,GACP,MAAM4D,EAAS,CACbrlB,KAAM+gB,EAAWG,SAGba,EAAUT,EAAMC,cAAc,6BAA8BE,GAMlE,OAJIM,IACFsD,EAAOtD,QAAUA,GAGZsD,CACT,GAIF,CACExD,KAAKsC,GACIA,EAAOtC,KAAK,WAErBqC,QAAAA,CAASzC,GACP,MAAM4D,EAAS,CACbrlB,KAAM+gB,EAAWI,QAGbY,EAAUT,EAAMC,cAAc,4BAA6BE,GAMjE,OAJIM,IACFsD,EAAOtD,QAAUA,GAGZsD,CACT,GAIF,CACExD,IAAAA,CAAKsC,GACH,MAAMmB,EAAUnB,EAAOtC,KAAK,UACtB0D,EAAYpB,EAAOtC,KAAK,eAC9B,OAAOyD,IAAYC,CACpB,EACDrB,QAAAA,CAASzC,GACP,MAAM4D,EAAS,CACbrlB,KAAM+gB,EAAWK,OAGbW,EAAUT,EAAMC,cAAc,2BAA4BE,GAMhE,OAJIM,IACFsD,EAAOtD,QAAUA,GAGZsD,CACT,GAIF,CACExD,KAAM,CAAC,4BACPqC,SAAQA,KACC,CACLlkB,KAAM+gB,EAAWE,SAMvB,CACEY,KAAM,CAAC,mBACPqC,QAAAA,CAASzC,GACP,MAAM4D,EAAS,CACbrlB,KAAM+gB,EAAWM,QAGbU,EAAUT,EAAMC,cAAc,4BAA6BE,GAMjE,OAJIM,IACFsD,EAAOtD,QAAUA,GAGZsD,CACT,IC5GJ,MAAMG,EAaJ5lB,WAAAA,CAAY6lB,EAAIC,GAAc,GAC5B,GAAID,SAAyC,KAAPA,EACpC,MAAM,IAAIE,MAAM,sCAGlB9lB,KAAK+lB,IAAMH,EAwBX5lB,KAAKgmB,aAAe,IAEA,IAAhBH,GACF7lB,KAAKsT,OAET,CAQA2S,KAAAA,GACE,OAAOjmB,KAAK+lB,GACd,CAOA/D,IAAAA,CAAKkE,GACH,OAAOA,EAAMlE,KAAKhiB,KAAK+lB,IACzB,CAMAI,YAAAA,GACEnmB,KAAKgmB,aAAatK,QAAU,GAE5B,MAAM0K,EAAoB3E,EAAMiC,KAAK2C,EAAqBC,IACxD,GAA6B,mBAAlBA,EAAStE,KAClB,OAAOsE,EAAStE,KAAKhiB,MAGvB,GAAIsmB,EAAStE,gBAAgBhkB,MAC3B,OAAOsoB,EAAStE,KAAKuE,KAAKC,GAAaxmB,KAAKgiB,KAAKwE,IAGnD,MAAM,IAAIV,MAAM,uCAAuC,GAOzD,OAJIM,IACFpmB,KAAKgmB,aAAatK,QAAU0K,EAAkB/B,SAASrkB,KAAKimB,UAGvDjmB,KAAKgmB,aAAatK,OAC3B,CAQA+K,UAAAA,GACE,OAAIzmB,KAAKgmB,aAAatK,QACb1b,KAAKgmB,aAAatK,QAGpB1b,KAAKmmB,cACd,CAQAhB,cAAAA,CAAelmB,GACb,OAAIA,EACK6K,OAAO9J,KAAKymB,aAAatmB,MAAMlB,eAAiB,GAElDe,KAAKymB,aAAatmB,MAAQ,EACnC,CASAumB,iBAAAA,GACE,OAAO1mB,KAAKymB,aAAavE,OAC3B,CAaAyE,KAAAA,GACE,OAAI3mB,KAAKgmB,aAAapB,GACb5kB,KAAKgmB,aAAapB,GAGpB5kB,KAAK4mB,SACd,CAMAA,OAAAA,GACE5mB,KAAKgmB,aAAapB,GAAK,GAEvB,MAAMA,EAAKnD,EAAMiC,KAAKgB,EAAgBmC,IACpC,GAAwB,mBAAbA,EAAI7E,KACb,OAAO6E,EAAI7E,KAAKhiB,MAGlB,GAAI6mB,EAAI7E,gBAAgBhkB,MACtB,OAAO6oB,EAAI7E,KAAKuE,KAAKC,GAAaxmB,KAAKgiB,KAAKwE,IAG9C,MAAM,IAAIV,MAAM,uCAAuC,GAOzD,OAJIlB,IACF5kB,KAAKgmB,aAAapB,GAAKA,EAAGP,SAASrkB,KAAKimB,UAGnCjmB,KAAKgmB,aAAapB,EAC3B,CAOAU,SAAAA,CAAUrmB,GACR,MAAMkB,KAAEA,GAASH,KAAK2mB,QAEtB,OAAI1nB,EACK6K,OAAO3J,GAAMlB,eAAiB,GAGhCkB,GAAQ,EACjB,CAMAklB,YAAAA,GACE,OAAOrlB,KAAK2mB,QAAQzE,OACtB,CAMA4E,WAAAA,GACE,OAAI9mB,KAAKgmB,aAAahB,SACbhlB,KAAKgmB,aAAahB,SAGpBhlB,KAAK+mB,eACd,CAOAC,eAAAA,CAAgB/nB,GAAc,GAC5B,MAAMyJ,KAAEA,GAAS1I,KAAK8mB,cAEtB,OAAI7nB,EACK6K,OAAOpB,GAAMzJ,eAAiB,GAGhCyJ,GAAQ,EACjB,CAMAqe,aAAAA,GACE/mB,KAAKgmB,aAAahB,SAAW,GAE7B,MAAMA,EAAWvD,EAAMiC,KAAKmB,EAAsBoC,IAChD,GAA8B,mBAAnBA,EAAUjF,KACnB,OAAOiF,EAAUjF,KAAKhiB,MAGxB,GAAIinB,EAAUjF,gBAAgBhkB,MAC5B,OAAOipB,EAAUjF,KAAKuE,KAAKC,GAAaxmB,KAAKgiB,KAAKwE,IAGpD,MAAM,IAAIV,MAAM,uCAAuC,GAOzD,OAJId,IACFhlB,KAAKgmB,aAAahB,SAAWA,EAASX,SAASrkB,KAAKimB,UAG/CjmB,KAAKgmB,aAAahB,QAC3B,CAMAkC,SAAAA,GACE,OAAIlnB,KAAKgmB,aAAaR,OACbxlB,KAAKgmB,aAAaR,OAGpBxlB,KAAKmnB,aACd,CAQAC,aAAAA,CAAcnoB,GACZ,OAAIA,EACK6K,OAAO9J,KAAKknB,YAAY/mB,MAAMlB,eAAiB,GAEjDe,KAAKknB,YAAY/mB,MAAQ,EAClC,CAMAgnB,WAAAA,GACEnnB,KAAKgmB,aAAaR,OAAS,GAE3B,MAAMA,EAAS/D,EAAMiC,KAAK6B,EAAqB8B,IAC7C,GAA4B,mBAAjBA,EAAQrF,KACjB,OAAOqF,EAAQrF,KAAKhiB,MAGtB,GAAIqnB,EAAQrF,gBAAgBhkB,MAC1B,OAAOqpB,EAAQrF,KAAKuE,KAAKC,GAAaxmB,KAAKgiB,KAAKwE,IAGlD,MAAM,IAAIV,MAAM,uCAAuC,GAOzD,OAJIN,IACFxlB,KAAKgmB,aAAaR,OAASA,EAAOnB,SAASrkB,KAAKimB,UAG3CjmB,KAAKgmB,aAAaR,MAC3B,CAMAlS,KAAAA,GAME,OALAtT,KAAKmmB,eACLnmB,KAAK4mB,UACL5mB,KAAK+mB,gBACL/mB,KAAKmnB,cAEEnnB,IACT,CAMAsnB,SAAAA,GACE,OAAO7F,EAAMjjB,OAAO,CAAE,EAAEwB,KAAKgmB,aAC/B,CAoBAuB,SAAAA,CAAUC,GACR,MAAMC,EAAmB,CAAA,EACzB,IAAIC,EAAwB,EAC5B,MAAMC,EAAW,CAAA,EACjB,IAAIC,EAAkB,EAetB,GAbuBrpB,OAAOE,KAAK+oB,GAEpB9oB,QAASC,IACtB,MAAMkpB,EAAoBL,EAAU7oB,GACH,iBAAtBkpB,GACTF,EAAShpB,GAAOkpB,EAChBD,GAAmB,GACmB,iBAAtBC,IAChBJ,EAAiB9oB,GAAOkpB,EACxBH,GAAyB,EAC3B,GAGEA,EAAwB,EAAG,CAC7B,MAAMI,EAAsBvpB,OAAOE,KAAKgpB,GAClCM,EAAuBtG,EAAMiC,KAAKoE,EAAqB3nB,GAASH,KAAKgoB,KAAK7nB,IAEhF,GAAI4nB,EAAsB,CACxB,MAAME,EAAWjoB,KAAKunB,UAAUE,EAAiBM,IAEjD,QAAiB,IAAbE,EACF,OAAOA,CAEX,CAEA,MAAMC,EAA6BzG,EAAMiC,KACvCoE,EACA3nB,GAASH,KAAKmoB,WAAWhoB,IAE3B,GAAI+nB,EAA4B,CAC9B,MAAME,EAAiBpoB,KAAKunB,UAAUE,EAAiBS,IAEvD,QAAuB,IAAnBE,EACF,OAAOA,CAEX,CACF,CAEA,GAAIR,EAAkB,EAAG,CACvB,MAAMS,EAAe9pB,OAAOE,KAAKkpB,GAC3BW,EAAqB7G,EAAMiC,KAAK2E,EAAcloB,GAASH,KAAKuoB,UAAUpoB,GAAM,IAElF,QAA2B,IAAvBmoB,EACF,OAAOtoB,KAAKwoB,eAAeb,EAASW,GAExC,CAGF,CAQAC,SAAAA,CAAUvE,EAAayE,GAAiB,GACtC,MAAMC,EAAqB1oB,KAAKmlB,iBAAiBlmB,cACjD,IAAI0pB,EAAmB3E,EAAY/kB,cACnC,MAAM2pB,EAAQnH,EAAMwC,sBAAsB0E,GAK1C,OAHIF,GAAkBG,IACpBD,EAAmBC,EAAM3pB,eAEpB0pB,IAAqBD,CAC9B,CAEAF,cAAAA,CAAetG,GACb,IAAI2G,EAAkB,CAAC,GACnBC,EAAoB5G,EACpBW,GAAU,EAEd,MAAMkG,EAAwB/oB,KAAK0mB,oBAEnC,GAAqC,iBAA1BqC,EAwBX,MApBmB,MAAf7G,EAAQ,IAA6B,MAAfA,EAAQ,IAChC4G,EAAoB5G,EAAQ8G,OAAO,GAChB,MAAf9G,EAAQ,IACVW,GAAU,EACViG,EAAoB5G,EAAQ8G,OAAO,IAEnCH,EAAkB,GAGlBA,EAAgBtoB,KADC,MAAf2hB,EAAQ,GACW,GAEC,IAEA,MAAfA,EAAQ,GACjB4G,EAAoB5G,EAAQ8G,OAAO,GACX,MAAf9G,EAAQ,KACjBW,GAAU,EACViG,EAAoB5G,EAAQ8G,OAAO,IAG9BH,EAAgBlb,QACrB8T,EAAMiB,gBAAgBqG,EAAuBD,EAAmBjG,KAC7D,CACP,CAEAmF,IAAAA,CAAKiB,GACH,OAAOjpB,KAAKslB,WAAU,KAAUxb,OAAOmf,GAAQhqB,aACjD,CAEAkpB,UAAAA,CAAWe,GACT,OAAOlpB,KAAKgnB,iBAAgB,KAAUld,OAAOof,GAAcjqB,aAC7D,CAEAkqB,QAAAA,CAASC,GACP,OAAOppB,KAAKonB,eAAc,KAAUtd,OAAOsf,GAAYnqB,aACzD,CASA0c,EAAAA,CAAG0N,EAAUZ,GAAiB,GAC5B,OAAOzoB,KAAKuoB,UAAUc,EAAUZ,IAAmBzoB,KAAKgoB,KAAKqB,IACxDrpB,KAAKmoB,WAAWkB,EACvB,CAOA9C,IAAAA,CAAK+C,EAAY,IACf,OAAOA,EAAU/C,KAAK8C,GAAYrpB,KAAK2b,GAAG0N,GAC5C,EChaF,IAAAE,EAnDA,MAcE,gBAAOC,CAAU5D,EAAIC,GAAc,GACjC,GAAkB,iBAAPD,EACT,MAAM,IAAIE,MAAM,gCAElB,OAAO,IAAIH,EAAOC,EAAIC,EACxB,CAWA,YAAOvS,CAAMsS,GACX,OAAQ,IAAID,EAAOC,GAAK0B,WAC1B,CAEA,sBAAW1J,GACT,OAAOA,CACT,CAEA,qBAAWsD,GACT,OAAOA,CACT,CAEA,iBAAWV,GACT,OAAOA,CACT,CAEA,wBAAWL,GACT,OAAOA,CACT,GCvEa,MAAMsJ,EAInB1pB,WAAAA,CAAa+I,GACX,MAAM7B,EAAkBL,SAASK,gBAG3ByU,EAAUgO,EAAOF,UAAUzkB,OAAO4kB,UAAUC,WAGlD3iB,EAAgBM,UAAU7E,IAAI,MAAQgZ,EAAQsL,oBAE1CtL,EAAQC,GAAG,WAAaD,EAAQC,GAAG,YACrC1U,EAAgBM,UAAU7E,IAAI,eAI5BgZ,EAAQC,GAAG,YACb1U,EAAgBM,UAAU7E,IAAI,aAC9BuE,EAAgBM,UAAU7E,IAAI,aAAegZ,EAAQgL,sBAGvD5d,EAAK4S,QAAUA,CACjB,ECiEF,IAAAmO,EAAe,IAvFf,MACE9pB,WAAAA,GACEC,KAAKyL,SAAW,GAEhB/F,EAAUhD,IAAI,WAAY1C,KAAK+H,KAAKtF,KAAKzC,MAAO,GAClD,CAKA+H,IAAAA,CAAMzG,GACJtB,KAAK8pB,iBAELxoB,GACF,CAKAwoB,cAAAA,GACE9pB,KAAK+pB,SAAW,IAAIC,qBAClBhqB,KAAKiqB,qBAAqBxnB,KAAKzC,MAC/B,CACEyD,UAAW,CAACwE,EAAK7E,SAASI,aAAaC,YAG7C,CAMAwmB,oBAAAA,CAAsB9V,GACpBA,EAAQzV,QAASwrB,IACf,MAAM9hB,EAAU8hB,EAAM9rB,OACtB,IAAIuE,EAAW,KAEVunB,EAAMC,iBAEPxnB,EADEunB,EAAME,mBAAmB9V,GAAK,EACrB,QAEA,SAIXlM,EAAQU,KAAKwP,SAAS3V,WAAaA,IACrCyF,EAAQU,KAAKwP,SAAS3V,SAAWA,EAEjCyF,EAAQ8F,cAAc,IAAIC,YAAY,sBAErB,OAAbxL,EACFyF,EAAQ8F,cAAc,IAAIC,YAAY,gBAEtC/F,EAAQ8F,cAAc,IAAIC,YAAY,gBACtC/F,EAAQ8F,cAAc,IAAIC,YAAY,WAAaxL,KAEvD,EAEJ,CAMAD,GAAAA,CAAK0F,GACHpI,KAAK+pB,SAASM,QAAQjiB,IAQlBA,EAAQU,OAASV,EAAQU,KAAO,OAClCV,EAAQU,KAAOjL,EAAQM,UAAUiK,EAAQU,KAPxB,CACjBwP,SAAU,CACR3V,SAAU,SAOhB,CAMAC,MAAAA,CAAQwF,GACNpI,KAAK+pB,SAASO,UAAUliB,EAC1B,GCaFmiB,EAAe,IAnGf,MAIExqB,WAAAA,GACEC,KAAKqB,UAAY,GACjBrB,KAAKwqB,cAAgB,GAEhBviB,EAAK7E,SAASiB,OAAOC,WACxBtE,KAAKyqB,IAAM,GACXzqB,KAAK0qB,YAAc,IAAO1qB,KAAKyqB,IAC/BzqB,KAAK2qB,aAAe,KAEpBnoB,sBAAsBxC,KAAK4qB,MAAMnoB,KAAKzC,OAE1C,CAOA0C,GAAAA,CAAKtC,EAAUC,GACb,IAAIwqB,GAAS,EACb7qB,KAAKqB,UAAU3C,QAAQqC,IACjBA,EAAOP,KAAOJ,GAAYW,EAAOV,UAAYA,IAC/CwqB,GAAS,EACX,GAGGA,GACH7qB,KAAKqB,UAAUd,KAAK,CAClBC,GAAIJ,EACJC,QAASA,GAGf,CAOAuC,MAAAA,CAAQxC,EAAUC,GAChB,MAAMK,EAAOV,KAEbA,KAAKqB,UAAU3C,QAAQ,CAACqC,EAAQ/B,KAC1B+B,EAAOP,KAAOJ,GAAYW,EAAOV,UAAYA,UACxCK,EAAKW,UAAUrC,EACxB,EAEJ,CAOAqO,QAAAA,CAAUjN,EAAUC,GAClBL,KAAKwqB,cAAcjqB,KAAK,CACtBC,GAAIJ,EACJC,QAASA,GAEb,CAKAuqB,KAAAA,CAAOE,GACL,MAAMC,EAAcD,EAAU9qB,KAAK2qB,aAE/BI,EAAc/qB,KAAK0qB,cACrB1qB,KAAK4S,KAAKkY,GACV9qB,KAAK2qB,aAAeG,EAAWC,EAAc/qB,KAAK0qB,aAG/CziB,EAAK7E,SAASiB,OAAOC,UACxB9B,sBAAsBxC,KAAK4qB,MAAMnoB,KAAKzC,MAE1C,CAKA4S,IAAAA,CAAMkY,GACJ,MAAMpqB,EAAOV,KAEbA,KAAKqB,UAAU3C,QAAQqC,IACrBA,EAAOP,GAAGQ,MAAMD,EAAOV,QAAS,CAACyqB,GACnC,GAEA9qB,KAAKwqB,cAAc9rB,QAAQ,CAACqC,EAAQ/B,KAClC+B,EAAOP,GAAGQ,MAAMD,EAAOV,QAAS,CAACyqB,WAE1BpqB,EAAK8pB,cAAcxrB,IAE9B,GCoGFgsB,EAAe,IAjMf,MACEjrB,WAAAA,GACEC,KAAKyL,SAAW,GAEhBzL,KAAKirB,gBAAkB,GAEvBjrB,KAAKyE,SAAW,CACdN,OAAQ,MAGVuB,EAAUhD,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAC7C0F,EAAUhD,IAAI,WAAY1C,KAAK+H,KAAKtF,KAAKzC,MAAO,IAEhDkrB,EAAOxoB,IAAI1C,KAAK4S,KAAM5S,MAEtBA,KAAK4F,YACP,CAKAA,UAAAA,GACE/C,EAAQ3C,GAAG,YAAaF,KAAKkG,aAAclG,MAC3C6C,EAAQ3C,GAAG,SAAUF,KAAKyG,cAAezG,MACzC6C,EAAQ3C,GAAG,SAAUF,KAAKsM,cAAetM,MACzC6C,EAAQ3C,GAAG,SAAUF,KAAKgG,cAAehG,KAC3C,CAMAiM,QAAAA,CAAU3K,GACRtB,KAAKyL,SAAW,GAChBzL,KAAKirB,gBAAkB,GAEvB3pB,GACF,CAMAyG,IAAAA,CAAMzG,GACJtB,KAAKmrB,sBAEL7pB,GACF,CAKAmF,aAAAA,GACEzG,KAAKmrB,qBACP,CAKA7e,aAAAA,GACE4e,EAAO7d,SAAS,KACdrN,KAAKmrB,qBACP,EAAGnrB,KACL,CAKAgG,aAAAA,GACEO,aAAavG,KAAKyE,SAASN,QAC3BnE,KAAKyE,SAASN,OAASqC,WAAWxG,KAAKmrB,oBAAoB1oB,KAAKzC,MAAO,GACzE,CAKAkG,YAAAA,GACE,MAAMxF,EAAOV,KAEbA,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK0qB,mBAAmBhjB,KAG1BrD,OAAOU,mBAAqBV,OAAOC,SACrC,CAKAmmB,mBAAAA,GACEnrB,KAAKirB,gBAAkBjrB,KAAKyL,SAE5Byf,EAAO7d,SAASrN,KAAKqrB,YAAY5oB,KAAKzC,MACxC,CAKAqrB,WAAAA,GACErrB,KAAKirB,gBAAgBvsB,QAAQ0J,IAC3BpI,KAAKsrB,mBAAmBljB,GACxBpI,KAAKorB,mBAAmBhjB,EAC1B,GACApI,KAAKirB,gBAAkB,EACzB,CAMAK,kBAAAA,CAAoBljB,GAClB,MAAMlB,EAAQkB,EAAQsH,aAAa,SACnCtH,EAAQmD,aAAa,QAAS,IAE9B,MAAMggB,EAAWnjB,EAAQojB,wBAEnBpY,EAAa,CACjBmI,OAAQ,CACN/b,EAAG+rB,EAASla,KACZiD,EAAGiX,EAASna,IAAMrM,OAAOG,kBAE3BoM,MAAOlJ,EAAQqjB,YACfC,OAAQtjB,EAAQujB,eAGdvjB,EAAQU,OAASV,EAAQU,KAAO,CAAE,MACpCV,EAAQU,KAAOjL,EAAQM,UAAUiK,EAAQU,KAAMsK,IAGjDhL,EAAQmD,aAAa,QAASrE,EAChC,CAMAkkB,kBAAAA,CAAoBhjB,GAClB,GAAIA,EAAQU,MAAQV,EAAQU,KAAKyS,OAAQ,CACvC,MAAM1X,EAAQ,CACZrE,EAAGuF,OAAOQ,OAAS6C,EAAQU,KAAKyS,OAAO/b,EACvC8U,EAAGvP,OAAOS,OAAS4C,EAAQU,KAAKyS,OAAOjH,EAAIvP,OAAOG,kBAGpDrB,EAAMmX,UAAYnd,EAAQ0B,MAAMsE,EAAMrE,EAAI4I,EAAQU,KAAKwI,MAAO,EAAG,GACjEzN,EAAMoX,UAAYpd,EAAQ0B,MAAMsE,EAAMyQ,EAAIlM,EAAQU,KAAK4iB,OAAQ,EAAG,GAElEtjB,EAAQU,KAAKjF,MAAQhG,EAAQM,UAAUiK,EAAQU,KAAKjF,MAAOA,EAC7D,CACF,CAMAnB,GAAAA,CAAK0F,GACEpI,KAAKyL,SAASiB,SAAStE,KACrBpI,KAAKirB,gBAAgBve,SAAStE,IACjCpI,KAAKirB,gBAAgB1qB,KAAK6H,GAG5BpI,KAAKyL,SAASlL,KAAK6H,GAEvB,CAMAxF,MAAAA,CAAQwF,GACFpI,KAAKyL,SAASiB,SAAStE,IACzBpI,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,GAGnDpI,KAAKirB,gBAAgBve,SAAStE,IAChCpI,KAAKirB,gBAAgBvd,OAAO1N,KAAKirB,gBAAgBtd,QAAQvF,GAAU,EAEvE,CAKAwK,IAAAA,GACE,MAAMlS,EAAOV,KAGM,GAFA+E,OAAOC,UAAYD,OAAOU,oBAG3CzF,KAAKyL,SAAS/M,QAAQ0J,IACpB1H,EAAK0qB,mBAAmBhjB,EAAO,EAGrC,GC8CiBwjB,EAAA,IA7OnB,MACE7rB,WAAAA,GACEC,KAAKyL,SAAW,GAEhBzL,KAAKirB,gBAAkB,GACvBjrB,KAAK6rB,gBAAkB,GAEvB7rB,KAAK8rB,kBAELpmB,EAAUhD,IAAI,WAAY1C,KAAKiM,SAASxJ,KAAKzC,OAC7C0F,EAAUhD,IAAI,WAAY1C,KAAK+H,KAAKtF,KAAKzC,MAAO,IAEhDA,KAAK4F,YACP,CAKAA,UAAAA,GACE/C,EAAQ3C,GAAG,SAAUF,KAAKyG,cAAezG,MACzC6C,EAAQ3C,GAAG,SAAUF,KAAKgG,cAAehG,MACzC6C,EAAQ3C,GAAG,SAAUF,KAAKsM,cAAetM,KAC3C,CAMAiM,QAAAA,CAAU3K,GACRtB,KAAKyL,SAAW,GAChBzL,KAAKirB,gBAAkB,GACvBjrB,KAAK6rB,gBAAkB,GAEvBvqB,GACF,CAMAyG,IAAAA,CAAMzG,GACJtB,KAAKmrB,sBACLnrB,KAAK+rB,wBAELzqB,GACF,CAKAmF,aAAAA,GACEzG,KAAKmrB,sBACLnrB,KAAK+rB,uBACP,CAKA/lB,aAAAA,GACEhG,KAAK+rB,uBACP,CAKAzf,aAAAA,GACE4e,EAAO7d,SAAS,KACdrN,KAAKmrB,sBACLnrB,KAAK+rB,uBAAqB,EACzB/rB,KACL,CAKA8rB,eAAAA,GACE/mB,OAAOI,aAAexF,KAAKE,IACzB+G,SAASC,KAAOD,SAASC,KAAKmlB,aAAe,EAC7CplB,SAASC,KAAOD,SAASC,KAAK8kB,aAAe,EAC7C/kB,SAASK,gBAAgBD,aACzBJ,SAASK,gBAAgB+kB,aACzBplB,SAASK,gBAAgB0kB,cACvB5mB,OAAOgC,WACb,CAKAokB,mBAAAA,GACEnrB,KAAK8rB,kBAEL9rB,KAAKyL,SAAS/M,QAAQ0J,IACfpI,KAAKirB,gBAAgBve,SAAStE,KACjCA,EAAQhD,eAAiB,EAEzBpF,KAAKirB,gBAAgB1qB,KAAK6H,GAC5B,GAGF8iB,EAAO7d,SAASrN,KAAKqrB,YAAY5oB,KAAKzC,MACxC,CAKAqrB,WAAAA,GACErrB,KAAKirB,gBAAgBvsB,QAAQ0J,IAC3BpI,KAAKsrB,mBAAmBljB,EAAO,GAEjCpI,KAAKirB,gBAAkB,EACzB,CAMAK,kBAAAA,CAAoBljB,GAClB,MAAMlB,EAAQkB,EAAQsH,aAAa,SACnCtH,EAAQmD,aAAa,QAAS,IAE9B,MAAMggB,EAAWnjB,EAAQojB,wBAEzBpjB,EAAQhB,YAAcmkB,EAASna,IAAMrM,OAAOG,iBAAmBH,OAAOgC,YAEtEqB,EAAQzD,UAAYyD,EAAQhB,YAAcgB,EAAQpB,aAAejC,OAAOgC,YACxEqB,EAAQzD,UAAYhF,KAAKC,IAAIwI,EAAQzD,UAAWI,OAAOI,cAEvDiD,EAAQ6jB,aAAe7jB,EAAQhB,aAAegB,EAAQzD,UAAYyD,EAAQhB,aAAe,EAEzFgB,EAAQmD,aAAa,QAASrE,EAChC,CAKA6kB,qBAAAA,GACE/rB,KAAKyL,SAAS/M,QAAQ0J,IACfpI,KAAK6rB,gBAAgBnf,SAAStE,IACjCpI,KAAK6rB,gBAAgBtrB,KAAK6H,EAC5B,GAGF8iB,EAAO7d,SAASrN,KAAKksB,cAAczpB,KAAKzC,MAC1C,CAKAksB,aAAAA,GACElsB,KAAK6rB,gBAAgBntB,QAAQ0J,IAC3BpI,KAAKmsB,aAAa/jB,EAAO,GAE3BpI,KAAK6rB,gBAAkB,EACzB,CAMAM,YAAAA,CAAc/jB,GACZ,MAAMpD,EAAYD,OAAOG,iBAEzB,IAAIvC,EAAW,GACXsR,EAAW,EAGbA,EADE7L,EAAQhB,YAAc,EACbzH,KAAKC,IAAID,KAAKE,IAAImF,EAAYoD,EAAQzD,UAAW,GAAI,GAErDhF,KAAKC,IAAID,KAAKE,KAAKmF,EAAYoD,EAAQhB,cAAgBgB,EAAQzD,UAAYyD,EAAQhB,aAAc,GAAI,GAG9GglB,MAAMnY,KACRA,EAAW,GAIXtR,EADEsR,GAAY,GAAK7L,EAAQhB,YAAc,EAC9B,QACF6M,GAAY,GAAK7L,EAAQzD,UAAYI,OAAOI,aAC1C,QAEA,KAGbiD,EAAQhD,eAAiB6O,EAErB7L,EAAQmR,mBAAqB5W,GAC/ByF,EAAQmR,iBAAmB5W,EAE3ByF,EAAQ8F,cAAc,IAAIC,YAAY,sBACtC/F,EAAQ8F,cAAc,IAAIC,YAAY,WAAaxL,IAElC,OAAbA,GACFyF,EAAQ8F,cAAc,IAAIC,YAAY,gBAGxC/F,EAAQ8F,cAAc,IAAIC,YAAY,oBAC7B8F,EAAW,GAAKA,EAAW,GACpC7L,EAAQ8F,cAAc,IAAIC,YAAY,kBAE1C,CAMAzL,GAAAA,CAAK0F,GACEpI,KAAKyL,SAASiB,SAAStE,KAC1BA,EAAQhD,eAAiB,EAEpBpF,KAAKirB,gBAAgBve,SAAStE,KACjCpI,KAAKirB,gBAAgB1qB,KAAK6H,GAC1BpI,KAAK6rB,gBAAgBtrB,KAAK6H,IAG5BpI,KAAKyL,SAASlL,KAAK6H,GAEvB,CAMAxF,MAAAA,CAAQwF,GACFpI,KAAKyL,SAASiB,SAAStE,IACzBpI,KAAKyL,SAASiC,OAAO1N,KAAKyL,SAASkC,QAAQvF,GAAU,GAGnDpI,KAAKirB,gBAAgBve,SAAStE,IAChCpI,KAAKirB,gBAAgBvd,OAAO1N,KAAKirB,gBAAgBtd,QAAQvF,GAAU,GAGjEpI,KAAK6rB,gBAAgBnf,SAAStE,IAChCpI,KAAK6rB,gBAAgBne,OAAO1N,KAAK6rB,gBAAgBle,QAAQvF,GAAU,EAEvE,KCtOF,MAGErI,WAAAA,GAAcC,KAFdqsB,QAAU,CAAE,EAGVrsB,KAAKqM,QAAU,CACb5L,KAAMoC,EAAQpC,KAAKgC,KAAKI,GACxB5B,IAAK4B,EAAQ5B,IAAIwB,KAAKI,GACtB3C,GAAI2C,EAAQ3C,GAAGuC,KAAKI,GACpBvC,KAAMuC,EAAQvC,KAAKmC,KAAKI,IAG1B7C,KAAKqY,iBAAmB,CACtB3V,IAAK4pB,EAAiB5pB,IAAID,KAAK6pB,GAC/B1pB,OAAQ0pB,EAAiB1pB,OAAOH,KAAK6pB,IAGvCtsB,KAAK2J,UAAY,CACfjH,IAAKgD,EAAUhD,IAAID,KAAKiD,GACxB/D,QAAS+D,EAAU7D,MAAMY,KAAKiD,EAAW,WACzC9C,OAAQ8C,EAAU9C,OAAOH,KAAKiD,GAC9B9D,MAAO8D,EAAUzC,YAAYR,KAAKiD,GAClC2K,OAAQ3K,EAAU7D,MAAMY,KAAKiD,IAG/B1F,KAAKqa,cAAgB,CACnB3X,IAAK6pB,EAAc7pB,IAAID,KAAK8pB,GAC5B3pB,OAAQ2pB,EAAc3pB,OAAOH,KAAK8pB,IAGpCvsB,KAAK+M,eAAiB,CACpBrK,IAAKgW,EAAehW,IAAID,KAAKiW,GAC7B9V,OAAQ8V,EAAe9V,OAAOH,KAAKiW,IAGrC1Y,KAAKqE,OAAS,CACZ3B,IAAKwoB,EAAOxoB,IAAID,KAAKyoB,GACrB7d,SAAU6d,EAAO7d,SAAS5K,KAAKyoB,GAC/BtoB,OAAQsoB,EAAOtoB,OAAOH,KAAKyoB,GAC3BtY,KAAMsY,EAAOtY,KAAKnQ,KAAKyoB,IAIzBlrB,KAAKoD,SAAWD,EAAK0C,YAAYpD,KAAKU,EACxC,CAEA4E,IAAAA,GAE8B,YAAxBnB,SAAS4lB,WACX5lB,SAASX,iBAAiB,mBAAoBP,EAAU7D,MAAMY,KAAKiD,EAAW,QAAS,CAAEpF,MAAM,IAE/FN,KAAKqE,OAAOgJ,SAAS,KACnB3H,EAAU7D,MAAM,OAClB,EACA,KAEJ,CAEA4qB,SAAAA,CAAU9tB,EAAK8I,GACbzH,KAAKqsB,QAAQ1tB,GAAO,IAAI8I,EAAOzH,KACjC,CAEA,aAAIgK,GACF,OAAO7G,EAAKC,QACd"}