{"version":3,"file":"luge.modern.js","sources":["../../src/js/luge/core/Helpers.js","../../src/js/luge/core/Emitter.js","../../src/js/luge/core/LifeCycle.js","../../src/js/luge/core/Core.js","../../src/js/luge/core/Plugin.js","../../src/js/luge/plugins/Preloader.js","../../src/js/luge/plugins/Reveal.js","../../src/js/luge/plugins/Transition.js","../../src/js/luge/plugins/ScrollAnimation.js","../../src/js/luge/plugins/SmoothScroll.js","../../src/js/luge/plugins/Cursor.js","../../src/js/luge/plugins/Intersection.js","../../src/js/luge/plugins/LottiePlayer.js","../../src/js/luge/plugins/MouseAnimation.js","../../src/js/luge/plugins/Parallax.js","../../src/js/luge/plugins/Browser.js","../../src/js/luge/core/ViewportObserver.js","../../src/js/luge/core/Ticker.js","../../src/js/luge/core/MouseObserver.js","../../src/js/luge/core/ScrollObserver.js","../../src/js/luge/core/index.js"],"sourcesContent":["class Helpers {\n  /**\n   * Check if the variable is an array\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isArray(item) {\n    return (item && typeof item === 'object' && Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is an object\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isObject(item) {\n    return (item && typeof item === 'object' && !Array.isArray(item))\n  }\n\n  /**\n   * Check if the variable is a string\n   * @param {*} item\n   * @returns {Boolean}\n   */\n  static isString(item) {\n    return (item && typeof item === 'string')\n  }\n\n  /**\n   * Deep merge two objects\n   * @param {Object} target\n   * @param {Object} source\n   * @returns {Object} Merged object\n   */\n  static mergeDeep(target, source) {\n    const output = Object.assign({}, target)\n    if (Helpers.isObject(target) && Helpers.isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (Helpers.isObject(source[key])) {\n          if (!(key in target)) {\n            Object.assign(output, { [key]: source[key] })\n          } else {\n            if (Helpers.isObject(target[key]) && Helpers.isObject(source[key])) {\n              output[key] = Helpers.mergeDeep(target[key], source[key])\n            } else {\n              output[key] = source[key]\n            }\n          }\n        } else {\n          Object.assign(output, { [key]: source[key] })\n        }\n      })\n    }\n    return output\n  }\n\n  /**\n   * Convert a string to camelCase\n   * @param {String} string The string to convert\n   */\n  static toCamelCase (string) {\n    if (Helpers.isString(string)) {\n      return string.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (word, index) => {\n        return index === 0 ? word.toLowerCase() : word.toUpperCase()\n      }).replace(/\\W+/g, '')\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Convert a string to UpperCamelCase\n   * @param {String} string The string to convert\n   */\n  static toUpperCamelCase (string) {\n    if (Helpers.isString(string)) {\n      string = Helpers.toCamelCase(string)\n\n      return string.charAt(0).toUpperCase() + string.slice(1)\n    } else {\n      return string\n    }\n  }\n\n  /**\n   * Check if an element is still in the page's body\n   * @param {HTMLElement} node\n   * @returns {Boolean}\n   */\n  static isInPage (node) {\n    return (node === document.body) ? false : document.body.contains(node)\n  }\n\n  /**\n   * Deep freeze an object\n   * @param {Object} obj\n   * @returns {Object} freezed object\n   */\n  static deepFreeze(obj) {\n    Object.keys(obj).forEach(prop => {\n      if (typeof obj[prop] === 'object') Helpers.deepFreeze(obj[prop])\n    })\n    return Object.freeze(obj)\n  }\n\n  /**\n   * Clamp x between lower and upper\n   * @param {Number} x\n   * @param {Number} lower\n   * @param {Number} upper\n   * @returns {Number} clamped Number\n   */\n  static clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n}\n\nexport default Helpers\n","class Emitter {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.events = []\n  }\n\n  /**\n   * Attach handler to event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   * @param {Boolean} once Call handler only once\n   */\n  on (name, callback, context, once = false) {\n    (this.events[name] || (this.events[name] = [])).push({\n      cb: callback,\n      context: context,\n      once: once\n    })\n  }\n\n  /**\n   * Single event handler\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {Object} context Context\n   */\n  once (name, callback, context) {\n    this.on(name, callback, context, true)\n  }\n\n  /**\n   * Emit event\n   * @param {String} name Event Name\n   */\n  emit (name) {\n    const self = this\n    const data = [].slice.call(arguments, 1)\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        object.cb.apply(object.context, data)\n\n        if (object.once) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Detact handler from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   */\n  off (name, callback) {\n    const self = this\n\n    if (this.events[name]) {\n      this.events[name].forEach((object, index) => {\n        if (object.cb === callback) {\n          delete self.events[name][index]\n        }\n      })\n    }\n  }\n}\n\nexport default new Emitter()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass LifeCycle {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.eventsName = [\n      'siteInit',\n      'pageInit',\n      'siteLoad',\n      'pageLoad',\n      'siteIn',\n      'pageIn',\n      'reveal',\n      'pageFetch',\n      'pageOut',\n      'pageCreate',\n      'pageKill',\n      'siteReload'\n    ]\n\n    this.events = {}\n\n    this.eventsName.forEach(eventName => {\n      this.events[eventName] = {\n        callbacks: [],\n        done: 0\n      }\n    })\n\n    this.cycles = {\n      load: {\n        events: [\n          'siteInit',\n          'pageInit',\n          ['siteLoad', 'pageLoad'],\n          'siteIn',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      reload: {\n        events: [\n          'pageOut',\n          'siteReload'\n        ]\n      },\n      transition: {\n        events: [\n          ['pageFetch', 'pageOut'],\n          'pageCreate',\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      },\n      refresh: {\n        events: [\n          'pageKill',\n          'pageInit',\n          'pageLoad',\n          'pageIn',\n          'reveal'\n        ]\n      }\n    }\n\n    this.debug = false\n  }\n\n  /**\n   * Start a cycle\n   * @param {String} cycleName Cycle name\n   */\n  cycle (cycleName) {\n    if (this.cycles[cycleName]) {\n      this.cycles[cycleName].current = 0\n\n      if (this.debug) {\n        console.log('Start cycle: ' + cycleName)\n      }\n\n      for (const eventName in this.events) {\n        this.events[eventName].done = 0\n      }\n\n      this.proceed(cycleName)\n    }\n  }\n\n  /**\n   * Proceed current cycle event\n   * @param {String} cycleName Cycle name\n   */\n  proceed (cycleName) {\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      // Do current event\n      if (Array.isArray(event)) {\n        event.forEach(eventName => {\n          this.do(cycleName, eventName)\n        })\n      } else {\n        this.do(cycleName, event)\n      }\n    } else {\n      // Cycle ended\n      if (this.debug) {\n        console.log(cycleName + ' cycle ended')\n      }\n    }\n  }\n\n  /**\n   * Move to next cycle event\n   * @param {String} cycleName Cycle name\n   */\n  next (cycleName) {\n    const self = this\n    const events = this.cycles[cycleName].events\n    const current = this.cycles[cycleName].current\n\n    if (current < events.length) {\n      const event = events[current]\n\n      let next = true\n      let wait = []\n\n      // Get events to wait for\n      if (typeof event === 'string') {\n        wait = Array(event)\n      } else {\n        wait = event\n      }\n\n      // Check if all events are done\n      if (wait.length > 1) {\n        wait.forEach(eventName => {\n          if (self.events[eventName].done === 0 || self.events[eventName].done < self.events[eventName].callbacks.length) {\n            next = false\n          }\n        })\n      }\n\n      if (next) {\n        // Proceed to next event\n        this.cycles[cycleName].current++\n        requestAnimationFrame(this.proceed.bind(this, cycleName))\n      } else {\n        // Wait for all events to be done\n      }\n    }\n  }\n\n  /**\n   * Hook callback to event\n   * @param {String} eventName Event name\n   * @param {Function} callback Callback function\n   * @param {Int} position Execution order\n   * @param {String} cycleName Cycle name\n   */\n  add (eventName, callback, position = 10, cycleName = null) {\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.push({\n        callback: callback,\n        position: position,\n        cycle: cycleName\n      })\n    }\n  }\n\n  /**\n   * Detach callback from event\n   * @param {String} name Event name\n   * @param {Function} callback Handler function\n   * @param {String} cycleName Cycle name\n   */\n  remove (eventName, callback, cycleName = null) {\n    const self = this\n\n    if (this.events[eventName]) {\n      this.events[eventName].callbacks.forEach((event, index) => {\n        if (event.callback === callback && event.cycle === cycleName) {\n          delete self.events[eventName].callbacks[index]\n        }\n      })\n    }\n  }\n\n  /**\n   * Call hooked callbacks\n   * @param {String} cycleName Cycle name\n   * @param {String} eventName Event name\n   */\n  do (cycleName, eventName) {\n    this.events[eventName].done = 0\n\n    // Call hooked callbacks\n    if (this.events[eventName].callbacks.length > 0) {\n      if (this.debug) {\n        console.log('Do event: ' + eventName + ' (' + cycleName + ' cycle)')\n      }\n\n      Emitter.emit(Helpers.toCamelCase('before-' + eventName))\n\n      const callbacks = this.events[eventName].callbacks.sort((a, b) => {\n        return a.position - b.position\n      })\n\n      callbacks.forEach(object => {\n        if (object.cycle === null || object.cycle === cycleName) {\n          object.callback(() => this.done(cycleName, eventName))\n        } else {\n          this.done(cycleName, eventName)\n        }\n      })\n    } else {\n      this.done(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Count done action\n   * @param {String} eventName Event name\n   */\n  done (cycleName, eventName) {\n    this.events[eventName].done++\n\n    if (this.debug) {\n      console.log('Done event: ' + eventName + ' ' + this.events[eventName].done + '/' + this.events[eventName].callbacks.length + ' (' + cycleName + ' cycle)')\n    }\n\n    Emitter.emit(Helpers.toCamelCase('after-' + eventName))\n\n    // All callback are done, call next action\n    if (this.events[eventName].done >= this.events[eventName].callbacks.length) {\n      this.next(cycleName, eventName)\n    }\n  }\n\n  /**\n   * Enable debug\n   * @param {Boolean} value Enable debug\n   */\n  enableDebug (value = true) {\n    this.debug = value\n  }\n}\n\nexport default new LifeCycle()\n","import LifeCycle from './LifeCycle'\nimport Emitter from './Emitter'\nimport Helpers from './Helpers'\n\nclass Luge {\n  /**\n   * Constructor\n   */\n  constructor () {\n    // Options\n    this.settings = Helpers.deepFreeze({\n      cursor: {\n        inertia: 1,\n        trailLength: 10\n      },\n      intersection: {\n        threshold: 0.3\n      },\n      lottie: {\n        renderer: 'svg',\n        subFrame: true\n      },\n      mouse: {\n        inertia: 0.1\n      },\n      parallax: {\n        inertia: 0.1\n      },\n      preloader: {\n        duration: 0\n      },\n      reveal: {\n        stagger: 0.1,\n        threshold: 0.15\n      },\n      scroll: {\n        inertia: 0.1\n      },\n      smooth: {\n        inertia: 0.1\n      },\n      ticker: {\n        external: false\n      },\n      transition: {\n        reload: false\n      },\n      credits: {\n        show: true\n      }\n    })\n\n    // Timeouts\n    this.timeouts = {\n      resizeThrottle: null,\n      scrollEnd: null\n    }\n\n    // Viewport size\n    this.windowWidth = 1\n    this.windowHeight = 1\n    this.clientWidth = 1\n\n    // Scroll\n    window.scrollTop = window.scrollY\n    window.unifiedScrollTop = window.scrollTop\n    window.maxScrollTop = 1\n    window.scrollProgress = 0\n    this.previousScrollTop = window.scrollY\n    this.isScrolling = false\n\n    // Mouse\n    window.mouseX = -1\n    window.mouseY = -1\n    window.mouseLastScrollTop = 0\n\n    LifeCycle.add('siteInit', this.siteInit.bind(this), 999)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set settings\n   */\n  setSettings (settings) {\n    this.settings = Helpers.deepFreeze(Helpers.mergeDeep(this.settings, settings))\n  }\n\n  /**\n   * Site initialization\n   * @param {Function} done Done function\n   */\n  siteInit (done) {\n    this.showCredits()\n\n    this.setCSSProperties()\n\n    this.scrollHandler()\n\n    done()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    window.addEventListener('mousemove', this.mouseHandler.bind(this), { passive: true })\n    window.addEventListener('resize', this.resizeThrottle.bind(this))\n    window.addEventListener('scroll', this.scrollHandler.bind(this), { passive: true })\n  }\n\n  /**\n   * Mouse handler\n   * @param {Event} e Mouse event\n   */\n  mouseHandler (e) {\n    const mouseX = e.pageX\n    const mouseY = e.pageY - window.scrollTop\n\n    window.mouseX = mouseX\n    window.mouseY = mouseY\n\n    Emitter.emit('mouseMove', e)\n  }\n\n  /**\n   * Resize throttle\n   */\n  resizeThrottle () {\n    clearTimeout(this.timeouts.resizeThrottle)\n    this.timeouts.resizeThrottle = setTimeout(this.resizeHandler.bind(this), 200)\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.setCSSProperties()\n\n    Emitter.emit('resize')\n  }\n\n  /**\n   * Set CSS propertiers\n   */\n  setCSSProperties () {\n    // Pass window widths to CSS\n    const newWidth = window.innerWidth\n    if (this.windowWidth !== newWidth) {\n      this.windowWidth = newWidth\n      this.clientWidth = document.body.clientWidth\n    }\n\n    // Pass window height to CSS\n    const newHeight = window.innerHeight\n    if (this.windowHeight !== newHeight) {\n      this.windowHeight = newHeight\n      this.clientHeight = document.body.clientHeight\n    }\n\n    requestAnimationFrame(() => {\n      document.documentElement.style.setProperty('--vw', (this.windowWidth * 0.01) + 'px')\n      document.documentElement.style.setProperty('--cw', (this.clientWidth * 0.01) + 'px')\n\n      document.documentElement.style.setProperty('--vh', (this.windowHeight * 0.01) + 'px')\n      document.documentElement.style.setProperty('--ch', (this.clientHeight * 0.01) + 'px')\n    })\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    window.scrollTop = window.scrollY\n\n    // Backward compatibility\n    window.unifiedScrollTop = window.scrollTop\n\n    if (!this.isScrolling) {\n      this.scrollStart()\n    }\n\n    clearTimeout(this.timeouts.scrollEnd)\n    this.timeouts.scrollEnd = setTimeout(this.scrollEnd.bind(this), 200)\n\n    this.previousScrollTop = window.scrollTop\n    window.scrollProgress = window.scrollTop / window.maxScrollTop\n\n    Emitter.emit('scroll')\n  }\n\n  /**\n   * Scroll start\n   */\n  scrollStart () {\n    this.isScrolling = true\n\n    document.documentElement.classList.add('is-scrolling')\n\n    Emitter.emit('scrollStart')\n  }\n\n  /**\n   * Scroll end\n   */\n  scrollEnd () {\n    this.isScrolling = false\n\n    document.documentElement.classList.remove('is-scrolling')\n\n    Emitter.emit('scrollEnd')\n  }\n\n  /**\n   * Show credits\n   */\n  showCredits () {\n    if (this.settings.credits.show) {\n      // Output version\n      const consoleBaseStyle = 'background-color: #00FFE5; color: black; font: 400 1em monospace; padding: 0.5em 0; '\n      const consoleBoldStyle = consoleBaseStyle + 'font-weight: bold; '\n      const consoleWhiteStyle = 'color: black; font: 400 1em monospace; padding: 0.5em 0; '\n\n      console.log('%c powered by %cluge%c / ' + VERSION + ' %c > https://luge.cool ', consoleBaseStyle, consoleBoldStyle, consoleBaseStyle, consoleWhiteStyle)\n    }\n  }\n}\n\nexport default new Luge()\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nexport default class Plugin {\n  /**\n   * Constructor\n   */\n  constructor (slug) {\n    this.pluginSlug = slug\n\n    LifeCycle.add('siteInit', this.beforeInit.bind(this), 5)\n  }\n\n  /**\n   * Before init\n   */\n  beforeInit (done) {\n    this.isDisabled = this.disabled()\n\n    if (this.isDisabled) {\n      document.documentElement.classList.add('lg-' + this.pluginSlug + '-disabled')\n    } else {\n      this.init()\n    }\n\n    done()\n  }\n\n  /**\n   * Init plugin\n   */\n  init () {\n    this.setAttributes()\n  }\n\n  /**\n   * Check if feature is disabled\n   */\n  disabled () {\n    return !!(Luge.settings[this.pluginSlug] || {}).disabled\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {}\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const attributes = this.pluginAttributes\n    const data = {}\n\n    for (const name in attributes) {\n      const attribute = attributes[name]\n      let attributeKey = 'lg-' + this.pluginSlug\n      if (name !== 'root') {\n        attributeKey += '-' + name\n      }\n\n      attributeKey = Helpers.toCamelCase(attributeKey)\n      const attributeValue = element.dataset[attributeKey]\n\n      let type, value, defaultValue\n\n      if (typeof attribute === 'object') {\n        type = attribute[0]\n        defaultValue = attribute[1]\n      } else {\n        type = attribute\n      }\n\n      if (attributeValue === undefined && defaultValue !== undefined) {\n        value = type(defaultValue)\n      } else if (attributeValue === undefined && type === Boolean) {\n        value = false\n      } else if (attributeValue !== undefined) {\n        if (type === Boolean) {\n          value = (attributeValue !== 'false')\n        } else {\n          value = type(attributeValue)\n        }\n      } else {\n        value = undefined\n      }\n\n      data[name] = value\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge[this.pluginSlug] = data\n    }\n\n    return data\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class PreLoader extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('preloader')\n\n    this.luge = luge\n\n    this.intro = false\n    this.playerIn = false\n    this.startTime = Date.now()\n    this.doneLoad = null\n\n    luge.preloader = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.el = document.querySelector('[data-lg-preloader]')\n\n    if (this.el) {\n      this.attributes = this.getAttributes(this.el)\n\n      this.el.classList.add('lg-preloader', 'lg-preloader--' + this.attributes.root)\n\n      this.initLottie()\n\n      this.luge.lifecycle.add('siteIn', this.siteIn.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: [String, ''],\n      duration: [Number, this.luge._settings.preloader.duration],\n      in: String,\n      reverse: Boolean\n    }\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    if (this.attributes && this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Intro animation\n   * @param {Function} done Done function\n   */\n  siteIn (done) {\n    const elapsed = (Date.now() - this.startTime) / 1000\n    const remaining = this.attributes.duration - elapsed\n\n    if (remaining <= 0) {\n      const clear = this.clear.bind(this, done)\n\n      if (this.playerIn) {\n        this.playerIn.play()\n\n        this.playerIn.addEventListener('complete', clear, { once: true })\n      } else {\n        if (typeof this.intro === 'function') {\n          this.intro(done, this.remove.bind(this))\n        } else {\n          const duration = window.getComputedStyle(this.el).getPropertyValue('transition-duration')\n\n          if (duration !== '' && duration !== '0s') {\n            this.el.addEventListener('transitionend', clear, { once: true })\n            this.el.classList.add('is-hidden')\n          } else {\n            clear()\n          }\n        }\n      }\n    } else {\n      setTimeout(this.siteIn.bind(this, done), remaining * 1000)\n    }\n  }\n\n  /**\n   * Clear preloader\n   * @param {Function} done Done callback\n   */\n  clear (done) {\n    if (this.playerIn) {\n      this.playerIn.destroy()\n    }\n\n    this.remove()\n\n    done()\n  }\n\n  /**\n   * Remove preloader from done\n   */\n  remove (done) {\n    this.el.parentNode.removeChild(this.el)\n    this.el = null\n  }\n\n  /**\n   * Add intro animation\n   * @param {Function} callback Callback function\n   */\n  add (callback) {\n    this.intro = callback\n  }\n\n  /**\n   * Init lottie\n   */\n  initLottie () {\n    const self = this\n\n    if (this.attributes.root === 'lottie' && typeof lottie === 'object') {\n      const animIn = this.attributes.in\n      let playerIn = false\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: this.el,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (this.attributes.reverse) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      playerIn.addEventListener('DOMLoaded', () => {\n        if (self.attributes.reverse) {\n          playerIn.goToAndStop(playerIn.totalFrames - 1, true)\n        }\n\n        self.el.setAttribute('style', '')\n\n        if (typeof self.doneLoad === 'function') {\n          self.doneLoad()\n          self.doneLoad = null\n        }\n      }, { once: true })\n\n      this.playerIn = playerIn\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Reveal extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('reveal')\n\n    this.luge = luge\n\n    this.elements = []\n    this.toRevealIn = []\n    this.toRevealOut = []\n\n    this.reveals = {\n      in: {},\n      out: {}\n    }\n    this.canReveal = false\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.reveal = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 11)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n    this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    super.setAttributes()\n\n    this.pluginAttributes = {\n      root: String,\n      stagger: String,\n      manual: [Boolean, false],\n      multiple: Boolean,\n      delay: [Number, 0]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.stagger !== undefined && data.stagger === '') {\n      data.stagger = this.luge._settings.reveal.stagger\n    } else if (data.stagger === undefined) {\n      data.stagger = false\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('resize', this.resizeHandler, this)\n    this.luge.emitter.on('scroll', this.scrollHandler, this)\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-reveal]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      // Don't add child elements\n      if (!attributes.stagger && element.closest('[data-lg-reveal-stagger]') !== null) {\n        return\n      }\n\n      const revealName = attributes.root\n      element.luge.reveal.name = Helpers.toCamelCase(revealName)\n\n      if (!attributes.manual) {\n        this.luge.scrollobserver.add(element)\n\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n      } else {\n        element.luge.reveal.in = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'in')\n          this.setRevealClasses(element, 'is-in')\n        }\n\n        element.luge.reveal.out = () => {\n          this.revealCallback(element, element.luge.reveal.name, 'out')\n          this.setRevealClasses(element, 'is-out')\n        }\n      }\n\n      element.luge.reveal.delay = attributes.delay * 1000\n\n      if (attributes.stagger) {\n        Array.from(element.children).forEach(child => {\n          const childRevealName = child.dataset.lgReveal\n\n          child.style.transition = 'none'\n          this.luge.ticker.nextTick(() => {\n            child.style.transition = ''\n          })\n\n          child.classList.add('lg-reveal', 'is-out')\n\n          if (childRevealName || revealName) {\n            child.classList.add('lg-reveal--' + (childRevealName ?? revealName))\n          }\n\n          child.dataset.lgRevealChild = ''\n          if (child.luge || (child.luge = {})) {\n            child.luge.reveal = {\n              isRevealed: false\n            }\n          }\n        })\n      } else {\n        element.style.transition = 'none'\n        this.luge.ticker.nextTick(() => {\n          element.style.transition = ''\n        })\n\n        element.classList.add('lg-reveal', 'is-out')\n\n        if (revealName) {\n          element.classList.add('lg-reveal--' + revealName)\n        }\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.canReveal = false\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n    const threshold = this.luge._settings.reveal.threshold\n\n    if (element.scrollProgress >= threshold && element.scrollProgress <= (1 - threshold) && !element.luge.reveal.isRevealed) {\n      if (this.toRevealOut.includes(element)) {\n        this.toRevealOut.splice(this.toRevealOut.indexOf(element), 1)\n      }\n\n      if (!this.toRevealIn.includes(element)) {\n        this.toRevealIn.push(element)\n      }\n    } else if ((element.scrollProgress < threshold || (element.scrollProgress > (1 - threshold) && element.scrollEnd < Math.round(window.unifiedScrollTop))) && element.luge.reveal.isRevealed) {\n      if (this.toRevealIn.includes(element)) {\n        this.toRevealIn.splice(this.toRevealIn.indexOf(element), 1)\n      }\n\n      if (!this.toRevealOut.includes(element)) {\n        this.toRevealOut.push(element)\n      }\n    }\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.canReveal = true\n\n    this.elements.forEach(element => {\n      if (element.scrollStart < 0) {\n        if (!this.toRevealIn.includes(element)) {\n          this.toRevealIn.push(element)\n        }\n      }\n    })\n\n    this.revealElements()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Sroll handler\n   */\n  scrollHandler () {\n    this.revealElements()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.revealElements()\n  }\n\n  /**\n   * Reveal elements\n   */\n  revealElements () {\n    const self = this\n\n    if (this.canReveal) {\n      let revealInTimeout = 0\n\n      this.toRevealIn.forEach(element => {\n        const delay = true\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        revealInTimeout += element.luge.reveal.delay\n\n        setTimeout(function () {\n          self.revealCallback(element, revealName, 'in')\n\n          if (element.luge.reveal.stagger) {\n            Array.from(element.children).forEach((child, index) => {\n              const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n              setTimeout(() => {\n                if (childRevealName || revealName) {\n                  self.revealCallback(child, (childRevealName ?? revealName), 'in')\n                }\n\n                self.setRevealClasses(child, 'is-in')\n              }, index * element.luge.reveal.stagger * 1000)\n            })\n          } else {\n            self.setRevealClasses(element, 'is-in')\n          }\n        }, delay ? revealInTimeout : 0)\n\n        if (delay) {\n          revealInTimeout += this.luge._settings.reveal.stagger * 1000\n        }\n\n        if (!element.luge.reveal.multiple) {\n          self.removeElement(element)\n        }\n      })\n\n      this.toRevealOut.forEach(element => {\n        const revealName = Helpers.toCamelCase(element.luge.reveal.root)\n\n        if (element.luge.reveal.isRevealed !== undefined) {\n          self.revealCallback(element, revealName, 'out')\n        }\n\n        let state = ''\n        if (element.scrollProgress > 0.5) {\n          state = 'is-out is-out-top'\n        } else {\n          state = 'is-out is-out-bottom'\n        }\n\n        if (element.luge.reveal.stagger) {\n          Array.from(element.children).forEach((child, index) => {\n            const childRevealName = Helpers.toCamelCase(child.dataset.lgReveal)\n\n            setTimeout(() => {\n              if (childRevealName || revealName) {\n                self.revealCallback(child, (childRevealName ?? revealName), 'out')\n              }\n\n              self.setRevealClasses(child, state)\n            }, index * element.luge.reveal.stagger * 1000)\n          })\n        } else {\n          self.setRevealClasses(element, state)\n        }\n      })\n\n      this.toRevealIn = []\n      this.toRevealOut = []\n    }\n  }\n\n  /**\n   * Set reveal classes\n   * @param {HTMLElement} el Element\n   * @param {String} states Reveal states\n   */\n  setRevealClasses (el, states) {\n    states = states.split(' ')\n\n    el.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    states.forEach(state => {\n      el.classList.add(state)\n    })\n  }\n\n  /**\n   * Call reveal callback\n   * @param {HTMLElement} el Element\n   */\n  revealCallback (el, name, type) {\n    el.dispatchEvent(new CustomEvent('reveal' + type))\n    el.luge.reveal.isRevealed = (type === 'in')\n\n    if (typeof this.reveals[type][name] === 'function') {\n      this.reveals[type][name](el)\n    } else if (typeof el['onreveal' + type] === 'function') {\n      el['onreveal' + type]()\n    }\n  }\n\n  /**\n   * Add reveal animation\n   * @param {String} type Reveal type (in | out)\n   * @param {String} revealName Reveal animation name\n   * @param {Function} callback Callback function\n   */\n  add (type, revealName, callback) {\n    if (this.reveals[type]) {\n      revealName = Helpers.toCamelCase(revealName)\n\n      if (this.reveals[type][revealName]) {\n        console.log('Reveal animation named ' + revealName + ' already exists.')\n      } else {\n        this.reveals[type][revealName] = callback\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nexport default class Transition extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('transition')\n\n    this.luge = luge\n\n    this.url = window.location.href\n    this.pathname = window.location.pathname\n    this.pageFetched = null\n    this.currentPage = null\n    this.reload = this.luge._settings.transition.reload\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.transitions = {\n      in: {},\n      out: {}\n    }\n\n    this.listeners = { linkHandler: this.linkHandler.bind(this) }\n\n    luge.transition = {\n      add: this.add.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    this.currentPage = document.querySelector('[data-lg-page]')\n    if (this.currentPage) {\n      this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n    }\n\n    this.initLoader()\n\n    if (!this.reload) {\n      window.addEventListener('popstate', this.historyStateChanged.bind(this))\n    }\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageFetch', this.pageFetch.bind(this))\n    this.luge.lifecycle.add('pageOut', this.pageOut.bind(this))\n    this.luge.lifecycle.add('pageIn', this.pageIn.bind(this), 10, 'transition')\n    this.luge.lifecycle.add('pageCreate', this.pageCreate.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this), 999, 'transition')\n  }\n\n  /**\n   * Bind links event\n   */\n  bindLinksEvent () {\n    if (document.querySelector('[data-lg-page]')) {\n      document.querySelectorAll('a').forEach(el => {\n        el.addEventListener('click', this.listeners.linkHandler)\n      })\n    }\n  }\n\n  /**\n   * Unbind links handler\n   */\n  unbindLinksEvent () {\n    document.querySelectorAll('a').forEach(el => { el.removeEventListener('click', this.listeners.linkHandler) })\n  }\n\n  /**\n   * Link handler\n   * @param {Event} e Mouse event\n   */\n  linkHandler (e) {\n    const element = e.currentTarget\n    const href = element.getAttribute('href')\n\n    if (href &&\n      href.indexOf('#') !== 0 &&\n      href.indexOf('tel') !== 0 &&\n      href.indexOf('mailto') !== 0 &&\n      !element.closest('#wpadminbar') &&\n      element.getAttribute('data-lg-transition') !== 'disabled' &&\n      element.getAttribute('target') !== '_blank') {\n      // Check if it's an internal URL\n      if (href.indexOf(window.location.origin) === 0 ||\n          href.indexOf('/') === 0 ||\n          href.indexOf('/') === -1) {\n        e.preventDefault()\n\n        if (window.location.href === href) {\n          return\n        }\n\n        this.navigateTo(href)\n\n        // Change page url\n        history.pushState(null, null, this.url)\n      }\n    }\n  }\n\n  /**\n   * Navigate to page\n   * @param {URL} url New page URL\n   */\n  navigateTo (url) {\n    this.url = url\n\n    if (this.reload) {\n      // Prefetch new URL\n      const prefetchLink = document.createElement('link')\n      prefetchLink.rel = 'prefetch'\n      prefetchLink.href = url\n      document.head.appendChild(prefetchLink)\n\n      // Change URL after pageOut\n      this.luge.lifecycle.add('siteReload', (done) => {\n        window.location = url\n      })\n\n      // Call cycle\n      this.luge.lifecycle._cycle('reload')\n    } else {\n      this.luge.lifecycle._cycle('transition')\n    }\n  }\n\n  /**\n   * Page init\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.bindLinksEvent()\n\n    done()\n  }\n\n  /**\n   * Init loader\n   */\n  initLoader () {\n    const loader = document.querySelector('[data-lg-loader]')\n\n    if (loader) {\n      loader.style.transition = 'none'\n      loader.classList.add('lg-loader', 'lg-loader--' + loader.getAttribute('data-lg-loader'))\n      this.luge.ticker.nextTick(() => {\n        loader.style.transition = ''\n      })\n    }\n\n    if (loader && loader.getAttribute('data-lg-loader') === 'lottie' && typeof lottie === 'object') {\n      const animOut = loader.getAttribute('data-lg-loader-out')\n      let playerOut = false\n      let animIn = loader.getAttribute('data-lg-loader-in')\n      let playerIn = false\n\n      if (animOut) {\n        playerOut = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animOut,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n      }\n\n      if (animIn === 'reverse') {\n        animIn = animOut\n      }\n\n      if (animIn) {\n        playerIn = lottie.loadAnimation({\n          container: loader,\n          renderer: 'svg',\n          loop: false,\n          autoplay: false,\n          path: animIn,\n          rendererSettings: {\n            preserveAspectRatio: 'none'\n          }\n        })\n\n        if (animIn === animOut) {\n          playerIn.setDirection(-1)\n        }\n      }\n\n      loader.playerOut = playerOut\n      loader.playerIn = playerIn\n    }\n  }\n\n  /**\n   * Fetch\n   * @param {Function} done Done function\n   */\n  pageFetch (done) {\n    const self = this\n\n    if (this.url) {\n      fetch(this.url, { credentials: 'include' })\n        .then(function (response) {\n          return response.text()\n        }).then(function (body) {\n          self.pageFetched = body\n\n          done()\n        })\n    }\n  }\n\n  /**\n   * Page create\n   * @param {Function} done Done function\n   */\n  pageCreate (done) {\n    // Convert data to HTML\n    const html = new DOMParser().parseFromString(this.pageFetched, 'text/html')\n\n    // Get containers\n    const newPage = html.querySelector('[data-lg-page]')\n\n    if (newPage) {\n      // Switch containers\n      this.currentPage.insertAdjacentElement('beforebegin', newPage)\n\n      newPage.style.opacity = 0\n\n      this.currentPage.style.opacity = 0\n      this.currentPage.style.position = 'absolute'\n      this.currentPage.style.top = 0\n      this.currentPage.style.left = '-999em'\n      this.currentPage.style.width = '100%'\n\n      // Switch classes\n      document.querySelector('body').className = html.querySelector('body').className\n\n      // Switch metas\n      document.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        element.parentNode.removeChild(element)\n      })\n      html.querySelectorAll('meta[name=\"description\"], meta[name=\"keywords\"], meta[property=\"og:image\"]').forEach(element => {\n        document.querySelector('head title').insertAdjacentElement('afterend', element)\n      })\n\n      // Set title\n      const oldTitle = document.querySelector('head title')\n      const newTitle = html.querySelector('head title')\n\n      if (oldTitle && newTitle) {\n        oldTitle.innerText = newTitle.innerText\n      }\n    } else {\n      // Force reload when no page is found\n      window.location = this.url\n      return\n    }\n\n    // Reset scroll\n    window.scroll({\n      top: this.newScrollTop,\n      left: 0,\n      behavior: 'instant'\n    })\n    window.scrollTop = 0\n    window.smoothScrollTop = 0\n    window.unifiedScrollTop = 0\n\n    this.prevScrollTop = 0\n    this.newScrollTop = 0\n\n    this.luge.emitter.emit('pageTransition', html)\n\n    done()\n  }\n\n  /**\n   * Page kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const oldPage = this.currentPage\n    oldPage.parentNode.removeChild(oldPage)\n\n    this.currentPage = document.querySelector('[data-lg-page]')\n    this.reload = this.currentPage.hasAttribute('data-lg-reload') ? true : this.luge._settings.transition.reload\n\n    done()\n  }\n\n  /**\n   * Page out\n   * @param {Function} done Done function\n   */\n  pageOut (done) {\n    const self = this\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      if (typeof this.transitions.out[pageName] === 'function') {\n        transition = this.transitions.out[pageName]\n      } else if (typeof page.onpageout === 'function') {\n        transition = page.onpageout\n      } else if (typeof this.transitions.out.default === 'function') {\n        transition = this.transitions.out.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader) {\n          if (loader.playerOut) {\n            loader.playerOut.stop()\n            loader.playerOut.renderer.svgElement.style.opacity = 1\n            loader.playerOut.play()\n\n            loader.playerOut.addEventListener('complete', () => {\n              if (!self.reload) {\n                loader.playerOut.renderer.svgElement.style.opacity = ''\n              }\n\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n          }\n\n          loader.classList.add('is-visible')\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n\n    this.unbindLinksEvent.bind(this)\n  }\n\n  /**\n   * Page in\n   * @param {Function} done Done function\n   */\n  pageIn (done) {\n    const page = document.querySelector('[data-lg-page]')\n\n    if (page) {\n      const pageName = Helpers.toCamelCase(page.getAttribute('data-lg-page'))\n      let transition = false\n\n      page.style.opacity = ''\n\n      if (typeof this.transitions.in[pageName] === 'function') {\n        transition = this.transitions.in[pageName]\n      } else if (typeof page.onpagein === 'function') {\n        transition = page.onpagein\n      } else if (typeof this.transitions.in.default === 'function') {\n        transition = this.transitions.in.default\n      }\n\n      if (transition) {\n        transition(page, done)\n      } else {\n        const loader = document.querySelector('[data-lg-loader]')\n\n        if (loader && loader.classList.contains('is-visible')) {\n          if (loader.playerIn) {\n            loader.playerIn.stop()\n            loader.playerIn.renderer.svgElement.style.opacity = 1\n            if (loader.getAttribute('data-lg-loader-in') === 'reverse') {\n              loader.playerIn.goToAndPlay(loader.playerIn.totalFrames, true)\n            } else {\n              loader.playerIn.play()\n            }\n\n            loader.playerIn.addEventListener('complete', () => {\n              loader.playerIn.renderer.svgElement.style.opacity = ''\n              loader.classList.remove('is-visible')\n              done()\n            }, { once: true })\n          } else {\n            const duration = window.getComputedStyle(document.querySelector('[data-lg-loader]')).getPropertyValue('transition-duration')\n\n            if (duration !== '' && duration !== '0s') {\n              loader.addEventListener('transitionend', done, { once: true })\n            } else {\n              done()\n            }\n\n            loader.classList.remove('is-visible')\n          }\n        } else {\n          done()\n        }\n      }\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * History change\n   */\n  historyStateChanged () {\n    let url = ''\n    if (this.url.indexOf(window.location.origin) === 0) {\n      url = new URL(this.url)\n    } else {\n      url = new URL(window.location.origin + this.url)\n    }\n\n    if (url.pathname !== window.location.pathname) {\n      this.prevScrollTop = window.scrollY\n\n      this.luge.ticker.nextTick(() => {\n        this.newScrollTop = window.scrollY\n\n        window.scroll({\n          top: this.prevScrollTop,\n          left: 0,\n          behavior: 'instant'\n        })\n      })\n\n      this.navigateTo(window.location.href)\n    }\n  }\n\n  /**\n   * Add transition animation\n   * @param {String} type Transition type (in | out)\n   * @param {Function} callback Callback function\n   * @param {String} pageName Page name\n   */\n  add (type, pageName = 'default', callback) {\n    if (this.transitions[type]) {\n      pageName = Helpers.toCamelCase(pageName)\n\n      if (this.transitions[type][pageName]) {\n        console.log('Transition animation for ' + pageName + ' page already exists.')\n      } else {\n        this.transitions[type][pageName] = callback\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class ScrollAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('scroll')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Properties\n    this.allowedProperties = [\n      'opacity',\n      'background-x',\n      'background-y'\n    ]\n\n    this.transformProperties = [\n      'x',\n      'y',\n      'z',\n      'translate3d',\n      'rotate',\n      'rotateX',\n      'rotateY',\n      'rotateZ',\n      'scale',\n      'scaleX',\n      'scaleY',\n      'scaleZ'\n    ]\n\n    // Presets\n    this.presets = {\n      'background-x': {\n        'background-x': ['0%', '100%']\n      },\n      'background-y': {\n        'background-y': ['0%', '100%']\n      }\n    }\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      yoyo: Boolean,\n      inertia: [String, this.luge._settings.scroll.inertia],\n      animate: String\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-scroll]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      const attributes = this.getAttributes(element)\n\n      this.luge.scrollobserver.add(element)\n\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n\n      // Set values\n      const scrollAnimation = {}\n\n      // Smooth progress\n      scrollAnimation.smoothProgress = (element.scrollProgress !== undefined ? element.scrollProgress : 0)\n\n      // Yoyo\n      scrollAnimation.yoyo = attributes.yoyo\n\n      // Inertia\n      scrollAnimation.inertia = attributes.inertia\n\n      // Get properties\n      let properties = false\n\n      if (attributes.animate !== undefined) {\n        properties = JSON.parse(attributes.animate.replace(/'/g, '\"'))\n      } else if (this.presets[attributes.root]) {\n        properties = this.presets[attributes.root]\n      }\n\n      if (properties) {\n        const declarations = {}\n\n        for (const property in properties) {\n          if (this.allowedProperties.includes(property) ||\n              this.transformProperties.includes(property)) {\n            const values = properties[property]\n            let fromValue = String(values[0])\n            let toValue = String(values[1])\n\n            let unit = fromValue.match(/\\d+([a-zA-Z%]+)/m)\n            if (unit) {\n              unit = unit[1]\n            } else if (property.indexOf('rotate') === 0) {\n              unit = 'deg'\n            }\n\n            fromValue = Number(fromValue.replace(unit, ''))\n            toValue = Number(toValue.replace(unit, ''))\n\n            let safeProperty = property\n            if (property === 'background-x') {\n              safeProperty = 'background-position-x'\n            } else if (property === 'background-y') {\n              safeProperty = 'background-position-y'\n            }\n\n            declarations[safeProperty] = {\n              from: fromValue,\n              to: toValue,\n              current: fromValue,\n              unit: unit\n            }\n          }\n        }\n\n        scrollAnimation.properties = declarations\n      }\n\n      element.luge.scroll.animation = scrollAnimation\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.luge.scroll.animation.atDest = false\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    for (const element of this.elements) {\n      // Early break if at dest\n      if (element.luge.scroll.animation.atDest) {\n        continue\n      }\n\n      // Yoyo\n      let progress = element.scrollProgress\n      if (element.luge.scroll.yoyo) {\n        progress = 1 - Math.abs(1 - progress * 2)\n      }\n\n      element.luge.scroll.animation.smoothProgress += (progress - element.luge.scroll.animation.smoothProgress) * (1 - element.luge.scroll.inertia)\n\n      if (element.luge.scroll.animation.properties) {\n        const declarations = {}\n\n        for (const [key, property] of Object.entries(element.luge.scroll.animation.properties)) {\n          property.current = property.from + (property.to - property.from) * element.luge.scroll.animation.smoothProgress\n\n          if (['x', 'y', 'z'].includes(key)) {\n            if (declarations.translate3d || (declarations.translate3d = {})) {\n              declarations.translate3d[key] = property.current + property.unit\n            }\n          } else {\n            declarations[key] = property.current + property.unit\n          }\n        }\n\n        // Handle transform shorthand\n        const transform = []\n        for (const [key, property] of Object.entries(declarations)) {\n          if (this.transformProperties.includes(key)) {\n            // Convert object style property value to string\n            if (typeof property === 'object') {\n              if (key === 'translate3d') {\n                const value = Object.assign({ x: 0, y: 0, z: 0 }, property)\n\n                property.string = value.x + ', ' + value.y + ', ' + value.z\n              } else {\n                property.string = Object.values(property).join(', ')\n              }\n            }\n\n            transform.push(key + '(' + (typeof property !== 'object' ? property : property.string) + ')')\n          }\n        }\n\n        // Create style rule\n        const styles = {}\n        const willChange = []\n\n        if (transform.length > 0) {\n          styles.transform = transform.join(' ')\n          willChange.push('transform')\n        }\n\n        for (const [key, property] of Object.entries(declarations)) {\n          if (!this.transformProperties.includes(key)) {\n            styles[key] = property\n            willChange.push(key)\n          }\n        }\n\n        for (const [key, property] of Object.entries(styles)) {\n          element.style.setProperty(key, property)\n        }\n\n        element.style.setProperty('will-change', willChange.join(', '))\n      } else {\n        const diff = Math.round((element.scrollProgress - element.luge.scroll.animation.smoothProgress) * 1000) / 1000\n\n        element.style.setProperty('--progress', element.luge.scroll.animation.smoothProgress)\n        element.style.setProperty('--abs-diff', Math.abs(diff))\n        element.style.setProperty('--diff', diff)\n      }\n\n      // Block future style update if element is at destination\n      if (Math.abs(progress - element.luge.scroll.animation.smoothProgress) < 0.0001) {\n        element.luge.scroll.animation.atDest = true\n      }\n    }\n  }\n}\n","import Helpers from '../core/Helpers'\nimport Plugin from '../core/Plugin'\n\nimport VirtualScroll from 'virtual-scroll'\n\nexport default class SmoothScroll extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor() {\n    super('smooth')\n\n    window.hasSmoothScroll = false\n    window.isSmoothScrolling = false\n  }\n\n  /**\n   * Init\n   */\n  init() {\n    super.init()\n\n    this.element = document.documentElement\n\n    this.hasSmooth = this.element.hasAttribute('data-lg-smooth')\n\n    if (this.hasSmooth) {\n      window.hasSmoothScroll = true\n\n      this.smoothScroll = window.scrollTop\n      this.targetScroll = window.scrollTop\n      this.targetSmoothScroll = window.scrollTop\n\n      document.documentElement.classList.add('has-smooth-scroll')\n\n      const platform = navigator?.userAgentData?.platform || navigator?.platform || 'unknown'\n\n      this.virtualScroll = new VirtualScroll({\n        el: this.element,\n        firefoxMultiplier: 50,\n        mouseMultiplier: platform.indexOf('Win') > -1 ? 1 : 0.4,\n        useKeyboard: false,\n        useTouch: false,\n        passive: true\n      })\n\n      this.virtualScroll.on(this.onVirtualScroll.bind(this))\n\n      this.luge.ticker.add(this.tick, this)\n\n      this.bindEvents()\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('scroll', this.onScroll, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  onScroll () {\n    if (!window.isSmoothScrolling) {\n      this.targetScroll = window.scrollTop\n      this.targetSmoothScroll = window.scrollTop\n      this.smoothScroll = window.scrollTop\n    }\n  }\n\n  /**\n   * Virtual scroll handler\n   */\n  onVirtualScroll({ deltaY, originalEvent: e }) {\n    const objects = e.composedPath()\n    const isPrevented = !!objects.find((el) => el?.hasAttribute?.('data-lg-smooth-prevent'))\n\n    if (e.ctrlKey || isPrevented) {\n      return\n    }\n\n    this.targetScroll -= deltaY\n    this.targetScroll = Helpers.clamp(0, this.targetScroll, window.maxScrollTop)\n\n    window.isSmoothScrolling = true\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    const settings = this.luge._settings.smooth\n\n    this.targetSmoothScroll += (this.targetScroll - this.targetSmoothScroll) * settings.inertia\n    this.smoothScroll += (this.targetSmoothScroll - this.smoothScroll) * settings.inertia\n\n    const diff = Math.abs(this.targetSmoothScroll - this.smoothScroll)\n\n    if (window.isSmoothScrolling && diff > 0.5) {\n      window.scrollTo(\n        {\n          top: this.smoothScroll,\n          behavior: 'auto'\n        }\n      )\n    } else if (window.isSmoothScrolling) {\n      this.smoothScroll = this.targetSmoothScroll\n      window.isSmoothScrolling = false\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Cursor extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('cursor')\n\n    this.luge = luge\n\n    this.cursors = []\n    this.pointers = []\n    this.trails = []\n\n    this.hoverTags = ['a', 'button', 'input']\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [Number, this.luge._settings.cursor.inertia],\n      length: [Number, this.luge._settings.cursor.trailLength],\n      hide: Boolean\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    document.documentElement.addEventListener('mouseenter', this.hoverHandler.bind(this), { capture: true, passive: true })\n    document.documentElement.addEventListener('mouseleave', this.hoverHandler.bind(this), { capture: true, passive: true })\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    const self = this\n    const cursors = document.querySelectorAll('[data-lg-cursor]:not(.lg-cursor)')\n\n    if (cursors.length > 0) {\n      cursors.forEach(cursor => {\n        const attributes = this.getAttributes(cursor)\n\n        if (attributes.hide) {\n          document.documentElement.classList.add('lg-cursor-hide')\n        }\n\n        // Pointers\n        const pointers = cursor.querySelectorAll('[data-lg-cursor-pointer')\n        pointers.forEach(pointer => {\n          pointer.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              }\n            }\n          }\n\n          if (pointer.hasAttribute('data-lg-cursor-inertia')) {\n            pointer.luge.cursor.inertia = Number(pointer.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            pointer.luge.cursor.inertia = attributes.inertia\n          }\n\n          pointer.classList.add('lg-cursor-pointer')\n\n          self.pointers.push(pointer)\n        })\n\n        // Trails\n        const trails = cursor.querySelectorAll('[data-lg-cursor-trail')\n        trails.forEach(trail => {\n          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n          svg.appendChild(path)\n\n          trail.appendChild(svg)\n\n          trail.luge = {\n            cursor: {\n              position: {\n                x: 0,\n                y: 0\n              },\n              smoothPosition: {\n                x: 0,\n                y: 0\n              },\n              points: [],\n              path: path\n            }\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-inertia')) {\n            trail.luge.cursor.inertia = Number(trail.getAttribute('data-lg-cursor-inertia'))\n          } else {\n            trail.luge.cursor.inertia = attributes.inertia\n          }\n\n          if (trail.hasAttribute('data-lg-cursor-length')) {\n            trail.luge.cursor.length = Number(trail.getAttribute('data-lg-cursor-length'))\n          } else {\n            trail.luge.cursor.length = attributes.length\n          }\n\n          trail.classList.add('lg-cursor-trail')\n\n          self.trails.push(trail)\n        })\n\n        cursor.classList.add('lg-cursor')\n\n        this.cursors.push(cursor)\n      })\n    }\n\n    done()\n  }\n\n  /**\n   * Hover handler\n   */\n  hoverHandler (e) {\n    const element = e.target\n    const tag = element.tagName.toLowerCase()\n    const style = element.getAttribute('data-lg-hover')\n    let hover = null\n\n    if (this.hoverTags.includes(tag) || style !== null) {\n      hover = (e.type === 'mouseenter')\n    }\n\n    if (hover !== null) {\n      this.cursors.forEach(cursor => {\n        cursor.classList.toggle('lg-cursor--hover', hover)\n\n        if (style !== null && style !== '') {\n          cursor.classList.toggle('lg-cursor--hover--' + style, hover)\n        }\n      })\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick (timestamp) {\n    // Pointers\n    this.pointers.forEach(pointer => {\n      // Get position\n      const position = pointer.luge.cursor.position\n      const smoothPosition = pointer.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      smoothPosition.x += (position.x - smoothPosition.x) * pointer.luge.cursor.inertia\n      smoothPosition.y += (position.y - smoothPosition.y) * pointer.luge.cursor.inertia\n\n      pointer.style.transform = 'translate3d(' + smoothPosition.x + 'px, ' + smoothPosition.y + 'px, 0)'\n    })\n\n    // Trails\n    this.trails.forEach(trail => {\n      // Get position\n      const position = trail.luge.cursor.position\n      const smoothPosition = trail.luge.cursor.smoothPosition\n\n      position.x = window.mouseX\n      position.y = window.mouseY\n\n      if (window.mouseX !== -1) {\n        smoothPosition.x += (position.x - smoothPosition.x) * trail.luge.cursor.inertia\n        smoothPosition.y += (position.y - smoothPosition.y) * trail.luge.cursor.inertia\n\n        // Update points\n        const points = trail.luge.cursor.points\n\n        const point = {\n          x: smoothPosition.x,\n          y: smoothPosition.y\n        }\n        points.push(point)\n\n        if (points.length > trail.luge.cursor.length) {\n          points.shift()\n        }\n\n        // Draw smooth line # https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74\n        let d = ''\n        let trailLength = 0\n\n        const svgPath = (points, command) => {\n          const d = points.reduce((acc, point, i, a) => i === 0\n\n            ? `M ${point.x},${point.y}`\n\n            : `${acc} ${command(point, i, a)}`\n          , '')\n          return `${d}`\n        }\n\n        const line = (pointA, pointB) => {\n          const lengthX = pointB.x - pointA.x\n          const lengthY = pointB.y - pointA.y\n          return {\n            length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n            angle: Math.atan2(lengthY, lengthX)\n          }\n        }\n\n        const controlPoint = (current, previous, next, reverse) => {\n          const p = previous || current\n          const n = next || current\n\n          const smoothing = 0.2\n\n          const o = line(p, n)\n\n          trailLength += o.length\n\n          const angle = o.angle + (reverse ? Math.PI : 0)\n          const length = o.length * smoothing\n\n          const x = current.x + Math.cos(angle) * length\n          const y = current.y + Math.sin(angle) * length\n          return [x, y]\n        }\n\n        const bezierCommand = (point, i, a) => {\n          const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point)\n\n          const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true)\n          return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point.x},${point.y}`\n        }\n\n        d = svgPath(points, bezierCommand)\n\n        trail.luge.cursor.path.setAttribute('d', d)\n\n        trail.style.setProperty('--length', trailLength)\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Intersection extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('intersection')\n\n    this.luge = luge\n\n    // Listeners\n    this.listeners = {\n      onViewportIntersect: this.onViewportIntersect.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.elements = []\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      class: String\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-intersection]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.viewportobserver.add(element)\n      element.addEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.luge.viewportobserver.remove(element)\n      element.removeEventListener('viewportintersect', this.listeners.onViewportIntersect)\n\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * On viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n    const position = element.luge.viewport.position\n    const CSSClass = element.luge.intersection.class ? element.luge.intersection.class.split(' ') : false\n\n    // Set CSS classes\n    element.classList.remove('is-in', 'is-out', 'is-out-top', 'is-out-bottom')\n\n    if (position === 'in') {\n      element.classList.add('is-in')\n\n      if (CSSClass) {\n        document.documentElement.classList.add(...CSSClass)\n      }\n    } else {\n      if (CSSClass) {\n        document.documentElement.classList.remove(...CSSClass)\n      }\n\n      if (position === 'above') {\n        element.classList.add('is-out', 'is-out-top')\n      } else {\n        element.classList.add('is-out', 'is-out-bottom')\n      }\n    }\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class LottiePlayer extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('lottie')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.doneLoad = null\n\n    // Listeners\n    this.onViewportIntersect = this.onViewportIntersect.bind(this)\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n\n    luge.lottie = {\n      deferInit: this.deferInit.bind(this)\n    }\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    if (typeof lottie === 'object') {\n      this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n      this.luge.lifecycle.add('pageLoad', this.pageLoad.bind(this))\n      this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n      this.luge.lifecycle.add('reveal', this.reveal.bind(this))\n    }\n\n    this.bindEvents()\n  }\n\n  /**\n   * Defer init\n   */\n  deferInit () {\n    if (typeof lottie === 'object') {\n      this.pageInit(() => {})\n      LifeCycle.add('pageKill', this.pageKill.bind(this))\n      LifeCycle.add('reveal', this.reveal.bind(this))\n\n      ScrollObserver.updateHandler()\n    }\n  }\n\n  /**\n   * Set plugin attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      autoplay: Boolean,\n      scroll: Boolean,\n      loop: Boolean,\n      loopFrame: [Number, 0],\n      reverse: Boolean,\n      required: Boolean,\n      force: Boolean,\n      lazy: Boolean,\n      renderer: [String, Luge.settings.lottie.renderer],\n      subframe: [Boolean, Luge.settings.lottie.subFrame]\n    }\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n    this.reveal(() => {})\n  }\n\n  /**\n   * Page load\n   * @param {Function} done Done function\n   */\n  pageLoad (done) {\n    let waitLoad = false\n\n    if (this.elements.length > 0) {\n      this.elements.forEach(element => {\n        if (element.luge.lottie.required && !element.player.isLoaded) {\n          waitLoad = true\n        }\n      })\n    }\n\n    if (waitLoad) {\n      this.doneLoad = done\n    } else {\n      done()\n    }\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const self = this\n    this.elements = document.querySelectorAll('[data-lg-lottie]')\n    this.toAutoplay = []\n    this.toLoad = 0\n    this.requireds = 0\n\n    this.elements.forEach(element => {\n      if (!element.player) {\n        const attributes = this.getAttributes(element)\n\n        this.luge.scrollobserver.add(element)\n\n        if (attributes.lazy) {\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        } else {\n          self.initPlayer(element)\n\n          element.addEventListener('revealin', self.play)\n          element.addEventListener('viewportintersect', self.onViewportIntersect)\n        }\n      }\n    })\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n    let elements = []\n\n    const oldPage = document.querySelector('[data-lg-page] + [data-lg-page]')\n\n    if (oldPage) {\n      elements = oldPage.querySelectorAll('[data-lg-lottie]')\n    } else {\n      elements = this.elements\n    }\n\n    elements.forEach(element => {\n      element.removeEventListener('revealin', self.play)\n      element.removeEventListener('viewportintersect', self.onViewportIntersect)\n\n      if (element.hasAttribute('data-lg-lottie-scroll')) {\n        element.removeEventListener('scrollprogress', self.onScrollProgress)\n      }\n\n      if (element.player) {\n        element.player.destroy()\n        delete element.player\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Reveal\n   * @param {Function} done Done function\n   */\n  reveal (done) {\n    this.toAutoplay.forEach(element => {\n      if (element.viewportPosition === 'in') {\n        element.play()\n      }\n    })\n\n    done()\n  }\n\n  /**\n   * Viewport intersect event handler\n   * @param {Event} e Custom event\n   */\n  onViewportIntersect (e) {\n    const element = e.target\n\n    if (!element.player) {\n      if (element.viewportPosition === 'in') {\n        this.initLazy(element)\n      }\n    } else {\n      if (!element.luge.lottie.force) {\n        if (element.viewportPosition === 'in') {\n          if (element.player.isPaused && (element.player.scrollPaused || element.hasAttribute('data-lg-lottie-autoplay'))) {\n            element.player.scrollPaused = false\n            element.play()\n          }\n        } else {\n          if (!element.player.isPaused) {\n            element.player.scrollPaused = true\n            element.pause()\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Lazy init\n   * @param {HTMLElement} element Container\n   */\n  initLazy (element) {\n    this.initPlayer(element)\n\n    element.player.addEventListener('DOMLoaded', () => {\n      element.play()\n    }, { once: true })\n  }\n\n  /**\n   * Init player\n   * @param {HTMLElement} element Container\n   */\n  initPlayer (element) {\n    const self = this\n\n    this.toLoad++\n\n    // Get options\n    const attributes = this.getAttributes(element)\n\n    element.player = lottie.loadAnimation({\n      container: element,\n      renderer: attributes.renderer,\n      loop: (attributes.loop && !attributes.reverse),\n      autoplay: false,\n      path: attributes.root\n    })\n\n    if (typeof attributes.subframe !== 'undefined') {\n      element.player.setSubframe(attributes.subframe)\n    }\n\n    element.classList.add('lg-lottie')\n    this.setPlayerStateClasses(element, false)\n\n    if (attributes.autoplay) {\n      this.toAutoplay.push(element)\n    }\n\n    if (attributes.required) {\n      this.requireds++\n    }\n\n    if (attributes.scroll) {\n      element.addEventListener('scrollprogress', this.onScrollProgress)\n    } else if (attributes.loop) {\n      element.player.addEventListener('enterFrame', function () {\n        if (element.player.totalFrames > 0) {\n          const currentFrame = Math.round(element.player.currentFrame)\n\n          if (element.player.playDirection === 1) {\n            if (currentFrame === element.player.totalFrames - 1) {\n              element.player.pause()\n\n              if (attributes.reverse) {\n                this.luge.ticker.nextTick(() => {\n                  element.player.setDirection(-1)\n                  element.player.goToAndPlay(element.player.totalFrames, true)\n\n                  self.setPlayerStateClasses(element, 'backward')\n                }, this)\n              } else {\n                this.luge.ticker.nextTick(() => {\n                  element.player.goToAndPlay(attributes.loopFrame, true)\n                }, this)\n              }\n            }\n          } else {\n            if (currentFrame === attributes.loopFrame) {\n              element.player.pause()\n\n              this.luge.ticker.nextTick(() => {\n                element.player.setDirection(1)\n                element.player.goToAndPlay(attributes.loopFrame, true)\n\n                self.setPlayerStateClasses(element, 'forward')\n              }, this)\n            }\n          }\n        }\n      })\n    }\n\n    // Set methods\n    element.play = this.play.bind(this, element)\n    element.pause = this.pause.bind(this, element)\n    element.stop = this.stop.bind(this, element)\n\n    // Loaded\n    element.player.addEventListener('DOMLoaded', () => {\n      element.classList.add('is-loaded')\n\n      self.playerLoaded(attributes.required)\n    }, { once: true })\n  }\n\n  /**\n   * Set player state classes\n   * @param {HTMLElement} el Element\n   * @param {Boolean|String} playing If playing, playing direction\n   */\n  setPlayerStateClasses (el, playing) {\n    el.classList.remove('is-playing', 'is-playing-forward', 'is-playing-backward', 'is-paused')\n\n    if (!playing) {\n      el.classList.add('is-paused')\n    } else {\n      el.classList.add('is-playing')\n\n      if (playing === 'backward') {\n        el.classList.add('is-playing-backward')\n      } else {\n        el.classList.add('is-playing-forward')\n      }\n    }\n  }\n\n  /**\n   * Player loaded\n   */\n  playerLoaded (required = false) {\n    this.toLoad--\n\n    if (required) {\n      this.requireds--\n    }\n\n    // Call doneLoad when required animations have been loaded\n    if (this.requireds === 0 && typeof this.doneLoad === 'function') {\n      this.doneLoad()\n      this.doneLoad = null\n    }\n\n    // Emit resize event when all animations are loaded\n    if (this.toLoad === 0) {\n      this.luge.ticker.nextTick(() => {\n        this.luge.emitter.emit('resize')\n      })\n    }\n  }\n\n  /**\n   * Play\n   */\n  play (element) {\n    if (element && element.player) {\n      element.player.play()\n\n      this.setPlayerStateClasses(element, 'forward')\n    }\n  }\n\n  /**\n   * Pause\n   */\n  pause (element) {\n    if (element && element.player) {\n      element.player.pause()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Stop\n   */\n  stop (element) {\n    if (element && element.player) {\n      element.player.stop()\n\n      this.setPlayerStateClasses(element, false)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    const element = e.target\n\n    element.player.goToAndStop(element.player.totalFrames * element.scrollProgress, true)\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class MouseAnimation extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('mouse')\n\n    this.luge = luge\n\n    this.elements = []\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    window.mouseSpeed = 0\n\n    // Listeners\n    // ...\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this))\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.getMouseMovement()\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      inertia: [String, this.luge._settings.mouse.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.inertia) {\n      const randInertia = data.inertia.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randInertia) {\n        data.inertia = Number(randInertia[1]) + ((Number(randInertia[2]) - Number(randInertia[1])) * Math.random())\n      } else {\n        data.inertia = Number(data.inertia)\n      }\n\n      data.inertia = Math.max(Math.min(data.inertia, 0.99), 0)\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    const elements = document.querySelectorAll('[data-lg-mouse]')\n    const self = this\n\n    elements.forEach(element => {\n      self.addElement(element)\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.getAttributes(element)\n\n      this.luge.mouseobserver.add(element)\n\n      element.luge.mouse.smoothX = 0\n      element.luge.mouse.smoothY = 0\n      element.luge.mouse.smoothProgressX = 0\n      element.luge.mouse.smoothProgressY = 0\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Get mouse movement\n   */\n  getMouseMovement () {\n    const distX = this.mouse.x - window.mouseX\n    const distY = this.mouse.y - window.mouseY\n    const dist = Math.hypot(distX, distY)\n\n    window.mouseSpeed += (dist - window.mouseSpeed) * 0.5\n    if (window.mouseSpeed < 0.001) {\n      window.mouseSpeed = 0\n    }\n\n    if (dist > 1) {\n      const angle = Math.atan2(distY, distX) * (180 / Math.PI) + 180\n\n      window.mouseAngle = angle\n\n      if (angle >= 45 && angle < 135) {\n        window.mouseDirection = 'down'\n      } else if (angle >= 135 && angle < 225) {\n        window.mouseDirection = 'left'\n      } else if (angle >= 225 && angle < 315) {\n        window.mouseDirection = 'up'\n      } else {\n        window.mouseDirection = 'right'\n      }\n    }\n\n    this.mouse = {\n      x: window.mouseX,\n      y: window.mouseY\n    }\n\n    setTimeout(this.getMouseMovement.bind(this), 20)\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    this.elements.forEach(element => {\n      const mouse = element.luge.mouse\n\n      if (mouse.x) {\n        if (mouse.inertia) {\n          mouse.smoothX += (mouse.x - mouse.smoothX) * mouse.inertia\n          mouse.smoothY += (mouse.y - mouse.smoothY) * mouse.inertia\n          mouse.smoothProgressX += (mouse.progressX - mouse.smoothProgressX) * mouse.inertia\n          mouse.smoothProgressY += (mouse.progressY - mouse.smoothProgressY) * mouse.inertia\n\n          element.style.setProperty('--mouse-x', mouse.smoothX)\n          element.style.setProperty('--mouse-y', mouse.smoothY)\n          element.style.setProperty('--mouse-progress-x', mouse.smoothProgressX)\n          element.style.setProperty('--mouse-progress-y', mouse.smoothProgressY)\n\n          const diffX = Math.round((mouse.x - mouse.smoothX) * 1000) / 1000\n          const diffY = Math.round((mouse.y - mouse.smoothY) * 1000) / 1000\n\n          element.style.setProperty('--abs-diff-x', Math.abs(diffX))\n          element.style.setProperty('--diff-x', diffX)\n          element.style.setProperty('--abs-diff-y', Math.abs(diffY))\n          element.style.setProperty('--diff-y', diffY)\n        } else {\n          element.style.setProperty('--mouse-x', mouse.x)\n          element.style.setProperty('--mouse-y', mouse.y)\n          element.style.setProperty('--mouse-progress-x', mouse.progressX)\n          element.style.setProperty('--mouse-progress-y', mouse.progressY)\n        }\n      }\n    })\n  }\n}\n","import Plugin from '../core/Plugin'\n\nexport default class Parallax extends Plugin {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    super('parallax')\n\n    this.luge = luge\n\n    this.elements = []\n\n    // Listeners\n    this.onScrollProgress = this.onScrollProgress.bind(this)\n  }\n\n  /**\n   * Init\n   */\n  init () {\n    super.init()\n\n    this.luge.lifecycle.add('pageInit', this.pageInit.bind(this), 30)\n    this.luge.lifecycle.add('pageKill', this.pageKill.bind(this))\n\n    this.luge.ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Set attributes\n   */\n  setAttributes () {\n    this.pluginAttributes = {\n      root: String,\n      disable: String,\n      amplitude: [String, 1],\n      anchor: String,\n      inertia: [String, this.luge._settings.parallax.inertia]\n    }\n  }\n\n  /**\n   * Get attributes\n   */\n  getAttributes (element) {\n    const data = super.getAttributes(element)\n\n    if (data.amplitude) {\n      const randAmplitude = data.amplitude.match(/\\{\\s*([0-9]*[.]?[0-9]*)\\s*,\\s*([0-9]*[.]?[0-9]*)\\s*\\}/m)\n\n      if (randAmplitude) {\n        data.amplitude = Number(randAmplitude[1]) + ((Number(randAmplitude[2]) - Number(randAmplitude[1])) * Math.random())\n      } else {\n        data.amplitude = Number(data.amplitude)\n      }\n    }\n\n    return data\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    this.luge.emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    this.addElements()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  pageInit (done) {\n    this.addElements()\n\n    done()\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.removeElement(element)\n    })\n\n    done()\n  }\n\n  /**\n   * Add elements\n   */\n  addElements () {\n    document.querySelectorAll('[data-lg-parallax]').forEach(element => {\n      const attributes = this.getAttributes(element)\n\n      const disable = attributes.disable\n      let enable = true\n\n      const is = (window.luge.browser || {}).is\n\n      if (disable && is) {\n        if ((disable === 'desktop' && is('desktop')) ||\n            (disable === 'handheld' && !is('desktop')) ||\n            (disable === 'mobile' && is('mobile')) ||\n            (disable === 'tablet' && is('tablet'))) {\n          enable = false\n        }\n      }\n\n      if (enable) {\n        this.addElement(element)\n      }\n    })\n  }\n\n  /**\n   * Add element to observer\n   * @param {HTMLElement} element Element to add\n   */\n  addElement (element) {\n    if (!this.elements.includes(element)) {\n      this.luge.scrollobserver.add(element)\n\n      if (element.luge.parallax.root === 'child') {\n        element.style.overflow = 'hidden'\n        element.luge.parallax.child = element.firstElementChild\n      }\n\n      element.luge.parallax.movement = 0\n      element.luge.parallax.smoothMovement = 0\n\n      this.elements.push(element)\n\n      this.luge.ticker.nextTick(() => {\n        element.addEventListener('scrollprogress', this.onScrollProgress)\n        this.moveElement(element)\n      })\n    }\n  }\n\n  /**\n   * Remove element from observer\n   * @param {HTMLElement} element Element to remove\n   */\n  removeElement (element) {\n    element.removeEventListener('scrollprogress', this.onScrollProgress)\n\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Scroll progress event handler\n   * @param {Event} e Custom event\n   */\n  onScrollProgress (e) {\n    this.moveElement(e.target)\n  }\n\n  /**\n   * Move element\n   * @param {HTMLElement} element Element to move\n   */\n  moveElement (element) {\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = element.scrollProgress\n    } else {\n      progress = 1 - element.scrollProgress * 2\n    }\n\n    if (element.luge.parallax.anchor === 'bottom') {\n      progress += 1\n    } else if (element.luge.parallax.anchor === 'top') {\n      progress -= 1\n    }\n\n    if (element.luge.parallax.root === 'child') {\n      element.luge.parallax.movement = (element.luge.parallax.amplitude * 5) * progress\n    } else {\n      element.luge.parallax.movement = element.clientHeight * progress * element.luge.parallax.amplitude / 2\n    }\n  }\n\n  /**\n   * Tick\n   */\n  tick () {\n    this.elements.forEach(element => {\n      element.luge.parallax.smoothMovement += (element.luge.parallax.movement - element.luge.parallax.smoothMovement) * element.luge.parallax.inertia\n\n      if (element.luge.parallax.root === 'child' && element.luge.parallax.child) {\n        element.luge.parallax.child.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + '%, 0) scale(1.' + (String(Math.abs(element.luge.parallax.amplitude)).replace('.', '')) + ')'\n      } else {\n        element.style.transform = 'translate3d(0, ' + element.luge.parallax.smoothMovement + 'px, 0)'\n      }\n    })\n  }\n}\n","import Bowser from 'bowser/src/bowser.js'\n\nexport default class Browser {\n  /**\n   * Constructor\n   */\n  constructor (luge) {\n    const documentElement = document.documentElement\n\n    // Browser detect\n    const browser = Bowser.getParser(window.navigator.userAgent)\n\n    // Platform type class\n    documentElement.classList.add('is-' + browser.getPlatformType())\n\n    if (browser.is('mobile') || browser.is('tablet')) {\n      documentElement.classList.add('is-handheld')\n    }\n\n    // Browser class\n    if (browser.is('Safari')) {\n      documentElement.classList.add('is-safari')\n      documentElement.classList.add('is-safari-' + browser.getBrowserVersion())\n    }\n\n    luge.browser = browser\n  }\n}\n","import Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Luge from './Core'\n\nclass ViewportObserver {\n  constructor () {\n    this.elements = []\n\n    LifeCycle.add('siteInit', this.init.bind(this), 20)\n  }\n\n  /**\n   * Init\n   */\n  init (done) {\n    this.createObserver()\n\n    done()\n  }\n\n  /**\n   * Create observer\n   */\n  createObserver () {\n    this.observer = new IntersectionObserver(\n      this.intersectionCallback.bind(this),\n      {\n        threshold: [Luge.settings.intersection.threshold]\n      }\n    )\n  }\n\n  /**\n   * Intersection callback\n   * @param {IntersectionObserverEntry[]} entries IntersectionObserverEntry objects\n   */\n  intersectionCallback (entries) {\n    entries.forEach((entry) => {\n      const element = entry.target\n      let position = 'in'\n\n      if (!entry.isIntersecting) {\n        if (entry.boundingClientRect.y <= 0) {\n          position = 'above'\n        } else {\n          position = 'under'\n        }\n      }\n\n      if (element.luge.viewport.position !== position) {\n        element.luge.viewport.position = position\n\n        element.dispatchEvent(new CustomEvent('viewportintersect'))\n\n        if (position === 'in') {\n          element.dispatchEvent(new CustomEvent('viewportin'))\n        } else {\n          element.dispatchEvent(new CustomEvent('viewportout'))\n          element.dispatchEvent(new CustomEvent('viewport' + position))\n        }\n      }\n    })\n  }\n\n  /**\n   * Add element to observe\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    this.observer.observe(element)\n\n    const properties = {\n      viewport: {\n        position: 'out'\n      }\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n  }\n\n  /**\n   * Remove observed element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    this.observer.unobserve(element)\n  }\n}\n\nexport default new ViewportObserver()\n","import Luge from './Core'\n\nclass Ticker {\n  /**\n   * Constructor\n   */\n  constructor () {\n    this.callbacks = []\n    this.onceCallbacks = []\n\n    if (!Luge.settings.ticker.external) {\n      this.fps = 60\n      this.fpsInterval = 1000 / this.fps\n      this.lastTickTime = null\n\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Add a tick function\n   * @param {Function} callback Tick function\n   * @param {Object} context Context\n   */\n  add (callback, context) {\n    let exists = false\n    this.callbacks.forEach(object => {\n      if (object.cb === callback && object.context === context) {\n        exists = true\n      }\n    })\n\n    if (!exists) {\n      this.callbacks.push({\n        cb: callback,\n        context: context\n      })\n    }\n  }\n\n  /**\n   * Remove a tick function\n   * @param {String} id Tick ID\n   * @param {Object} context Context\n   */\n  remove (callback, context) {\n    const self = this\n\n    this.callbacks.forEach((object, index) => {\n      if (object.cb === callback && object.context === context) {\n        delete self.callbacks[index]\n      }\n    })\n  }\n\n  /**\n   * Execute function at next tick\n   * @param {Function} callback Function to execute\n   * @param {Object} context Context\n   */\n  nextTick (callback, context) {\n    this.onceCallbacks.push({\n      cb: callback,\n      context: context\n    })\n  }\n\n  /**\n   * Call tick function\n   */\n  _tick (nowTime) {\n    const elapsedTime = nowTime - this.lastTickTime\n\n    if (elapsedTime > this.fpsInterval) {\n      this.tick(nowTime)\n      this.lastTickTime = nowTime - (elapsedTime % this.fpsInterval)\n    }\n\n    if (!Luge.settings.ticker.external) {\n      requestAnimationFrame(this._tick.bind(this))\n    }\n  }\n\n  /**\n   * Call tick functions\n   */\n  tick (nowTime) {\n    const self = this\n\n    this.callbacks.forEach(object => {\n      object.cb.apply(object.context, [nowTime])\n    })\n\n    this.onceCallbacks.forEach((object, index) => {\n      object.cb.apply(object.context, [nowTime])\n\n      delete self.onceCallbacks[index]\n    })\n  }\n}\n\nexport default new Ticker()\n","import Emitter from './Emitter'\nimport Helpers from './Helpers'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass MouseObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n\n    this.timeouts = {\n      scroll: null\n    }\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    Ticker.add(this.tick, this)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('mouseMove', this.mouseHandler, this)\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n    }, this)\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    clearTimeout(this.timeouts.scroll)\n    this.timeouts.scroll = setTimeout(this.getBoundingThrottle.bind(this), 75)\n  }\n\n  /**\n   * Mouse handler\n   */\n  mouseHandler () {\n    const self = this\n\n    this.elements.forEach(element => {\n      self.setElementPosition(element)\n    })\n\n    window.mouseLastScrollTop = window.scrollTop\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.elementsToBound = this.elements\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bouding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n      this.setElementPosition(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    const properties = {\n      anchor: {\n        x: bounding.left,\n        y: bounding.top + window.unifiedScrollTop\n      },\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    }\n\n    if (element.luge || (element.luge = {})) {\n      element.luge = Helpers.mergeDeep(element.luge, properties)\n    }\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Set element position\n   * @param {HTMLElement} element Element\n   */\n  setElementPosition (element) {\n    if (element.luge && element.luge.anchor) {\n      const mouse = {\n        x: window.mouseX - element.luge.anchor.x,\n        y: window.mouseY - element.luge.anchor.y + window.unifiedScrollTop\n      }\n\n      mouse.progressX = Helpers.clamp(mouse.x / element.luge.width, 0, 1)\n      mouse.progressY = Helpers.clamp(mouse.y / element.luge.height, 0, 1)\n\n      element.luge.mouse = Helpers.mergeDeep(element.luge.mouse, mouse)\n    }\n  }\n\n  /**\n   * Add mouse element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove mouse element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n  }\n\n  /**\n   * Raf animation\n   */\n  tick () {\n    const self = this\n    const diffScroll = window.scrollTop - window.mouseLastScrollTop\n\n    if (diffScroll !== 0) {\n      this.elements.forEach(element => {\n        self.setElementPosition(element)\n      })\n    }\n  }\n}\n\nexport default new MouseObserver()\n","import Emitter from './Emitter'\nimport LifeCycle from './LifeCycle'\nimport Ticker from './Ticker'\n\nclass ScrollObserver {\n  constructor () {\n    this.elements = []\n\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    this.setMaxScrollTop()\n\n    LifeCycle.add('pageKill', this.pageKill.bind(this))\n    LifeCycle.add('pageInit', this.init.bind(this), 20)\n\n    this.bindEvents()\n  }\n\n  /**\n   * Bind events\n   */\n  bindEvents () {\n    Emitter.on('resize', this.resizeHandler, this)\n    Emitter.on('scroll', this.scrollHandler, this)\n    Emitter.on('update', this.updateHandler, this)\n  }\n\n  /**\n   * Kill\n   * @param {Function} done Done function\n   */\n  pageKill (done) {\n    this.elements = []\n    this.elementsToBound = []\n    this.elementsToCheck = []\n\n    done()\n  }\n\n  /**\n   * Initialization\n   * @param {Function} done Done function\n   */\n  init (done) {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n\n    done()\n  }\n\n  /**\n   * Resize handler\n   */\n  resizeHandler () {\n    this.getBoundingThrottle()\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Scroll handler\n   */\n  scrollHandler () {\n    this.checkElementsThrottle()\n  }\n\n  /**\n   * Update handler\n   */\n  updateHandler () {\n    Ticker.nextTick(() => {\n      this.getBoundingThrottle()\n      this.checkElementsThrottle()\n    }, this)\n  }\n\n  /**\n   * Set max scroll top\n   */\n  setMaxScrollTop () {\n    window.maxScrollTop = Math.max(\n      document.body ? document.body.scrollHeight : 0,\n      document.body ? document.body.offsetHeight : 0,\n      document.documentElement.clientHeight,\n      document.documentElement.scrollHeight,\n      document.documentElement.offsetHeight\n    ) - window.innerHeight\n  }\n\n  /**\n   * Get elements bouding throttle\n   */\n  getBoundingThrottle () {\n    this.setMaxScrollTop()\n\n    this.elements.forEach(element => {\n      if (!this.elementsToBound.includes(element)) {\n        element.scrollProgress = 0\n\n        this.elementsToBound.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.getBounding.bind(this))\n  }\n\n  /**\n   * Get elements bounding\n   */\n  getBounding () {\n    this.elementsToBound.forEach(element => {\n      this.setElementBounding(element)\n    })\n    this.elementsToBound = []\n  }\n\n  /**\n   * Set element bouding\n   * @param {HTMLElement} element Element\n   */\n  setElementBounding (element) {\n    const style = element.getAttribute('style')\n    element.setAttribute('style', '')\n\n    const bounding = element.getBoundingClientRect()\n\n    element.scrollStart = bounding.top + window.unifiedScrollTop - window.innerHeight\n\n    element.scrollEnd = element.scrollStart + element.clientHeight + window.innerHeight\n    element.scrollEnd = Math.min(element.scrollEnd, window.maxScrollTop)\n\n    element.scrollMiddle = element.scrollStart + (element.scrollEnd - element.scrollStart) / 2\n\n    element.setAttribute('style', style)\n  }\n\n  /**\n   * Check elements throttle\n   */\n  checkElementsThrottle () {\n    this.elements.forEach(element => {\n      if (!this.elementsToCheck.includes(element)) {\n        this.elementsToCheck.push(element)\n      }\n    })\n\n    Ticker.nextTick(this.checkElements.bind(this))\n  }\n\n  /**\n   * Check elements position\n   */\n  checkElements () {\n    this.elementsToCheck.forEach(element => {\n      this.checkElement(element)\n    })\n    this.elementsToCheck = []\n  }\n\n  /**\n   * Check individual element position\n   * @param {HTMLElement} element Element to check\n   */\n  checkElement (element) {\n    const scrollTop = window.unifiedScrollTop\n\n    let position = ''\n    let progress = 0\n\n    if (element.scrollStart < 0) {\n      progress = Math.min(Math.max(scrollTop / element.scrollEnd, 0), 1)\n    } else {\n      progress = Math.min(Math.max((scrollTop - element.scrollStart) / (element.scrollEnd - element.scrollStart), 0), 1)\n    }\n\n    if (isNaN(progress)) {\n      progress = 0\n    }\n\n    if (progress <= 0 && element.scrollStart > 0) {\n      position = 'under'\n    } else if (progress >= 1 && element.scrollEnd < window.maxScrollTop) {\n      position = 'above'\n    } else {\n      position = 'in'\n    }\n\n    element.scrollProgress = progress\n\n    if (element.viewportPosition !== position) {\n      element.viewportPosition = position\n\n      element.dispatchEvent(new CustomEvent('viewportintersect'))\n      element.dispatchEvent(new CustomEvent('viewport' + position))\n\n      if (position !== 'in') {\n        element.dispatchEvent(new CustomEvent('viewportout'))\n      }\n\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    } else if (progress > 0 && progress < 1) {\n      element.dispatchEvent(new CustomEvent('scrollprogress'))\n    }\n  }\n\n  /**\n   * Add scroll element\n   * @param {HTMLElement} element Element\n   */\n  add (element) {\n    if (!this.elements.includes(element)) {\n      element.scrollProgress = 0\n\n      if (!this.elementsToBound.includes(element)) {\n        this.elementsToBound.push(element)\n        this.elementsToCheck.push(element)\n      }\n\n      this.elements.push(element)\n    }\n  }\n\n  /**\n   * Remove scroll element\n   * @param {HTMLElement} element Element\n   */\n  remove (element) {\n    if (this.elements.includes(element)) {\n      this.elements.splice(this.elements.indexOf(element), 1)\n    }\n\n    if (this.elementsToBound.includes(element)) {\n      this.elementsToBound.splice(this.elementsToBound.indexOf(element), 1)\n    }\n\n    if (this.elementsToCheck.includes(element)) {\n      this.elementsToCheck.splice(this.elementsToCheck.indexOf(element), 1)\n    }\n  }\n}\n\nexport default new ScrollObserver()\n","import LifeCycle from './LifeCycle'\nimport Core from './Core'\nimport Emitter from './Emitter'\nimport ViewportObserver from './ViewportObserver'\nimport MouseObserver from './MouseObserver'\nimport ScrollObserver from './ScrollObserver'\nimport Ticker from './Ticker'\n\nclass Luge {\n  plugins = {}\n\n  constructor() {\n    this.emitter = {\n      emit: Emitter.emit.bind(Emitter),\n      off: Emitter.off.bind(Emitter),\n      on: Emitter.on.bind(Emitter),\n      once: Emitter.once.bind(Emitter)\n    }\n\n    this.viewportobserver = {\n      add: ViewportObserver.add.bind(ViewportObserver),\n      remove: ViewportObserver.remove.bind(ViewportObserver)\n    }\n\n    this.lifecycle = {\n      add: LifeCycle.add.bind(LifeCycle),\n      refresh: LifeCycle.cycle.bind(LifeCycle, 'refresh'),\n      remove: LifeCycle.remove.bind(LifeCycle),\n      debug: LifeCycle.enableDebug.bind(LifeCycle),\n      _cycle: LifeCycle.cycle.bind(LifeCycle)\n    }\n\n    this.mouseobserver = {\n      add: MouseObserver.add.bind(MouseObserver),\n      remove: MouseObserver.remove.bind(MouseObserver)\n    }\n\n    this.scrollobserver = {\n      add: ScrollObserver.add.bind(ScrollObserver),\n      remove: ScrollObserver.remove.bind(ScrollObserver)\n    }\n\n    this.ticker = {\n      add: Ticker.add.bind(Ticker),\n      nextTick: Ticker.nextTick.bind(Ticker),\n      remove: Ticker.remove.bind(Ticker),\n      tick: Ticker.tick.bind(Ticker)\n    }\n\n    // TODO!: rename to setSettings\n    this.settings = Core.setSettings.bind(Core)\n  }\n\n  init() {\n    // Site init on DOM ready\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', LifeCycle.cycle.bind(LifeCycle, 'load'), { once: true })\n    } else {\n      this.ticker.nextTick(() => {\n        LifeCycle.cycle('load')\n      },\n      null)\n    }\n  }\n\n  addPlugin(key, Plugin) {\n    this.plugins[key] = new Plugin(this)\n  }\n\n  get _settings() {\n    return Core.settings\n  }\n}\n\nexport default Luge\n"],"names":["Helpers","[object Object]","item","Array","isArray","target","source","output","Object","assign","isObject","keys","forEach","key","mergeDeep","string","isString","replace","word","index","toLowerCase","toUpperCase","toCamelCase","charAt","slice","node","document","body","contains","obj","prop","deepFreeze","freeze","x","lower","upper","Math","min","max","Helpers$1","Emitter$1","constructor","this","events","on","name","callback","context","once","push","cb","emit","self","data","call","arguments","object","apply","off","LifeCycle$2","eventsName","eventName","callbacks","done","cycles","load","reload","transition","refresh","debug","cycle","cycleName","current","console","log","proceed","length","event","do","next","wait","requestAnimationFrame","bind","add","position","remove","Emitter","sort","a","b","enableDebug","value","Core","settings","cursor","inertia","trailLength","intersection","threshold","lottie","renderer","subFrame","mouse","parallax","preloader","duration","reveal","stagger","scroll","smooth","ticker","external","credits","show","timeouts","resizeThrottle","scrollEnd","windowWidth","windowHeight","clientWidth","window","scrollTop","scrollY","unifiedScrollTop","maxScrollTop","scrollProgress","previousScrollTop","isScrolling","mouseX","mouseY","mouseLastScrollTop","LifeCycle","siteInit","bindEvents","setSettings","showCredits","setCSSProperties","scrollHandler","addEventListener","mouseHandler","passive","e","pageY","pageX","clearTimeout","setTimeout","resizeHandler","newWidth","innerWidth","newHeight","innerHeight","clientHeight","documentElement","style","setProperty","scrollStart","classList","consoleBaseStyle","Plugin","slug","pluginSlug","beforeInit","isDisabled","disabled","init","setAttributes","Luge","pluginAttributes","getAttributes","element","attributes","attribute","attributeKey","attributeValue","dataset","type","defaultValue","undefined","Boolean","luge","PreLoader","super","intro","playerIn","startTime","Date","now","doneLoad","el","querySelector","root","initLottie","lifecycle","siteIn","pageLoad","String","Number","_settings","in","reverse","elapsed","remaining","clear","play","getComputedStyle","getPropertyValue","destroy","parentNode","removeChild","animIn","loadAnimation","container","loop","autoplay","path","rendererSettings","preserveAspectRatio","setDirection","goToAndStop","totalFrames","setAttribute","Reveal","elements","toRevealIn","toRevealOut","reveals","out","canReveal","onScrollProgress","pageInit","pageKill","manual","multiple","delay","emitter","updateHandler","addElements","querySelectorAll","addElement","includes","closest","revealName","revealCallback","setRevealClasses","scrollobserver","from","children","child","childRevealName","lgReveal","nextTick","lgRevealChild","isRevealed","removeElement","removeEventListener","splice","indexOf","round","revealElements","revealInTimeout","state","states","split","dispatchEvent","CustomEvent","Transition","url","location","href","pathname","pageFetched","currentPage","prevScrollTop","newScrollTop","transitions","listeners","linkHandler","hasAttribute","initLoader","historyStateChanged","pageFetch","pageOut","pageIn","pageCreate","bindLinksEvent","unbindLinksEvent","currentTarget","getAttribute","origin","preventDefault","navigateTo","history","pushState","prefetchLink","createElement","rel","head","appendChild","_cycle","loader","animOut","playerOut","fetch","credentials","then","response","text","html","DOMParser","parseFromString","newPage","insertAdjacentElement","opacity","top","left","width","className","oldTitle","newTitle","innerText","behavior","smoothScrollTop","oldPage","page","pageName","onpageout","default","stop","svgElement","onpagein","goToAndPlay","URL","ScrollAnimation","allowedProperties","transformProperties","presets","background-x","background-y","tick","yoyo","animate","randInertia","match","random","scrollAnimation","smoothProgress","properties","JSON","parse","declarations","property","values","fromValue","toValue","unit","safeProperty","to","animation","atDest","progress","abs","entries","translate3d","transform","y","z","join","styles","willChange","diff","SmoothScroll","hasSmoothScroll","isSmoothScrolling","hasSmooth","_navigator","_navigator2","smoothScroll","targetScroll","targetSmoothScroll","platform","navigator","userAgentData","virtualScroll","VirtualScroll","firefoxMultiplier","mouseMultiplier","useKeyboard","useTouch","onVirtualScroll","onScroll","deltaY","originalEvent","isPrevented","composedPath","find","ctrlKey","clamp","scrollTo","Cursor","cursors","pointers","trails","hoverTags","hide","hoverHandler","capture","pointer","smoothPosition","trail","svg","createElementNS","points","tag","tagName","hover","toggle","timestamp","shift","d","line","pointA","pointB","lengthX","lengthY","sqrt","pow","angle","atan2","controlPoint","previous","o","PI","cos","sin","svgPath","command","reduce","acc","point","i","bezierCommand","cpsX","cpsY","cpeX","cpeY","Intersection","onViewportIntersect","class","viewportobserver","viewport","CSSClass","LottiePlayer","deferInit","ScrollObserver","loopFrame","required","force","lazy","subframe","waitLoad","player","isLoaded","toAutoplay","toLoad","requireds","initPlayer","viewportPosition","isPaused","scrollPaused","pause","initLazy","setSubframe","setPlayerStateClasses","currentFrame","playDirection","playerLoaded","playing","MouseAnimation","mouseSpeed","getMouseMovement","mouseobserver","smoothX","smoothY","smoothProgressX","smoothProgressY","distX","distY","dist","hypot","mouseAngle","mouseDirection","progressX","progressY","diffX","diffY","Parallax","disable","amplitude","anchor","randAmplitude","enable","is","browser","overflow","firstElementChild","movement","smoothMovement","moveElement","Browser","Bowser","getParser","userAgent","getPlatformType","getBrowserVersion","ViewportObserver$1","createObserver","observer","IntersectionObserver","intersectionCallback","entry","isIntersecting","boundingClientRect","observe","unobserve","Ticker$1","onceCallbacks","fps","fpsInterval","lastTickTime","_tick","exists","nowTime","elapsedTime","MouseObserver$1","elementsToBound","Ticker","getBoundingThrottle","setElementPosition","getBounding","setElementBounding","bounding","getBoundingClientRect","offsetWidth","height","offsetHeight","ScrollObserver$2","elementsToCheck","setMaxScrollTop","checkElementsThrottle","scrollHeight","scrollMiddle","checkElements","checkElement","isNaN","plugins","ViewportObserver","MouseObserver","readyState","addPlugin"],"mappings":"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"}